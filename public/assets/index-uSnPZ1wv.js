(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function zw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var OT={exports:{}},sy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC;function wF(){if(UC)return sy;UC=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var o in s)o!=="key"&&(r[o]=s[o])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:a,ref:s!==void 0?s:null,props:r}}return sy.Fragment=t,sy.jsx=e,sy.jsxs=e,sy}var LC;function RF(){return LC||(LC=1,OT.exports=wF()),OT.exports}var W=RF(),PT={exports:{}},Dn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kC;function CF(){if(kC)return Dn;kC=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function y(Y){return Y===null||typeof Y!="object"?null:(Y=g&&Y[g]||Y["@@iterator"],typeof Y=="function"?Y:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,M={};function S(Y,Z,rt){this.props=Y,this.context=Z,this.refs=M,this.updater=rt||_}S.prototype.isReactComponent={},S.prototype.setState=function(Y,Z){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,Z,"setState")},S.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function E(){}E.prototype=S.prototype;function R(Y,Z,rt){this.props=Y,this.context=Z,this.refs=M,this.updater=rt||_}var N=R.prototype=new E;N.constructor=R,b(N,S.prototype),N.isPureReactComponent=!0;var P=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function L(Y,Z,rt,ft,dt,_t){return rt=_t.ref,{$$typeof:i,type:Y,key:Z,ref:rt!==void 0?rt:null,props:_t}}function U(Y,Z){return L(Y.type,Z,void 0,void 0,void 0,Y.props)}function D(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===i}function O(Y){var Z={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(rt){return Z[rt]})}var F=/\/+/g;function H(Y,Z){return typeof Y=="object"&&Y!==null&&Y.key!=null?O(""+Y.key):Z.toString(36)}function G(){}function it(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(G,G):(Y.status="pending",Y.then(function(Z){Y.status==="pending"&&(Y.status="fulfilled",Y.value=Z)},function(Z){Y.status==="pending"&&(Y.status="rejected",Y.reason=Z)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function lt(Y,Z,rt,ft,dt){var _t=typeof Y;(_t==="undefined"||_t==="boolean")&&(Y=null);var ut=!1;if(Y===null)ut=!0;else switch(_t){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(Y.$$typeof){case i:case t:ut=!0;break;case d:return ut=Y._init,lt(ut(Y._payload),Z,rt,ft,dt)}}if(ut)return dt=dt(Y),ut=ft===""?"."+H(Y,0):ft,P(dt)?(rt="",ut!=null&&(rt=ut.replace(F,"$&/")+"/"),lt(dt,Z,rt,"",function($t){return $t})):dt!=null&&(D(dt)&&(dt=U(dt,rt+(dt.key==null||Y&&Y.key===dt.key?"":(""+dt.key).replace(F,"$&/")+"/")+ut)),Z.push(dt)),1;ut=0;var gt=ft===""?".":ft+":";if(P(Y))for(var Tt=0;Tt<Y.length;Tt++)ft=Y[Tt],_t=gt+H(ft,Tt),ut+=lt(ft,Z,rt,_t,dt);else if(Tt=y(Y),typeof Tt=="function")for(Y=Tt.call(Y),Tt=0;!(ft=Y.next()).done;)ft=ft.value,_t=gt+H(ft,Tt++),ut+=lt(ft,Z,rt,_t,dt);else if(_t==="object"){if(typeof Y.then=="function")return lt(it(Y),Z,rt,ft,dt);throw Z=String(Y),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ut}function j(Y,Z,rt){if(Y==null)return Y;var ft=[],dt=0;return lt(Y,ft,"","",function(_t){return Z.call(rt,_t,dt++)}),ft}function J(Y){if(Y._status===-1){var Z=Y._result;Z=Z(),Z.then(function(rt){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=rt)},function(rt){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=rt)}),Y._status===-1&&(Y._status=0,Y._result=Z)}if(Y._status===1)return Y._result.default;throw Y._result}var $=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function at(){}return Dn.Children={map:j,forEach:function(Y,Z,rt){j(Y,function(){Z.apply(this,arguments)},rt)},count:function(Y){var Z=0;return j(Y,function(){Z++}),Z},toArray:function(Y){return j(Y,function(Z){return Z})||[]},only:function(Y){if(!D(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Dn.Component=S,Dn.Fragment=e,Dn.Profiler=s,Dn.PureComponent=R,Dn.StrictMode=n,Dn.Suspense=c,Dn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Dn.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return k.H.useMemoCache(Y)}},Dn.cache=function(Y){return function(){return Y.apply(null,arguments)}},Dn.cloneElement=function(Y,Z,rt){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var ft=b({},Y.props),dt=Y.key,_t=void 0;if(Z!=null)for(ut in Z.ref!==void 0&&(_t=void 0),Z.key!==void 0&&(dt=""+Z.key),Z)!z.call(Z,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&Z.ref===void 0||(ft[ut]=Z[ut]);var ut=arguments.length-2;if(ut===1)ft.children=rt;else if(1<ut){for(var gt=Array(ut),Tt=0;Tt<ut;Tt++)gt[Tt]=arguments[Tt+2];ft.children=gt}return L(Y.type,dt,void 0,void 0,_t,ft)},Dn.createContext=function(Y){return Y={$$typeof:a,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:r,_context:Y},Y},Dn.createElement=function(Y,Z,rt){var ft,dt={},_t=null;if(Z!=null)for(ft in Z.key!==void 0&&(_t=""+Z.key),Z)z.call(Z,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(dt[ft]=Z[ft]);var ut=arguments.length-2;if(ut===1)dt.children=rt;else if(1<ut){for(var gt=Array(ut),Tt=0;Tt<ut;Tt++)gt[Tt]=arguments[Tt+2];dt.children=gt}if(Y&&Y.defaultProps)for(ft in ut=Y.defaultProps,ut)dt[ft]===void 0&&(dt[ft]=ut[ft]);return L(Y,_t,void 0,void 0,null,dt)},Dn.createRef=function(){return{current:null}},Dn.forwardRef=function(Y){return{$$typeof:o,render:Y}},Dn.isValidElement=D,Dn.lazy=function(Y){return{$$typeof:d,_payload:{_status:-1,_result:Y},_init:J}},Dn.memo=function(Y,Z){return{$$typeof:u,type:Y,compare:Z===void 0?null:Z}},Dn.startTransition=function(Y){var Z=k.T,rt={};k.T=rt;try{var ft=Y(),dt=k.S;dt!==null&&dt(rt,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(at,$)}catch(_t){$(_t)}finally{k.T=Z}},Dn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Dn.use=function(Y){return k.H.use(Y)},Dn.useActionState=function(Y,Z,rt){return k.H.useActionState(Y,Z,rt)},Dn.useCallback=function(Y,Z){return k.H.useCallback(Y,Z)},Dn.useContext=function(Y){return k.H.useContext(Y)},Dn.useDebugValue=function(){},Dn.useDeferredValue=function(Y,Z){return k.H.useDeferredValue(Y,Z)},Dn.useEffect=function(Y,Z,rt){var ft=k.H;if(typeof rt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ft.useEffect(Y,Z)},Dn.useId=function(){return k.H.useId()},Dn.useImperativeHandle=function(Y,Z,rt){return k.H.useImperativeHandle(Y,Z,rt)},Dn.useInsertionEffect=function(Y,Z){return k.H.useInsertionEffect(Y,Z)},Dn.useLayoutEffect=function(Y,Z){return k.H.useLayoutEffect(Y,Z)},Dn.useMemo=function(Y,Z){return k.H.useMemo(Y,Z)},Dn.useOptimistic=function(Y,Z){return k.H.useOptimistic(Y,Z)},Dn.useReducer=function(Y,Z,rt){return k.H.useReducer(Y,Z,rt)},Dn.useRef=function(Y){return k.H.useRef(Y)},Dn.useState=function(Y){return k.H.useState(Y)},Dn.useSyncExternalStore=function(Y,Z,rt){return k.H.useSyncExternalStore(Y,Z,rt)},Dn.useTransition=function(){return k.H.useTransition()},Dn.version="19.1.1",Dn}var BC;function Fg(){return BC||(BC=1,PT.exports=CF()),PT.exports}var bt=Fg();const Fw=zw(bt);var UT={exports:{}},ry={},LT={exports:{}},kT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC;function DF(){return zC||(zC=1,(function(i){function t(j,J){var $=j.length;j.push(J);t:for(;0<$;){var at=$-1>>>1,Y=j[at];if(0<s(Y,J))j[at]=J,j[$]=Y,$=at;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var J=j[0],$=j.pop();if($!==J){j[0]=$;t:for(var at=0,Y=j.length,Z=Y>>>1;at<Z;){var rt=2*(at+1)-1,ft=j[rt],dt=rt+1,_t=j[dt];if(0>s(ft,$))dt<Y&&0>s(_t,ft)?(j[at]=_t,j[dt]=$,at=dt):(j[at]=ft,j[rt]=$,at=rt);else if(dt<Y&&0>s(_t,$))j[at]=_t,j[dt]=$,at=dt;else break t}}return J}function s(j,J){var $=j.sortIndex-J.sortIndex;return $!==0?$:j.id-J.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,g=null,y=3,_=!1,b=!1,M=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function P(j){for(var J=e(u);J!==null;){if(J.callback===null)n(u);else if(J.startTime<=j)n(u),J.sortIndex=J.expirationTime,t(c,J);else break;J=e(u)}}function k(j){if(M=!1,P(j),!b)if(e(c)!==null)b=!0,z||(z=!0,H());else{var J=e(u);J!==null&&lt(k,J.startTime-j)}}var z=!1,L=-1,U=5,D=-1;function O(){return S?!0:!(i.unstable_now()-D<U)}function F(){if(S=!1,z){var j=i.unstable_now();D=j;var J=!0;try{t:{b=!1,M&&(M=!1,R(L),L=-1),_=!0;var $=y;try{e:{for(P(j),g=e(c);g!==null&&!(g.expirationTime>j&&O());){var at=g.callback;if(typeof at=="function"){g.callback=null,y=g.priorityLevel;var Y=at(g.expirationTime<=j);if(j=i.unstable_now(),typeof Y=="function"){g.callback=Y,P(j),J=!0;break e}g===e(c)&&n(c),P(j)}else n(c);g=e(c)}if(g!==null)J=!0;else{var Z=e(u);Z!==null&&lt(k,Z.startTime-j),J=!1}}break t}finally{g=null,y=$,_=!1}J=void 0}}finally{J?H():z=!1}}}var H;if(typeof N=="function")H=function(){N(F)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,it=G.port2;G.port1.onmessage=F,H=function(){it.postMessage(null)}}else H=function(){E(F,0)};function lt(j,J){L=E(function(){j(i.unstable_now())},J)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(j){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var $=y;y=J;try{return j()}finally{y=$}},i.unstable_requestPaint=function(){S=!0},i.unstable_runWithPriority=function(j,J){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=y;y=j;try{return J()}finally{y=$}},i.unstable_scheduleCallback=function(j,J,$){var at=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?at+$:at):$=at,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=$+Y,j={id:d++,callback:J,priorityLevel:j,startTime:$,expirationTime:Y,sortIndex:-1},$>at?(j.sortIndex=$,t(u,j),e(c)===null&&j===e(u)&&(M?(R(L),L=-1):M=!0,lt(k,$-at))):(j.sortIndex=Y,t(c,j),b||_||(b=!0,z||(z=!0,H()))),j},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(j){var J=y;return function(){var $=y;y=J;try{return j.apply(this,arguments)}finally{y=$}}}})(kT)),kT}var FC;function IF(){return FC||(FC=1,LT.exports=DF()),LT.exports}var BT={exports:{}},Qr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VC;function NF(){if(VC)return Qr;VC=1;var i=Fg();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(c,u,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:c,containerInfo:u,implementation:d}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Qr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Qr.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return r(c,u,null,d)},Qr.flushSync=function(c){var u=a.T,d=n.p;try{if(a.T=null,n.p=2,c)return c()}finally{a.T=u,n.p=d,n.d.f()}},Qr.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},Qr.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Qr.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,g=o(d,u.crossOrigin),y=typeof u.integrity=="string"?u.integrity:void 0,_=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:_}):d==="script"&&n.d.X(c,{crossOrigin:g,integrity:y,fetchPriority:_,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Qr.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},Qr.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,g=o(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:g,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Qr.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},Qr.requestFormReset=function(c){n.d.r(c)},Qr.unstable_batchedUpdates=function(c,u){return c(u)},Qr.useFormState=function(c,u,d){return a.H.useFormState(c,u,d)},Qr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Qr.version="19.1.1",Qr}var HC;function OF(){if(HC)return BT.exports;HC=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),BT.exports=NF(),BT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC;function PF(){if(GC)return ry;GC=1;var i=IF(),t=Fg(),e=OF();function n(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function r(l){var h=l,m=l;if(l.alternate)for(;h.return;)h=h.return;else{l=h;do h=l,(h.flags&4098)!==0&&(m=h.return),l=h.return;while(l)}return h.tag===3?m:null}function a(l){if(l.tag===13){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function o(l){if(r(l)!==l)throw Error(n(188))}function c(l){var h=l.alternate;if(!h){if(h=r(l),h===null)throw Error(n(188));return h!==l?null:l}for(var m=l,v=h;;){var A=m.return;if(A===null)break;var C=A.alternate;if(C===null){if(v=A.return,v!==null){m=v;continue}break}if(A.child===C.child){for(C=A.child;C;){if(C===m)return o(A),l;if(C===v)return o(A),h;C=C.sibling}throw Error(n(188))}if(m.return!==v.return)m=A,v=C;else{for(var X=!1,tt=A.child;tt;){if(tt===m){X=!0,m=A,v=C;break}if(tt===v){X=!0,v=A,m=C;break}tt=tt.sibling}if(!X){for(tt=C.child;tt;){if(tt===m){X=!0,m=C,v=A;break}if(tt===v){X=!0,v=C,m=A;break}tt=tt.sibling}if(!X)throw Error(n(189))}}if(m.alternate!==v)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?l:h}function u(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l;for(l=l.child;l!==null;){if(h=u(l),h!==null)return h;l=l.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),N=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function H(l){return l===null||typeof l!="object"?null:(l=F&&l[F]||l["@@iterator"],typeof l=="function"?l:null)}var G=Symbol.for("react.client.reference");function it(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===G?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case b:return"Fragment";case S:return"Profiler";case M:return"StrictMode";case k:return"Suspense";case z:return"SuspenseList";case D:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case _:return"Portal";case N:return(l.displayName||"Context")+".Provider";case R:return(l._context.displayName||"Context")+".Consumer";case P:var h=l.render;return l=l.displayName,l||(l=h.displayName||h.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case L:return h=l.displayName||null,h!==null?h:it(l.type)||"Memo";case U:h=l._payload,l=l._init;try{return it(l(h))}catch{}}return null}var lt=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},at=[],Y=-1;function Z(l){return{current:l}}function rt(l){0>Y||(l.current=at[Y],at[Y]=null,Y--)}function ft(l,h){Y++,at[Y]=l.current,l.current=h}var dt=Z(null),_t=Z(null),ut=Z(null),gt=Z(null);function Tt(l,h){switch(ft(ut,h),ft(_t,l),ft(dt,null),h.nodeType){case 9:case 11:l=(l=h.documentElement)&&(l=l.namespaceURI)?cC(l):0;break;default:if(l=h.tagName,h=h.namespaceURI)h=cC(h),l=uC(h,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}rt(dt),ft(dt,l)}function $t(){rt(dt),rt(_t),rt(ut)}function ae(l){l.memoizedState!==null&&ft(gt,l);var h=dt.current,m=uC(h,l.type);h!==m&&(ft(_t,l),ft(dt,m))}function ne(l){_t.current===l&&(rt(dt),rt(_t)),gt.current===l&&(rt(gt),$0._currentValue=$)}var ee=Object.prototype.hasOwnProperty,ct=i.unstable_scheduleCallback,Gt=i.unstable_cancelCallback,zt=i.unstable_shouldYield,Pt=i.unstable_requestPaint,Ct=i.unstable_now,Bt=i.unstable_getCurrentPriorityLevel,Dt=i.unstable_ImmediatePriority,Ut=i.unstable_UserBlockingPriority,Nt=i.unstable_NormalPriority,ge=i.unstable_LowPriority,Q=i.unstable_IdlePriority,K=i.log,mt=i.unstable_setDisableYieldValue,Lt=null,Rt=null;function At(l){if(typeof K=="function"&&mt(l),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(Lt,l)}catch{}}var oe=Math.clz32?Math.clz32:be,le=Math.log,ve=Math.LN2;function be(l){return l>>>=0,l===0?32:31-(le(l)/ve|0)|0}var Xt=256,te=4194304;function re(l){var h=l&42;if(h!==0)return h;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function ht(l,h,m){var v=l.pendingLanes;if(v===0)return 0;var A=0,C=l.suspendedLanes,X=l.pingedLanes;l=l.warmLanes;var tt=v&134217727;return tt!==0?(v=tt&~C,v!==0?A=re(v):(X&=tt,X!==0?A=re(X):m||(m=tt&~l,m!==0&&(A=re(m))))):(tt=v&~C,tt!==0?A=re(tt):X!==0?A=re(X):m||(m=v&~l,m!==0&&(A=re(m)))),A===0?0:h!==0&&h!==A&&(h&C)===0&&(C=A&-A,m=h&-h,C>=m||C===32&&(m&4194048)!==0)?h:A}function wt(l,h){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&h)===0}function de(l,h){switch(l){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pt(){var l=Xt;return Xt<<=1,(Xt&4194048)===0&&(Xt=256),l}function Ft(){var l=te;return te<<=1,(te&62914560)===0&&(te=4194304),l}function ie(l){for(var h=[],m=0;31>m;m++)h.push(l);return h}function ye(l,h){l.pendingLanes|=h,h!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function se(l,h,m,v,A,C){var X=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var tt=l.entanglements,vt=l.expirationTimes,Wt=l.hiddenUpdates;for(m=X&~m;0<m;){var he=31-oe(m),pe=1<<he;tt[he]=0,vt[he]=-1;var Zt=Wt[he];if(Zt!==null)for(Wt[he]=null,he=0;he<Zt.length;he++){var Qt=Zt[he];Qt!==null&&(Qt.lane&=-536870913)}m&=~pe}v!==0&&jt(l,v,0),C!==0&&A===0&&l.tag!==0&&(l.suspendedLanes|=C&~(X&~h))}function jt(l,h,m){l.pendingLanes|=h,l.suspendedLanes&=~h;var v=31-oe(h);l.entangledLanes|=h,l.entanglements[v]=l.entanglements[v]|1073741824|m&4194090}function xe(l,h){var m=l.entangledLanes|=h;for(l=l.entanglements;m;){var v=31-oe(m),A=1<<v;A&h|l[v]&h&&(l[v]|=h),m&=~A}}function we(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Ce(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Ie(){var l=J.p;return l!==0?l:(l=window.event,l===void 0?32:CC(l.type))}function Ln(l,h){var m=J.p;try{return J.p=l,h()}finally{J.p=m}}var dn=Math.random().toString(36).slice(2),fn="__reactFiber$"+dn,Rn="__reactProps$"+dn,Fi="__reactContainer$"+dn,vi="__reactEvents$"+dn,ys="__reactListeners$"+dn,ji="__reactHandles$"+dn,Kn="__reactResources$"+dn,Zn="__reactMarker$"+dn;function Nn(l){delete l[fn],delete l[Rn],delete l[vi],delete l[ys],delete l[ji]}function Ps(l){var h=l[fn];if(h)return h;for(var m=l.parentNode;m;){if(h=m[Fi]||m[fn]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(l=pC(l);l!==null;){if(m=l[fn])return m;l=pC(l)}return h}l=m,m=l.parentNode}return null}function Us(l){if(l=l[fn]||l[Fi]){var h=l.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return l}return null}function fa(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l.stateNode;throw Error(n(33))}function Br(l){var h=l[Kn];return h||(h=l[Kn]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function di(l){l[Zn]=!0}var Ba=new Set,da={};function et(l,h){St(l,h),St(l+"Capture",h)}function St(l,h){for(da[l]=h,l=0;l<h.length;l++)Ba.add(h[l])}var kt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qt={},yt={};function _e(l){return ee.call(yt,l)?!0:ee.call(qt,l)?!1:kt.test(l)?yt[l]=!0:(qt[l]=!0,!1)}function Me(l,h,m){if(_e(h))if(m===null)l.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(h);return;case"boolean":var v=h.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(h);return}}l.setAttribute(h,""+m)}}function De(l,h,m){if(m===null)l.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttribute(h,""+m)}}function Re(l,h,m,v){if(v===null)l.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(h,m,""+v)}}var ze,He;function Le(l){if(ze===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);ze=h&&h[1]||"",He=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+l+He}var $e=!1;function Cn(l,h){if(!l||$e)return"";$e=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(h){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(Qt){var Zt=Qt}Reflect.construct(l,[],pe)}else{try{pe.call()}catch(Qt){Zt=Qt}l.call(pe.prototype)}}else{try{throw Error()}catch(Qt){Zt=Qt}(pe=l())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(Qt){if(Qt&&Zt&&typeof Qt.stack=="string")return[Qt.stack,Zt.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=v.DetermineComponentFrameRoot(),X=C[0],tt=C[1];if(X&&tt){var vt=X.split(`
`),Wt=tt.split(`
`);for(A=v=0;v<vt.length&&!vt[v].includes("DetermineComponentFrameRoot");)v++;for(;A<Wt.length&&!Wt[A].includes("DetermineComponentFrameRoot");)A++;if(v===vt.length||A===Wt.length)for(v=vt.length-1,A=Wt.length-1;1<=v&&0<=A&&vt[v]!==Wt[A];)A--;for(;1<=v&&0<=A;v--,A--)if(vt[v]!==Wt[A]){if(v!==1||A!==1)do if(v--,A--,0>A||vt[v]!==Wt[A]){var he=`
`+vt[v].replace(" at new "," at ");return l.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",l.displayName)),he}while(1<=v&&0<=A);break}}}finally{$e=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?Le(m):""}function Qn(l){switch(l.tag){case 26:case 27:case 5:return Le(l.type);case 16:return Le("Lazy");case 13:return Le("Suspense");case 19:return Le("SuspenseList");case 0:case 15:return Cn(l.type,!1);case 11:return Cn(l.type.render,!1);case 1:return Cn(l.type,!0);case 31:return Le("Activity");default:return""}}function bn(l){try{var h="";do h+=Qn(l),l=l.return;while(l);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Ge(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Be(l){var h=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function On(l){var h=Be(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,h),v=""+l[h];if(!l.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,C=m.set;return Object.defineProperty(l,h,{configurable:!0,get:function(){return A.call(this)},set:function(X){v=""+X,C.call(this,X)}}),Object.defineProperty(l,h,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(X){v=""+X},stopTracking:function(){l._valueTracker=null,delete l[h]}}}}function cn(l){l._valueTracker||(l._valueTracker=On(l))}function Ke(l){if(!l)return!1;var h=l._valueTracker;if(!h)return!0;var m=h.getValue(),v="";return l&&(v=Be(l)?l.checked?"true":"false":l.value),l=v,l!==m?(h.setValue(l),!0):!1}function ns(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var _i=/[\n"\\]/g;function hi(l){return l.replace(_i,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Sn(l,h,m,v,A,C,X,tt){l.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?l.type=X:l.removeAttribute("type"),h!=null?X==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=""+Ge(h)):l.value!==""+Ge(h)&&(l.value=""+Ge(h)):X!=="submit"&&X!=="reset"||l.removeAttribute("value"),h!=null?Vi(l,X,Ge(h)):m!=null?Vi(l,X,Ge(m)):v!=null&&l.removeAttribute("value"),A==null&&C!=null&&(l.defaultChecked=!!C),A!=null&&(l.checked=A&&typeof A!="function"&&typeof A!="symbol"),tt!=null&&typeof tt!="function"&&typeof tt!="symbol"&&typeof tt!="boolean"?l.name=""+Ge(tt):l.removeAttribute("name")}function is(l,h,m,v,A,C,X,tt){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(l.type=C),h!=null||m!=null){if(!(C!=="submit"&&C!=="reset"||h!=null))return;m=m!=null?""+Ge(m):"",h=h!=null?""+Ge(h):m,tt||h===l.value||(l.value=h),l.defaultValue=h}v=v??A,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=tt?l.checked:!!v,l.defaultChecked=!!v,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(l.name=X)}function Vi(l,h,m){h==="number"&&ns(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function ei(l,h,m,v){if(l=l.options,h){h={};for(var A=0;A<m.length;A++)h["$"+m[A]]=!0;for(m=0;m<l.length;m++)A=h.hasOwnProperty("$"+l[m].value),l[m].selected!==A&&(l[m].selected=A),A&&v&&(l[m].defaultSelected=!0)}else{for(m=""+Ge(m),h=null,A=0;A<l.length;A++){if(l[A].value===m){l[A].selected=!0,v&&(l[A].defaultSelected=!0);return}h!==null||l[A].disabled||(h=l[A])}h!==null&&(h.selected=!0)}}function Zi(l,h,m){if(h!=null&&(h=""+Ge(h),h!==l.value&&(l.value=h),m==null)){l.defaultValue!==h&&(l.defaultValue=h);return}l.defaultValue=m!=null?""+Ge(m):""}function zr(l,h,m,v){if(h==null){if(v!=null){if(m!=null)throw Error(n(92));if(lt(v)){if(1<v.length)throw Error(n(93));v=v[0]}m=v}m==null&&(m=""),h=m}m=Ge(h),l.defaultValue=m,v=l.textContent,v===m&&v!==""&&v!==null&&(l.value=v)}function ri(l,h){if(h){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=h;return}}l.textContent=h}var Fr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _o(l,h,m){var v=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?v?l.setProperty(h,""):h==="float"?l.cssFloat="":l[h]="":v?l.setProperty(h,m):typeof m!="number"||m===0||Fr.has(h)?h==="float"?l.cssFloat=m:l[h]=(""+m).trim():l[h]=m+"px"}function xo(l,h,m){if(h!=null&&typeof h!="object")throw Error(n(62));if(l=l.style,m!=null){for(var v in m)!m.hasOwnProperty(v)||h!=null&&h.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var A in h)v=h[A],h.hasOwnProperty(A)&&m[A]!==v&&_o(l,A,v)}else for(var C in h)h.hasOwnProperty(C)&&_o(l,C,h[C])}function bo(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var za=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qs(l){return oc.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var pa=null;function ma(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var or=null,Es=null;function So(l){var h=Us(l);if(h&&(l=h.stateNode)){var m=l[Rn]||null;t:switch(l=h.stateNode,h.type){case"input":if(Sn(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+hi(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var v=m[h];if(v!==l&&v.form===l.form){var A=v[Rn]||null;if(!A)throw Error(n(90));Sn(v,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(h=0;h<m.length;h++)v=m[h],v.form===l.form&&Ke(v)}break t;case"textarea":Zi(l,m.value,m.defaultValue);break t;case"select":h=m.value,h!=null&&ei(l,!!m.multiple,h,!1)}}}var ga=!1;function Fa(l,h,m){if(ga)return l(h,m);ga=!0;try{var v=l(h);return v}finally{if(ga=!1,(or!==null||Es!==null)&&(ol(),or&&(h=or,l=Es,Es=or=null,So(h),l)))for(h=0;h<l.length;h++)So(l[h])}}function Va(l,h){var m=l.stateNode;if(m===null)return null;var v=m[Rn]||null;if(v===null)return null;m=v[h];t:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break t;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(n(231,h,typeof m));return m}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),br=!1;if(ss)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){br=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{br=!1}var Ui=null,ai=null,Sl=null;function lc(){if(Sl)return Sl;var l,h=ai,m=h.length,v,A="value"in Ui?Ui.value:Ui.textContent,C=A.length;for(l=0;l<m&&h[l]===A[l];l++);var X=m-l;for(v=1;v<=X&&h[m-v]===A[C-v];v++);return Sl=A.slice(l,1<v?1-v:void 0)}function Sr(l){var h=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&h===13&&(l=13)):l=h,l===10&&(l=13),32<=l||l===13?l:0}function Ga(){return!0}function Eo(){return!1}function Ri(l){function h(m,v,A,C,X){this._reactName=m,this._targetInst=A,this.type=v,this.nativeEvent=C,this.target=X,this.currentTarget=null;for(var tt in l)l.hasOwnProperty(tt)&&(m=l[tt],this[tt]=m?m(C):C[tt]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ga:Eo,this.isPropagationStopped=Eo,this}return d(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),h}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=Ri(Wi),To=d({},Wi,{view:0,detail:0}),ja=Ri(To),lr,cr,Vr,Er=d({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Vr&&(Vr&&l.type==="mousemove"?(lr=l.screenX-Vr.screenX,cr=l.screenY-Vr.screenY):cr=lr=0,Vr=l),lr)},movementY:function(l){return"movementY"in l?l.movementY:cr}}),Wa=Ri(Er),ks=d({},Er,{dataTransfer:0}),vh=Ri(ks),pi=d({},To,{relatedTarget:0}),qa=Ri(pi),cc=d({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),uc=Ri(cc),rs=d({},Wi,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Xs=Ri(rs),Li=d({},Wi,{data:0}),ur=Ri(Li),hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _h(l){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(l):(l=qf[l])?!!h[l]:!1}function fc(){return _h}var Xf=d({},To,{key:function(l){if(l.key){var h=hc[l.key]||l.key;if(h!=="Unidentified")return h}return l.type==="keypress"?(l=Sr(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Wo[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(l){return l.type==="keypress"?Sr(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Sr(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),dc=Ri(Xf),Ys=d({},Er,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pu=Ri(Ys),Yf=d({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),qo=Ri(Yf),T=d({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),B=Ri(T),q=d({},Er,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),st=Ri(q),Vt=d({},Wi,{newState:0,oldState:0}),Kt=Ri(Vt),Te=[9,13,27,32],un=ss&&"CompositionEvent"in window,xi=null;ss&&"documentMode"in document&&(xi=document.documentMode);var jn=ss&&"TextEvent"in window&&!xi,Hi=ss&&(!un||xi&&8<xi&&11>=xi),Ts=" ",ki=!1;function Hr(l,h){switch(l){case"keyup":return Te.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xa(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var ya=!1;function El(l,h){switch(l){case"compositionend":return Xa(h);case"keypress":return h.which!==32?null:(ki=!0,Ts);case"textInput":return l=h.data,l===Ts&&ki?null:l;default:return null}}function i0(l,h){if(ya)return l==="compositionend"||!un&&Hr(l,h)?(l=lc(),Sl=ai=Ui=null,ya=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Hi&&h.locale!=="ko"?null:h.data;default:return null}}var kp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s0(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h==="input"?!!kp[l.type]:h==="textarea"}function Gr(l,h,m,v){or?Es?Es.push(v):Es=[v]:or=v,h=px(h,"onChange"),0<h.length&&(m=new Ls("onChange","change",null,m,v),l.push({event:m,listeners:h}))}var xh=null,mu=null;function g_(l){sC(l,0)}function Kf(l){var h=fa(l);if(Ke(h))return l}function Bp(l,h){if(l==="change")return h}var zp=!1;if(ss){var Fp;if(ss){var bh="oninput"in document;if(!bh){var Sh=document.createElement("div");Sh.setAttribute("oninput","return;"),bh=typeof Sh.oninput=="function"}Fp=bh}else Fp=!1;zp=Fp&&(!document.documentMode||9<document.documentMode)}function Gi(){xh&&(xh.detachEvent("onpropertychange",y_),mu=xh=null)}function y_(l){if(l.propertyName==="value"&&Kf(mu)){var h=[];Gr(h,mu,l,ma(l)),Fa(g_,h)}}function $E(l,h,m){l==="focusin"?(Gi(),xh=h,mu=m,xh.attachEvent("onpropertychange",y_)):l==="focusout"&&Gi()}function v_(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Kf(mu)}function Zf(l,h){if(l==="click")return Kf(h)}function pc(l,h){if(l==="input"||l==="change")return Kf(h)}function __(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var jr=typeof Object.is=="function"?Object.is:__;function Mo(l,h){if(jr(l,h))return!0;if(typeof l!="object"||l===null||typeof h!="object"||h===null)return!1;var m=Object.keys(l),v=Object.keys(h);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var A=m[v];if(!ee.call(h,A)||!jr(l[A],h[A]))return!1}return!0}function Wr(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function r0(l,h){var m=Wr(l);l=0;for(var v;m;){if(m.nodeType===3){if(v=l+m.textContent.length,l<=h&&v>=h)return{node:m,offset:h-l};l=v}t:{for(;m;){if(m.nextSibling){m=m.nextSibling;break t}m=m.parentNode}m=void 0}m=Wr(m)}}function a0(l,h){return l&&h?l===h?!0:l&&l.nodeType===3?!1:h&&h.nodeType===3?a0(l,h.parentNode):"contains"in l?l.contains(h):l.compareDocumentPosition?!!(l.compareDocumentPosition(h)&16):!1:!1}function o0(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var h=ns(l.document);h instanceof l.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)l=h.contentWindow;else break;h=ns(l.document)}return h}function Qf(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h&&(h==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||h==="textarea"||l.contentEditable==="true")}var l0=ss&&"documentMode"in document&&11>=document.documentMode,Tl=null,Vp=null,Jf=null,Hp=!1;function c0(l,h,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Hp||Tl==null||Tl!==ns(v)||(v=Tl,"selectionStart"in v&&Qf(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Jf&&Mo(Jf,v)||(Jf=v,v=px(Vp,"onSelect"),0<v.length&&(h=new Ls("onSelect","select",null,h,m),l.push({event:h,listeners:v}),h.target=Tl)))}function Ks(l,h){var m={};return m[l.toLowerCase()]=h.toLowerCase(),m["Webkit"+l]="webkit"+h,m["Moz"+l]="moz"+h,m}var mc={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},Gp={},x_={};ss&&(x_=document.createElement("div").style,"AnimationEvent"in window||(delete mc.animationend.animation,delete mc.animationiteration.animation,delete mc.animationstart.animation),"TransitionEvent"in window||delete mc.transitionend.transition);function Ml(l){if(Gp[l])return Gp[l];if(!mc[l])return l;var h=mc[l],m;for(m in h)if(h.hasOwnProperty(m)&&m in x_)return Gp[l]=h[m];return l}var Tr=Ml("animationend"),u0=Ml("animationiteration"),qr=Ml("animationstart"),b_=Ml("transitionrun"),Al=Ml("transitionstart"),Eh=Ml("transitioncancel"),wl=Ml("transitionend"),jp=new Map,$f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$f.push("scrollEnd");function Bs(l,h){jp.set(l,h),et(h,[l])}var h0=new WeakMap;function Zs(l,h){if(typeof l=="object"&&l!==null){var m=h0.get(l);return m!==void 0?m:(h={value:l,source:h,stack:bn(h)},h0.set(l,h),h)}return{value:l,source:h,stack:bn(h)}}var hr=[],Ya=0,Wp=0;function td(){for(var l=Ya,h=Wp=Ya=0;h<l;){var m=hr[h];hr[h++]=null;var v=hr[h];hr[h++]=null;var A=hr[h];hr[h++]=null;var C=hr[h];if(hr[h++]=null,v!==null&&A!==null){var X=v.pending;X===null?A.next=A:(A.next=X.next,X.next=A),v.pending=A}C!==0&&f0(m,A,C)}}function gc(l,h,m,v){hr[Ya++]=l,hr[Ya++]=h,hr[Ya++]=m,hr[Ya++]=v,Wp|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function qp(l,h,m,v){return gc(l,h,m,v),Th(l)}function Rl(l,h){return gc(l,null,null,h),Th(l)}function f0(l,h,m){l.lanes|=m;var v=l.alternate;v!==null&&(v.lanes|=m);for(var A=!1,C=l.return;C!==null;)C.childLanes|=m,v=C.alternate,v!==null&&(v.childLanes|=m),C.tag===22&&(l=C.stateNode,l===null||l._visibility&1||(A=!0)),l=C,C=C.return;return l.tag===3?(C=l.stateNode,A&&h!==null&&(A=31-oe(m),l=C.hiddenUpdates,v=l[A],v===null?l[A]=[h]:v.push(h),h.lane=m|536870912),C):null}function Th(l){if(50<al)throw al=0,Ou=null,Error(n(185));for(var h=l.return;h!==null;)l=h,h=l.return;return l.tag===3?l.stateNode:null}var yc={};function d0(l,h,m,v){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(l,h,m,v){return new d0(l,h,m,v)}function ed(l){return l=l.prototype,!(!l||!l.isReactComponent)}function as(l,h){var m=l.alternate;return m===null?(m=Xr(l.tag,h,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=h,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,h=l.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function p0(l,h){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=h,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,h=m.dependencies,l.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),l}function zs(l,h,m,v,A,C){var X=0;if(v=l,typeof l=="function")ed(l)&&(X=1);else if(typeof l=="string")X=pF(l,m,dt.current)?26:l==="html"||l==="head"||l==="body"?27:5;else t:switch(l){case D:return l=Xr(31,m,h,A),l.elementType=D,l.lanes=C,l;case b:return vc(m.children,A,C,h);case M:X=8,A|=24;break;case S:return l=Xr(12,m,h,A|2),l.elementType=S,l.lanes=C,l;case k:return l=Xr(13,m,h,A),l.elementType=k,l.lanes=C,l;case z:return l=Xr(19,m,h,A),l.elementType=z,l.lanes=C,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:case N:X=10;break t;case R:X=9;break t;case P:X=11;break t;case L:X=14;break t;case U:X=16,v=null;break t}X=29,m=Error(n(130,l===null?"null":typeof l,"")),v=null}return h=Xr(X,m,h,A),h.elementType=l,h.type=v,h.lanes=C,h}function vc(l,h,m,v){return l=Xr(7,l,v,h),l.lanes=m,l}function nd(l,h,m){return l=Xr(6,l,null,h),l.lanes=m,l}function Xp(l,h,m){return h=Xr(4,l.children!==null?l.children:[],l.key,h),h.lanes=m,h.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},h}var Mh=[],Yr=0,id=null,Ah=0,Qs=[],va=0,_c=null,Xo=1,Yo="";function Cl(l,h){Mh[Yr++]=Ah,Mh[Yr++]=id,id=l,Ah=h}function Yp(l,h,m){Qs[va++]=Xo,Qs[va++]=Yo,Qs[va++]=_c,_c=l;var v=Xo;l=Yo;var A=32-oe(v)-1;v&=~(1<<A),m+=1;var C=32-oe(h)+A;if(30<C){var X=A-A%5;C=(v&(1<<X)-1).toString(32),v>>=X,A-=X,Xo=1<<32-oe(h)+A|m<<A|v,Yo=C+l}else Xo=1<<C|m<<A|v,Yo=l}function m0(l){l.return!==null&&(Cl(l,1),Yp(l,1,0))}function g0(l){for(;l===id;)id=Mh[--Yr],Mh[Yr]=null,Ah=Mh[--Yr],Mh[Yr]=null;for(;l===_c;)_c=Qs[--va],Qs[va]=null,Yo=Qs[--va],Qs[va]=null,Xo=Qs[--va],Qs[va]=null}var Mr=null,qi=null,Jn=!1,Ka=null,_a=!1,Kp=Error(n(519));function xc(l){var h=Error(n(418,""));throw gu(Zs(h,l)),Kp}function S_(l){var h=l.stateNode,m=l.type,v=l.memoizedProps;switch(h[fn]=l,h[Rn]=v,m){case"dialog":zn("cancel",h),zn("close",h);break;case"iframe":case"object":case"embed":zn("load",h);break;case"video":case"audio":for(m=0;m<X0.length;m++)zn(X0[m],h);break;case"source":zn("error",h);break;case"img":case"image":case"link":zn("error",h),zn("load",h);break;case"details":zn("toggle",h);break;case"input":zn("invalid",h),is(h,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),cn(h);break;case"select":zn("invalid",h);break;case"textarea":zn("invalid",h),zr(h,v.value,v.defaultValue,v.children),cn(h)}m=v.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||v.suppressHydrationWarning===!0||lC(h.textContent,m)?(v.popover!=null&&(zn("beforetoggle",h),zn("toggle",h)),v.onScroll!=null&&zn("scroll",h),v.onScrollEnd!=null&&zn("scrollend",h),v.onClick!=null&&(h.onclick=mx),h=!0):h=!1,h||xc(l)}function y0(l){for(Mr=l.return;Mr;)switch(Mr.tag){case 5:case 13:_a=!1;return;case 27:case 3:_a=!0;return;default:Mr=Mr.return}}function Ao(l){if(l!==Mr)return!1;if(!Jn)return y0(l),Jn=!0,!1;var h=l.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||_T(l.type,l.memoizedProps)),m=!m),m&&qi&&xc(l),y0(l),h===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));t:{for(l=l.nextSibling,h=0;l;){if(l.nodeType===8)if(m=l.data,m==="/$"){if(h===0){qi=Gl(l.nextSibling);break t}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;l=l.nextSibling}qi=null}}else h===27?(h=qi,Qh(l.type)?(l=ET,ET=null,qi=l):qi=h):qi=Mr?Gl(l.stateNode.nextSibling):null;return!0}function wh(){qi=Mr=null,Jn=!1}function oi(){var l=Ka;return l!==null&&(Ze===null?Ze=l:Ze.push.apply(Ze,l),Ka=null),l}function gu(l){Ka===null?Ka=[l]:Ka.push(l)}var v0=Z(null),bc=null,Dl=null;function Sc(l,h,m){ft(v0,h._currentValue),h._currentValue=m}function Il(l){l._currentValue=v0.current,rt(v0)}function _0(l,h,m){for(;l!==null;){var v=l.alternate;if((l.childLanes&h)!==h?(l.childLanes|=h,v!==null&&(v.childLanes|=h)):v!==null&&(v.childLanes&h)!==h&&(v.childLanes|=h),l===m)break;l=l.return}}function sd(l,h,m,v){var A=l.child;for(A!==null&&(A.return=l);A!==null;){var C=A.dependencies;if(C!==null){var X=A.child;C=C.firstContext;t:for(;C!==null;){var tt=C;C=A;for(var vt=0;vt<h.length;vt++)if(tt.context===h[vt]){C.lanes|=m,tt=C.alternate,tt!==null&&(tt.lanes|=m),_0(C.return,m,l),v||(X=null);break t}C=tt.next}}else if(A.tag===18){if(X=A.return,X===null)throw Error(n(341));X.lanes|=m,C=X.alternate,C!==null&&(C.lanes|=m),_0(X,m,l),X=null}else X=A.child;if(X!==null)X.return=A;else for(X=A;X!==null;){if(X===l){X=null;break}if(A=X.sibling,A!==null){A.return=X.return,X=A;break}X=X.return}A=X}}function Za(l,h,m,v){l=null;for(var A=h,C=!1;A!==null;){if(!C){if((A.flags&524288)!==0)C=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var X=A.alternate;if(X===null)throw Error(n(387));if(X=X.memoizedProps,X!==null){var tt=A.type;jr(A.pendingProps.value,X.value)||(l!==null?l.push(tt):l=[tt])}}else if(A===gt.current){if(X=A.alternate,X===null)throw Error(n(387));X.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(l!==null?l.push($0):l=[$0])}A=A.return}l!==null&&sd(h,l,m,v),h.flags|=262144}function rd(l){for(l=l.firstContext;l!==null;){if(!jr(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ko(l){bc=l,Dl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Qi(l){return Zp(bc,l)}function ad(l,h){return bc===null&&Ko(l),Zp(l,h)}function Zp(l,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},Dl===null){if(l===null)throw Error(n(308));Dl=h,l.dependencies={lanes:0,firstContext:h},l.flags|=524288}else Dl=Dl.next=h;return m}var x0=typeof AbortController<"u"?AbortController:function(){var l=[],h=this.signal={aborted:!1,addEventListener:function(m,v){l.push(v)}};this.abort=function(){h.aborted=!0,l.forEach(function(m){return m()})}},tT=i.unstable_scheduleCallback,E_=i.unstable_NormalPriority,vs={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qp(){return{controller:new x0,data:new Map,refCount:0}}function Rh(l){l.refCount--,l.refCount===0&&tT(E_,function(){l.controller.abort()})}var Ch=null,od=0,yn=0,Dh=null;function xa(l,h){if(Ch===null){var m=Ch=[];od=0,yn=uT(),Dh={status:"pending",value:void 0,then:function(v){m.push(v)}}}return od++,h.then(Jp,Jp),h}function Jp(){if(--od===0&&Ch!==null){Dh!==null&&(Dh.status="fulfilled");var l=Ch;Ch=null,yn=0,Dh=null;for(var h=0;h<l.length;h++)(0,l[h])()}}function eT(l,h){var m=[],v={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return l.then(function(){v.status="fulfilled",v.value=h;for(var A=0;A<m.length;A++)(0,m[A])(h)},function(A){for(v.status="rejected",v.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),v}var ld=j.S;j.S=function(l,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&xa(l,h),ld!==null&&ld(l,h)};var Qa=Z(null);function Ec(){var l=Qa.current;return l!==null?l:pn.pooledCache}function cd(l,h){h===null?ft(Qa,Qa.current):ft(Qa,h.pool)}function $p(){var l=Ec();return l===null?null:{parent:vs._currentValue,pool:l}}var ud=Error(n(460)),b0=Error(n(474)),wo=Error(n(542)),hd={then:function(){}};function tm(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Ih(){}function em(l,h,m){switch(m=l[m],m===void 0?l.push(h):m!==h&&(h.then(Ih,Ih),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,T_(l),l;default:if(typeof h.status=="string")h.then(Ih,Ih);else{if(l=pn,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=h,l.status="pending",l.then(function(v){if(h.status==="pending"){var A=h;A.status="fulfilled",A.value=v}},function(v){if(h.status==="pending"){var A=h;A.status="rejected",A.reason=v}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,T_(l),l}throw Ja=h,ud}}var Ja=null;function S0(){if(Ja===null)throw Error(n(459));var l=Ja;return Ja=null,l}function T_(l){if(l===ud||l===wo)throw Error(n(483))}var Nl=!1;function E0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nn(l,h){l=l.updateQueue,h.updateQueue===l&&(h.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Zo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ol(l,h,m){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(li&2)!==0){var A=v.pending;return A===null?h.next=h:(h.next=A.next,A.next=h),v.pending=h,h=Th(l),f0(l,null,m),h}return gc(l,v,h,m),Th(l)}function yu(l,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var v=h.lanes;v&=l.pendingLanes,m|=v,h.lanes=m,xe(l,m)}}function Nh(l,h){var m=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var A=null,C=null;if(m=m.firstBaseUpdate,m!==null){do{var X={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};C===null?A=C=X:C=C.next=X,m=m.next}while(m!==null);C===null?A=C=h:C=C.next=h}else A=C=h;m={baseState:v.baseState,firstBaseUpdate:A,lastBaseUpdate:C,shared:v.shared,callbacks:v.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=h}var T0=!1;function fd(){if(T0){var l=Dh;if(l!==null)throw l}}function Oh(l,h,m,v){T0=!1;var A=l.updateQueue;Nl=!1;var C=A.firstBaseUpdate,X=A.lastBaseUpdate,tt=A.shared.pending;if(tt!==null){A.shared.pending=null;var vt=tt,Wt=vt.next;vt.next=null,X===null?C=Wt:X.next=Wt,X=vt;var he=l.alternate;he!==null&&(he=he.updateQueue,tt=he.lastBaseUpdate,tt!==X&&(tt===null?he.firstBaseUpdate=Wt:tt.next=Wt,he.lastBaseUpdate=vt))}if(C!==null){var pe=A.baseState;X=0,he=Wt=vt=null,tt=C;do{var Zt=tt.lane&-536870913,Qt=Zt!==tt.lane;if(Qt?(Xe&Zt)===Zt:(v&Zt)===Zt){Zt!==0&&Zt===yn&&(T0=!0),he!==null&&(he=he.next={lane:0,tag:tt.tag,payload:tt.payload,callback:null,next:null});t:{var hn=l,tn=tt;Zt=h;var Oi=m;switch(tn.tag){case 1:if(hn=tn.payload,typeof hn=="function"){pe=hn.call(Oi,pe,Zt);break t}pe=hn;break t;case 3:hn.flags=hn.flags&-65537|128;case 0:if(hn=tn.payload,Zt=typeof hn=="function"?hn.call(Oi,pe,Zt):hn,Zt==null)break t;pe=d({},pe,Zt);break t;case 2:Nl=!0}}Zt=tt.callback,Zt!==null&&(l.flags|=64,Qt&&(l.flags|=8192),Qt=A.callbacks,Qt===null?A.callbacks=[Zt]:Qt.push(Zt))}else Qt={lane:Zt,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null},he===null?(Wt=he=Qt,vt=pe):he=he.next=Qt,X|=Zt;if(tt=tt.next,tt===null){if(tt=A.shared.pending,tt===null)break;Qt=tt,tt=Qt.next,Qt.next=null,A.lastBaseUpdate=Qt,A.shared.pending=null}}while(!0);he===null&&(vt=pe),A.baseState=vt,A.firstBaseUpdate=Wt,A.lastBaseUpdate=he,C===null&&(A.shared.lanes=0),Uo|=X,l.lanes=X,l.memoizedState=pe}}function Ph(l,h){if(typeof l!="function")throw Error(n(191,l));l.call(h)}function M_(l,h){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)Ph(m[l],h)}var Uh=Z(null),nm=Z(0);function A_(l,h){l=so,ft(nm,l),ft(Uh,h),so=l|h.baseLanes}function M0(){ft(nm,so),ft(Uh,Uh.current)}function dd(){so=nm.current,rt(Uh),rt(nm)}var Pl=0,vn=null,fi=null,_s=null,im=!1,Tc=!1,Ar=!1,Ms=0,$a=0,Js=null,w_=0;function os(){throw Error(n(321))}function fr(l,h){if(h===null)return!1;for(var m=0;m<h.length&&m<l.length;m++)if(!jr(l[m],h[m]))return!1;return!0}function Ul(l,h,m,v,A,C){return Pl=C,vn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,j.H=l===null||l.memoizedState===null?fm:V0,Ar=!1,C=m(v,A),Ar=!1,Tc&&(C=C_(h,m,v,A)),R_(l),C}function R_(l){j.H=gd;var h=fi!==null&&fi.next!==null;if(Pl=0,_s=fi=vn=null,im=!1,$a=0,Js=null,h)throw Error(n(300));l===null||Fs||(l=l.dependencies,l!==null&&rd(l)&&(Fs=!0))}function C_(l,h,m,v){vn=l;var A=0;do{if(Tc&&(Js=null),$a=0,Tc=!1,25<=A)throw Error(n(301));if(A+=1,_s=fi=null,l.updateQueue!=null){var C=l.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}j.H=ex,C=h(m,v)}while(Tc);return C}function nT(){var l=j.H,h=l.useState()[0];return h=typeof h.then=="function"?Ro(h):h,l=l.useState()[0],(fi!==null?fi.memoizedState:null)!==l&&(vn.flags|=1024),h}function A0(){var l=Ms!==0;return Ms=0,l}function sm(l,h,m){h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~m}function w0(l){if(im){for(l=l.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}im=!1}Pl=0,_s=fi=vn=null,Tc=!1,$a=Ms=0,Js=null}function wr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _s===null?vn.memoizedState=_s=l:_s=_s.next=l,_s}function xs(){if(fi===null){var l=vn.alternate;l=l!==null?l.memoizedState:null}else l=fi.next;var h=_s===null?vn.memoizedState:_s.next;if(h!==null)_s=h,fi=l;else{if(l===null)throw vn.alternate===null?Error(n(467)):Error(n(310));fi=l,l={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},_s===null?vn.memoizedState=_s=l:_s=_s.next=l}return _s}function Mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ro(l){var h=$a;return $a+=1,Js===null&&(Js=[]),l=em(Js,l,h),h=vn,(_s===null?h.memoizedState:_s.next)===null&&(h=h.alternate,j.H=h===null||h.memoizedState===null?fm:V0),l}function rm(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ro(l);if(l.$$typeof===N)return Qi(l)}throw Error(n(438,String(l)))}function R0(l){var h=null,m=vn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var v=vn.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(h={data:v.data.map(function(A){return A.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=Mc(),vn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(l),v=0;v<l;v++)m[v]=O;return h.index++,m}function Ll(l,h){return typeof h=="function"?h(l):h}function Ac(l){var h=xs();return C0(h,fi,l)}function C0(l,h,m){var v=l.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=m;var A=l.baseQueue,C=v.pending;if(C!==null){if(A!==null){var X=A.next;A.next=C.next,C.next=X}h.baseQueue=A=C,v.pending=null}if(C=l.baseState,A===null)l.memoizedState=C;else{h=A.next;var tt=X=null,vt=null,Wt=h,he=!1;do{var pe=Wt.lane&-536870913;if(pe!==Wt.lane?(Xe&pe)===pe:(Pl&pe)===pe){var Zt=Wt.revertLane;if(Zt===0)vt!==null&&(vt=vt.next={lane:0,revertLane:0,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null}),pe===yn&&(he=!0);else if((Pl&Zt)===Zt){Wt=Wt.next,Zt===yn&&(he=!0);continue}else pe={lane:0,revertLane:Wt.revertLane,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null},vt===null?(tt=vt=pe,X=C):vt=vt.next=pe,vn.lanes|=Zt,Uo|=Zt;pe=Wt.action,Ar&&m(C,pe),C=Wt.hasEagerState?Wt.eagerState:m(C,pe)}else Zt={lane:pe,revertLane:Wt.revertLane,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null},vt===null?(tt=vt=Zt,X=C):vt=vt.next=Zt,vn.lanes|=pe,Uo|=pe;Wt=Wt.next}while(Wt!==null&&Wt!==h);if(vt===null?X=C:vt.next=tt,!jr(C,l.memoizedState)&&(Fs=!0,he&&(m=Dh,m!==null)))throw m;l.memoizedState=C,l.baseState=X,l.baseQueue=vt,v.lastRenderedState=C}return A===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function D0(l){var h=xs(),m=h.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=l;var v=m.dispatch,A=m.pending,C=h.memoizedState;if(A!==null){m.pending=null;var X=A=A.next;do C=l(C,X.action),X=X.next;while(X!==A);jr(C,h.memoizedState)||(Fs=!0),h.memoizedState=C,h.baseQueue===null&&(h.baseState=C),m.lastRenderedState=C}return[C,v]}function D_(l,h,m){var v=vn,A=xs(),C=Jn;if(C){if(m===void 0)throw Error(n(407));m=m()}else m=h();var X=!jr((fi||A).memoizedState,m);X&&(A.memoizedState=m,Fs=!0),A=A.queue;var tt=N_.bind(null,v,A,l);if(Bh(2048,8,tt,[l]),A.getSnapshot!==h||X||_s!==null&&_s.memoizedState.tag&1){if(v.flags|=2048,kh(9,pd(),I_.bind(null,v,A,m,h),null),pn===null)throw Error(n(349));C||(Pl&124)!==0||Lh(v,h,m)}return m}function Lh(l,h,m){l.flags|=16384,l={getSnapshot:h,value:m},h=vn.updateQueue,h===null?(h=Mc(),vn.updateQueue=h,h.stores=[l]):(m=h.stores,m===null?h.stores=[l]:m.push(l))}function I_(l,h,m,v){h.value=m,h.getSnapshot=v,O_(h)&&P_(l)}function N_(l,h,m){return m(function(){O_(h)&&P_(l)})}function O_(l){var h=l.getSnapshot;l=l.value;try{var m=h();return!jr(l,m)}catch{return!0}}function P_(l){var h=Rl(l,2);h!==null&&Dr(h,l,2)}function I0(l){var h=wr();if(typeof l=="function"){var m=l;if(l=m(),Ar){At(!0);try{m()}finally{At(!1)}}}return h.memoizedState=h.baseState=l,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:l},h}function U_(l,h,m,v){return l.baseState=m,C0(l,fi,typeof v=="function"?v:Ll)}function iT(l,h,m,v,A){if(hm(l))throw Error(n(485));if(l=h.action,l!==null){var C={payload:A,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){C.listeners.push(X)}};j.T!==null?m(!0):C.isTransition=!1,v(C),m=h.pending,m===null?(C.next=h.pending=C,L_(h,C)):(C.next=m.next,h.pending=m.next=C)}}function L_(l,h){var m=h.action,v=h.payload,A=l.state;if(h.isTransition){var C=j.T,X={};j.T=X;try{var tt=m(A,v),vt=j.S;vt!==null&&vt(X,tt),k_(l,h,tt)}catch(Wt){N0(l,h,Wt)}finally{j.T=C}}else try{C=m(A,v),k_(l,h,C)}catch(Wt){N0(l,h,Wt)}}function k_(l,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(v){B_(l,h,v)},function(v){return N0(l,h,v)}):B_(l,h,m)}function B_(l,h,m){h.status="fulfilled",h.value=m,z_(h),l.state=m,h=l.pending,h!==null&&(m=h.next,m===h?l.pending=null:(m=m.next,h.next=m,L_(l,m)))}function N0(l,h,m){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do h.status="rejected",h.reason=m,z_(h),h=h.next;while(h!==v)}l.action=null}function z_(l){l=l.listeners;for(var h=0;h<l.length;h++)(0,l[h])()}function O0(l,h){return h}function F_(l,h){if(Jn){var m=pn.formState;if(m!==null){t:{var v=vn;if(Jn){if(qi){e:{for(var A=qi,C=_a;A.nodeType!==8;){if(!C){A=null;break e}if(A=Gl(A.nextSibling),A===null){A=null;break e}}C=A.data,A=C==="F!"||C==="F"?A:null}if(A){qi=Gl(A.nextSibling),v=A.data==="F!";break t}}xc(v)}v=!1}v&&(h=m[0])}}return m=wr(),m.memoizedState=m.baseState=h,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O0,lastRenderedState:h},m.queue=v,m=$_.bind(null,vn,v),v.dispatch=m,v=I0(!1),C=um.bind(null,vn,!1,v.queue),v=wr(),A={state:h,dispatch:null,action:l,pending:null},v.queue=A,m=iT.bind(null,vn,A,C,m),A.dispatch=m,v.memoizedState=l,[h,m,!1]}function V_(l){var h=xs();return H_(h,fi,l)}function H_(l,h,m){if(h=C0(l,h,O0)[0],l=Ac(Ll)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var v=Ro(h)}catch(X){throw X===ud?wo:X}else v=h;h=xs();var A=h.queue,C=A.dispatch;return m!==h.memoizedState&&(vn.flags|=2048,kh(9,pd(),sT.bind(null,A,m),null)),[v,C,l]}function sT(l,h){l.action=h}function G_(l){var h=xs(),m=fi;if(m!==null)return H_(h,m,l);xs(),h=h.memoizedState,m=xs();var v=m.queue.dispatch;return m.memoizedState=l,[h,v,!1]}function kh(l,h,m,v){return l={tag:l,create:m,deps:v,inst:h,next:null},h=vn.updateQueue,h===null&&(h=Mc(),vn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=l.next=l:(v=m.next,m.next=l,l.next=v,h.lastEffect=l),l}function pd(){return{destroy:void 0,resource:void 0}}function P0(){return xs().memoizedState}function am(l,h,m,v){var A=wr();v=v===void 0?null:v,vn.flags|=l,A.memoizedState=kh(1|h,pd(),m,v)}function Bh(l,h,m,v){var A=xs();v=v===void 0?null:v;var C=A.memoizedState.inst;fi!==null&&v!==null&&fr(v,fi.memoizedState.deps)?A.memoizedState=kh(h,C,m,v):(vn.flags|=l,A.memoizedState=kh(1|h,C,m,v))}function U0(l,h){am(8390656,8,l,h)}function L0(l,h){Bh(2048,8,l,h)}function om(l,h){return Bh(4,2,l,h)}function lm(l,h){return Bh(4,4,l,h)}function j_(l,h){if(typeof h=="function"){l=l();var m=h(l);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return l=l(),h.current=l,function(){h.current=null}}function W_(l,h,m){m=m!=null?m.concat([l]):null,Bh(4,4,j_.bind(null,h,l),m)}function k0(){}function q_(l,h){var m=xs();h=h===void 0?null:h;var v=m.memoizedState;return h!==null&&fr(h,v[1])?v[0]:(m.memoizedState=[l,h],l)}function B0(l,h){var m=xs();h=h===void 0?null:h;var v=m.memoizedState;if(h!==null&&fr(h,v[1]))return v[0];if(v=l(),Ar){At(!0);try{l()}finally{At(!1)}}return m.memoizedState=[v,h],v}function cm(l,h,m){return m===void 0||(Pl&1073741824)!==0?l.memoizedState=h:(l.memoizedState=m,l=Em(),vn.lanes|=l,Uo|=l,m)}function X_(l,h,m,v){return jr(m,h)?m:Uh.current!==null?(l=cm(l,m,v),jr(l,h)||(Fs=!0),l):(Pl&42)===0?(Fs=!0,l.memoizedState=m):(l=Em(),vn.lanes|=l,Uo|=l,h)}function Y_(l,h,m,v,A){var C=J.p;J.p=C!==0&&8>C?C:8;var X=j.T,tt={};j.T=tt,um(l,!1,h,m);try{var vt=A(),Wt=j.S;if(Wt!==null&&Wt(tt,vt),vt!==null&&typeof vt=="object"&&typeof vt.then=="function"){var he=eT(vt,v);md(l,h,he,ts(l))}else md(l,h,v,ts(l))}catch(pe){md(l,h,{then:function(){},status:"rejected",reason:pe},ts())}finally{J.p=C,j.T=X}}function rT(){}function z0(l,h,m,v){if(l.tag!==5)throw Error(n(476));var A=K_(l).queue;Y_(l,A,h,$,m===null?rT:function(){return Z_(l),m(v)})}function K_(l){var h=l.memoizedState;if(h!==null)return h;h={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:$},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:m},next:null},l.memoizedState=h,l=l.alternate,l!==null&&(l.memoizedState=h),h}function Z_(l){var h=K_(l).next.queue;md(l,h,{},ts())}function F0(){return Qi($0)}function Q_(){return xs().memoizedState}function J_(){return xs().memoizedState}function aT(l){for(var h=l.return;h!==null;){switch(h.tag){case 24:case 3:var m=ts();l=Zo(m);var v=Ol(h,l,m);v!==null&&(Dr(v,h,m),yu(v,h,m)),h={cache:Qp()},l.payload=h;return}h=h.return}}function oT(l,h,m){var v=ts();m={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},hm(l)?tx(h,m):(m=qp(l,h,m,v),m!==null&&(Dr(m,l,v),ba(m,h,v)))}function $_(l,h,m){var v=ts();md(l,h,m,v)}function md(l,h,m,v){var A={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(hm(l))tx(h,A);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=h.lastRenderedReducer,C!==null))try{var X=h.lastRenderedState,tt=C(X,m);if(A.hasEagerState=!0,A.eagerState=tt,jr(tt,X))return gc(l,h,A,0),pn===null&&td(),!1}catch{}finally{}if(m=qp(l,h,A,v),m!==null)return Dr(m,l,v),ba(m,h,v),!0}return!1}function um(l,h,m,v){if(v={lane:2,revertLane:uT(),action:v,hasEagerState:!1,eagerState:null,next:null},hm(l)){if(h)throw Error(n(479))}else h=qp(l,m,v,2),h!==null&&Dr(h,l,2)}function hm(l){var h=l.alternate;return l===vn||h!==null&&h===vn}function tx(l,h){Tc=im=!0;var m=l.pending;m===null?h.next=h:(h.next=m.next,m.next=h),l.pending=h}function ba(l,h,m){if((m&4194048)!==0){var v=h.lanes;v&=l.pendingLanes,m|=v,h.lanes=m,xe(l,m)}}var gd={readContext:Qi,use:rm,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useLayoutEffect:os,useInsertionEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useSyncExternalStore:os,useId:os,useHostTransitionStatus:os,useFormState:os,useActionState:os,useOptimistic:os,useMemoCache:os,useCacheRefresh:os},fm={readContext:Qi,use:rm,useCallback:function(l,h){return wr().memoizedState=[l,h===void 0?null:h],l},useContext:Qi,useEffect:U0,useImperativeHandle:function(l,h,m){m=m!=null?m.concat([l]):null,am(4194308,4,j_.bind(null,h,l),m)},useLayoutEffect:function(l,h){return am(4194308,4,l,h)},useInsertionEffect:function(l,h){am(4,2,l,h)},useMemo:function(l,h){var m=wr();h=h===void 0?null:h;var v=l();if(Ar){At(!0);try{l()}finally{At(!1)}}return m.memoizedState=[v,h],v},useReducer:function(l,h,m){var v=wr();if(m!==void 0){var A=m(h);if(Ar){At(!0);try{m(h)}finally{At(!1)}}}else A=h;return v.memoizedState=v.baseState=A,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:A},v.queue=l,l=l.dispatch=oT.bind(null,vn,l),[v.memoizedState,l]},useRef:function(l){var h=wr();return l={current:l},h.memoizedState=l},useState:function(l){l=I0(l);var h=l.queue,m=$_.bind(null,vn,h);return h.dispatch=m,[l.memoizedState,m]},useDebugValue:k0,useDeferredValue:function(l,h){var m=wr();return cm(m,l,h)},useTransition:function(){var l=I0(!1);return l=Y_.bind(null,vn,l.queue,!0,!1),wr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,h,m){var v=vn,A=wr();if(Jn){if(m===void 0)throw Error(n(407));m=m()}else{if(m=h(),pn===null)throw Error(n(349));(Xe&124)!==0||Lh(v,h,m)}A.memoizedState=m;var C={value:m,getSnapshot:h};return A.queue=C,U0(N_.bind(null,v,C,l),[l]),v.flags|=2048,kh(9,pd(),I_.bind(null,v,C,m,h),null),m},useId:function(){var l=wr(),h=pn.identifierPrefix;if(Jn){var m=Yo,v=Xo;m=(v&~(1<<32-oe(v)-1)).toString(32)+m,h="«"+h+"R"+m,m=Ms++,0<m&&(h+="H"+m.toString(32)),h+="»"}else m=w_++,h="«"+h+"r"+m.toString(32)+"»";return l.memoizedState=h},useHostTransitionStatus:F0,useFormState:F_,useActionState:F_,useOptimistic:function(l){var h=wr();h.memoizedState=h.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=um.bind(null,vn,!0,m),m.dispatch=h,[l,h]},useMemoCache:R0,useCacheRefresh:function(){return wr().memoizedState=aT.bind(null,vn)}},V0={readContext:Qi,use:rm,useCallback:q_,useContext:Qi,useEffect:L0,useImperativeHandle:W_,useInsertionEffect:om,useLayoutEffect:lm,useMemo:B0,useReducer:Ac,useRef:P0,useState:function(){return Ac(Ll)},useDebugValue:k0,useDeferredValue:function(l,h){var m=xs();return X_(m,fi.memoizedState,l,h)},useTransition:function(){var l=Ac(Ll)[0],h=xs().memoizedState;return[typeof l=="boolean"?l:Ro(l),h]},useSyncExternalStore:D_,useId:Q_,useHostTransitionStatus:F0,useFormState:V_,useActionState:V_,useOptimistic:function(l,h){var m=xs();return U_(m,fi,l,h)},useMemoCache:R0,useCacheRefresh:J_},ex={readContext:Qi,use:rm,useCallback:q_,useContext:Qi,useEffect:L0,useImperativeHandle:W_,useInsertionEffect:om,useLayoutEffect:lm,useMemo:B0,useReducer:D0,useRef:P0,useState:function(){return D0(Ll)},useDebugValue:k0,useDeferredValue:function(l,h){var m=xs();return fi===null?cm(m,l,h):X_(m,fi.memoizedState,l,h)},useTransition:function(){var l=D0(Ll)[0],h=xs().memoizedState;return[typeof l=="boolean"?l:Ro(l),h]},useSyncExternalStore:D_,useId:Q_,useHostTransitionStatus:F0,useFormState:G_,useActionState:G_,useOptimistic:function(l,h){var m=xs();return fi!==null?U_(m,fi,l,h):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:R0,useCacheRefresh:J_},vu=null,yd=0;function vd(l){var h=yd;return yd+=1,vu===null&&(vu=[]),em(vu,l,h)}function zh(l,h){h=h.props.ref,l.ref=h!==void 0?h:null}function dm(l,h){throw h.$$typeof===g?Error(n(525)):(l=Object.prototype.toString.call(h),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":l)))}function nx(l){var h=l._init;return h(l._payload)}function ix(l){function h(It,Mt){if(l){var Ht=It.deletions;Ht===null?(It.deletions=[Mt],It.flags|=16):Ht.push(Mt)}}function m(It,Mt){if(!l)return null;for(;Mt!==null;)h(It,Mt),Mt=Mt.sibling;return null}function v(It){for(var Mt=new Map;It!==null;)It.key!==null?Mt.set(It.key,It):Mt.set(It.index,It),It=It.sibling;return Mt}function A(It,Mt){return It=as(It,Mt),It.index=0,It.sibling=null,It}function C(It,Mt,Ht){return It.index=Ht,l?(Ht=It.alternate,Ht!==null?(Ht=Ht.index,Ht<Mt?(It.flags|=67108866,Mt):Ht):(It.flags|=67108866,Mt)):(It.flags|=1048576,Mt)}function X(It){return l&&It.alternate===null&&(It.flags|=67108866),It}function tt(It,Mt,Ht,fe){return Mt===null||Mt.tag!==6?(Mt=nd(Ht,It.mode,fe),Mt.return=It,Mt):(Mt=A(Mt,Ht),Mt.return=It,Mt)}function vt(It,Mt,Ht,fe){var Fe=Ht.type;return Fe===b?he(It,Mt,Ht.props.children,fe,Ht.key):Mt!==null&&(Mt.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===U&&nx(Fe)===Mt.type)?(Mt=A(Mt,Ht.props),zh(Mt,Ht),Mt.return=It,Mt):(Mt=zs(Ht.type,Ht.key,Ht.props,null,It.mode,fe),zh(Mt,Ht),Mt.return=It,Mt)}function Wt(It,Mt,Ht,fe){return Mt===null||Mt.tag!==4||Mt.stateNode.containerInfo!==Ht.containerInfo||Mt.stateNode.implementation!==Ht.implementation?(Mt=Xp(Ht,It.mode,fe),Mt.return=It,Mt):(Mt=A(Mt,Ht.children||[]),Mt.return=It,Mt)}function he(It,Mt,Ht,fe,Fe){return Mt===null||Mt.tag!==7?(Mt=vc(Ht,It.mode,fe,Fe),Mt.return=It,Mt):(Mt=A(Mt,Ht),Mt.return=It,Mt)}function pe(It,Mt,Ht){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return Mt=nd(""+Mt,It.mode,Ht),Mt.return=It,Mt;if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case y:return Ht=zs(Mt.type,Mt.key,Mt.props,null,It.mode,Ht),zh(Ht,Mt),Ht.return=It,Ht;case _:return Mt=Xp(Mt,It.mode,Ht),Mt.return=It,Mt;case U:var fe=Mt._init;return Mt=fe(Mt._payload),pe(It,Mt,Ht)}if(lt(Mt)||H(Mt))return Mt=vc(Mt,It.mode,Ht,null),Mt.return=It,Mt;if(typeof Mt.then=="function")return pe(It,vd(Mt),Ht);if(Mt.$$typeof===N)return pe(It,ad(It,Mt),Ht);dm(It,Mt)}return null}function Zt(It,Mt,Ht,fe){var Fe=Mt!==null?Mt.key:null;if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint")return Fe!==null?null:tt(It,Mt,""+Ht,fe);if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case y:return Ht.key===Fe?vt(It,Mt,Ht,fe):null;case _:return Ht.key===Fe?Wt(It,Mt,Ht,fe):null;case U:return Fe=Ht._init,Ht=Fe(Ht._payload),Zt(It,Mt,Ht,fe)}if(lt(Ht)||H(Ht))return Fe!==null?null:he(It,Mt,Ht,fe,null);if(typeof Ht.then=="function")return Zt(It,Mt,vd(Ht),fe);if(Ht.$$typeof===N)return Zt(It,Mt,ad(It,Ht),fe);dm(It,Ht)}return null}function Qt(It,Mt,Ht,fe,Fe){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return It=It.get(Ht)||null,tt(Mt,It,""+fe,Fe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case y:return It=It.get(fe.key===null?Ht:fe.key)||null,vt(Mt,It,fe,Fe);case _:return It=It.get(fe.key===null?Ht:fe.key)||null,Wt(Mt,It,fe,Fe);case U:var Bn=fe._init;return fe=Bn(fe._payload),Qt(It,Mt,Ht,fe,Fe)}if(lt(fe)||H(fe))return It=It.get(Ht)||null,he(Mt,It,fe,Fe,null);if(typeof fe.then=="function")return Qt(It,Mt,Ht,vd(fe),Fe);if(fe.$$typeof===N)return Qt(It,Mt,Ht,ad(Mt,fe),Fe);dm(Mt,fe)}return null}function hn(It,Mt,Ht,fe){for(var Fe=null,Bn=null,We=Mt,en=Mt=0,mr=null;We!==null&&en<Ht.length;en++){We.index>en?(mr=We,We=null):mr=We.sibling;var ui=Zt(It,We,Ht[en],fe);if(ui===null){We===null&&(We=mr);break}l&&We&&ui.alternate===null&&h(It,We),Mt=C(ui,Mt,en),Bn===null?Fe=ui:Bn.sibling=ui,Bn=ui,We=mr}if(en===Ht.length)return m(It,We),Jn&&Cl(It,en),Fe;if(We===null){for(;en<Ht.length;en++)We=pe(It,Ht[en],fe),We!==null&&(Mt=C(We,Mt,en),Bn===null?Fe=We:Bn.sibling=We,Bn=We);return Jn&&Cl(It,en),Fe}for(We=v(We);en<Ht.length;en++)mr=Qt(We,It,en,Ht[en],fe),mr!==null&&(l&&mr.alternate!==null&&We.delete(mr.key===null?en:mr.key),Mt=C(mr,Mt,en),Bn===null?Fe=mr:Bn.sibling=mr,Bn=mr);return l&&We.forEach(function(nf){return h(It,nf)}),Jn&&Cl(It,en),Fe}function tn(It,Mt,Ht,fe){if(Ht==null)throw Error(n(151));for(var Fe=null,Bn=null,We=Mt,en=Mt=0,mr=null,ui=Ht.next();We!==null&&!ui.done;en++,ui=Ht.next()){We.index>en?(mr=We,We=null):mr=We.sibling;var nf=Zt(It,We,ui.value,fe);if(nf===null){We===null&&(We=mr);break}l&&We&&nf.alternate===null&&h(It,We),Mt=C(nf,Mt,en),Bn===null?Fe=nf:Bn.sibling=nf,Bn=nf,We=mr}if(ui.done)return m(It,We),Jn&&Cl(It,en),Fe;if(We===null){for(;!ui.done;en++,ui=Ht.next())ui=pe(It,ui.value,fe),ui!==null&&(Mt=C(ui,Mt,en),Bn===null?Fe=ui:Bn.sibling=ui,Bn=ui);return Jn&&Cl(It,en),Fe}for(We=v(We);!ui.done;en++,ui=Ht.next())ui=Qt(We,It,en,ui.value,fe),ui!==null&&(l&&ui.alternate!==null&&We.delete(ui.key===null?en:ui.key),Mt=C(ui,Mt,en),Bn===null?Fe=ui:Bn.sibling=ui,Bn=ui);return l&&We.forEach(function(AF){return h(It,AF)}),Jn&&Cl(It,en),Fe}function Oi(It,Mt,Ht,fe){if(typeof Ht=="object"&&Ht!==null&&Ht.type===b&&Ht.key===null&&(Ht=Ht.props.children),typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case y:t:{for(var Fe=Ht.key;Mt!==null;){if(Mt.key===Fe){if(Fe=Ht.type,Fe===b){if(Mt.tag===7){m(It,Mt.sibling),fe=A(Mt,Ht.props.children),fe.return=It,It=fe;break t}}else if(Mt.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===U&&nx(Fe)===Mt.type){m(It,Mt.sibling),fe=A(Mt,Ht.props),zh(fe,Ht),fe.return=It,It=fe;break t}m(It,Mt);break}else h(It,Mt);Mt=Mt.sibling}Ht.type===b?(fe=vc(Ht.props.children,It.mode,fe,Ht.key),fe.return=It,It=fe):(fe=zs(Ht.type,Ht.key,Ht.props,null,It.mode,fe),zh(fe,Ht),fe.return=It,It=fe)}return X(It);case _:t:{for(Fe=Ht.key;Mt!==null;){if(Mt.key===Fe)if(Mt.tag===4&&Mt.stateNode.containerInfo===Ht.containerInfo&&Mt.stateNode.implementation===Ht.implementation){m(It,Mt.sibling),fe=A(Mt,Ht.children||[]),fe.return=It,It=fe;break t}else{m(It,Mt);break}else h(It,Mt);Mt=Mt.sibling}fe=Xp(Ht,It.mode,fe),fe.return=It,It=fe}return X(It);case U:return Fe=Ht._init,Ht=Fe(Ht._payload),Oi(It,Mt,Ht,fe)}if(lt(Ht))return hn(It,Mt,Ht,fe);if(H(Ht)){if(Fe=H(Ht),typeof Fe!="function")throw Error(n(150));return Ht=Fe.call(Ht),tn(It,Mt,Ht,fe)}if(typeof Ht.then=="function")return Oi(It,Mt,vd(Ht),fe);if(Ht.$$typeof===N)return Oi(It,Mt,ad(It,Ht),fe);dm(It,Ht)}return typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint"?(Ht=""+Ht,Mt!==null&&Mt.tag===6?(m(It,Mt.sibling),fe=A(Mt,Ht),fe.return=It,It=fe):(m(It,Mt),fe=nd(Ht,It.mode,fe),fe.return=It,It=fe),X(It)):m(It,Mt)}return function(It,Mt,Ht,fe){try{yd=0;var Fe=Oi(It,Mt,Ht,fe);return vu=null,Fe}catch(We){if(We===ud||We===wo)throw We;var Bn=Xr(29,We,null,It.mode);return Bn.lanes=fe,Bn.return=It,Bn}finally{}}}var _u=ix(!0),sx=ix(!1),bi=Z(null),Co=null;function wc(l){var h=l.alternate;ft(ls,ls.current&1),ft(bi,l),Co===null&&(h===null||Uh.current!==null||h.memoizedState!==null)&&(Co=l)}function rx(l){if(l.tag===22){if(ft(ls,ls.current),ft(bi,l),Co===null){var h=l.alternate;h!==null&&h.memoizedState!==null&&(Co=l)}}else Rc()}function Rc(){ft(ls,ls.current),ft(bi,bi.current)}function Qo(l){rt(bi),Co===l&&(Co=null),rt(ls)}var ls=Z(0);function kl(l){for(var h=l;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||ST(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function Cc(l,h,m,v){h=l.memoizedState,m=m(v,h),m=m==null?h:d({},h,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var Rr={enqueueSetState:function(l,h,m){l=l._reactInternals;var v=ts(),A=Zo(v);A.payload=h,m!=null&&(A.callback=m),h=Ol(l,A,v),h!==null&&(Dr(h,l,v),yu(h,l,v))},enqueueReplaceState:function(l,h,m){l=l._reactInternals;var v=ts(),A=Zo(v);A.tag=1,A.payload=h,m!=null&&(A.callback=m),h=Ol(l,A,v),h!==null&&(Dr(h,l,v),yu(h,l,v))},enqueueForceUpdate:function(l,h){l=l._reactInternals;var m=ts(),v=Zo(m);v.tag=2,h!=null&&(v.callback=h),h=Ol(l,v,m),h!==null&&(Dr(h,l,m),yu(h,l,m))}};function ax(l,h,m,v,A,C,X){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,C,X):h.prototype&&h.prototype.isPureReactComponent?!Mo(m,v)||!Mo(A,C):!0}function ox(l,h,m,v){l=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,v),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,v),h.state!==l&&Rr.enqueueReplaceState(h,h.state,null)}function Jo(l,h){var m=h;if("ref"in h){m={};for(var v in h)v!=="ref"&&(m[v]=h[v])}if(l=l.defaultProps){m===h&&(m=d({},m));for(var A in l)m[A]===void 0&&(m[A]=l[A])}return m}var xu=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function _d(l){xu(l)}function pm(l){console.error(l)}function lx(l){xu(l)}function mm(l,h){try{var m=l.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(v){setTimeout(function(){throw v})}}function to(l,h,m){try{var v=l.onCaughtError;v(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function gm(l,h,m){return m=Zo(m),m.tag=3,m.payload={element:null},m.callback=function(){mm(l,h)},m}function cx(l){return l=Zo(l),l.tag=3,l}function ym(l,h,m,v){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var C=v.value;l.payload=function(){return A(C)},l.callback=function(){to(h,m,v)}}var X=m.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(l.callback=function(){to(h,m,v),typeof A!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var tt=v.stack;this.componentDidCatch(v.value,{componentStack:tt!==null?tt:""})})}function lT(l,h,m,v,A){if(m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(h=m.alternate,h!==null&&Za(h,m,A,!0),m=bi.current,m!==null){switch(m.tag){case 13:return Co===null?f():m.alternate===null&&Bi===0&&(Bi=3),m.flags&=-257,m.flags|=65536,m.lanes=A,v===hd?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([v]):h.add(v),Jt(l,v,A)),!1;case 22:return m.flags|=65536,v===hd?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([v])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([v]):m.add(v)),Jt(l,v,A)),!1}throw Error(n(435,m.tag))}return Jt(l,v,A),f(),!1}if(Jn)return h=bi.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=A,v!==Kp&&(l=Error(n(422),{cause:v}),gu(Zs(l,m)))):(v!==Kp&&(h=Error(n(423),{cause:v}),gu(Zs(h,m))),l=l.current.alternate,l.flags|=65536,A&=-A,l.lanes|=A,v=Zs(v,m),A=gm(l.stateNode,v,A),Nh(l,A),Bi!==4&&(Bi=2)),!1;var C=Error(n(520),{cause:v});if(C=Zs(C,m),ci===null?ci=[C]:ci.push(C),Bi!==4&&(Bi=2),h===null)return!0;v=Zs(v,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,l=A&-A,m.lanes|=l,l=gm(m.stateNode,v,l),Nh(m,l),!1;case 1:if(h=m.type,C=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ca===null||!Ca.has(C))))return m.flags|=65536,A&=-A,m.lanes|=A,A=cx(A),ym(A,l,m,v),Nh(m,A),!1}m=m.return}while(m!==null);return!1}var ux=Error(n(461)),Fs=!1;function cs(l,h,m,v){h.child=l===null?sx(h,null,m,v):_u(h,l.child,m,v)}function Kr(l,h,m,v,A){m=m.render;var C=h.ref;if("ref"in v){var X={};for(var tt in v)tt!=="ref"&&(X[tt]=v[tt])}else X=v;return Ko(h),v=Ul(l,h,m,X,C,A),tt=A0(),l!==null&&!Fs?(sm(l,h,A),Vs(l,h,A)):(Jn&&tt&&m0(h),h.flags|=1,cs(l,h,v,A),h.child)}function Zr(l,h,m,v,A){if(l===null){var C=m.type;return typeof C=="function"&&!ed(C)&&C.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=C,H0(l,h,C,v,A)):(l=zs(m.type,null,v,h,h.mode,A),l.ref=h.ref,l.return=h,h.child=l)}if(C=l.child,!xd(l,A)){var X=C.memoizedProps;if(m=m.compare,m=m!==null?m:Mo,m(X,v)&&l.ref===h.ref)return Vs(l,h,A)}return h.flags|=1,l=as(C,v),l.ref=h.ref,l.return=h,h.child=l}function H0(l,h,m,v,A){if(l!==null){var C=l.memoizedProps;if(Mo(C,v)&&l.ref===h.ref)if(Fs=!1,h.pendingProps=v=C,xd(l,A))(l.flags&131072)!==0&&(Fs=!0);else return h.lanes=l.lanes,Vs(l,h,A)}return Fh(l,h,m,v,A)}function bu(l,h,m){var v=h.pendingProps,A=v.children,C=l!==null?l.memoizedState:null;if(v.mode==="hidden"){if((h.flags&128)!==0){if(v=C!==null?C.baseLanes|m:m,l!==null){for(A=h.child=l.child,C=0;A!==null;)C=C|A.lanes|A.childLanes,A=A.sibling;h.childLanes=C&~v}else h.childLanes=0,h.child=null;return Su(l,h,v,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},l!==null&&cd(h,C!==null?C.cachePool:null),C!==null?A_(h,C):M0(),rx(h);else return h.lanes=h.childLanes=536870912,Su(l,h,C!==null?C.baseLanes|m:m,m)}else C!==null?(cd(h,C.cachePool),A_(h,C),Rc(),h.memoizedState=null):(l!==null&&cd(h,null),M0(),Rc());return cs(l,h,A,m),h.child}function Su(l,h,m,v){var A=Ec();return A=A===null?null:{parent:vs._currentValue,pool:A},h.memoizedState={baseLanes:m,cachePool:A},l!==null&&cd(h,null),M0(),rx(h),l!==null&&Za(l,h,v,!0),null}function Eu(l,h){var m=h.ref;if(m===null)l!==null&&l.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(n(284));(l===null||l.ref!==m)&&(h.flags|=4194816)}}function Fh(l,h,m,v,A){return Ko(h),m=Ul(l,h,m,v,void 0,A),v=A0(),l!==null&&!Fs?(sm(l,h,A),Vs(l,h,A)):(Jn&&v&&m0(h),h.flags|=1,cs(l,h,m,A),h.child)}function Sa(l,h,m,v,A,C){return Ko(h),h.updateQueue=null,m=C_(h,v,m,A),R_(l),v=A0(),l!==null&&!Fs?(sm(l,h,C),Vs(l,h,C)):(Jn&&v&&m0(h),h.flags|=1,cs(l,h,m,C),h.child)}function Ea(l,h,m,v,A){if(Ko(h),h.stateNode===null){var C=yc,X=m.contextType;typeof X=="object"&&X!==null&&(C=Qi(X)),C=new m(v,C),h.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Rr,h.stateNode=C,C._reactInternals=h,C=h.stateNode,C.props=v,C.state=h.memoizedState,C.refs={},E0(h),X=m.contextType,C.context=typeof X=="object"&&X!==null?Qi(X):yc,C.state=h.memoizedState,X=m.getDerivedStateFromProps,typeof X=="function"&&(Cc(h,m,X,v),C.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(X=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),X!==C.state&&Rr.enqueueReplaceState(C,C.state,null),Oh(h,v,C,A),fd(),C.state=h.memoizedState),typeof C.componentDidMount=="function"&&(h.flags|=4194308),v=!0}else if(l===null){C=h.stateNode;var tt=h.memoizedProps,vt=Jo(m,tt);C.props=vt;var Wt=C.context,he=m.contextType;X=yc,typeof he=="object"&&he!==null&&(X=Qi(he));var pe=m.getDerivedStateFromProps;he=typeof pe=="function"||typeof C.getSnapshotBeforeUpdate=="function",tt=h.pendingProps!==tt,he||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(tt||Wt!==X)&&ox(h,C,v,X),Nl=!1;var Zt=h.memoizedState;C.state=Zt,Oh(h,v,C,A),fd(),Wt=h.memoizedState,tt||Zt!==Wt||Nl?(typeof pe=="function"&&(Cc(h,m,pe,v),Wt=h.memoizedState),(vt=Nl||ax(h,m,vt,v,Zt,Wt,X))?(he||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(h.flags|=4194308)):(typeof C.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=v,h.memoizedState=Wt),C.props=v,C.state=Wt,C.context=X,v=vt):(typeof C.componentDidMount=="function"&&(h.flags|=4194308),v=!1)}else{C=h.stateNode,nn(l,h),X=h.memoizedProps,he=Jo(m,X),C.props=he,pe=h.pendingProps,Zt=C.context,Wt=m.contextType,vt=yc,typeof Wt=="object"&&Wt!==null&&(vt=Qi(Wt)),tt=m.getDerivedStateFromProps,(Wt=typeof tt=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(X!==pe||Zt!==vt)&&ox(h,C,v,vt),Nl=!1,Zt=h.memoizedState,C.state=Zt,Oh(h,v,C,A),fd();var Qt=h.memoizedState;X!==pe||Zt!==Qt||Nl||l!==null&&l.dependencies!==null&&rd(l.dependencies)?(typeof tt=="function"&&(Cc(h,m,tt,v),Qt=h.memoizedState),(he=Nl||ax(h,m,he,v,Zt,Qt,vt)||l!==null&&l.dependencies!==null&&rd(l.dependencies))?(Wt||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(v,Qt,vt),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(v,Qt,vt)),typeof C.componentDidUpdate=="function"&&(h.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof C.componentDidUpdate!="function"||X===l.memoizedProps&&Zt===l.memoizedState||(h.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||X===l.memoizedProps&&Zt===l.memoizedState||(h.flags|=1024),h.memoizedProps=v,h.memoizedState=Qt),C.props=v,C.state=Qt,C.context=vt,v=he):(typeof C.componentDidUpdate!="function"||X===l.memoizedProps&&Zt===l.memoizedState||(h.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||X===l.memoizedProps&&Zt===l.memoizedState||(h.flags|=1024),v=!1)}return C=v,Eu(l,h),v=(h.flags&128)!==0,C||v?(C=h.stateNode,m=v&&typeof m.getDerivedStateFromError!="function"?null:C.render(),h.flags|=1,l!==null&&v?(h.child=_u(h,l.child,null,A),h.child=_u(h,null,m,A)):cs(l,h,m,A),h.memoizedState=C.state,l=h.child):l=Vs(l,h,A),l}function Dc(l,h,m,v){return wh(),h.flags|=256,cs(l,h,m,v),h.child}var Do={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Io(l){return{baseLanes:l,cachePool:$p()}}function As(l,h,m){return l=l!==null?l.childLanes&~m:0,h&&(l|=ro),l}function Vh(l,h,m){var v=h.pendingProps,A=!1,C=(h.flags&128)!==0,X;if((X=C)||(X=l!==null&&l.memoizedState===null?!1:(ls.current&2)!==0),X&&(A=!0,h.flags&=-129),X=(h.flags&32)!==0,h.flags&=-33,l===null){if(Jn){if(A?wc(h):Rc(),Jn){var tt=qi,vt;if(vt=tt){t:{for(vt=tt,tt=_a;vt.nodeType!==8;){if(!tt){tt=null;break t}if(vt=Gl(vt.nextSibling),vt===null){tt=null;break t}}tt=vt}tt!==null?(h.memoizedState={dehydrated:tt,treeContext:_c!==null?{id:Xo,overflow:Yo}:null,retryLane:536870912,hydrationErrors:null},vt=Xr(18,null,null,0),vt.stateNode=tt,vt.return=h,h.child=vt,Mr=h,qi=null,vt=!0):vt=!1}vt||xc(h)}if(tt=h.memoizedState,tt!==null&&(tt=tt.dehydrated,tt!==null))return ST(tt)?h.lanes=32:h.lanes=536870912,null;Qo(h)}return tt=v.children,v=v.fallback,A?(Rc(),A=h.mode,tt=Tu({mode:"hidden",children:tt},A),v=vc(v,A,m,null),tt.return=h,v.return=h,tt.sibling=v,h.child=tt,A=h.child,A.memoizedState=Io(m),A.childLanes=As(l,X,m),h.memoizedState=Do,v):(wc(h),$o(h,tt))}if(vt=l.memoizedState,vt!==null&&(tt=vt.dehydrated,tt!==null)){if(C)h.flags&256?(wc(h),h.flags&=-257,h=$s(l,h,m)):h.memoizedState!==null?(Rc(),h.child=l.child,h.flags|=128,h=null):(Rc(),A=v.fallback,tt=h.mode,v=Tu({mode:"visible",children:v.children},tt),A=vc(A,tt,m,null),A.flags|=2,v.return=h,A.return=h,v.sibling=A,h.child=v,_u(h,l.child,null,m),v=h.child,v.memoizedState=Io(m),v.childLanes=As(l,X,m),h.memoizedState=Do,h=A);else if(wc(h),ST(tt)){if(X=tt.nextSibling&&tt.nextSibling.dataset,X)var Wt=X.dgst;X=Wt,v=Error(n(419)),v.stack="",v.digest=X,gu({value:v,source:null,stack:null}),h=$s(l,h,m)}else if(Fs||Za(l,h,m,!1),X=(m&l.childLanes)!==0,Fs||X){if(X=pn,X!==null&&(v=m&-m,v=(v&42)!==0?1:we(v),v=(v&(X.suspendedLanes|m))!==0?0:v,v!==0&&v!==vt.retryLane))throw vt.retryLane=v,Rl(l,v),Dr(X,l,v),ux;tt.data==="$?"||f(),h=$s(l,h,m)}else tt.data==="$?"?(h.flags|=192,h.child=l.child,h=null):(l=vt.treeContext,qi=Gl(tt.nextSibling),Mr=h,Jn=!0,Ka=null,_a=!1,l!==null&&(Qs[va++]=Xo,Qs[va++]=Yo,Qs[va++]=_c,Xo=l.id,Yo=l.overflow,_c=h),h=$o(h,v.children),h.flags|=4096);return h}return A?(Rc(),A=v.fallback,tt=h.mode,vt=l.child,Wt=vt.sibling,v=as(vt,{mode:"hidden",children:v.children}),v.subtreeFlags=vt.subtreeFlags&65011712,Wt!==null?A=as(Wt,A):(A=vc(A,tt,m,null),A.flags|=2),A.return=h,v.return=h,v.sibling=A,h.child=v,v=A,A=h.child,tt=l.child.memoizedState,tt===null?tt=Io(m):(vt=tt.cachePool,vt!==null?(Wt=vs._currentValue,vt=vt.parent!==Wt?{parent:Wt,pool:Wt}:vt):vt=$p(),tt={baseLanes:tt.baseLanes|m,cachePool:vt}),A.memoizedState=tt,A.childLanes=As(l,X,m),h.memoizedState=Do,v):(wc(h),m=l.child,l=m.sibling,m=as(m,{mode:"visible",children:v.children}),m.return=h,m.sibling=null,l!==null&&(X=h.deletions,X===null?(h.deletions=[l],h.flags|=16):X.push(l)),h.child=m,h.memoizedState=null,m)}function $o(l,h){return h=Tu({mode:"visible",children:h},l.mode),h.return=l,l.child=h}function Tu(l,h){return l=Xr(22,l,null,h),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function $s(l,h,m){return _u(h,l.child,null,m),l=$o(h,h.pendingProps.children),l.flags|=2,h.memoizedState=null,l}function tr(l,h,m){l.lanes|=h;var v=l.alternate;v!==null&&(v.lanes|=h),_0(l.return,h,m)}function Fn(l,h,m,v,A){var C=l.memoizedState;C===null?l.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:A}:(C.isBackwards=h,C.rendering=null,C.renderingStartTime=0,C.last=v,C.tail=m,C.tailMode=A)}function eo(l,h,m){var v=h.pendingProps,A=v.revealOrder,C=v.tail;if(cs(l,h,v.children,m),v=ls.current,(v&2)!==0)v=v&1|2,h.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=h.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&tr(l,m,h);else if(l.tag===19)tr(l,m,h);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break t;for(;l.sibling===null;){if(l.return===null||l.return===h)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}v&=1}switch(ft(ls,v),A){case"forwards":for(m=h.child,A=null;m!==null;)l=m.alternate,l!==null&&kl(l)===null&&(A=m),m=m.sibling;m=A,m===null?(A=h.child,h.child=null):(A=m.sibling,m.sibling=null),Fn(h,!1,A,m,C);break;case"backwards":for(m=null,A=h.child,h.child=null;A!==null;){if(l=A.alternate,l!==null&&kl(l)===null){h.child=A;break}l=A.sibling,A.sibling=m,m=A,A=l}Fn(h,!0,m,null,C);break;case"together":Fn(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Vs(l,h,m){if(l!==null&&(h.dependencies=l.dependencies),Uo|=h.lanes,(m&h.childLanes)===0)if(l!==null){if(Za(l,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(l!==null&&h.child!==l.child)throw Error(n(153));if(h.child!==null){for(l=h.child,m=as(l,l.pendingProps),h.child=m,m.return=h;l.sibling!==null;)l=l.sibling,m=m.sibling=as(l,l.pendingProps),m.return=h;m.sibling=null}return h.child}function xd(l,h){return(l.lanes&h)!==0?!0:(l=l.dependencies,!!(l!==null&&rd(l)))}function no(l,h,m){switch(h.tag){case 3:Tt(h,h.stateNode.containerInfo),Sc(h,vs,l.memoizedState.cache),wh();break;case 27:case 5:ae(h);break;case 4:Tt(h,h.stateNode.containerInfo);break;case 10:Sc(h,h.type,h.memoizedProps.value);break;case 13:var v=h.memoizedState;if(v!==null)return v.dehydrated!==null?(wc(h),h.flags|=128,null):(m&h.child.childLanes)!==0?Vh(l,h,m):(wc(h),l=Vs(l,h,m),l!==null?l.sibling:null);wc(h);break;case 19:var A=(l.flags&128)!==0;if(v=(m&h.childLanes)!==0,v||(Za(l,h,m,!1),v=(m&h.childLanes)!==0),A){if(v)return eo(l,h,m);h.flags|=128}if(A=h.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ft(ls,ls.current),v)break;return null;case 22:case 23:return h.lanes=0,bu(l,h,m);case 24:Sc(h,vs,l.memoizedState.cache)}return Vs(l,h,m)}function Mu(l,h,m){if(l!==null)if(l.memoizedProps!==h.pendingProps)Fs=!0;else{if(!xd(l,m)&&(h.flags&128)===0)return Fs=!1,no(l,h,m);Fs=(l.flags&131072)!==0}else Fs=!1,Jn&&(h.flags&1048576)!==0&&Yp(h,Ah,h.index);switch(h.lanes=0,h.tag){case 16:t:{l=h.pendingProps;var v=h.elementType,A=v._init;if(v=A(v._payload),h.type=v,typeof v=="function")ed(v)?(l=Jo(v,l),h.tag=1,h=Ea(null,h,v,l,m)):(h.tag=0,h=Fh(null,h,v,l,m));else{if(v!=null){if(A=v.$$typeof,A===P){h.tag=11,h=Kr(null,h,v,l,m);break t}else if(A===L){h.tag=14,h=Zr(null,h,v,l,m);break t}}throw h=it(v)||v,Error(n(306,h,""))}}return h;case 0:return Fh(l,h,h.type,h.pendingProps,m);case 1:return v=h.type,A=Jo(v,h.pendingProps),Ea(l,h,v,A,m);case 3:t:{if(Tt(h,h.stateNode.containerInfo),l===null)throw Error(n(387));v=h.pendingProps;var C=h.memoizedState;A=C.element,nn(l,h),Oh(h,v,null,m);var X=h.memoizedState;if(v=X.cache,Sc(h,vs,v),v!==C.cache&&sd(h,[vs],m,!0),fd(),v=X.element,C.isDehydrated)if(C={element:v,isDehydrated:!1,cache:X.cache},h.updateQueue.baseState=C,h.memoizedState=C,h.flags&256){h=Dc(l,h,v,m);break t}else if(v!==A){A=Zs(Error(n(424)),h),gu(A),h=Dc(l,h,v,m);break t}else{switch(l=h.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(qi=Gl(l.firstChild),Mr=h,Jn=!0,Ka=null,_a=!0,m=sx(h,null,v,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(wh(),v===A){h=Vs(l,h,m);break t}cs(l,h,v,m)}h=h.child}return h;case 26:return Eu(l,h),l===null?(m=vC(h.type,null,h.pendingProps,null))?h.memoizedState=m:Jn||(m=h.type,l=h.pendingProps,v=gx(ut.current).createElement(m),v[fn]=h,v[Rn]=l,Ir(v,m,l),di(v),h.stateNode=v):h.memoizedState=vC(h.type,l.memoizedProps,h.pendingProps,l.memoizedState),null;case 27:return ae(h),l===null&&Jn&&(v=h.stateNode=mC(h.type,h.pendingProps,ut.current),Mr=h,_a=!0,A=qi,Qh(h.type)?(ET=A,qi=Gl(v.firstChild)):qi=A),cs(l,h,h.pendingProps.children,m),Eu(l,h),l===null&&(h.flags|=4194304),h.child;case 5:return l===null&&Jn&&((A=v=qi)&&(v=eF(v,h.type,h.pendingProps,_a),v!==null?(h.stateNode=v,Mr=h,qi=Gl(v.firstChild),_a=!1,A=!0):A=!1),A||xc(h)),ae(h),A=h.type,C=h.pendingProps,X=l!==null?l.memoizedProps:null,v=C.children,_T(A,C)?v=null:X!==null&&_T(A,X)&&(h.flags|=32),h.memoizedState!==null&&(A=Ul(l,h,nT,null,null,m),$0._currentValue=A),Eu(l,h),cs(l,h,v,m),h.child;case 6:return l===null&&Jn&&((l=m=qi)&&(m=nF(m,h.pendingProps,_a),m!==null?(h.stateNode=m,Mr=h,qi=null,l=!0):l=!1),l||xc(h)),null;case 13:return Vh(l,h,m);case 4:return Tt(h,h.stateNode.containerInfo),v=h.pendingProps,l===null?h.child=_u(h,null,v,m):cs(l,h,v,m),h.child;case 11:return Kr(l,h,h.type,h.pendingProps,m);case 7:return cs(l,h,h.pendingProps,m),h.child;case 8:return cs(l,h,h.pendingProps.children,m),h.child;case 12:return cs(l,h,h.pendingProps.children,m),h.child;case 10:return v=h.pendingProps,Sc(h,h.type,v.value),cs(l,h,v.children,m),h.child;case 9:return A=h.type._context,v=h.pendingProps.children,Ko(h),A=Qi(A),v=v(A),h.flags|=1,cs(l,h,v,m),h.child;case 14:return Zr(l,h,h.type,h.pendingProps,m);case 15:return H0(l,h,h.type,h.pendingProps,m);case 19:return eo(l,h,m);case 31:return v=h.pendingProps,m=h.mode,v={mode:v.mode,children:v.children},l===null?(m=Tu(v,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=as(l.child,v),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return bu(l,h,m);case 24:return Ko(h),v=Qi(vs),l===null?(A=Ec(),A===null&&(A=pn,C=Qp(),A.pooledCache=C,C.refCount++,C!==null&&(A.pooledCacheLanes|=m),A=C),h.memoizedState={parent:v,cache:A},E0(h),Sc(h,vs,A)):((l.lanes&m)!==0&&(nn(l,h),Oh(h,null,null,m),fd()),A=l.memoizedState,C=h.memoizedState,A.parent!==v?(A={parent:v,cache:v},h.memoizedState=A,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=A),Sc(h,vs,v)):(v=C.cache,Sc(h,vs,v),v!==A.cache&&sd(h,[vs],m,!0))),cs(l,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(n(156,h.tag))}function No(l){l.flags|=4}function bd(l,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!EC(h)){if(h=bi.current,h!==null&&((Xe&4194048)===Xe?Co!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||h!==Co))throw Ja=hd,b0;l.flags|=8192}}function Bl(l,h){h!==null&&(l.flags|=4),l.flags&16384&&(h=l.tag!==22?Ft():536870912,l.lanes|=h,qn|=h)}function Au(l,h){if(!Jn)switch(l.tailMode){case"hidden":h=l.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?h||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function Ci(l){var h=l.alternate!==null&&l.alternate.child===l.child,m=0,v=0;if(h)for(var A=l.child;A!==null;)m|=A.lanes|A.childLanes,v|=A.subtreeFlags&65011712,v|=A.flags&65011712,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)m|=A.lanes|A.childLanes,v|=A.subtreeFlags,v|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=v,l.childLanes=m,h}function G0(l,h,m){var v=h.pendingProps;switch(g0(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(h),null;case 1:return Ci(h),null;case 3:return m=h.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),Il(vs),$t(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(Ao(h)?No(h):l===null||l.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,oi())),Ci(h),null;case 26:return m=h.memoizedState,l===null?(No(h),m!==null?(Ci(h),bd(h,m)):(Ci(h),h.flags&=-16777217)):m?m!==l.memoizedState?(No(h),Ci(h),bd(h,m)):(Ci(h),h.flags&=-16777217):(l.memoizedProps!==v&&No(h),Ci(h),h.flags&=-16777217),null;case 27:ne(h),m=ut.current;var A=h.type;if(l!==null&&h.stateNode!=null)l.memoizedProps!==v&&No(h);else{if(!v){if(h.stateNode===null)throw Error(n(166));return Ci(h),null}l=dt.current,Ao(h)?S_(h):(l=mC(A,v,m),h.stateNode=l,No(h))}return Ci(h),null;case 5:if(ne(h),m=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==v&&No(h);else{if(!v){if(h.stateNode===null)throw Error(n(166));return Ci(h),null}if(l=dt.current,Ao(h))S_(h);else{switch(A=gx(ut.current),l){case 1:l=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:l=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":l=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":l=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":l=A.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof v.is=="string"?A.createElement("select",{is:v.is}):A.createElement("select"),v.multiple?l.multiple=!0:v.size&&(l.size=v.size);break;default:l=typeof v.is=="string"?A.createElement(m,{is:v.is}):A.createElement(m)}}l[fn]=h,l[Rn]=v;t:for(A=h.child;A!==null;){if(A.tag===5||A.tag===6)l.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break t;for(;A.sibling===null;){if(A.return===null||A.return===h)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}h.stateNode=l;t:switch(Ir(l,m,v),m){case"button":case"input":case"select":case"textarea":l=!!v.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&No(h)}}return Ci(h),h.flags&=-16777217,null;case 6:if(l&&h.stateNode!=null)l.memoizedProps!==v&&No(h);else{if(typeof v!="string"&&h.stateNode===null)throw Error(n(166));if(l=ut.current,Ao(h)){if(l=h.stateNode,m=h.memoizedProps,v=null,A=Mr,A!==null)switch(A.tag){case 27:case 5:v=A.memoizedProps}l[fn]=h,l=!!(l.nodeValue===m||v!==null&&v.suppressHydrationWarning===!0||lC(l.nodeValue,m)),l||xc(h)}else l=gx(l).createTextNode(v),l[fn]=h,h.stateNode=l}return Ci(h),null;case 13:if(v=h.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(A=Ao(h),v!==null&&v.dehydrated!==null){if(l===null){if(!A)throw Error(n(318));if(A=h.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[fn]=h}else wh(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ci(h),A=!1}else A=oi(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=A),A=!0;if(!A)return h.flags&256?(Qo(h),h):(Qo(h),null)}if(Qo(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=v!==null,l=l!==null&&l.memoizedState!==null,m){v=h.child,A=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(A=v.alternate.memoizedState.cachePool.pool);var C=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(C=v.memoizedState.cachePool.pool),C!==A&&(v.flags|=2048)}return m!==l&&m&&(h.child.flags|=8192),Bl(h,h.updateQueue),Ci(h),null;case 4:return $t(),l===null&&pT(h.stateNode.containerInfo),Ci(h),null;case 10:return Il(h.type),Ci(h),null;case 19:if(rt(ls),A=h.memoizedState,A===null)return Ci(h),null;if(v=(h.flags&128)!==0,C=A.rendering,C===null)if(v)Au(A,!1);else{if(Bi!==0||l!==null&&(l.flags&128)!==0)for(l=h.child;l!==null;){if(C=kl(l),C!==null){for(h.flags|=128,Au(A,!1),l=C.updateQueue,h.updateQueue=l,Bl(h,l),h.subtreeFlags=0,l=m,m=h.child;m!==null;)p0(m,l),m=m.sibling;return ft(ls,ls.current&1|2),h.child}l=l.sibling}A.tail!==null&&Ct()>dr&&(h.flags|=128,v=!0,Au(A,!1),h.lanes=4194304)}else{if(!v)if(l=kl(C),l!==null){if(h.flags|=128,v=!0,l=l.updateQueue,h.updateQueue=l,Bl(h,l),Au(A,!0),A.tail===null&&A.tailMode==="hidden"&&!C.alternate&&!Jn)return Ci(h),null}else 2*Ct()-A.renderingStartTime>dr&&m!==536870912&&(h.flags|=128,v=!0,Au(A,!1),h.lanes=4194304);A.isBackwards?(C.sibling=h.child,h.child=C):(l=A.last,l!==null?l.sibling=C:h.child=C,A.last=C)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=Ct(),h.sibling=null,l=ls.current,ft(ls,v?l&1|2:l&1),h):(Ci(h),null);case 22:case 23:return Qo(h),dd(),v=h.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(h.flags|=8192):v&&(h.flags|=8192),v?(m&536870912)!==0&&(h.flags&128)===0&&(Ci(h),h.subtreeFlags&6&&(h.flags|=8192)):Ci(h),m=h.updateQueue,m!==null&&Bl(h,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),v=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048),l!==null&&rt(Qa),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Il(vs),Ci(h),null;case 25:return null;case 30:return null}throw Error(n(156,h.tag))}function Hh(l,h){switch(g0(h),h.tag){case 1:return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 3:return Il(vs),$t(),l=h.flags,(l&65536)!==0&&(l&128)===0?(h.flags=l&-65537|128,h):null;case 26:case 27:case 5:return ne(h),null;case 13:if(Qo(h),l=h.memoizedState,l!==null&&l.dehydrated!==null){if(h.alternate===null)throw Error(n(340));wh()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 19:return rt(ls),null;case 4:return $t(),null;case 10:return Il(h.type),null;case 22:case 23:return Qo(h),dd(),l!==null&&rt(Qa),l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 24:return Il(vs),null;case 25:return null;default:return null}}function Gh(l,h){switch(g0(h),h.tag){case 3:Il(vs),$t();break;case 26:case 27:case 5:ne(h);break;case 4:$t();break;case 13:Qo(h);break;case 19:rt(ls);break;case 10:Il(h.type);break;case 22:case 23:Qo(h),dd(),l!==null&&rt(Qa);break;case 24:Il(vs)}}function wu(l,h){try{var m=h.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var A=v.next;m=A;do{if((m.tag&l)===l){v=void 0;var C=m.create,X=m.inst;v=C(),X.destroy=v}m=m.next}while(m!==A)}}catch(tt){Et(h,h.return,tt)}}function Ta(l,h,m){try{var v=h.updateQueue,A=v!==null?v.lastEffect:null;if(A!==null){var C=A.next;v=C;do{if((v.tag&l)===l){var X=v.inst,tt=X.destroy;if(tt!==void 0){X.destroy=void 0,A=h;var vt=m,Wt=tt;try{Wt()}catch(he){Et(A,vt,he)}}}v=v.next}while(v!==C)}}catch(he){Et(h,h.return,he)}}function Ru(l){var h=l.updateQueue;if(h!==null){var m=l.stateNode;try{M_(h,m)}catch(v){Et(l,l.return,v)}}}function zl(l,h,m){m.props=Jo(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(v){Et(l,h,v)}}function Cu(l,h){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof m=="function"?l.refCleanup=m(v):m.current=v}}catch(A){Et(l,h,A)}}function tl(l,h){var m=l.ref,v=l.refCleanup;if(m!==null)if(typeof v=="function")try{v()}catch(A){Et(l,h,A)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){Et(l,h,A)}else m.current=null}function jh(l){var h=l.type,m=l.memoizedProps,v=l.stateNode;try{t:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&v.focus();break t;case"img":m.src?v.src=m.src:m.srcSet&&(v.srcset=m.srcSet)}}catch(A){Et(l,l.return,A)}}function Sd(l,h,m){try{var v=l.stateNode;Zz(v,l.type,m,h),v[Rn]=h}catch(A){Et(l,l.return,A)}}function Ed(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Qh(l.type)||l.tag===4}function Ic(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Ed(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Qh(l.type)||l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Nc(l,h,m){var v=l.tag;if(v===5||v===6)l=l.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(l),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=mx));else if(v!==4&&(v===27&&Qh(l.type)&&(m=l.stateNode,h=null),l=l.child,l!==null))for(Nc(l,h,m),l=l.sibling;l!==null;)Nc(l,h,m),l=l.sibling}function Oc(l,h,m){var v=l.tag;if(v===5||v===6)l=l.stateNode,h?m.insertBefore(l,h):m.appendChild(l);else if(v!==4&&(v===27&&Qh(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(Oc(l,h,m),l=l.sibling;l!==null;)Oc(l,h,m),l=l.sibling}function Pc(l){var h=l.stateNode,m=l.memoizedProps;try{for(var v=l.type,A=h.attributes;A.length;)h.removeAttributeNode(A[0]);Ir(h,v,m),h[fn]=l,h[Rn]=m}catch(C){Et(l,l.return,C)}}var el=!1,Di=!1,Wh=!1,Ma=typeof WeakSet=="function"?WeakSet:Set,Si=null;function ws(l,h){if(l=l.containerInfo,yT=Sx,l=o0(l),Qf(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else t:{m=(m=l.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var A=v.anchorOffset,C=v.focusNode;v=v.focusOffset;try{m.nodeType,C.nodeType}catch{m=null;break t}var X=0,tt=-1,vt=-1,Wt=0,he=0,pe=l,Zt=null;e:for(;;){for(var Qt;pe!==m||A!==0&&pe.nodeType!==3||(tt=X+A),pe!==C||v!==0&&pe.nodeType!==3||(vt=X+v),pe.nodeType===3&&(X+=pe.nodeValue.length),(Qt=pe.firstChild)!==null;)Zt=pe,pe=Qt;for(;;){if(pe===l)break e;if(Zt===m&&++Wt===A&&(tt=X),Zt===C&&++he===v&&(vt=X),(Qt=pe.nextSibling)!==null)break;pe=Zt,Zt=pe.parentNode}pe=Qt}m=tt===-1||vt===-1?null:{start:tt,end:vt}}else m=null}m=m||{start:0,end:0}}else m=null;for(vT={focusedElem:l,selectionRange:m},Sx=!1,Si=h;Si!==null;)if(h=Si,l=h.child,(h.subtreeFlags&1024)!==0&&l!==null)l.return=h,Si=l;else for(;Si!==null;){switch(h=Si,C=h.alternate,l=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&C!==null){l=void 0,m=h,A=C.memoizedProps,C=C.memoizedState,v=m.stateNode;try{var hn=Jo(m.type,A,m.elementType===m.type);l=v.getSnapshotBeforeUpdate(hn,C),v.__reactInternalSnapshotBeforeUpdate=l}catch(tn){Et(m,m.return,tn)}}break;case 3:if((l&1024)!==0){if(l=h.stateNode.containerInfo,m=l.nodeType,m===9)bT(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":bT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=h.sibling,l!==null){l.return=h.return,Si=l;break}Si=h.return}}function Fl(l,h,m){var v=m.flags;switch(m.tag){case 0:case 11:case 15:Cr(l,m),v&4&&wu(5,m);break;case 1:if(Cr(l,m),v&4)if(l=m.stateNode,h===null)try{l.componentDidMount()}catch(X){Et(m,m.return,X)}else{var A=Jo(m.type,h.memoizedProps);h=h.memoizedState;try{l.componentDidUpdate(A,h,l.__reactInternalSnapshotBeforeUpdate)}catch(X){Et(m,m.return,X)}}v&64&&Ru(m),v&512&&Cu(m,m.return);break;case 3:if(Cr(l,m),v&64&&(l=m.updateQueue,l!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{M_(l,h)}catch(X){Et(m,m.return,X)}}break;case 27:h===null&&v&4&&Pc(m);case 26:case 5:Cr(l,m),h===null&&v&4&&jh(m),v&512&&Cu(m,m.return);break;case 12:Cr(l,m);break;case 13:Cr(l,m),v&4&&Uc(l,m),v&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=zi.bind(null,m),iF(l,m))));break;case 22:if(v=m.memoizedState!==null||el,!v){h=h!==null&&h.memoizedState!==null||Di,A=el;var C=Di;el=v,(Di=h)&&!C?nl(l,m,(m.subtreeFlags&8772)!==0):Cr(l,m),el=A,Di=C}break;case 30:break;default:Cr(l,m)}}function Tn(l){var h=l.alternate;h!==null&&(l.alternate=null,Tn(h)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(h=l.stateNode,h!==null&&Nn(h)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Ye=null,Wn=!1;function io(l,h,m){for(m=m.child;m!==null;)Du(l,h,m),m=m.sibling}function Du(l,h,m){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Lt,m)}catch{}switch(m.tag){case 26:Di||tl(m,h),io(l,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Di||tl(m,h);var v=Ye,A=Wn;Qh(m.type)&&(Ye=m.stateNode,Wn=!1),io(l,h,m),K0(m.stateNode),Ye=v,Wn=A;break;case 5:Di||tl(m,h);case 6:if(v=Ye,A=Wn,Ye=null,io(l,h,m),Ye=v,Wn=A,Ye!==null)if(Wn)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(m.stateNode)}catch(C){Et(m,h,C)}else try{Ye.removeChild(m.stateNode)}catch(C){Et(m,h,C)}break;case 18:Ye!==null&&(Wn?(l=Ye,dC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),iy(l)):dC(Ye,m.stateNode));break;case 4:v=Ye,A=Wn,Ye=m.stateNode.containerInfo,Wn=!0,io(l,h,m),Ye=v,Wn=A;break;case 0:case 11:case 14:case 15:Di||Ta(2,m,h),Di||Ta(4,m,h),io(l,h,m);break;case 1:Di||(tl(m,h),v=m.stateNode,typeof v.componentWillUnmount=="function"&&zl(m,h,v)),io(l,h,m);break;case 21:io(l,h,m);break;case 22:Di=(v=Di)||m.memoizedState!==null,io(l,h,m),Di=v;break;default:io(l,h,m)}}function Uc(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{iy(l)}catch(m){Et(h,h.return,m)}}function vm(l){switch(l.tag){case 13:case 19:var h=l.stateNode;return h===null&&(h=l.stateNode=new Ma),h;case 22:return l=l.stateNode,h=l._retryCache,h===null&&(h=l._retryCache=new Ma),h;default:throw Error(n(435,l.tag))}}function Iu(l,h){var m=vm(l);h.forEach(function(v){var A=sn.bind(null,l,v);m.has(v)||(m.add(v),v.then(A,A))})}function Hs(l,h){var m=h.deletions;if(m!==null)for(var v=0;v<m.length;v++){var A=m[v],C=l,X=h,tt=X;t:for(;tt!==null;){switch(tt.tag){case 27:if(Qh(tt.type)){Ye=tt.stateNode,Wn=!1;break t}break;case 5:Ye=tt.stateNode,Wn=!1;break t;case 3:case 4:Ye=tt.stateNode.containerInfo,Wn=!0;break t}tt=tt.return}if(Ye===null)throw Error(n(160));Du(C,X,A),Ye=null,Wn=!1,C=A.alternate,C!==null&&(C.return=null),A.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)_m(h,l),h=h.sibling}var Oo=null;function _m(l,h){var m=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Hs(h,l),Ji(l),v&4&&(Ta(3,l,l.return),wu(3,l),Ta(5,l,l.return));break;case 1:Hs(h,l),Ji(l),v&512&&(Di||m===null||tl(m,m.return)),v&64&&el&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?v:m.concat(v))));break;case 26:var A=Oo;if(Hs(h,l),Ji(l),v&512&&(Di||m===null||tl(m,m.return)),v&4){var C=m!==null?m.memoizedState:null;if(v=l.memoizedState,m===null)if(v===null)if(l.stateNode===null){t:{v=l.type,m=l.memoizedProps,A=A.ownerDocument||A;e:switch(v){case"title":C=A.getElementsByTagName("title")[0],(!C||C[Zn]||C[fn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=A.createElement(v),A.head.insertBefore(C,A.querySelector("head > title"))),Ir(C,v,m),C[fn]=l,di(C),v=C;break t;case"link":var X=bC("link","href",A).get(v+(m.href||""));if(X){for(var tt=0;tt<X.length;tt++)if(C=X[tt],C.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&C.getAttribute("rel")===(m.rel==null?null:m.rel)&&C.getAttribute("title")===(m.title==null?null:m.title)&&C.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){X.splice(tt,1);break e}}C=A.createElement(v),Ir(C,v,m),A.head.appendChild(C);break;case"meta":if(X=bC("meta","content",A).get(v+(m.content||""))){for(tt=0;tt<X.length;tt++)if(C=X[tt],C.getAttribute("content")===(m.content==null?null:""+m.content)&&C.getAttribute("name")===(m.name==null?null:m.name)&&C.getAttribute("property")===(m.property==null?null:m.property)&&C.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&C.getAttribute("charset")===(m.charSet==null?null:m.charSet)){X.splice(tt,1);break e}}C=A.createElement(v),Ir(C,v,m),A.head.appendChild(C);break;default:throw Error(n(468,v))}C[fn]=l,di(C),v=C}l.stateNode=v}else SC(A,l.type,l.stateNode);else l.stateNode=xC(A,v,l.memoizedProps);else C!==v?(C===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):C.count--,v===null?SC(A,l.type,l.stateNode):xC(A,v,l.memoizedProps)):v===null&&l.stateNode!==null&&Sd(l,l.memoizedProps,m.memoizedProps)}break;case 27:Hs(h,l),Ji(l),v&512&&(Di||m===null||tl(m,m.return)),m!==null&&v&4&&Sd(l,l.memoizedProps,m.memoizedProps);break;case 5:if(Hs(h,l),Ji(l),v&512&&(Di||m===null||tl(m,m.return)),l.flags&32){A=l.stateNode;try{ri(A,"")}catch(Qt){Et(l,l.return,Qt)}}v&4&&l.stateNode!=null&&(A=l.memoizedProps,Sd(l,A,m!==null?m.memoizedProps:A)),v&1024&&(Wh=!0);break;case 6:if(Hs(h,l),Ji(l),v&4){if(l.stateNode===null)throw Error(n(162));v=l.memoizedProps,m=l.stateNode;try{m.nodeValue=v}catch(Qt){Et(l,l.return,Qt)}}break;case 3:if(_x=null,A=Oo,Oo=yx(h.containerInfo),Hs(h,l),Oo=A,Ji(l),v&4&&m!==null&&m.memoizedState.isDehydrated)try{iy(h.containerInfo)}catch(Qt){Et(l,l.return,Qt)}Wh&&(Wh=!1,Lc(l));break;case 4:v=Oo,Oo=yx(l.stateNode.containerInfo),Hs(h,l),Ji(l),Oo=v;break;case 12:Hs(h,l),Ji(l);break;case 13:Hs(h,l),Ji(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(mi=Ct()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,Iu(l,v)));break;case 22:A=l.memoizedState!==null;var vt=m!==null&&m.memoizedState!==null,Wt=el,he=Di;if(el=Wt||A,Di=he||vt,Hs(h,l),Di=he,el=Wt,Ji(l),v&8192)t:for(h=l.stateNode,h._visibility=A?h._visibility&-2:h._visibility|1,A&&(m===null||vt||el||Di||Aa(l)),m=null,h=l;;){if(h.tag===5||h.tag===26){if(m===null){vt=m=h;try{if(C=vt.stateNode,A)X=C.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{tt=vt.stateNode;var pe=vt.memoizedProps.style,Zt=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;tt.style.display=Zt==null||typeof Zt=="boolean"?"":(""+Zt).trim()}}catch(Qt){Et(vt,vt.return,Qt)}}}else if(h.tag===6){if(m===null){vt=h;try{vt.stateNode.nodeValue=A?"":vt.memoizedProps}catch(Qt){Et(vt,vt.return,Qt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===l)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break t;for(;h.sibling===null;){if(h.return===null||h.return===l)break t;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}v&4&&(v=l.updateQueue,v!==null&&(m=v.retryQueue,m!==null&&(v.retryQueue=null,Iu(l,m))));break;case 19:Hs(h,l),Ji(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,Iu(l,v)));break;case 30:break;case 21:break;default:Hs(h,l),Ji(l)}}function Ji(l){var h=l.flags;if(h&2){try{for(var m,v=l.return;v!==null;){if(Ed(v)){m=v;break}v=v.return}if(m==null)throw Error(n(160));switch(m.tag){case 27:var A=m.stateNode,C=Ic(l);Oc(l,C,A);break;case 5:var X=m.stateNode;m.flags&32&&(ri(X,""),m.flags&=-33);var tt=Ic(l);Oc(l,tt,X);break;case 3:case 4:var vt=m.stateNode.containerInfo,Wt=Ic(l);Nc(l,Wt,vt);break;default:throw Error(n(161))}}catch(he){Et(l,l.return,he)}l.flags&=-3}h&4096&&(l.flags&=-4097)}function Lc(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var h=l;Lc(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),l=l.sibling}}function Cr(l,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Fl(l,h.alternate,h),h=h.sibling}function Aa(l){for(l=l.child;l!==null;){var h=l;switch(h.tag){case 0:case 11:case 14:case 15:Ta(4,h,h.return),Aa(h);break;case 1:tl(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&zl(h,h.return,m),Aa(h);break;case 27:K0(h.stateNode);case 26:case 5:tl(h,h.return),Aa(h);break;case 22:h.memoizedState===null&&Aa(h);break;case 30:Aa(h);break;default:Aa(h)}l=l.sibling}}function nl(l,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var v=h.alternate,A=l,C=h,X=C.flags;switch(C.tag){case 0:case 11:case 15:nl(A,C,m),wu(4,C);break;case 1:if(nl(A,C,m),v=C,A=v.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Wt){Et(v,v.return,Wt)}if(v=C,A=v.updateQueue,A!==null){var tt=v.stateNode;try{var vt=A.shared.hiddenCallbacks;if(vt!==null)for(A.shared.hiddenCallbacks=null,A=0;A<vt.length;A++)Ph(vt[A],tt)}catch(Wt){Et(v,v.return,Wt)}}m&&X&64&&Ru(C),Cu(C,C.return);break;case 27:Pc(C);case 26:case 5:nl(A,C,m),m&&v===null&&X&4&&jh(C),Cu(C,C.return);break;case 12:nl(A,C,m);break;case 13:nl(A,C,m),m&&X&4&&Uc(A,C);break;case 22:C.memoizedState===null&&nl(A,C,m),Cu(C,C.return);break;case 30:break;default:nl(A,C,m)}h=h.sibling}}function xm(l,h){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(l=h.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&Rh(m))}function bm(l,h){l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&Rh(l))}function Ei(l,h,m,v){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Sm(l,h,m,v),h=h.sibling}function Sm(l,h,m,v){var A=h.flags;switch(h.tag){case 0:case 11:case 15:Ei(l,h,m,v),A&2048&&wu(9,h);break;case 1:Ei(l,h,m,v);break;case 3:Ei(l,h,m,v),A&2048&&(l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&Rh(l)));break;case 12:if(A&2048){Ei(l,h,m,v),l=h.stateNode;try{var C=h.memoizedProps,X=C.id,tt=C.onPostCommit;typeof tt=="function"&&tt(X,h.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(vt){Et(h,h.return,vt)}}else Ei(l,h,m,v);break;case 13:Ei(l,h,m,v);break;case 23:break;case 22:C=h.stateNode,X=h.alternate,h.memoizedState!==null?C._visibility&2?Ei(l,h,m,v):Po(l,h):C._visibility&2?Ei(l,h,m,v):(C._visibility|=2,Vl(l,h,m,v,(h.subtreeFlags&10256)!==0)),A&2048&&xm(X,h);break;case 24:Ei(l,h,m,v),A&2048&&bm(h.alternate,h);break;default:Ei(l,h,m,v)}}function Vl(l,h,m,v,A){for(A=A&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var C=l,X=h,tt=m,vt=v,Wt=X.flags;switch(X.tag){case 0:case 11:case 15:Vl(C,X,tt,vt,A),wu(8,X);break;case 23:break;case 22:var he=X.stateNode;X.memoizedState!==null?he._visibility&2?Vl(C,X,tt,vt,A):Po(C,X):(he._visibility|=2,Vl(C,X,tt,vt,A)),A&&Wt&2048&&xm(X.alternate,X);break;case 24:Vl(C,X,tt,vt,A),A&&Wt&2048&&bm(X.alternate,X);break;default:Vl(C,X,tt,vt,A)}h=h.sibling}}function Po(l,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=l,v=h,A=v.flags;switch(v.tag){case 22:Po(m,v),A&2048&&xm(v.alternate,v);break;case 24:Po(m,v),A&2048&&bm(v.alternate,v);break;default:Po(m,v)}h=h.sibling}}var wa=8192;function qh(l){if(l.subtreeFlags&wa)for(l=l.child;l!==null;)hx(l),l=l.sibling}function hx(l){switch(l.tag){case 26:qh(l),l.flags&wa&&l.memoizedState!==null&&gF(Oo,l.memoizedState,l.memoizedProps);break;case 5:qh(l);break;case 3:case 4:var h=Oo;Oo=yx(l.stateNode.containerInfo),qh(l),Oo=h;break;case 22:l.memoizedState===null&&(h=l.alternate,h!==null&&h.memoizedState!==null?(h=wa,wa=16777216,qh(l),wa=h):qh(l));break;default:qh(l)}}function fx(l){var h=l.alternate;if(h!==null&&(l=h.child,l!==null)){h.child=null;do h=l.sibling,l.sibling=null,l=h;while(l!==null)}}function Ii(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var v=h[m];Si=v,sl(v,l)}fx(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)j0(l),l=l.sibling}function j0(l){switch(l.tag){case 0:case 11:case 15:Ii(l),l.flags&2048&&Ta(9,l,l.return);break;case 3:Ii(l);break;case 12:Ii(l);break;case 22:var h=l.stateNode;l.memoizedState!==null&&h._visibility&2&&(l.return===null||l.return.tag!==13)?(h._visibility&=-3,il(l)):Ii(l);break;default:Ii(l)}}function il(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var v=h[m];Si=v,sl(v,l)}fx(l)}for(l=l.child;l!==null;){switch(h=l,h.tag){case 0:case 11:case 15:Ta(8,h,h.return),il(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,il(h));break;default:il(h)}l=l.sibling}}function sl(l,h){for(;Si!==null;){var m=Si;switch(m.tag){case 0:case 11:case 15:Ta(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var v=m.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Rh(m.memoizedState.cache)}if(v=m.child,v!==null)v.return=m,Si=v;else t:for(m=l;Si!==null;){v=Si;var A=v.sibling,C=v.return;if(Tn(v),v===m){Si=null;break t}if(A!==null){A.return=C,Si=A;break t}Si=C}}}var $i={getCacheForType:function(l){var h=Qi(vs),m=h.data.get(l);return m===void 0&&(m=l(),h.data.set(l,m)),m}},W0=typeof WeakMap=="function"?WeakMap:Map,li=0,pn=null,In=null,Xe=0,En=0,Xi=null,Ra=!1,Xh=!1,Yh=!1,so=0,Bi=0,Uo=0,rl=0,Nu=0,ro=0,qn=0,ci=null,Ze=null,kn=!1,mi=0,dr=1/0,ao=null,Ca=null,Rs=0,pr=null,Ti=null,Da=0,Hl=0,Td=null,Ia=null,al=0,Ou=null;function ts(){if((li&2)!==0&&Xe!==0)return Xe&-Xe;if(j.T!==null){var l=yn;return l!==0?l:uT()}return Ie()}function Em(){ro===0&&(ro=(Xe&536870912)===0||Jn?pt():536870912);var l=bi.current;return l!==null&&(l.flags|=32),ro}function Dr(l,h,m){(l===pn&&(En===2||En===9)||l.cancelPendingCommit!==null)&&(Bc(l,0),Lo(l,Xe,ro,!1)),ye(l,m),((li&2)===0||l!==pn)&&(l===pn&&((li&2)===0&&(rl|=m),Bi===4&&Lo(l,Xe,ro,!1)),Vc(l))}function Kh(l,h,m){if((li&6)!==0)throw Error(n(327));var v=!m&&(h&124)===0&&(h&l.expiredLanes)===0||wt(l,h),A=v?w(l,h):p(l,h,!0),C=v;do{if(A===0){Xh&&!v&&Lo(l,h,0,!1);break}else{if(m=l.current.alternate,C&&!kc(m)){A=p(l,h,!1),C=!1;continue}if(A===2){if(C=h,l.errorRecoveryDisabledLanes&C)var X=0;else X=l.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){h=X;t:{var tt=l;A=ci;var vt=tt.current.memoizedState.isDehydrated;if(vt&&(Bc(tt,X).flags|=256),X=p(tt,X,!1),X!==2){if(Yh&&!vt){tt.errorRecoveryDisabledLanes|=C,rl|=C,A=4;break t}C=Ze,Ze=A,C!==null&&(Ze===null?Ze=C:Ze.push.apply(Ze,C))}A=X}if(C=!1,A!==2)continue}}if(A===1){Bc(l,0),Lo(l,h,0,!0);break}t:{switch(v=l,C=A,C){case 0:case 1:throw Error(n(345));case 4:if((h&4194048)!==h)break;case 6:Lo(v,h,ro,!Ra);break t;case 2:Ze=null;break;case 3:case 5:break;default:throw Error(n(329))}if((h&62914560)===h&&(A=mi+300-Ct(),10<A)){if(Lo(v,h,ro,!Ra),ht(v,0,!0)!==0)break t;v.timeoutHandle=hC(Md.bind(null,v,m,Ze,ao,kn,h,ro,rl,qn,Ra,C,2,-0,0),A);break t}Md(v,m,Ze,ao,kn,h,ro,rl,qn,Ra,C,0,-0,0)}}break}while(!0);Vc(l)}function Md(l,h,m,v,A,C,X,tt,vt,Wt,he,pe,Zt,Qt){if(l.timeoutHandle=-1,pe=h.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(J0={stylesheets:null,count:0,unsuspend:mF},hx(h),pe=yF(),pe!==null)){l.cancelPendingCommit=pe(Ae.bind(null,l,h,C,m,v,A,X,tt,vt,he,1,Zt,Qt)),Lo(l,C,X,!Wt);return}Ae(l,h,C,m,v,A,X,tt,vt)}function kc(l){for(var h=l;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var v=0;v<m.length;v++){var A=m[v],C=A.getSnapshot;A=A.value;try{if(!jr(C(),A))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Lo(l,h,m,v){h&=~Nu,h&=~rl,l.suspendedLanes|=h,l.pingedLanes&=~h,v&&(l.warmLanes|=h),v=l.expirationTimes;for(var A=h;0<A;){var C=31-oe(A),X=1<<C;v[C]=-1,A&=~X}m!==0&&jt(l,m,h)}function ol(){return(li&6)===0?(q0(0),!1):!0}function Pu(){if(In!==null){if(En===0)var l=In.return;else l=In,Dl=bc=null,w0(l),vu=null,yd=0,l=In;for(;l!==null;)Gh(l.alternate,l),l=l.return;In=null}}function Bc(l,h){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,Jz(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),Pu(),pn=l,In=m=as(l.current,null),Xe=h,En=0,Xi=null,Ra=!1,Xh=wt(l,h),Yh=!1,qn=ro=Nu=rl=Uo=Bi=0,Ze=ci=null,kn=!1,(h&8)!==0&&(h|=h&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=h;0<v;){var A=31-oe(v),C=1<<A;h|=l[A],v&=~C}return so=h,td(),m}function Tm(l,h){vn=null,j.H=gd,h===ud||h===wo?(h=S0(),En=3):h===b0?(h=S0(),En=4):En=h===ux?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Xi=h,In===null&&(Bi=1,mm(l,Zs(h,l.current)))}function Zh(){var l=j.H;return j.H=gd,l===null?gd:l}function Mm(){var l=j.A;return j.A=$i,l}function f(){Bi=4,Ra||(Xe&4194048)!==Xe&&bi.current!==null||(Xh=!0),(Uo&134217727)===0&&(rl&134217727)===0||pn===null||Lo(pn,Xe,ro,!1)}function p(l,h,m){var v=li;li|=2;var A=Zh(),C=Mm();(pn!==l||Xe!==h)&&(ao=null,Bc(l,h)),h=!1;var X=Bi;t:do try{if(En!==0&&In!==null){var tt=In,vt=Xi;switch(En){case 8:Pu(),X=6;break t;case 3:case 2:case 9:case 6:bi.current===null&&(h=!0);var Wt=En;if(En=0,Xi=null,xt(l,tt,vt,Wt),m&&Xh){X=0;break t}break;default:Wt=En,En=0,Xi=null,xt(l,tt,vt,Wt)}}x(),X=Bi;break}catch(he){Tm(l,he)}while(!0);return h&&l.shellSuspendCounter++,Dl=bc=null,li=v,j.H=A,j.A=C,In===null&&(pn=null,Xe=0,td()),X}function x(){for(;In!==null;)V(In)}function w(l,h){var m=li;li|=2;var v=Zh(),A=Mm();pn!==l||Xe!==h?(ao=null,dr=Ct()+500,Bc(l,h)):Xh=wt(l,h);t:do try{if(En!==0&&In!==null){h=In;var C=Xi;e:switch(En){case 1:En=0,Xi=null,xt(l,h,C,1);break;case 2:case 9:if(tm(C)){En=0,Xi=null,nt(h);break}h=function(){En!==2&&En!==9||pn!==l||(En=7),Vc(l)},C.then(h,h);break t;case 3:En=7;break t;case 4:En=5;break t;case 7:tm(C)?(En=0,Xi=null,nt(h)):(En=0,Xi=null,xt(l,h,C,7));break;case 5:var X=null;switch(In.tag){case 26:X=In.memoizedState;case 5:case 27:var tt=In;if(!X||EC(X)){En=0,Xi=null;var vt=tt.sibling;if(vt!==null)In=vt;else{var Wt=tt.return;Wt!==null?(In=Wt,Ot(Wt)):In=null}break e}}En=0,Xi=null,xt(l,h,C,5);break;case 6:En=0,Xi=null,xt(l,h,C,6);break;case 8:Pu(),Bi=6;break t;default:throw Error(n(462))}}I();break}catch(he){Tm(l,he)}while(!0);return Dl=bc=null,j.H=v,j.A=A,li=m,In!==null?0:(pn=null,Xe=0,td(),Bi)}function I(){for(;In!==null&&!zt();)V(In)}function V(l){var h=Mu(l.alternate,l,so);l.memoizedProps=l.pendingProps,h===null?Ot(l):In=h}function nt(l){var h=l,m=h.alternate;switch(h.tag){case 15:case 0:h=Sa(m,h,h.pendingProps,h.type,void 0,Xe);break;case 11:h=Sa(m,h,h.pendingProps,h.type.render,h.ref,Xe);break;case 5:w0(h);default:Gh(m,h),h=In=p0(h,so),h=Mu(m,h,so)}l.memoizedProps=l.pendingProps,h===null?Ot(l):In=h}function xt(l,h,m,v){Dl=bc=null,w0(h),vu=null,yd=0;var A=h.return;try{if(lT(l,A,h,m,Xe)){Bi=1,mm(l,Zs(m,l.current)),In=null;return}}catch(C){if(A!==null)throw In=A,C;Bi=1,mm(l,Zs(m,l.current)),In=null;return}h.flags&32768?(Jn||v===1?l=!0:Xh||(Xe&536870912)!==0?l=!1:(Ra=l=!0,(v===2||v===9||v===3||v===6)&&(v=bi.current,v!==null&&v.tag===13&&(v.flags|=16384))),ue(h,l)):Ot(h)}function Ot(l){var h=l;do{if((h.flags&32768)!==0){ue(h,Ra);return}l=h.return;var m=G0(h.alternate,h,so);if(m!==null){In=m;return}if(h=h.sibling,h!==null){In=h;return}In=h=l}while(h!==null);Bi===0&&(Bi=5)}function ue(l,h){do{var m=Hh(l.alternate,l);if(m!==null){m.flags&=32767,In=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(l=l.sibling,l!==null)){In=l;return}In=l=m}while(l!==null);Bi=6,In=null}function Ae(l,h,m,v,A,C,X,tt,vt){l.cancelPendingCommit=null;do zc();while(Rs!==0);if((li&6)!==0)throw Error(n(327));if(h!==null){if(h===l.current)throw Error(n(177));if(C=h.lanes|h.childLanes,C|=Wp,se(l,m,C,X,tt,vt),l===pn&&(In=pn=null,Xe=0),Ti=h,pr=l,Da=m,Hl=C,Td=A,Ia=v,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,$n(Nt,function(){return Fc(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||v){v=j.T,j.T=null,A=J.p,J.p=2,X=li,li|=4;try{ws(l,h,m)}finally{li=X,J.p=A,j.T=v}}Rs=1,Ne(),Ue(),mn()}}function Ne(){if(Rs===1){Rs=0;var l=pr,h=Ti,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=j.T,j.T=null;var v=J.p;J.p=2;var A=li;li|=4;try{_m(h,l);var C=vT,X=o0(l.containerInfo),tt=C.focusedElem,vt=C.selectionRange;if(X!==tt&&tt&&tt.ownerDocument&&a0(tt.ownerDocument.documentElement,tt)){if(vt!==null&&Qf(tt)){var Wt=vt.start,he=vt.end;if(he===void 0&&(he=Wt),"selectionStart"in tt)tt.selectionStart=Wt,tt.selectionEnd=Math.min(he,tt.value.length);else{var pe=tt.ownerDocument||document,Zt=pe&&pe.defaultView||window;if(Zt.getSelection){var Qt=Zt.getSelection(),hn=tt.textContent.length,tn=Math.min(vt.start,hn),Oi=vt.end===void 0?tn:Math.min(vt.end,hn);!Qt.extend&&tn>Oi&&(X=Oi,Oi=tn,tn=X);var It=r0(tt,tn),Mt=r0(tt,Oi);if(It&&Mt&&(Qt.rangeCount!==1||Qt.anchorNode!==It.node||Qt.anchorOffset!==It.offset||Qt.focusNode!==Mt.node||Qt.focusOffset!==Mt.offset)){var Ht=pe.createRange();Ht.setStart(It.node,It.offset),Qt.removeAllRanges(),tn>Oi?(Qt.addRange(Ht),Qt.extend(Mt.node,Mt.offset)):(Ht.setEnd(Mt.node,Mt.offset),Qt.addRange(Ht))}}}}for(pe=[],Qt=tt;Qt=Qt.parentNode;)Qt.nodeType===1&&pe.push({element:Qt,left:Qt.scrollLeft,top:Qt.scrollTop});for(typeof tt.focus=="function"&&tt.focus(),tt=0;tt<pe.length;tt++){var fe=pe[tt];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Sx=!!yT,vT=yT=null}finally{li=A,J.p=v,j.T=m}}l.current=h,Rs=2}}function Ue(){if(Rs===2){Rs=0;var l=pr,h=Ti,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=j.T,j.T=null;var v=J.p;J.p=2;var A=li;li|=4;try{Fl(l,h.alternate,h)}finally{li=A,J.p=v,j.T=m}}Rs=3}}function mn(){if(Rs===4||Rs===3){Rs=0,Pt();var l=pr,h=Ti,m=Da,v=Ia;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Rs=5:(Rs=0,Ti=pr=null,Na(l,l.pendingLanes));var A=l.pendingLanes;if(A===0&&(Ca=null),Ce(m),h=h.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Lt,h,void 0,(h.current.flags&128)===128)}catch{}if(v!==null){h=j.T,A=J.p,J.p=2,j.T=null;try{for(var C=l.onRecoverableError,X=0;X<v.length;X++){var tt=v[X];C(tt.value,{componentStack:tt.stack})}}finally{j.T=h,J.p=A}}(Da&3)!==0&&zc(),Vc(l),A=l.pendingLanes,(m&4194090)!==0&&(A&42)!==0?l===Ou?al++:(al=0,Ou=l):al=0,q0(0)}}function Na(l,h){(l.pooledCacheLanes&=h)===0&&(h=l.pooledCache,h!=null&&(l.pooledCache=null,Rh(h)))}function zc(l){return Ne(),Ue(),mn(),Fc()}function Fc(){if(Rs!==5)return!1;var l=pr,h=Hl;Hl=0;var m=Ce(Da),v=j.T,A=J.p;try{J.p=32>m?32:m,j.T=null,m=Td,Td=null;var C=pr,X=Da;if(Rs=0,Ti=pr=null,Da=0,(li&6)!==0)throw Error(n(331));var tt=li;if(li|=4,j0(C.current),Sm(C,C.current,X,m),li=tt,q0(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Lt,C)}catch{}return!0}finally{J.p=A,j.T=v,Na(l,h)}}function Yt(l,h,m){h=Zs(m,h),h=gm(l.stateNode,h,2),l=Ol(l,h,2),l!==null&&(ye(l,2),Vc(l))}function Et(l,h,m){if(l.tag===3)Yt(l,l,m);else for(;h!==null;){if(h.tag===3){Yt(h,l,m);break}else if(h.tag===1){var v=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Ca===null||!Ca.has(v))){l=Zs(m,l),m=cx(2),v=Ol(h,m,2),v!==null&&(ym(m,v,h,l),ye(v,2),Vc(v));break}}h=h.return}}function Jt(l,h,m){var v=l.pingCache;if(v===null){v=l.pingCache=new W0;var A=new Set;v.set(h,A)}else A=v.get(h),A===void 0&&(A=new Set,v.set(h,A));A.has(m)||(Yh=!0,A.add(m),l=Ee.bind(null,l,h,m),h.then(l,l))}function Ee(l,h,m){var v=l.pingCache;v!==null&&v.delete(h),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,pn===l&&(Xe&m)===m&&(Bi===4||Bi===3&&(Xe&62914560)===Xe&&300>Ct()-mi?(li&2)===0&&Bc(l,0):Nu|=m,qn===Xe&&(qn=0)),Vc(l)}function je(l,h){h===0&&(h=Ft()),l=Rl(l,h),l!==null&&(ye(l,h),Vc(l))}function zi(l){var h=l.memoizedState,m=0;h!==null&&(m=h.retryLane),je(l,m)}function sn(l,h){var m=0;switch(l.tag){case 13:var v=l.stateNode,A=l.memoizedState;A!==null&&(m=A.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(h),je(l,m)}function $n(l,h){return ct(l,h)}var us=null,Pn=null,ll=!1,Am=!1,cT=!1,Ad=0;function Vc(l){l!==Pn&&l.next===null&&(Pn===null?us=Pn=l:Pn=Pn.next=l),Am=!0,ll||(ll=!0,Gz())}function q0(l,h){if(!cT&&Am){cT=!0;do for(var m=!1,v=us;v!==null;){if(l!==0){var A=v.pendingLanes;if(A===0)var C=0;else{var X=v.suspendedLanes,tt=v.pingedLanes;C=(1<<31-oe(42|l)+1)-1,C&=A&~(X&~tt),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(m=!0,eC(v,C))}else C=Xe,C=ht(v,v===pn?C:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(C&3)===0||wt(v,C)||(m=!0,eC(v,C));v=v.next}while(m);cT=!1}}function Hz(){JR()}function JR(){Am=ll=!1;var l=0;Ad!==0&&(Qz()&&(l=Ad),Ad=0);for(var h=Ct(),m=null,v=us;v!==null;){var A=v.next,C=$R(v,h);C===0?(v.next=null,m===null?us=A:m.next=A,A===null&&(Pn=m)):(m=v,(l!==0||(C&3)!==0)&&(Am=!0)),v=A}q0(l)}function $R(l,h){for(var m=l.suspendedLanes,v=l.pingedLanes,A=l.expirationTimes,C=l.pendingLanes&-62914561;0<C;){var X=31-oe(C),tt=1<<X,vt=A[X];vt===-1?((tt&m)===0||(tt&v)!==0)&&(A[X]=de(tt,h)):vt<=h&&(l.expiredLanes|=tt),C&=~tt}if(h=pn,m=Xe,m=ht(l,l===h?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,m===0||l===h&&(En===2||En===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&Gt(v),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||wt(l,m)){if(h=m&-m,h===l.callbackPriority)return h;switch(v!==null&&Gt(v),Ce(m)){case 2:case 8:m=Ut;break;case 32:m=Nt;break;case 268435456:m=Q;break;default:m=Nt}return v=tC.bind(null,l),m=ct(m,v),l.callbackPriority=h,l.callbackNode=m,h}return v!==null&&v!==null&&Gt(v),l.callbackPriority=2,l.callbackNode=null,2}function tC(l,h){if(Rs!==0&&Rs!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(zc()&&l.callbackNode!==m)return null;var v=Xe;return v=ht(l,l===pn?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(Kh(l,v,h),$R(l,Ct()),l.callbackNode!=null&&l.callbackNode===m?tC.bind(null,l):null)}function eC(l,h){if(zc())return null;Kh(l,h,!0)}function Gz(){$z(function(){(li&6)!==0?ct(Dt,Hz):JR()})}function uT(){return Ad===0&&(Ad=pt()),Ad}function nC(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:qs(""+l)}function iC(l,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,l.id&&m.setAttribute("form",l.id),h.parentNode.insertBefore(m,h),l=new FormData(l),m.parentNode.removeChild(m),l}function jz(l,h,m,v,A){if(h==="submit"&&m&&m.stateNode===A){var C=nC((A[Rn]||null).action),X=v.submitter;X&&(h=(h=X[Rn]||null)?nC(h.formAction):X.getAttribute("formAction"),h!==null&&(C=h,X=null));var tt=new Ls("action","action",null,v,A);l.push({event:tt,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Ad!==0){var vt=X?iC(A,X):new FormData(A);z0(m,{pending:!0,data:vt,method:A.method,action:C},null,vt)}}else typeof C=="function"&&(tt.preventDefault(),vt=X?iC(A,X):new FormData(A),z0(m,{pending:!0,data:vt,method:A.method,action:C},C,vt))},currentTarget:A}]})}}for(var hT=0;hT<$f.length;hT++){var fT=$f[hT],Wz=fT.toLowerCase(),qz=fT[0].toUpperCase()+fT.slice(1);Bs(Wz,"on"+qz)}Bs(Tr,"onAnimationEnd"),Bs(u0,"onAnimationIteration"),Bs(qr,"onAnimationStart"),Bs("dblclick","onDoubleClick"),Bs("focusin","onFocus"),Bs("focusout","onBlur"),Bs(b_,"onTransitionRun"),Bs(Al,"onTransitionStart"),Bs(Eh,"onTransitionCancel"),Bs(wl,"onTransitionEnd"),St("onMouseEnter",["mouseout","mouseover"]),St("onMouseLeave",["mouseout","mouseover"]),St("onPointerEnter",["pointerout","pointerover"]),St("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var X0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(X0));function sC(l,h){h=(h&4)!==0;for(var m=0;m<l.length;m++){var v=l[m],A=v.event;v=v.listeners;t:{var C=void 0;if(h)for(var X=v.length-1;0<=X;X--){var tt=v[X],vt=tt.instance,Wt=tt.currentTarget;if(tt=tt.listener,vt!==C&&A.isPropagationStopped())break t;C=tt,A.currentTarget=Wt;try{C(A)}catch(he){xu(he)}A.currentTarget=null,C=vt}else for(X=0;X<v.length;X++){if(tt=v[X],vt=tt.instance,Wt=tt.currentTarget,tt=tt.listener,vt!==C&&A.isPropagationStopped())break t;C=tt,A.currentTarget=Wt;try{C(A)}catch(he){xu(he)}A.currentTarget=null,C=vt}}}}function zn(l,h){var m=h[vi];m===void 0&&(m=h[vi]=new Set);var v=l+"__bubble";m.has(v)||(rC(h,l,2,!1),m.add(v))}function dT(l,h,m){var v=0;h&&(v|=4),rC(m,l,v,h)}var dx="_reactListening"+Math.random().toString(36).slice(2);function pT(l){if(!l[dx]){l[dx]=!0,Ba.forEach(function(m){m!=="selectionchange"&&(Xz.has(m)||dT(m,!1,l),dT(m,!0,l))});var h=l.nodeType===9?l:l.ownerDocument;h===null||h[dx]||(h[dx]=!0,dT("selectionchange",!1,h))}}function rC(l,h,m,v){switch(CC(h)){case 2:var A=xF;break;case 8:A=bF;break;default:A=RT}m=A.bind(null,h,m,l),A=void 0,!br||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(A=!0),v?A!==void 0?l.addEventListener(h,m,{capture:!0,passive:A}):l.addEventListener(h,m,!0):A!==void 0?l.addEventListener(h,m,{passive:A}):l.addEventListener(h,m,!1)}function mT(l,h,m,v,A){var C=v;if((h&1)===0&&(h&2)===0&&v!==null)t:for(;;){if(v===null)return;var X=v.tag;if(X===3||X===4){var tt=v.stateNode.containerInfo;if(tt===A)break;if(X===4)for(X=v.return;X!==null;){var vt=X.tag;if((vt===3||vt===4)&&X.stateNode.containerInfo===A)return;X=X.return}for(;tt!==null;){if(X=Ps(tt),X===null)return;if(vt=X.tag,vt===5||vt===6||vt===26||vt===27){v=C=X;continue t}tt=tt.parentNode}}v=v.return}Fa(function(){var Wt=C,he=ma(m),pe=[];t:{var Zt=jp.get(l);if(Zt!==void 0){var Qt=Ls,hn=l;switch(l){case"keypress":if(Sr(m)===0)break t;case"keydown":case"keyup":Qt=dc;break;case"focusin":hn="focus",Qt=qa;break;case"focusout":hn="blur",Qt=qa;break;case"beforeblur":case"afterblur":Qt=qa;break;case"click":if(m.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qt=Wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qt=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qt=qo;break;case Tr:case u0:case qr:Qt=uc;break;case wl:Qt=B;break;case"scroll":case"scrollend":Qt=ja;break;case"wheel":Qt=st;break;case"copy":case"cut":case"paste":Qt=Xs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qt=pu;break;case"toggle":case"beforetoggle":Qt=Kt}var tn=(h&4)!==0,Oi=!tn&&(l==="scroll"||l==="scrollend"),It=tn?Zt!==null?Zt+"Capture":null:Zt;tn=[];for(var Mt=Wt,Ht;Mt!==null;){var fe=Mt;if(Ht=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Ht===null||It===null||(fe=Va(Mt,It),fe!=null&&tn.push(Y0(Mt,fe,Ht))),Oi)break;Mt=Mt.return}0<tn.length&&(Zt=new Qt(Zt,hn,null,m,he),pe.push({event:Zt,listeners:tn}))}}if((h&7)===0){t:{if(Zt=l==="mouseover"||l==="pointerover",Qt=l==="mouseout"||l==="pointerout",Zt&&m!==pa&&(hn=m.relatedTarget||m.fromElement)&&(Ps(hn)||hn[Fi]))break t;if((Qt||Zt)&&(Zt=he.window===he?he:(Zt=he.ownerDocument)?Zt.defaultView||Zt.parentWindow:window,Qt?(hn=m.relatedTarget||m.toElement,Qt=Wt,hn=hn?Ps(hn):null,hn!==null&&(Oi=r(hn),tn=hn.tag,hn!==Oi||tn!==5&&tn!==27&&tn!==6)&&(hn=null)):(Qt=null,hn=Wt),Qt!==hn)){if(tn=Wa,fe="onMouseLeave",It="onMouseEnter",Mt="mouse",(l==="pointerout"||l==="pointerover")&&(tn=pu,fe="onPointerLeave",It="onPointerEnter",Mt="pointer"),Oi=Qt==null?Zt:fa(Qt),Ht=hn==null?Zt:fa(hn),Zt=new tn(fe,Mt+"leave",Qt,m,he),Zt.target=Oi,Zt.relatedTarget=Ht,fe=null,Ps(he)===Wt&&(tn=new tn(It,Mt+"enter",hn,m,he),tn.target=Ht,tn.relatedTarget=Oi,fe=tn),Oi=fe,Qt&&hn)e:{for(tn=Qt,It=hn,Mt=0,Ht=tn;Ht;Ht=wm(Ht))Mt++;for(Ht=0,fe=It;fe;fe=wm(fe))Ht++;for(;0<Mt-Ht;)tn=wm(tn),Mt--;for(;0<Ht-Mt;)It=wm(It),Ht--;for(;Mt--;){if(tn===It||It!==null&&tn===It.alternate)break e;tn=wm(tn),It=wm(It)}tn=null}else tn=null;Qt!==null&&aC(pe,Zt,Qt,tn,!1),hn!==null&&Oi!==null&&aC(pe,Oi,hn,tn,!0)}}t:{if(Zt=Wt?fa(Wt):window,Qt=Zt.nodeName&&Zt.nodeName.toLowerCase(),Qt==="select"||Qt==="input"&&Zt.type==="file")var Fe=Bp;else if(s0(Zt))if(zp)Fe=pc;else{Fe=v_;var Bn=$E}else Qt=Zt.nodeName,!Qt||Qt.toLowerCase()!=="input"||Zt.type!=="checkbox"&&Zt.type!=="radio"?Wt&&bo(Wt.elementType)&&(Fe=Bp):Fe=Zf;if(Fe&&(Fe=Fe(l,Wt))){Gr(pe,Fe,m,he);break t}Bn&&Bn(l,Zt,Wt),l==="focusout"&&Wt&&Zt.type==="number"&&Wt.memoizedProps.value!=null&&Vi(Zt,"number",Zt.value)}switch(Bn=Wt?fa(Wt):window,l){case"focusin":(s0(Bn)||Bn.contentEditable==="true")&&(Tl=Bn,Vp=Wt,Jf=null);break;case"focusout":Jf=Vp=Tl=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,c0(pe,m,he);break;case"selectionchange":if(l0)break;case"keydown":case"keyup":c0(pe,m,he)}var We;if(un)t:{switch(l){case"compositionstart":var en="onCompositionStart";break t;case"compositionend":en="onCompositionEnd";break t;case"compositionupdate":en="onCompositionUpdate";break t}en=void 0}else ya?Hr(l,m)&&(en="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(en="onCompositionStart");en&&(Hi&&m.locale!=="ko"&&(ya||en!=="onCompositionStart"?en==="onCompositionEnd"&&ya&&(We=lc()):(Ui=he,ai="value"in Ui?Ui.value:Ui.textContent,ya=!0)),Bn=px(Wt,en),0<Bn.length&&(en=new ur(en,l,null,m,he),pe.push({event:en,listeners:Bn}),We?en.data=We:(We=Xa(m),We!==null&&(en.data=We)))),(We=jn?El(l,m):i0(l,m))&&(en=px(Wt,"onBeforeInput"),0<en.length&&(Bn=new ur("onBeforeInput","beforeinput",null,m,he),pe.push({event:Bn,listeners:en}),Bn.data=We)),jz(pe,l,Wt,m,he)}sC(pe,h)})}function Y0(l,h,m){return{instance:l,listener:h,currentTarget:m}}function px(l,h){for(var m=h+"Capture",v=[];l!==null;){var A=l,C=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||C===null||(A=Va(l,m),A!=null&&v.unshift(Y0(l,A,C)),A=Va(l,h),A!=null&&v.push(Y0(l,A,C))),l.tag===3)return v;l=l.return}return[]}function wm(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function aC(l,h,m,v,A){for(var C=h._reactName,X=[];m!==null&&m!==v;){var tt=m,vt=tt.alternate,Wt=tt.stateNode;if(tt=tt.tag,vt!==null&&vt===v)break;tt!==5&&tt!==26&&tt!==27||Wt===null||(vt=Wt,A?(Wt=Va(m,C),Wt!=null&&X.unshift(Y0(m,Wt,vt))):A||(Wt=Va(m,C),Wt!=null&&X.push(Y0(m,Wt,vt)))),m=m.return}X.length!==0&&l.push({event:h,listeners:X})}var Yz=/\r\n?/g,Kz=/\u0000|\uFFFD/g;function oC(l){return(typeof l=="string"?l:""+l).replace(Yz,`
`).replace(Kz,"")}function lC(l,h){return h=oC(h),oC(l)===h}function mx(){}function Ni(l,h,m,v,A,C){switch(m){case"children":typeof v=="string"?h==="body"||h==="textarea"&&v===""||ri(l,v):(typeof v=="number"||typeof v=="bigint")&&h!=="body"&&ri(l,""+v);break;case"className":De(l,"class",v);break;case"tabIndex":De(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":De(l,m,v);break;case"style":xo(l,v,C);break;case"data":if(h!=="object"){De(l,"data",v);break}case"src":case"href":if(v===""&&(h!=="a"||m!=="href")){l.removeAttribute(m);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(m);break}v=qs(""+v),l.setAttribute(m,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(m==="formAction"?(h!=="input"&&Ni(l,h,"name",A.name,A,null),Ni(l,h,"formEncType",A.formEncType,A,null),Ni(l,h,"formMethod",A.formMethod,A,null),Ni(l,h,"formTarget",A.formTarget,A,null)):(Ni(l,h,"encType",A.encType,A,null),Ni(l,h,"method",A.method,A,null),Ni(l,h,"target",A.target,A,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(m);break}v=qs(""+v),l.setAttribute(m,v);break;case"onClick":v!=null&&(l.onclick=mx);break;case"onScroll":v!=null&&zn("scroll",l);break;case"onScrollEnd":v!=null&&zn("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(m=v.__html,m!=null){if(A.children!=null)throw Error(n(60));l.innerHTML=m}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}m=qs(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(m,""+v):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":v===!0?l.setAttribute(m,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(m,v):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(m,v):l.removeAttribute(m);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(m):l.setAttribute(m,v);break;case"popover":zn("beforetoggle",l),zn("toggle",l),Me(l,"popover",v);break;case"xlinkActuate":Re(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Re(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Re(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Re(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Re(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Re(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Re(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Re(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Re(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Me(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=za.get(m)||m,Me(l,m,v))}}function gT(l,h,m,v,A,C){switch(m){case"style":xo(l,v,C);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(m=v.__html,m!=null){if(A.children!=null)throw Error(n(60));l.innerHTML=m}}break;case"children":typeof v=="string"?ri(l,v):(typeof v=="number"||typeof v=="bigint")&&ri(l,""+v);break;case"onScroll":v!=null&&zn("scroll",l);break;case"onScrollEnd":v!=null&&zn("scrollend",l);break;case"onClick":v!=null&&(l.onclick=mx);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!da.hasOwnProperty(m))t:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),h=m.slice(2,A?m.length-7:void 0),C=l[Rn]||null,C=C!=null?C[m]:null,typeof C=="function"&&l.removeEventListener(h,C,A),typeof v=="function")){typeof C!="function"&&C!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(h,v,A);break t}m in l?l[m]=v:v===!0?l.setAttribute(m,""):Me(l,m,v)}}}function Ir(l,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zn("error",l),zn("load",l);var v=!1,A=!1,C;for(C in m)if(m.hasOwnProperty(C)){var X=m[C];if(X!=null)switch(C){case"src":v=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:Ni(l,h,C,X,m,null)}}A&&Ni(l,h,"srcSet",m.srcSet,m,null),v&&Ni(l,h,"src",m.src,m,null);return;case"input":zn("invalid",l);var tt=C=X=A=null,vt=null,Wt=null;for(v in m)if(m.hasOwnProperty(v)){var he=m[v];if(he!=null)switch(v){case"name":A=he;break;case"type":X=he;break;case"checked":vt=he;break;case"defaultChecked":Wt=he;break;case"value":C=he;break;case"defaultValue":tt=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,h));break;default:Ni(l,h,v,he,m,null)}}is(l,C,tt,vt,Wt,X,A,!1),cn(l);return;case"select":zn("invalid",l),v=X=C=null;for(A in m)if(m.hasOwnProperty(A)&&(tt=m[A],tt!=null))switch(A){case"value":C=tt;break;case"defaultValue":X=tt;break;case"multiple":v=tt;default:Ni(l,h,A,tt,m,null)}h=C,m=X,l.multiple=!!v,h!=null?ei(l,!!v,h,!1):m!=null&&ei(l,!!v,m,!0);return;case"textarea":zn("invalid",l),C=A=v=null;for(X in m)if(m.hasOwnProperty(X)&&(tt=m[X],tt!=null))switch(X){case"value":v=tt;break;case"defaultValue":A=tt;break;case"children":C=tt;break;case"dangerouslySetInnerHTML":if(tt!=null)throw Error(n(91));break;default:Ni(l,h,X,tt,m,null)}zr(l,v,A,C),cn(l);return;case"option":for(vt in m)if(m.hasOwnProperty(vt)&&(v=m[vt],v!=null))switch(vt){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Ni(l,h,vt,v,m,null)}return;case"dialog":zn("beforetoggle",l),zn("toggle",l),zn("cancel",l),zn("close",l);break;case"iframe":case"object":zn("load",l);break;case"video":case"audio":for(v=0;v<X0.length;v++)zn(X0[v],l);break;case"image":zn("error",l),zn("load",l);break;case"details":zn("toggle",l);break;case"embed":case"source":case"link":zn("error",l),zn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Wt in m)if(m.hasOwnProperty(Wt)&&(v=m[Wt],v!=null))switch(Wt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:Ni(l,h,Wt,v,m,null)}return;default:if(bo(h)){for(he in m)m.hasOwnProperty(he)&&(v=m[he],v!==void 0&&gT(l,h,he,v,m,void 0));return}}for(tt in m)m.hasOwnProperty(tt)&&(v=m[tt],v!=null&&Ni(l,h,tt,v,m,null))}function Zz(l,h,m,v){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,C=null,X=null,tt=null,vt=null,Wt=null,he=null;for(Qt in m){var pe=m[Qt];if(m.hasOwnProperty(Qt)&&pe!=null)switch(Qt){case"checked":break;case"value":break;case"defaultValue":vt=pe;default:v.hasOwnProperty(Qt)||Ni(l,h,Qt,null,v,pe)}}for(var Zt in v){var Qt=v[Zt];if(pe=m[Zt],v.hasOwnProperty(Zt)&&(Qt!=null||pe!=null))switch(Zt){case"type":C=Qt;break;case"name":A=Qt;break;case"checked":Wt=Qt;break;case"defaultChecked":he=Qt;break;case"value":X=Qt;break;case"defaultValue":tt=Qt;break;case"children":case"dangerouslySetInnerHTML":if(Qt!=null)throw Error(n(137,h));break;default:Qt!==pe&&Ni(l,h,Zt,Qt,v,pe)}}Sn(l,X,tt,vt,Wt,he,C,A);return;case"select":Qt=X=tt=Zt=null;for(C in m)if(vt=m[C],m.hasOwnProperty(C)&&vt!=null)switch(C){case"value":break;case"multiple":Qt=vt;default:v.hasOwnProperty(C)||Ni(l,h,C,null,v,vt)}for(A in v)if(C=v[A],vt=m[A],v.hasOwnProperty(A)&&(C!=null||vt!=null))switch(A){case"value":Zt=C;break;case"defaultValue":tt=C;break;case"multiple":X=C;default:C!==vt&&Ni(l,h,A,C,v,vt)}h=tt,m=X,v=Qt,Zt!=null?ei(l,!!m,Zt,!1):!!v!=!!m&&(h!=null?ei(l,!!m,h,!0):ei(l,!!m,m?[]:"",!1));return;case"textarea":Qt=Zt=null;for(tt in m)if(A=m[tt],m.hasOwnProperty(tt)&&A!=null&&!v.hasOwnProperty(tt))switch(tt){case"value":break;case"children":break;default:Ni(l,h,tt,null,v,A)}for(X in v)if(A=v[X],C=m[X],v.hasOwnProperty(X)&&(A!=null||C!=null))switch(X){case"value":Zt=A;break;case"defaultValue":Qt=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==C&&Ni(l,h,X,A,v,C)}Zi(l,Zt,Qt);return;case"option":for(var hn in m)if(Zt=m[hn],m.hasOwnProperty(hn)&&Zt!=null&&!v.hasOwnProperty(hn))switch(hn){case"selected":l.selected=!1;break;default:Ni(l,h,hn,null,v,Zt)}for(vt in v)if(Zt=v[vt],Qt=m[vt],v.hasOwnProperty(vt)&&Zt!==Qt&&(Zt!=null||Qt!=null))switch(vt){case"selected":l.selected=Zt&&typeof Zt!="function"&&typeof Zt!="symbol";break;default:Ni(l,h,vt,Zt,v,Qt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tn in m)Zt=m[tn],m.hasOwnProperty(tn)&&Zt!=null&&!v.hasOwnProperty(tn)&&Ni(l,h,tn,null,v,Zt);for(Wt in v)if(Zt=v[Wt],Qt=m[Wt],v.hasOwnProperty(Wt)&&Zt!==Qt&&(Zt!=null||Qt!=null))switch(Wt){case"children":case"dangerouslySetInnerHTML":if(Zt!=null)throw Error(n(137,h));break;default:Ni(l,h,Wt,Zt,v,Qt)}return;default:if(bo(h)){for(var Oi in m)Zt=m[Oi],m.hasOwnProperty(Oi)&&Zt!==void 0&&!v.hasOwnProperty(Oi)&&gT(l,h,Oi,void 0,v,Zt);for(he in v)Zt=v[he],Qt=m[he],!v.hasOwnProperty(he)||Zt===Qt||Zt===void 0&&Qt===void 0||gT(l,h,he,Zt,v,Qt);return}}for(var It in m)Zt=m[It],m.hasOwnProperty(It)&&Zt!=null&&!v.hasOwnProperty(It)&&Ni(l,h,It,null,v,Zt);for(pe in v)Zt=v[pe],Qt=m[pe],!v.hasOwnProperty(pe)||Zt===Qt||Zt==null&&Qt==null||Ni(l,h,pe,Zt,v,Qt)}var yT=null,vT=null;function gx(l){return l.nodeType===9?l:l.ownerDocument}function cC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uC(l,h){if(l===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&h==="foreignObject"?0:l}function _T(l,h){return l==="textarea"||l==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var xT=null;function Qz(){var l=window.event;return l&&l.type==="popstate"?l===xT?!1:(xT=l,!0):(xT=null,!1)}var hC=typeof setTimeout=="function"?setTimeout:void 0,Jz=typeof clearTimeout=="function"?clearTimeout:void 0,fC=typeof Promise=="function"?Promise:void 0,$z=typeof queueMicrotask=="function"?queueMicrotask:typeof fC<"u"?function(l){return fC.resolve(null).then(l).catch(tF)}:hC;function tF(l){setTimeout(function(){throw l})}function Qh(l){return l==="head"}function dC(l,h){var m=h,v=0,A=0;do{var C=m.nextSibling;if(l.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"){if(0<v&&8>v){m=v;var X=l.ownerDocument;if(m&1&&K0(X.documentElement),m&2&&K0(X.body),m&4)for(m=X.head,K0(m),X=m.firstChild;X;){var tt=X.nextSibling,vt=X.nodeName;X[Zn]||vt==="SCRIPT"||vt==="STYLE"||vt==="LINK"&&X.rel.toLowerCase()==="stylesheet"||m.removeChild(X),X=tt}}if(A===0){l.removeChild(C),iy(h);return}A--}else m==="$"||m==="$?"||m==="$!"?A++:v=m.charCodeAt(0)-48;else v=0;m=C}while(m);iy(h)}function bT(l){var h=l.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":bT(m),Nn(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function eF(l,h,m,v){for(;l.nodeType===1;){var A=m;if(l.nodeName.toLowerCase()!==h.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[Zn])switch(h){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(C=l.getAttribute("rel"),C==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(C!==A.rel||l.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||l.getAttribute("title")!==(A.title==null?null:A.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(C=l.getAttribute("src"),(C!==(A.src==null?null:A.src)||l.getAttribute("type")!==(A.type==null?null:A.type)||l.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&C&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(h==="input"&&l.type==="hidden"){var C=A.name==null?null:""+A.name;if(A.type==="hidden"&&l.getAttribute("name")===C)return l}else return l;if(l=Gl(l.nextSibling),l===null)break}return null}function nF(l,h,m){if(h==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=Gl(l.nextSibling),l===null))return null;return l}function ST(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function iF(l,h){var m=l.ownerDocument;if(l.data!=="$?"||m.readyState==="complete")h();else{var v=function(){h(),m.removeEventListener("DOMContentLoaded",v)};m.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Gl(l){for(;l!=null;l=l.nextSibling){var h=l.nodeType;if(h===1||h===3)break;if(h===8){if(h=l.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return l}var ET=null;function pC(l){l=l.previousSibling;for(var h=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return l;h--}else m==="/$"&&h++}l=l.previousSibling}return null}function mC(l,h,m){switch(h=gx(m),l){case"html":if(l=h.documentElement,!l)throw Error(n(452));return l;case"head":if(l=h.head,!l)throw Error(n(453));return l;case"body":if(l=h.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function K0(l){for(var h=l.attributes;h.length;)l.removeAttributeNode(h[0]);Nn(l)}var cl=new Map,gC=new Set;function yx(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Uu=J.d;J.d={f:sF,r:rF,D:aF,C:oF,L:lF,m:cF,X:hF,S:uF,M:fF};function sF(){var l=Uu.f(),h=ol();return l||h}function rF(l){var h=Us(l);h!==null&&h.tag===5&&h.type==="form"?Z_(h):Uu.r(l)}var Rm=typeof document>"u"?null:document;function yC(l,h,m){var v=Rm;if(v&&typeof h=="string"&&h){var A=hi(h);A='link[rel="'+l+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),gC.has(A)||(gC.add(A),l={rel:l,crossOrigin:m,href:h},v.querySelector(A)===null&&(h=v.createElement("link"),Ir(h,"link",l),di(h),v.head.appendChild(h)))}}function aF(l){Uu.D(l),yC("dns-prefetch",l,null)}function oF(l,h){Uu.C(l,h),yC("preconnect",l,h)}function lF(l,h,m){Uu.L(l,h,m);var v=Rm;if(v&&l&&h){var A='link[rel="preload"][as="'+hi(h)+'"]';h==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+hi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+hi(m.imageSizes)+'"]')):A+='[href="'+hi(l)+'"]';var C=A;switch(h){case"style":C=Cm(l);break;case"script":C=Dm(l)}cl.has(C)||(l=d({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:l,as:h},m),cl.set(C,l),v.querySelector(A)!==null||h==="style"&&v.querySelector(Z0(C))||h==="script"&&v.querySelector(Q0(C))||(h=v.createElement("link"),Ir(h,"link",l),di(h),v.head.appendChild(h)))}}function cF(l,h){Uu.m(l,h);var m=Rm;if(m&&l){var v=h&&typeof h.as=="string"?h.as:"script",A='link[rel="modulepreload"][as="'+hi(v)+'"][href="'+hi(l)+'"]',C=A;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Dm(l)}if(!cl.has(C)&&(l=d({rel:"modulepreload",href:l},h),cl.set(C,l),m.querySelector(A)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Q0(C)))return}v=m.createElement("link"),Ir(v,"link",l),di(v),m.head.appendChild(v)}}}function uF(l,h,m){Uu.S(l,h,m);var v=Rm;if(v&&l){var A=Br(v).hoistableStyles,C=Cm(l);h=h||"default";var X=A.get(C);if(!X){var tt={loading:0,preload:null};if(X=v.querySelector(Z0(C)))tt.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":h},m),(m=cl.get(C))&&TT(l,m);var vt=X=v.createElement("link");di(vt),Ir(vt,"link",l),vt._p=new Promise(function(Wt,he){vt.onload=Wt,vt.onerror=he}),vt.addEventListener("load",function(){tt.loading|=1}),vt.addEventListener("error",function(){tt.loading|=2}),tt.loading|=4,vx(X,h,v)}X={type:"stylesheet",instance:X,count:1,state:tt},A.set(C,X)}}}function hF(l,h){Uu.X(l,h);var m=Rm;if(m&&l){var v=Br(m).hoistableScripts,A=Dm(l),C=v.get(A);C||(C=m.querySelector(Q0(A)),C||(l=d({src:l,async:!0},h),(h=cl.get(A))&&MT(l,h),C=m.createElement("script"),di(C),Ir(C,"link",l),m.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(A,C))}}function fF(l,h){Uu.M(l,h);var m=Rm;if(m&&l){var v=Br(m).hoistableScripts,A=Dm(l),C=v.get(A);C||(C=m.querySelector(Q0(A)),C||(l=d({src:l,async:!0,type:"module"},h),(h=cl.get(A))&&MT(l,h),C=m.createElement("script"),di(C),Ir(C,"link",l),m.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},v.set(A,C))}}function vC(l,h,m,v){var A=(A=ut.current)?yx(A):null;if(!A)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Cm(m.href),m=Br(A).hoistableStyles,v=m.get(h),v||(v={type:"style",instance:null,count:0,state:null},m.set(h,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=Cm(m.href);var C=Br(A).hoistableStyles,X=C.get(l);if(X||(A=A.ownerDocument||A,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(l,X),(C=A.querySelector(Z0(l)))&&!C._p&&(X.instance=C,X.state.loading=5),cl.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},cl.set(l,m),C||dF(A,l,m,X.state))),h&&v===null)throw Error(n(528,""));return X}if(h&&v!==null)throw Error(n(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Dm(m),m=Br(A).hoistableScripts,v=m.get(h),v||(v={type:"script",instance:null,count:0,state:null},m.set(h,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function Cm(l){return'href="'+hi(l)+'"'}function Z0(l){return'link[rel="stylesheet"]['+l+"]"}function _C(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function dF(l,h,m,v){l.querySelector('link[rel="preload"][as="style"]['+h+"]")?v.loading=1:(h=l.createElement("link"),v.preload=h,h.addEventListener("load",function(){return v.loading|=1}),h.addEventListener("error",function(){return v.loading|=2}),Ir(h,"link",m),di(h),l.head.appendChild(h))}function Dm(l){return'[src="'+hi(l)+'"]'}function Q0(l){return"script[async]"+l}function xC(l,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var v=l.querySelector('style[data-href~="'+hi(m.href)+'"]');if(v)return h.instance=v,di(v),v;var A=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),di(v),Ir(v,"style",A),vx(v,m.precedence,l),h.instance=v;case"stylesheet":A=Cm(m.href);var C=l.querySelector(Z0(A));if(C)return h.state.loading|=4,h.instance=C,di(C),C;v=_C(m),(A=cl.get(A))&&TT(v,A),C=(l.ownerDocument||l).createElement("link"),di(C);var X=C;return X._p=new Promise(function(tt,vt){X.onload=tt,X.onerror=vt}),Ir(C,"link",v),h.state.loading|=4,vx(C,m.precedence,l),h.instance=C;case"script":return C=Dm(m.src),(A=l.querySelector(Q0(C)))?(h.instance=A,di(A),A):(v=m,(A=cl.get(C))&&(v=d({},m),MT(v,A)),l=l.ownerDocument||l,A=l.createElement("script"),di(A),Ir(A,"link",v),l.head.appendChild(A),h.instance=A);case"void":return null;default:throw Error(n(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(v=h.instance,h.state.loading|=4,vx(v,m.precedence,l));return h.instance}function vx(l,h,m){for(var v=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=v.length?v[v.length-1]:null,C=A,X=0;X<v.length;X++){var tt=v[X];if(tt.dataset.precedence===h)C=tt;else if(C!==A)break}C?C.parentNode.insertBefore(l,C.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(l,h.firstChild))}function TT(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.title==null&&(l.title=h.title)}function MT(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.integrity==null&&(l.integrity=h.integrity)}var _x=null;function bC(l,h,m){if(_x===null){var v=new Map,A=_x=new Map;A.set(m,v)}else A=_x,v=A.get(m),v||(v=new Map,A.set(m,v));if(v.has(l))return v;for(v.set(l,null),m=m.getElementsByTagName(l),A=0;A<m.length;A++){var C=m[A];if(!(C[Zn]||C[fn]||l==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var X=C.getAttribute(h)||"";X=l+X;var tt=v.get(X);tt?tt.push(C):v.set(X,[C])}}return v}function SC(l,h,m){l=l.ownerDocument||l,l.head.insertBefore(m,h==="title"?l.querySelector("head > title"):null)}function pF(l,h,m){if(m===1||h.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return l=h.disabled,typeof h.precedence=="string"&&l==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function EC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var J0=null;function mF(){}function gF(l,h,m){if(J0===null)throw Error(n(475));var v=J0;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=Cm(m.href),C=l.querySelector(Z0(A));if(C){l=C._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(v.count++,v=xx.bind(v),l.then(v,v)),h.state.loading|=4,h.instance=C,di(C);return}C=l.ownerDocument||l,m=_C(m),(A=cl.get(A))&&TT(m,A),C=C.createElement("link"),di(C);var X=C;X._p=new Promise(function(tt,vt){X.onload=tt,X.onerror=vt}),Ir(C,"link",m),h.instance=C}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(v.count++,h=xx.bind(v),l.addEventListener("load",h),l.addEventListener("error",h))}}function yF(){if(J0===null)throw Error(n(475));var l=J0;return l.stylesheets&&l.count===0&&AT(l,l.stylesheets),0<l.count?function(h){var m=setTimeout(function(){if(l.stylesheets&&AT(l,l.stylesheets),l.unsuspend){var v=l.unsuspend;l.unsuspend=null,v()}},6e4);return l.unsuspend=h,function(){l.unsuspend=null,clearTimeout(m)}}:null}function xx(){if(this.count--,this.count===0){if(this.stylesheets)AT(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var bx=null;function AT(l,h){l.stylesheets=null,l.unsuspend!==null&&(l.count++,bx=new Map,h.forEach(vF,l),bx=null,xx.call(l))}function vF(l,h){if(!(h.state.loading&4)){var m=bx.get(l);if(m)var v=m.get(null);else{m=new Map,bx.set(l,m);for(var A=l.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<A.length;C++){var X=A[C];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(m.set(X.dataset.precedence,X),v=X)}v&&m.set(null,v)}A=h.instance,X=A.getAttribute("data-precedence"),C=m.get(X)||v,C===v&&m.set(null,A),m.set(X,A),this.count++,v=xx.bind(this),A.addEventListener("load",v),A.addEventListener("error",v),C?C.parentNode.insertBefore(A,C.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(A,l.firstChild)),h.state.loading|=4}}var $0={$$typeof:N,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function _F(l,h,m,v,A,C,X,tt){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ie(0),this.hiddenUpdates=ie(null),this.identifierPrefix=v,this.onUncaughtError=A,this.onCaughtError=C,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=tt,this.incompleteTransitions=new Map}function TC(l,h,m,v,A,C,X,tt,vt,Wt,he,pe){return l=new _F(l,h,m,X,tt,vt,Wt,pe),h=1,C===!0&&(h|=24),C=Xr(3,null,null,h),l.current=C,C.stateNode=l,h=Qp(),h.refCount++,l.pooledCache=h,h.refCount++,C.memoizedState={element:v,isDehydrated:m,cache:h},E0(C),l}function MC(l){return l?(l=yc,l):yc}function AC(l,h,m,v,A,C){A=MC(A),v.context===null?v.context=A:v.pendingContext=A,v=Zo(h),v.payload={element:m},C=C===void 0?null:C,C!==null&&(v.callback=C),m=Ol(l,v,h),m!==null&&(Dr(m,l,h),yu(m,l,h))}function wC(l,h){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<h?m:h}}function wT(l,h){wC(l,h),(l=l.alternate)&&wC(l,h)}function RC(l){if(l.tag===13){var h=Rl(l,67108864);h!==null&&Dr(h,l,67108864),wT(l,67108864)}}var Sx=!0;function xF(l,h,m,v){var A=j.T;j.T=null;var C=J.p;try{J.p=2,RT(l,h,m,v)}finally{J.p=C,j.T=A}}function bF(l,h,m,v){var A=j.T;j.T=null;var C=J.p;try{J.p=8,RT(l,h,m,v)}finally{J.p=C,j.T=A}}function RT(l,h,m,v){if(Sx){var A=CT(v);if(A===null)mT(l,h,v,Ex,m),DC(l,v);else if(EF(A,l,h,m,v))v.stopPropagation();else if(DC(l,v),h&4&&-1<SF.indexOf(l)){for(;A!==null;){var C=Us(A);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var X=re(C.pendingLanes);if(X!==0){var tt=C;for(tt.pendingLanes|=2,tt.entangledLanes|=2;X;){var vt=1<<31-oe(X);tt.entanglements[1]|=vt,X&=~vt}Vc(C),(li&6)===0&&(dr=Ct()+500,q0(0))}}break;case 13:tt=Rl(C,2),tt!==null&&Dr(tt,C,2),ol(),wT(C,2)}if(C=CT(v),C===null&&mT(l,h,v,Ex,m),C===A)break;A=C}A!==null&&v.stopPropagation()}else mT(l,h,v,null,m)}}function CT(l){return l=ma(l),DT(l)}var Ex=null;function DT(l){if(Ex=null,l=Ps(l),l!==null){var h=r(l);if(h===null)l=null;else{var m=h.tag;if(m===13){if(l=a(h),l!==null)return l;l=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;l=null}else h!==l&&(l=null)}}return Ex=l,null}function CC(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bt()){case Dt:return 2;case Ut:return 8;case Nt:case ge:return 32;case Q:return 268435456;default:return 32}default:return 32}}var IT=!1,Jh=null,$h=null,tf=null,ty=new Map,ey=new Map,ef=[],SF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function DC(l,h){switch(l){case"focusin":case"focusout":Jh=null;break;case"dragenter":case"dragleave":$h=null;break;case"mouseover":case"mouseout":tf=null;break;case"pointerover":case"pointerout":ty.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":ey.delete(h.pointerId)}}function ny(l,h,m,v,A,C){return l===null||l.nativeEvent!==C?(l={blockedOn:h,domEventName:m,eventSystemFlags:v,nativeEvent:C,targetContainers:[A]},h!==null&&(h=Us(h),h!==null&&RC(h)),l):(l.eventSystemFlags|=v,h=l.targetContainers,A!==null&&h.indexOf(A)===-1&&h.push(A),l)}function EF(l,h,m,v,A){switch(h){case"focusin":return Jh=ny(Jh,l,h,m,v,A),!0;case"dragenter":return $h=ny($h,l,h,m,v,A),!0;case"mouseover":return tf=ny(tf,l,h,m,v,A),!0;case"pointerover":var C=A.pointerId;return ty.set(C,ny(ty.get(C)||null,l,h,m,v,A)),!0;case"gotpointercapture":return C=A.pointerId,ey.set(C,ny(ey.get(C)||null,l,h,m,v,A)),!0}return!1}function IC(l){var h=Ps(l.target);if(h!==null){var m=r(h);if(m!==null){if(h=m.tag,h===13){if(h=a(m),h!==null){l.blockedOn=h,Ln(l.priority,function(){if(m.tag===13){var v=ts();v=we(v);var A=Rl(m,v);A!==null&&Dr(A,m,v),wT(m,v)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Tx(l){if(l.blockedOn!==null)return!1;for(var h=l.targetContainers;0<h.length;){var m=CT(l.nativeEvent);if(m===null){m=l.nativeEvent;var v=new m.constructor(m.type,m);pa=v,m.target.dispatchEvent(v),pa=null}else return h=Us(m),h!==null&&RC(h),l.blockedOn=m,!1;h.shift()}return!0}function NC(l,h,m){Tx(l)&&m.delete(h)}function TF(){IT=!1,Jh!==null&&Tx(Jh)&&(Jh=null),$h!==null&&Tx($h)&&($h=null),tf!==null&&Tx(tf)&&(tf=null),ty.forEach(NC),ey.forEach(NC)}function Mx(l,h){l.blockedOn===h&&(l.blockedOn=null,IT||(IT=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,TF)))}var Ax=null;function OC(l){Ax!==l&&(Ax=l,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ax===l&&(Ax=null);for(var h=0;h<l.length;h+=3){var m=l[h],v=l[h+1],A=l[h+2];if(typeof v!="function"){if(DT(v||m)===null)continue;break}var C=Us(m);C!==null&&(l.splice(h,3),h-=3,z0(C,{pending:!0,data:A,method:m.method,action:v},v,A))}}))}function iy(l){function h(vt){return Mx(vt,l)}Jh!==null&&Mx(Jh,l),$h!==null&&Mx($h,l),tf!==null&&Mx(tf,l),ty.forEach(h),ey.forEach(h);for(var m=0;m<ef.length;m++){var v=ef[m];v.blockedOn===l&&(v.blockedOn=null)}for(;0<ef.length&&(m=ef[0],m.blockedOn===null);)IC(m),m.blockedOn===null&&ef.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(v=0;v<m.length;v+=3){var A=m[v],C=m[v+1],X=A[Rn]||null;if(typeof C=="function")X||OC(m);else if(X){var tt=null;if(C&&C.hasAttribute("formAction")){if(A=C,X=C[Rn]||null)tt=X.formAction;else if(DT(A)!==null)continue}else tt=X.action;typeof tt=="function"?m[v+1]=tt:(m.splice(v,3),v-=3),OC(m)}}}function NT(l){this._internalRoot=l}wx.prototype.render=NT.prototype.render=function(l){var h=this._internalRoot;if(h===null)throw Error(n(409));var m=h.current,v=ts();AC(m,v,l,h,null,null)},wx.prototype.unmount=NT.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var h=l.containerInfo;AC(l.current,2,null,l,null,null),ol(),h[Fi]=null}};function wx(l){this._internalRoot=l}wx.prototype.unstable_scheduleHydration=function(l){if(l){var h=Ie();l={blockedOn:null,target:l,priority:h};for(var m=0;m<ef.length&&h!==0&&h<ef[m].priority;m++);ef.splice(m,0,l),m===0&&IC(l)}};var PC=t.version;if(PC!=="19.1.1")throw Error(n(527,PC,"19.1.1"));J.findDOMNode=function(l){var h=l._reactInternals;if(h===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=c(h),l=l!==null?u(l):null,l=l===null?null:l.stateNode,l};var MF={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rx.isDisabled&&Rx.supportsFiber)try{Lt=Rx.inject(MF),Rt=Rx}catch{}}return ry.createRoot=function(l,h){if(!s(l))throw Error(n(299));var m=!1,v="",A=_d,C=pm,X=lx,tt=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(C=h.onCaughtError),h.onRecoverableError!==void 0&&(X=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(tt=h.unstable_transitionCallbacks)),h=TC(l,1,!1,null,null,m,v,A,C,X,tt,null),l[Fi]=h.current,pT(l),new NT(h)},ry.hydrateRoot=function(l,h,m){if(!s(l))throw Error(n(299));var v=!1,A="",C=_d,X=pm,tt=lx,vt=null,Wt=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(C=m.onUncaughtError),m.onCaughtError!==void 0&&(X=m.onCaughtError),m.onRecoverableError!==void 0&&(tt=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(vt=m.unstable_transitionCallbacks),m.formState!==void 0&&(Wt=m.formState)),h=TC(l,1,!0,h,m??null,v,A,C,X,tt,vt,Wt),h.context=MC(null),m=h.current,v=ts(),v=we(v),A=Zo(v),A.callback=null,Ol(m,A,v),m=v,h.current.lanes=m,ye(h,m),Vc(h),l[Fi]=h.current,pT(l),new wx(h)},ry.version="19.1.1",ry}var jC;function UF(){if(jC)return UT.exports;jC=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),UT.exports=PF(),UT.exports}var LF=UF();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var WC="popstate";function kF(i={}){function t(n,s){let{pathname:r,search:a,hash:o}=n.location;return IA("",{pathname:r,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(n,s){return typeof s=="string"?s:lv(s)}return zF(t,e,null,i)}function es(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function ec(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function BF(){return Math.random().toString(36).substring(2,10)}function qC(i,t){return{usr:i.state,key:i.key,idx:t}}function IA(i,t,e=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof t=="string"?Vg(t):t,state:e,key:t&&t.key||n||BF()}}function lv({pathname:i="/",search:t="",hash:e=""}){return t&&t!=="?"&&(i+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(i+=e.charAt(0)==="#"?e:"#"+e),i}function Vg(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substring(e),i=i.substring(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substring(n),i=i.substring(0,n)),i&&(t.pathname=i)}return t}function zF(i,t,e,n={}){let{window:s=document.defaultView,v5Compat:r=!1}=n,a=s.history,o="POP",c=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function g(){o="POP";let S=d(),E=S==null?null:S-u;u=S,c&&c({action:o,location:M.location,delta:E})}function y(S,E){o="PUSH";let R=IA(M.location,S,E);u=d()+1;let N=qC(R,u),P=M.createHref(R);try{a.pushState(N,"",P)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(P)}r&&c&&c({action:o,location:M.location,delta:1})}function _(S,E){o="REPLACE";let R=IA(M.location,S,E);u=d();let N=qC(R,u),P=M.createHref(R);a.replaceState(N,"",P),r&&c&&c({action:o,location:M.location,delta:0})}function b(S){return FF(S)}let M={get action(){return o},get location(){return i(s,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(WC,g),c=S,()=>{s.removeEventListener(WC,g),c=null}},createHref(S){return t(s,S)},createURL:b,encodeLocation(S){let E=b(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:_,go(S){return a.go(S)}};return M}function FF(i,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),es(e,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:lv(i);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function fP(i,t,e="/"){return VF(i,t,e,!1)}function VF(i,t,e,n){let s=typeof t=="string"?Vg(t):t,r=rh(s.pathname||"/",e);if(r==null)return null;let a=dP(i);HF(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=$F(r);o=QF(a[c],u,n)}return o}function dP(i,t=[],e=[],n="",s=!1){let r=(a,o,c=s,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;es(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let g=th([n,d.relativePath]),y=e.concat(d);a.children&&a.children.length>0&&(es(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),dP(a.children,t,y,g,c)),!(a.path==null&&!a.index)&&t.push({path:g,score:KF(g,a.index),routesMeta:y})};return i.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))r(a,o);else for(let c of pP(a.path))r(a,o,!0,c)}),t}function pP(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,s=e.endsWith("?"),r=e.replace(/\?$/,"");if(n.length===0)return s?[r,""]:[r];let a=pP(n.join("/")),o=[];return o.push(...a.map(c=>c===""?r:[r,c].join("/"))),s&&o.push(...a),o.map(c=>i.startsWith("/")&&c===""?"/":c)}function HF(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:ZF(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var GF=/^:[\w-]+$/,jF=3,WF=2,qF=1,XF=10,YF=-2,XC=i=>i==="*";function KF(i,t){let e=i.split("/"),n=e.length;return e.some(XC)&&(n+=YF),t&&(n+=WF),e.filter(s=>!XC(s)).reduce((s,r)=>s+(GF.test(r)?jF:r===""?qF:XF),n)}function ZF(i,t){return i.length===t.length&&i.slice(0,-1).every((n,s)=>n===t[s])?i[i.length-1]-t[t.length-1]:0}function QF(i,t,e=!1){let{routesMeta:n}=i,s={},r="/",a=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=r==="/"?t:t.slice(r.length)||"/",g=gS({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),y=c.route;if(!g&&u&&e&&!n[n.length-1].route.index&&(g=gS({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:th([r,g.pathname]),pathnameBase:iV(th([r,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(r=th([r,g.pathnameBase]))}return a}function gS(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=JF(i.path,i.caseSensitive,i.end),s=t.match(e);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:g},y)=>{if(d==="*"){let b=o[y]||"";a=r.slice(0,r.length-b.length).replace(/(.)\/+$/,"$1")}const _=o[y];return g&&!_?u[d]=void 0:u[d]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:a,pattern:i}}function JF(i,t=!1,e=!0){ec(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function $F(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ec(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),i}}function rh(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}function tV(i,t="/"){let{pathname:e,search:n="",hash:s=""}=typeof i=="string"?Vg(i):i;return{pathname:e?e.startsWith("/")?e:eV(e,t):t,search:sV(n),hash:rV(s)}}function eV(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function zT(i,t,e,n){return`Cannot include a '${i}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nV(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Vw(i){let t=nV(i);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Hw(i,t,e,n=!1){let s;typeof i=="string"?s=Vg(i):(s={...i},es(!s.pathname||!s.pathname.includes("?"),zT("?","pathname","search",s)),es(!s.pathname||!s.pathname.includes("#"),zT("#","pathname","hash",s)),es(!s.search||!s.search.includes("#"),zT("#","search","hash",s)));let r=i===""||s.pathname==="",a=r?"/":s.pathname,o;if(a==null)o=e;else{let g=t.length-1;if(!n&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),g-=1;s.pathname=y.join("/")}o=g>=0?t[g]:"/"}let c=tV(s,o),u=a&&a!=="/"&&a.endsWith("/"),d=(r||a===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var th=i=>i.join("/").replace(/\/\/+/g,"/"),iV=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),sV=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,rV=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function aV(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var mP=["POST","PUT","PATCH","DELETE"];new Set(mP);var oV=["GET",...mP];new Set(oV);var Hg=bt.createContext(null);Hg.displayName="DataRouter";var F1=bt.createContext(null);F1.displayName="DataRouterState";bt.createContext(!1);var gP=bt.createContext({isTransitioning:!1});gP.displayName="ViewTransition";var lV=bt.createContext(new Map);lV.displayName="Fetchers";var cV=bt.createContext(null);cV.displayName="Await";var rc=bt.createContext(null);rc.displayName="Navigation";var qv=bt.createContext(null);qv.displayName="Location";var cu=bt.createContext({outlet:null,matches:[],isDataRoute:!1});cu.displayName="Route";var Gw=bt.createContext(null);Gw.displayName="RouteError";function uV(i,{relative:t}={}){es(Gg(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=bt.useContext(rc),{hash:s,pathname:r,search:a}=Xv(i,{relative:t}),o=r;return e!=="/"&&(o=r==="/"?e:th([e,r])),n.createHref({pathname:o,search:a,hash:s})}function Gg(){return bt.useContext(qv)!=null}function uu(){return es(Gg(),"useLocation() may be used only in the context of a <Router> component."),bt.useContext(qv).location}var yP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vP(i){bt.useContext(rc).static||bt.useLayoutEffect(i)}function V1(){let{isDataRoute:i}=bt.useContext(cu);return i?EV():hV()}function hV(){es(Gg(),"useNavigate() may be used only in the context of a <Router> component.");let i=bt.useContext(Hg),{basename:t,navigator:e}=bt.useContext(rc),{matches:n}=bt.useContext(cu),{pathname:s}=uu(),r=JSON.stringify(Vw(n)),a=bt.useRef(!1);return vP(()=>{a.current=!0}),bt.useCallback((c,u={})=>{if(ec(a.current,yP),!a.current)return;if(typeof c=="number"){e.go(c);return}let d=Hw(c,JSON.parse(r),s,u.relative==="path");i==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:th([t,d.pathname])),(u.replace?e.replace:e.push)(d,u.state,u)},[t,e,r,s,i])}bt.createContext(null);function Xv(i,{relative:t}={}){let{matches:e}=bt.useContext(cu),{pathname:n}=uu(),s=JSON.stringify(Vw(e));return bt.useMemo(()=>Hw(i,JSON.parse(s),n,t==="path"),[i,s,n,t])}function fV(i,t){return _P(i,t)}function _P(i,t,e,n,s){es(Gg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=bt.useContext(rc),{matches:a}=bt.useContext(cu),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",g=o&&o.route;{let R=g&&g.path||"";xP(u,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let y=uu(),_;if(t){let R=typeof t=="string"?Vg(t):t;es(d==="/"||R.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${R.pathname}" was given in the \`location\` prop.`),_=R}else _=y;let b=_.pathname||"/",M=b;if(d!=="/"){let R=d.replace(/^\//,"").split("/");M="/"+b.replace(/^\//,"").split("/").slice(R.length).join("/")}let S=fP(i,{pathname:M});ec(g||S!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),ec(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=yV(S&&S.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:th([d,r.encodeLocation?r.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?d:th([d,r.encodeLocation?r.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),a,e,n,s);return t&&E?bt.createElement(qv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},E):E}function dV(){let i=SV(),t=aV(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",i),a=bt.createElement(bt.Fragment,null,bt.createElement("p",null,"💿 Hey developer 👋"),bt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",bt.createElement("code",{style:r},"ErrorBoundary")," or"," ",bt.createElement("code",{style:r},"errorElement")," prop on your route.")),bt.createElement(bt.Fragment,null,bt.createElement("h2",null,"Unexpected Application Error!"),bt.createElement("h3",{style:{fontStyle:"italic"}},t),e?bt.createElement("pre",{style:s},e):null,a)}var pV=bt.createElement(dV,null),mV=class extends bt.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,t){return t.location!==i.location||t.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:t.error,location:t.location,revalidation:i.revalidation||t.revalidation}}componentDidCatch(i,t){this.props.unstable_onError?this.props.unstable_onError(i,t):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?bt.createElement(cu.Provider,{value:this.props.routeContext},bt.createElement(Gw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gV({routeContext:i,match:t,children:e}){let n=bt.useContext(Hg);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),bt.createElement(cu.Provider,{value:i},e)}function yV(i,t=[],e=null,n=null,s=null){if(i==null){if(!e)return null;if(e.errors)i=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let r=i,a=e?.errors;if(a!=null){let u=r.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);es(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,u+1))}let o=!1,c=-1;if(e)for(let u=0;u<r.length;u++){let d=r[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:g,errors:y}=e,_=d.route.loader&&!g.hasOwnProperty(d.route.id)&&(!y||y[d.route.id]===void 0);if(d.route.lazy||_){o=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}return r.reduceRight((u,d,g)=>{let y,_=!1,b=null,M=null;e&&(y=a&&d.route.id?a[d.route.id]:void 0,b=d.route.errorElement||pV,o&&(c<0&&g===0?(xP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,M=null):c===g&&(_=!0,M=d.route.hydrateFallbackElement||null)));let S=t.concat(r.slice(0,g+1)),E=()=>{let R;return y?R=b:_?R=M:d.route.Component?R=bt.createElement(d.route.Component,null):d.route.element?R=d.route.element:R=u,bt.createElement(gV,{match:d,routeContext:{outlet:u,matches:S,isDataRoute:e!=null},children:R})};return e&&(d.route.ErrorBoundary||d.route.errorElement||g===0)?bt.createElement(mV,{location:e.location,revalidation:e.revalidation,component:b,error:y,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):E()},null)}function jw(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vV(i){let t=bt.useContext(Hg);return es(t,jw(i)),t}function _V(i){let t=bt.useContext(F1);return es(t,jw(i)),t}function xV(i){let t=bt.useContext(cu);return es(t,jw(i)),t}function Ww(i){let t=xV(i),e=t.matches[t.matches.length-1];return es(e.route.id,`${i} can only be used on routes that contain a unique "id"`),e.route.id}function bV(){return Ww("useRouteId")}function SV(){let i=bt.useContext(Gw),t=_V("useRouteError"),e=Ww("useRouteError");return i!==void 0?i:t.errors?.[e]}function EV(){let{router:i}=vV("useNavigate"),t=Ww("useNavigate"),e=bt.useRef(!1);return vP(()=>{e.current=!0}),bt.useCallback(async(s,r={})=>{ec(e.current,yP),e.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:t,...r}))},[i,t])}var YC={};function xP(i,t,e){!t&&!YC[i]&&(YC[i]=!0,ec(!1,e))}bt.memo(TV);function TV({routes:i,future:t,state:e,unstable_onError:n}){return _P(i,void 0,e,n,t)}function bP({to:i,replace:t,state:e,relative:n}){es(Gg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=bt.useContext(rc);ec(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=bt.useContext(cu),{pathname:a}=uu(),o=V1(),c=Hw(i,Vw(r),a,n==="path"),u=JSON.stringify(c);return bt.useEffect(()=>{o(JSON.parse(u),{replace:t,state:e,relative:n})},[o,u,n,t,e]),null}function ff(i){es(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MV({basename:i="/",children:t=null,location:e,navigationType:n="POP",navigator:s,static:r=!1}){es(!Gg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=i.replace(/^\/*/,"/"),o=bt.useMemo(()=>({basename:a,navigator:s,static:r,future:{}}),[a,s,r]);typeof e=="string"&&(e=Vg(e));let{pathname:c="/",search:u="",hash:d="",state:g=null,key:y="default"}=e,_=bt.useMemo(()=>{let b=rh(c,a);return b==null?null:{location:{pathname:b,search:u,hash:d,state:g,key:y},navigationType:n}},[a,c,u,d,g,y,n]);return ec(_!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:bt.createElement(rc.Provider,{value:o},bt.createElement(qv.Provider,{children:t,value:_}))}function AV({children:i,location:t}){return fV(NA(i),t)}function NA(i,t=[]){let e=[];return bt.Children.forEach(i,(n,s)=>{if(!bt.isValidElement(n))return;let r=[...t,s];if(n.type===bt.Fragment){e.push.apply(e,NA(n.props.children,r));return}es(n.type===ff,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),es(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=NA(n.props.children,r)),e.push(a)}),e}var Kb="get",Zb="application/x-www-form-urlencoded";function H1(i){return i!=null&&typeof i.tagName=="string"}function wV(i){return H1(i)&&i.tagName.toLowerCase()==="button"}function RV(i){return H1(i)&&i.tagName.toLowerCase()==="form"}function CV(i){return H1(i)&&i.tagName.toLowerCase()==="input"}function DV(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function IV(i,t){return i.button===0&&(!t||t==="_self")&&!DV(i)}var Cx=null;function NV(){if(Cx===null)try{new FormData(document.createElement("form"),0),Cx=!1}catch{Cx=!0}return Cx}var OV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function FT(i){return i!=null&&!OV.has(i)?(ec(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zb}"`),null):i}function PV(i,t){let e,n,s,r,a;if(RV(i)){let o=i.getAttribute("action");n=o?rh(o,t):null,e=i.getAttribute("method")||Kb,s=FT(i.getAttribute("enctype"))||Zb,r=new FormData(i)}else if(wV(i)||CV(i)&&(i.type==="submit"||i.type==="image")){let o=i.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=i.getAttribute("formaction")||o.getAttribute("action");if(n=c?rh(c,t):null,e=i.getAttribute("formmethod")||o.getAttribute("method")||Kb,s=FT(i.getAttribute("formenctype"))||FT(o.getAttribute("enctype"))||Zb,r=new FormData(o,i),!NV()){let{name:u,type:d,value:g}=i;if(d==="image"){let y=u?`${u}.`:"";r.append(`${y}x`,"0"),r.append(`${y}y`,"0")}else u&&r.append(u,g)}}else{if(H1(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Kb,n=null,s=Zb,a=i}return r&&s==="text/plain"&&(a=r,r=void 0),{action:n,method:e.toLowerCase(),encType:s,formData:r,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qw(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function UV(i,t,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&rh(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function LV(i,t){if(i.id in t)return t[i.id];try{let e=await import(i.module);return t[i.id]=e,e}catch(e){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kV(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function BV(i,t,e){let n=await Promise.all(i.map(async s=>{let r=t.routes[s.route.id];if(r){let a=await LV(r,e);return a.links?a.links():[]}return[]}));return HV(n.flat(1).filter(kV).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function KC(i,t,e,n,s,r){let a=(c,u)=>e[u]?c.route.id!==e[u].route.id:!0,o=(c,u)=>e[u].pathname!==c.pathname||e[u].route.path?.endsWith("*")&&e[u].params["*"]!==c.params["*"];return r==="assets"?t.filter((c,u)=>a(c,u)||o(c,u)):r==="data"?t.filter((c,u)=>{let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function zV(i,t,{includeHydrateFallback:e}={}){return FV(i.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function FV(i){return[...new Set(i)]}function VV(i){let t={},e=Object.keys(i).sort();for(let n of e)t[n]=i[n];return t}function HV(i,t){let e=new Set;return new Set(t),i.reduce((n,s)=>{let r=JSON.stringify(VV(s));return e.has(r)||(e.add(r),n.push({key:r,link:s})),n},[])}function SP(){let i=bt.useContext(Hg);return qw(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function GV(){let i=bt.useContext(F1);return qw(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Xw=bt.createContext(void 0);Xw.displayName="FrameworkContext";function EP(){let i=bt.useContext(Xw);return qw(i,"You must render this element inside a <HydratedRouter> element"),i}function jV(i,t){let e=bt.useContext(Xw),[n,s]=bt.useState(!1),[r,a]=bt.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:g}=t,y=bt.useRef(null);bt.useEffect(()=>{if(i==="render"&&a(!0),i==="viewport"){let M=E=>{E.forEach(R=>{a(R.isIntersecting)})},S=new IntersectionObserver(M,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[i]),bt.useEffect(()=>{if(n){let M=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(M)}}},[n]);let _=()=>{s(!0)},b=()=>{s(!1),a(!1)};return e?i!=="intent"?[r,y,{}]:[r,y,{onFocus:ay(o,_),onBlur:ay(c,b),onMouseEnter:ay(u,_),onMouseLeave:ay(d,b),onTouchStart:ay(g,_)}]:[!1,y,{}]}function ay(i,t){return e=>{i&&i(e),e.defaultPrevented||t(e)}}function WV({page:i,...t}){let{router:e}=SP(),n=bt.useMemo(()=>fP(e.routes,i,e.basename),[e.routes,i,e.basename]);return n?bt.createElement(XV,{page:i,matches:n,...t}):null}function qV(i){let{manifest:t,routeModules:e}=EP(),[n,s]=bt.useState([]);return bt.useEffect(()=>{let r=!1;return BV(i,t,e).then(a=>{r||s(a)}),()=>{r=!0}},[i,t,e]),n}function XV({page:i,matches:t,...e}){let n=uu(),{manifest:s,routeModules:r}=EP(),{basename:a}=SP(),{loaderData:o,matches:c}=GV(),u=bt.useMemo(()=>KC(i,t,c,s,n,"data"),[i,t,c,s,n]),d=bt.useMemo(()=>KC(i,t,c,s,n,"assets"),[i,t,c,s,n]),g=bt.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let b=new Set,M=!1;if(t.forEach(E=>{let R=s.routes[E.route.id];!R||!R.hasLoader||(!u.some(N=>N.route.id===E.route.id)&&E.route.id in o&&r[E.route.id]?.shouldRevalidate||R.hasClientLoader?M=!0:b.add(E.route.id))}),b.size===0)return[];let S=UV(i,a,"data");return M&&b.size>0&&S.searchParams.set("_routes",t.filter(E=>b.has(E.route.id)).map(E=>E.route.id).join(",")),[S.pathname+S.search]},[a,o,n,s,u,t,i,r]),y=bt.useMemo(()=>zV(d,s),[d,s]),_=qV(d);return bt.createElement(bt.Fragment,null,g.map(b=>bt.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...e})),y.map(b=>bt.createElement("link",{key:b,rel:"modulepreload",href:b,...e})),_.map(({key:b,link:M})=>bt.createElement("link",{key:b,nonce:e.nonce,...M})))}function YV(...i){return t=>{i.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var TP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TP&&(window.__reactRouterVersion="7.9.3")}catch{}function KV({basename:i,children:t,window:e}){let n=bt.useRef();n.current==null&&(n.current=kF({window:e,v5Compat:!0}));let s=n.current,[r,a]=bt.useState({action:s.action,location:s.location}),o=bt.useCallback(c=>{bt.startTransition(()=>a(c))},[a]);return bt.useLayoutEffect(()=>s.listen(o),[s,o]),bt.createElement(MV,{basename:i,children:t,location:r.location,navigationType:r.action,navigator:s})}var MP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zo=bt.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:s,reloadDocument:r,replace:a,state:o,target:c,to:u,preventScrollReset:d,viewTransition:g,...y},_){let{basename:b}=bt.useContext(rc),M=typeof u=="string"&&MP.test(u),S,E=!1;if(typeof u=="string"&&M&&(S=u,TP))try{let D=new URL(window.location.href),O=u.startsWith("//")?new URL(D.protocol+u):new URL(u),F=rh(O.pathname,b);O.origin===D.origin&&F!=null?u=F+O.search+O.hash:E=!0}catch{ec(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=uV(u,{relative:s}),[N,P,k]=jV(n,y),z=$V(u,{replace:a,state:o,target:c,preventScrollReset:d,relative:s,viewTransition:g});function L(D){t&&t(D),D.defaultPrevented||z(D)}let U=bt.createElement("a",{...y,...k,href:S||R,onClick:E||r?t:L,ref:YV(_,P),target:c,"data-discover":!M&&e==="render"?"true":void 0});return N&&!M?bt.createElement(bt.Fragment,null,U,bt.createElement(WV,{page:R})):U});zo.displayName="Link";var ZV=bt.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:s=!1,style:r,to:a,viewTransition:o,children:c,...u},d){let g=Xv(a,{relative:u.relative}),y=uu(),_=bt.useContext(F1),{navigator:b,basename:M}=bt.useContext(rc),S=_!=null&&s5(g)&&o===!0,E=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,R=y.pathname,N=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;e||(R=R.toLowerCase(),N=N?N.toLowerCase():null,E=E.toLowerCase()),N&&M&&(N=rh(N,M)||N);const P=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let k=R===E||!s&&R.startsWith(E)&&R.charAt(P)==="/",z=N!=null&&(N===E||!s&&N.startsWith(E)&&N.charAt(E.length)==="/"),L={isActive:k,isPending:z,isTransitioning:S},U=k?t:void 0,D;typeof n=="function"?D=n(L):D=[n,k?"active":null,z?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let O=typeof r=="function"?r(L):r;return bt.createElement(zo,{...u,"aria-current":U,className:D,ref:d,style:O,to:a,viewTransition:o},typeof c=="function"?c(L):c)});ZV.displayName="NavLink";var QV=bt.forwardRef(({discover:i="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:s,state:r,method:a=Kb,action:o,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:g,...y},_)=>{let b=n5(),M=i5(o,{relative:u}),S=a.toLowerCase()==="get"?"get":"post",E=typeof o=="string"&&MP.test(o),R=N=>{if(c&&c(N),N.defaultPrevented)return;N.preventDefault();let P=N.nativeEvent.submitter,k=P?.getAttribute("formmethod")||a;b(P||N.currentTarget,{fetcherKey:t,method:k,navigate:e,replace:s,state:r,relative:u,preventScrollReset:d,viewTransition:g})};return bt.createElement("form",{ref:_,method:S,action:M,onSubmit:n?c:R,...y,"data-discover":!E&&i==="render"?"true":void 0})});QV.displayName="Form";function JV(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AP(i){let t=bt.useContext(Hg);return es(t,JV(i)),t}function $V(i,{target:t,replace:e,state:n,preventScrollReset:s,relative:r,viewTransition:a}={}){let o=V1(),c=uu(),u=Xv(i,{relative:r});return bt.useCallback(d=>{if(IV(d,t)){d.preventDefault();let g=e!==void 0?e:lv(c)===lv(u);o(i,{replace:g,state:n,preventScrollReset:s,relative:r,viewTransition:a})}},[c,o,u,e,n,t,i,s,r,a])}var t5=0,e5=()=>`__${String(++t5)}__`;function n5(){let{router:i}=AP("useSubmit"),{basename:t}=bt.useContext(rc),e=bV();return bt.useCallback(async(n,s={})=>{let{action:r,method:a,encType:o,formData:c,body:u}=PV(n,t);if(s.navigate===!1){let d=s.fetcherKey||e5();await i.fetch(d,e,s.action||r,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await i.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,t,e])}function i5(i,{relative:t}={}){let{basename:e}=bt.useContext(rc),n=bt.useContext(cu);es(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),r={...Xv(i||".",{relative:t})},a=uu();if(i==null){r.search=a.search;let o=new URLSearchParams(r.search),c=o.getAll("index");if(c.some(d=>d==="")){o.delete("index"),c.filter(g=>g).forEach(g=>o.append("index",g));let d=o.toString();r.search=d?`?${d}`:""}}return(!i||i===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(r.pathname=r.pathname==="/"?e:th([e,r.pathname])),lv(r)}function s5(i,{relative:t}={}){let e=bt.useContext(gP);es(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=AP("useViewTransitionState"),s=Xv(i,{relative:t});if(!e.isTransitioning)return!1;let r=rh(e.currentLocation.pathname,n)||e.currentLocation.pathname,a=rh(e.nextLocation.pathname,n)||e.nextLocation.pathname;return gS(s.pathname,a)!=null||gS(s.pathname,r)!=null}const r5=()=>{};var ZC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},a5=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const s=i[e++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){const r=i[e++];t[n++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=i[e++],a=i[e++],o=i[e++],c=((s&7)<<18|(r&63)<<12|(a&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const r=i[e++],a=i[e++];t[n++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return t.join("")},RP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<i.length;s+=3){const r=i[s],a=s+1<i.length,o=a?i[s+1]:0,c=s+2<i.length,u=c?i[s+2]:0,d=r>>2,g=(r&3)<<4|o>>4;let y=(o&15)<<2|u>>6,_=u&63;c||(_=64,a||(y=64)),n.push(e[d],e[g],e[y],e[_])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(wP(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):a5(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<i.length;){const r=e[i.charAt(s++)],o=s<i.length?e[i.charAt(s)]:0;++s;const u=s<i.length?e[i.charAt(s)]:64;++s;const g=s<i.length?e[i.charAt(s)]:64;if(++s,r==null||o==null||u==null||g==null)throw new o5;const y=r<<2|o>>4;if(n.push(y),u!==64){const _=o<<4&240|u>>2;if(n.push(_),g!==64){const b=u<<6&192|g;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class o5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l5=function(i){const t=wP(i);return RP.encodeByteArray(t,!0)},yS=function(i){return l5(i).replace(/\./g,"")},CP=function(i){try{return RP.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=()=>c5().__FIREBASE_DEFAULTS__,h5=()=>{if(typeof process>"u"||typeof ZC>"u")return;const i=ZC.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},f5=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&CP(i[1]);return t&&JSON.parse(t)},G1=()=>{try{return r5()||u5()||h5()||f5()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},DP=i=>G1()?.emulatorHosts?.[i],IP=i=>{const t=DP(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},NP=()=>G1()?.config,OP=i=>G1()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yw(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",s=i.iat||0,r=i.sub||i.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...i};return[yS(JSON.stringify(e)),yS(JSON.stringify(a)),""].join(".")}const By={};function p5(){const i={prod:[],emulator:[]};for(const t of Object.keys(By))By[t]?i.emulator.push(t):i.prod.push(t);return i}function m5(i){let t=document.getElementById(i),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),e=!0),{created:e,element:t}}let QC=!1;function Kw(i,t){if(typeof window>"u"||typeof document>"u"||!Tp(window.location.host)||By[i]===t||By[i]||QC)return;By[i]=t;function e(y){return`__firebase__banner__${y}`}const n="__firebase__banner",r=p5().prod.length>0;function a(){const y=document.getElementById(n);y&&y.remove()}function o(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,_){y.setAttribute("width","24"),y.setAttribute("id",_),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function u(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{QC=!0,a()},y}function d(y,_){y.setAttribute("id",_),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=m5(n),_=e("text"),b=document.getElementById(_)||document.createElement("span"),M=e("learnmore"),S=document.getElementById(M)||document.createElement("a"),E=e("preprendIcon"),R=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const N=y.element;o(N),d(S,M);const P=u();c(R,E),N.append(R,b,S,P),document.body.appendChild(N)}r?(b.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ua())}function y5(){const i=G1()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UP(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function _5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x5(){const i=ua();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function b5(){return!y5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LP(){try{return typeof indexedDB=="object"}catch{return!1}}function kP(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(e){t(e)}})}function S5(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="FirebaseError";class xl extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=E5,Object.setPrototypeOf(this,xl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mp.prototype.create)}}class Mp{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},s=`${this.service}/${t}`,r=this.errors[t],a=r?T5(r,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new xl(s,o,n)}}function T5(i,t){return i.replace(M5,(e,n)=>{const s=t[n];return s!=null?String(s):`<${n}?>`})}const M5=/\{\$([^}]+)}/g;function A5(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function Df(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const s of e){if(!n.includes(s))return!1;const r=i[s],a=t[s];if(JC(r)&&JC(a)){if(!Df(r,a))return!1}else if(r!==a)return!1}for(const s of n)if(!e.includes(s))return!1;return!0}function JC(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(i){const t=[];for(const[e,n]of Object.entries(i))Array.isArray(n)?n.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function My(i){const t={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,r]=n.split("=");t[decodeURIComponent(s)]=decodeURIComponent(r)}}),t}function Ay(i){const t=i.indexOf("?");if(!t)return"";const e=i.indexOf("#",t);return i.substring(t,e>0?e:void 0)}function w5(i,t){const e=new R5(i,t);return e.subscribe.bind(e)}class R5{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let s;if(t===void 0&&e===void 0&&n===void 0)throw new Error("Missing Observer.");C5(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:n},s.next===void 0&&(s.next=VT),s.error===void 0&&(s.error=VT),s.complete===void 0&&(s.complete=VT);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function C5(i,t){if(typeof i!="object"||i===null)return!1;for(const e of t)if(e in i&&typeof i[e]=="function")return!0;return!1}function VT(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=1e3,I5=2,N5=14400*1e3,O5=.5;function $C(i,t=D5,e=I5){const n=t*Math.pow(e,i),s=Math.round(O5*n*(Math.random()-.5)*2);return Math.min(N5,n+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(i){return i&&i._delegate?i._delegate:i}class gl{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P5=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new d5;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),n=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(L5(t))try{this.getOrInitializeService({instanceIdentifier:Wd})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const r=this.getOrInitializeService({instanceIdentifier:s});n.resolve(r)}catch{}}}}clearInstance(t=Wd){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Wd){return this.instances.has(t)}getOptions(t=Wd){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);n===o&&a.resolve(s)}return s}onInit(t,e){const n=this.normalizeInstanceIdentifier(e),s=this.onInitCallbacks.get(n)??new Set;s.add(t),this.onInitCallbacks.set(n,s);const r=this.instances.get(n);return r&&t(r,n),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:U5(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Wd){return this.component?this.component.multipleInstances?t:Wd:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function U5(i){return i===Wd?void 0:i}function L5(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new P5(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Vn||(Vn={}));const B5={debug:Vn.DEBUG,verbose:Vn.VERBOSE,info:Vn.INFO,warn:Vn.WARN,error:Vn.ERROR,silent:Vn.SILENT},z5=Vn.INFO,F5={[Vn.DEBUG]:"log",[Vn.VERBOSE]:"log",[Vn.INFO]:"info",[Vn.WARN]:"warn",[Vn.ERROR]:"error"},V5=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),s=F5[t];if(s)console[s](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class j1{constructor(t){this.name=t,this._logLevel=z5,this._logHandler=V5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Vn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?B5[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Vn.DEBUG,...t),this._logHandler(this,Vn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Vn.VERBOSE,...t),this._logHandler(this,Vn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Vn.INFO,...t),this._logHandler(this,Vn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Vn.WARN,...t),this._logHandler(this,Vn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Vn.ERROR,...t),this._logHandler(this,Vn.ERROR,...t)}}const H5=(i,t)=>t.some(e=>i instanceof e);let tD,eD;function G5(){return tD||(tD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j5(){return eD||(eD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BP=new WeakMap,OA=new WeakMap,zP=new WeakMap,HT=new WeakMap,Zw=new WeakMap;function W5(i){const t=new Promise((e,n)=>{const s=()=>{i.removeEventListener("success",r),i.removeEventListener("error",a)},r=()=>{e(Tf(i.result)),s()},a=()=>{n(i.error),s()};i.addEventListener("success",r),i.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&BP.set(e,i)}).catch(()=>{}),Zw.set(t,i),t}function q5(i){if(OA.has(i))return;const t=new Promise((e,n)=>{const s=()=>{i.removeEventListener("complete",r),i.removeEventListener("error",a),i.removeEventListener("abort",a)},r=()=>{e(),s()},a=()=>{n(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",r),i.addEventListener("error",a),i.addEventListener("abort",a)});OA.set(i,t)}let PA={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return OA.get(i);if(t==="objectStoreNames")return i.objectStoreNames||zP.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Tf(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function X5(i){PA=i(PA)}function Y5(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(GT(this),t,...e);return zP.set(n,t.sort?t.sort():[t]),Tf(n)}:j5().includes(i)?function(...t){return i.apply(GT(this),t),Tf(BP.get(this))}:function(...t){return Tf(i.apply(GT(this),t))}}function K5(i){return typeof i=="function"?Y5(i):(i instanceof IDBTransaction&&q5(i),H5(i,G5())?new Proxy(i,PA):i)}function Tf(i){if(i instanceof IDBRequest)return W5(i);if(HT.has(i))return HT.get(i);const t=K5(i);return t!==i&&(HT.set(i,t),Zw.set(t,i)),t}const GT=i=>Zw.get(i);function FP(i,t,{blocked:e,upgrade:n,blocking:s,terminated:r}={}){const a=indexedDB.open(i,t),o=Tf(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Tf(a.result),c.oldVersion,c.newVersion,Tf(a.transaction),c)}),e&&a.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),o.then(c=>{r&&c.addEventListener("close",()=>r()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Z5=["get","getKey","getAll","getAllKeys","count"],Q5=["put","add","delete","clear"],jT=new Map;function nD(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(jT.get(t))return jT.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,s=Q5.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(s||Z5.includes(e)))return;const r=async function(a,...o){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[e](...o),s&&c.done]))[0]};return jT.set(t,r),r}X5(i=>({...i,get:(t,e,n)=>nD(t,e)||i.get(t,e,n),has:(t,e)=>!!nD(t,e)||i.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if($5(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function $5(i){return i.getComponent()?.type==="VERSION"}const UA="@firebase/app",iD="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new j1("@firebase/app"),t6="@firebase/app-compat",e6="@firebase/analytics-compat",n6="@firebase/analytics",i6="@firebase/app-check-compat",s6="@firebase/app-check",r6="@firebase/auth",a6="@firebase/auth-compat",o6="@firebase/database",l6="@firebase/data-connect",c6="@firebase/database-compat",u6="@firebase/functions",h6="@firebase/functions-compat",f6="@firebase/installations",d6="@firebase/installations-compat",p6="@firebase/messaging",m6="@firebase/messaging-compat",g6="@firebase/performance",y6="@firebase/performance-compat",v6="@firebase/remote-config",_6="@firebase/remote-config-compat",x6="@firebase/storage",b6="@firebase/storage-compat",S6="@firebase/firestore",E6="@firebase/ai",T6="@firebase/firestore-compat",M6="firebase",A6="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="[DEFAULT]",w6={[UA]:"fire-core",[t6]:"fire-core-compat",[n6]:"fire-analytics",[e6]:"fire-analytics-compat",[s6]:"fire-app-check",[i6]:"fire-app-check-compat",[r6]:"fire-auth",[a6]:"fire-auth-compat",[o6]:"fire-rtdb",[l6]:"fire-data-connect",[c6]:"fire-rtdb-compat",[u6]:"fire-fn",[h6]:"fire-fn-compat",[f6]:"fire-iid",[d6]:"fire-iid-compat",[p6]:"fire-fcm",[m6]:"fire-fcm-compat",[g6]:"fire-perf",[y6]:"fire-perf-compat",[v6]:"fire-rc",[_6]:"fire-rc-compat",[x6]:"fire-gcs",[b6]:"fire-gcs-compat",[S6]:"fire-fst",[T6]:"fire-fst-compat",[E6]:"fire-vertex","fire-js":"fire-js",[M6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS=new Map,R6=new Map,kA=new Map;function sD(i,t){try{i.container.addComponent(t)}catch(e){ah.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function nc(i){const t=i.name;if(kA.has(t))return ah.debug(`There were multiple attempts to register component ${t}.`),!1;kA.set(t,i);for(const e of vS.values())sD(e,i);for(const e of R6.values())sD(e,i);return!0}function Vf(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function Fo(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mf=new Mp("app","Firebase",C6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(t,e,n){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=A6;function VP(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n={name:LA,automaticDataCollectionEnabled:!0,...t},s=n.name;if(typeof s!="string"||!s)throw Mf.create("bad-app-name",{appName:String(s)});if(e||(e=NP()),!e)throw Mf.create("no-options");const r=vS.get(s);if(r){if(Df(e,r.options)&&Df(n,r.config))return r;throw Mf.create("duplicate-app",{appName:s})}const a=new k5(s);for(const c of kA.values())a.addComponent(c);const o=new D6(e,n,a);return vS.set(s,o),o}function W1(i=LA){const t=vS.get(i);if(!t&&i===LA&&NP())return VP();if(!t)throw Mf.create("no-app",{appName:i});return t}function go(i,t,e){let n=w6[i]??i;e&&(n+=`-${e}`);const s=n.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const a=[`Unable to register library "${n}" with version "${t}":`];s&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ah.warn(a.join(" "));return}nc(new gl(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6="firebase-heartbeat-database",N6=1,cv="firebase-heartbeat-store";let WT=null;function HP(){return WT||(WT=FP(I6,N6,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(cv)}catch(e){console.warn(e)}}}}).catch(i=>{throw Mf.create("idb-open",{originalErrorMessage:i.message})})),WT}async function O6(i){try{const e=(await HP()).transaction(cv),n=await e.objectStore(cv).get(GP(i));return await e.done,n}catch(t){if(t instanceof xl)ah.warn(t.message);else{const e=Mf.create("idb-get",{originalErrorMessage:t?.message});ah.warn(e.message)}}}async function rD(i,t){try{const n=(await HP()).transaction(cv,"readwrite");await n.objectStore(cv).put(t,GP(i)),await n.done}catch(e){if(e instanceof xl)ah.warn(e.message);else{const n=Mf.create("idb-set",{originalErrorMessage:e?.message});ah.warn(n.message)}}}function GP(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=1024,U6=30;class L6{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new B6(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=aD();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>U6){const s=z6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ah.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=aD(),{heartbeatsToSend:e,unsentEntries:n}=k6(this._heartbeatsCache.heartbeats),s=yS(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ah.warn(t),""}}}function aD(){return new Date().toISOString().substring(0,10)}function k6(i,t=P6){const e=[];let n=i.slice();for(const s of i){const r=e.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),oD(e)>t){r.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),oD(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class B6{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LP()?kP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await O6(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return rD(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return rD(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function oD(i){return yS(JSON.stringify({version:2,heartbeats:i})).length}function z6(i){if(i.length===0)return-1;let t=0,e=i[0].date;for(let n=1;n<i.length;n++)i[n].date<e&&(e=i[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(i){nc(new gl("platform-logger",t=>new J5(t),"PRIVATE")),nc(new gl("heartbeat",t=>new L6(t),"PRIVATE")),go(UA,iD,i),go(UA,iD,"esm2020"),go("fire-js","")}F6("");function jP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V6=jP,WP=new Mp("auth","Firebase",jP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new j1("@firebase/auth");function H6(i,...t){_S.logLevel<=Vn.WARN&&_S.warn(`Auth (${Ap}): ${i}`,...t)}function Qb(i,...t){_S.logLevel<=Vn.ERROR&&_S.error(`Auth (${Ap}): ${i}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(i,...t){throw Qw(i,...t)}function Zc(i,...t){return Qw(i,...t)}function qP(i,t,e){const n={...V6(),[t]:e};return new Mp("auth","Firebase",n).create(t,{appName:i.name})}function eh(i){return qP(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qw(i,...t){if(typeof i!="string"){const e=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(e,...n)}return WP.create(i,...t)}function an(i,t,...e){if(!i)throw Qw(t,...e)}function Qu(i){const t="INTERNAL ASSERTION FAILED: "+i;throw Qb(t),new Error(t)}function oh(i,t){i||Qu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return typeof self<"u"&&self.location?.href||""}function G6(){return lD()==="http:"||lD()==="https:"}function lD(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G6()||UP()||"connection"in navigator)?navigator.onLine:!0}function W6(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(t,e){this.shortDelay=t,this.longDelay=e,oh(e>t,"Short delay should be less than long delay!"),this.isMobile=g5()||_5()}get(){return j6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(i,t){oh(i.emulator,"Emulator should always be set here");const{url:e}=i.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y6=new Kv(3e4,6e4);function Hf(i,t){return i.tenantId&&!t.tenantId?{...t,tenantId:i.tenantId}:t}async function ph(i,t,e,n,s={}){return YP(i,s,async()=>{let r={},a={};n&&(t==="GET"?a=n:r={body:JSON.stringify(n)});const o=Yv({key:i.config.apiKey,...a}).slice(1),c=await i._getAdditionalHeaders();c["Content-Type"]="application/json",i.languageCode&&(c["X-Firebase-Locale"]=i.languageCode);const u={method:t,headers:c,...r};return v5()||(u.referrerPolicy="no-referrer"),i.emulatorConfig&&Tp(i.emulatorConfig.host)&&(u.credentials="include"),XP.fetch()(await KP(i,i.config.apiHost,e,o),u)})}async function YP(i,t,e){i._canInitEmulator=!1;const n={...q6,...t};try{const s=new Z6(i),r=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Dx(i,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const o=r.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dx(i,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Dx(i,"email-already-in-use",a);if(c==="USER_DISABLED")throw Dx(i,"user-disabled",a);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw qP(i,d,u);ic(i,d)}}catch(s){if(s instanceof xl)throw s;ic(i,"network-request-failed",{message:String(s)})}}async function Zv(i,t,e,n,s={}){const r=await ph(i,t,e,n,s);return"mfaPendingCredential"in r&&ic(i,"multi-factor-auth-required",{_serverResponse:r}),r}async function KP(i,t,e,n){const s=`${t}${e}?${n}`,r=i,a=r.config.emulator?Jw(i.config,s):`${i.config.apiScheme}://${s}`;return X6.includes(e)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function K6(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,n)=>{this.timer=setTimeout(()=>n(Zc(this.auth,"network-request-failed")),Y6.get())})}}function Dx(i,t,e){const n={appName:i.name};e.email&&(n.email=e.email),e.phoneNumber&&(n.phoneNumber=e.phoneNumber);const s=Zc(i,t,n);return s.customData._tokenResponse=e,s}function cD(i){return i!==void 0&&i.enterprise!==void 0}class Q6{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return K6(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function J6(i,t){return ph(i,"GET","/v2/recaptchaConfig",Hf(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $6(i,t){return ph(i,"POST","/v1/accounts:delete",t)}async function xS(i,t){return ph(i,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(i){if(i)try{const t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function tH(i,t=!1){const e=Lr(i),n=await e.getIdToken(t),s=$w(n);an(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r?.sign_in_provider;return{claims:s,token:n,authTime:zy(qT(s.auth_time)),issuedAtTime:zy(qT(s.iat)),expirationTime:zy(qT(s.exp)),signInProvider:a||null,signInSecondFactor:r?.sign_in_second_factor||null}}function qT(i){return Number(i)*1e3}function $w(i){const[t,e,n]=i.split(".");if(t===void 0||e===void 0||n===void 0)return Qb("JWT malformed, contained fewer than 3 sections"),null;try{const s=CP(e);return s?JSON.parse(s):(Qb("Failed to decode base64 JWT payload"),null)}catch(s){return Qb("Caught error parsing JWT payload as JSON",s?.toString()),null}}function uD(i){const t=$w(i);return an(t,"internal-error"),an(typeof t.exp<"u","internal-error"),an(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bg(i,t,e=!1){if(e)return t;try{return await t}catch(n){throw n instanceof xl&&eH(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function eH({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=zy(this.lastLoginAt),this.creationTime=zy(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(i){const t=i.auth,e=await i.getIdToken(),n=await bg(i,xS(t,{idToken:e}));an(n?.users.length,t,"internal-error");const s=n.users[0];i._notifyReloadListener(s);const r=s.providerUserInfo?.length?ZP(s.providerUserInfo):[],a=sH(i.providerData,r),o=i.isAnonymous,c=!(i.email&&s.passwordHash)&&!a?.length,u=o?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new zA(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(i,d)}async function iH(i){const t=Lr(i);await bS(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function sH(i,t){return[...i.filter(n=>!t.some(s=>s.providerId===n.providerId)),...t]}function ZP(i){return i.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rH(i,t){const e=await YP(i,{},async()=>{const n=Yv({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=i.config,a=await KP(i,s,"/v1/token",`key=${r}`),o=await i._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return i.emulatorConfig&&Tp(i.emulatorConfig.host)&&(c.credentials="include"),XP.fetch()(a,c)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function aH(i,t){return ph(i,"POST","/v2/accounts:revokeToken",Hf(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){an(t.idToken,"internal-error"),an(typeof t.idToken<"u","internal-error"),an(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):uD(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){an(t.length!==0,"internal-error");const e=uD(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(an(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:s,expiresIn:r}=await rH(t,e);this.updateTokensAndExpiration(n,s,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,e){const{refreshToken:n,accessToken:s,expirationTime:r}=e,a=new pg;return n&&(an(typeof n=="string","internal-error",{appName:t}),a.refreshToken=n),s&&(an(typeof s=="string","internal-error",{appName:t}),a.accessToken=s),r&&(an(typeof r=="number","internal-error",{appName:t}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new pg,this.toJSON())}_performRefresh(){return Qu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(i,t){an(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}class Ql{constructor({uid:t,auth:e,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new nH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await bg(this,this.stsTokenManager.getToken(this.auth,t));return an(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return tH(this,t)}reload(){return iH(this)}_assign(t){this!==t&&(an(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Ql({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await bS(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fo(this.auth.app))return Promise.reject(eh(this.auth));const t=await this.getIdToken();return await bg(this,$6(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const n=e.displayName??void 0,s=e.email??void 0,r=e.phoneNumber??void 0,a=e.photoURL??void 0,o=e.tenantId??void 0,c=e._redirectEventId??void 0,u=e.createdAt??void 0,d=e.lastLoginAt??void 0,{uid:g,emailVerified:y,isAnonymous:_,providerData:b,stsTokenManager:M}=e;an(g&&M,t,"internal-error");const S=pg.fromJSON(this.name,M);an(typeof g=="string",t,"internal-error"),sf(n,t.name),sf(s,t.name),an(typeof y=="boolean",t,"internal-error"),an(typeof _=="boolean",t,"internal-error"),sf(r,t.name),sf(a,t.name),sf(o,t.name),sf(c,t.name),sf(u,t.name),sf(d,t.name);const E=new Ql({uid:g,auth:t,email:s,emailVerified:y,displayName:n,isAnonymous:_,photoURL:a,phoneNumber:r,tenantId:o,stsTokenManager:S,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(E.providerData=b.map(R=>({...R}))),c&&(E._redirectEventId=c),E}static async _fromIdTokenResponse(t,e,n=!1){const s=new pg;s.updateFromServerResponse(e);const r=new Ql({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:n});return await bS(r),r}static async _fromGetAccountInfoResponse(t,e,n){const s=e.users[0];an(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?ZP(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!r?.length,o=new pg;o.updateFromIdToken(n);const c=new Ql({uid:s.localId,auth:t,stsTokenManager:o,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new zA(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!r?.length};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=new Map;function Ju(i){oh(i instanceof Function,"Expected a class definition");let t=hD.get(i);return t?(oh(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,hD.set(i,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}QP.type="NONE";const fD=QP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(i,t,e){return`firebase:${i}:${t}:${e}`}class mg{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:s,name:r}=this.auth;this.fullUserKey=Jb(this.userKey,s.apiKey,r),this.fullPersistenceKey=Jb("persistence",s.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await xS(this.auth,{idToken:t}).catch(()=>{});return e?Ql._fromGetAccountInfoResponse(this.auth,e,t):null}return Ql._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new mg(Ju(fD),t,n);const s=(await Promise.all(e.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=s[0]||Ju(fD);const a=Jb(n,t.config.apiKey,t.name);let o=null;for(const u of e)try{const d=await u._get(a);if(d){let g;if(typeof d=="string"){const y=await xS(t,{idToken:d}).catch(()=>{});if(!y)break;g=await Ql._fromGetAccountInfoResponse(t,y,d)}else g=Ql._fromJSON(t,d);u!==r&&(o=g),r=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new mg(r,t,n):(r=c[0],o&&await r._set(a,o.toJSON()),await Promise.all(e.map(async u=>{if(u!==r)try{await u._remove(a)}catch{}})),new mg(r,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(i){const t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eU(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(JP(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(iU(t))return"Blackberry";if(sU(t))return"Webos";if($P(t))return"Safari";if((t.includes("chrome/")||tU(t))&&!t.includes("edge/"))return"Chrome";if(nU(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(e);if(n?.length===2)return n[1]}return"Other"}function JP(i=ua()){return/firefox\//i.test(i)}function $P(i=ua()){const t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function tU(i=ua()){return/crios\//i.test(i)}function eU(i=ua()){return/iemobile/i.test(i)}function nU(i=ua()){return/android/i.test(i)}function iU(i=ua()){return/blackberry/i.test(i)}function sU(i=ua()){return/webos/i.test(i)}function t2(i=ua()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function oH(i=ua()){return t2(i)&&!!window.navigator?.standalone}function lH(){return x5()&&document.documentMode===10}function rU(i=ua()){return t2(i)||nU(i)||sU(i)||iU(i)||/windows phone/i.test(i)||eU(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(i,t=[]){let e;switch(i){case"Browser":e=dD(ua());break;case"Worker":e=`${dD(ua())}-${i}`;break;default:e=i}const n=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Ap}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=r=>new Promise((a,o)=>{try{const c=t(r);a(c)}catch(c){o(c)}});n.onAbort=e,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uH(i,t={}){return ph(i,"GET","/v2/passwordPolicy",Hf(i,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH=6;class fH{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??hH,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let n;for(let s=0;s<t.length;s++)n=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,s,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(t,e,n,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pD(this),this.idTokenSubscription=new pD(this),this.beforeStateQueue=new cH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ju(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await mg.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await xS(this,{idToken:t}),n=await Ql._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Fo(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(a,a))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let n=e,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,a=n?._redirectEventId,o=await this.tryRedirectSignIn(t);(!r||r===a)&&o?.user&&(n=o.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(r){n=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await bS(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=W6()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Fo(this.app))return Promise.reject(eh(this));const e=t?Lr(t):null;return e&&an(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&an(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Fo(this.app)?Promise.reject(eh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Fo(this.app)?Promise.reject(eh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ju(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await uH(this),e=new fH(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Mp("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(n.tenantId=this.tenantId),await aH(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ju(t)||this._popupRedirectResolver;an(e,this,"argument-error"),this.redirectPersistenceManager=await mg.create(this,[Ju(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,s){if(this._deleted)return()=>{};const r=typeof e=="function"?e:e.next.bind(e);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(an(o,this,"internal-error"),o.then(()=>{a||r(this.currentUser)}),typeof e=="function"){const c=t.addObserver(e,n,s);return()=>{a=!0,c()}}else{const c=t.addObserver(e);return()=>{a=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=aU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){if(Fo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&H6(`Error while retrieving App Check token: ${t.error}`),t?.token}}function wp(i){return Lr(i)}class pD{constructor(t){this.auth=t,this.observer=null,this.addObserver=w5(e=>this.observer=e)}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pH(i){q1=i}function oU(i){return q1.loadJS(i)}function mH(){return q1.recaptchaEnterpriseScript}function gH(){return q1.gapiScript}function yH(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class vH{constructor(){this.enterprise=new _H}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class _H{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const xH="recaptcha-enterprise",lU="NO_RECAPTCHA";class bH{constructor(t){this.type=xH,this.auth=wp(t)}async verify(t="verify",e=!1){async function n(r){if(!e){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,o)=>{J6(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new Q6(c);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function s(r,a,o){const c=window.grecaptcha;cD(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:t}).then(u=>{a(u)}).catch(()=>{a(lU)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vH().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{n(this.auth).then(o=>{if(!e&&cD(window.grecaptcha))s(o,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=mH();c.length!==0&&(c+=o),oU(c).then(()=>{s(o,r,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function mD(i,t,e,n=!1,s=!1){const r=new bH(i);let a;if(s)a=lU;else try{a=await r.verify(e)}catch{a=await r.verify(e,!0)}const o={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function FA(i,t,e,n,s){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await mD(i,t,e,e==="getOobCode");return n(i,r)}else return n(i,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await mD(i,t,e,e==="getOobCode");return n(i,a)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SH(i,t){const e=Vf(i,"auth");if(e.isInitialized()){const s=e.getImmediate(),r=e.getOptions();if(Df(r,t??{}))return s;ic(s,"already-initialized")}return e.initialize({options:t})}function EH(i,t){const e=t?.persistence||[],n=(Array.isArray(e)?e:[e]).map(Ju);t?.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(n,t?.popupRedirectResolver)}function TH(i,t,e){const n=wp(i);an(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const s=!1,r=cU(t),{host:a,port:o}=MH(t),c=o===null?"":`:${o}`,u={url:`${r}//${a}${c}/`},d=Object.freeze({host:a,port:o,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){an(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),an(Df(u,n.config.emulator)&&Df(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Tp(a)?(Yw(`${r}//${a}${c}`),Kw("Auth",!0)):AH()}function cU(i){const t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function MH(i){const t=cU(i),e=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!e)return{host:"",port:null};const n=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const r=s[1];return{host:r,port:gD(n.substr(r.length+1))}}else{const[r,a]=n.split(":");return{host:r,port:gD(a)}}}function gD(i){if(!i)return null;const t=Number(i);return isNaN(t)?null:t}function AH(){function i(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Qu("not implemented")}_getIdTokenResponse(t){return Qu("not implemented")}_linkToIdToken(t,e){return Qu("not implemented")}_getReauthenticationResolver(t){return Qu("not implemented")}}async function wH(i,t){return ph(i,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RH(i,t){return Zv(i,"POST","/v1/accounts:signInWithPassword",Hf(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CH(i,t){return Zv(i,"POST","/v1/accounts:signInWithEmailLink",Hf(i,t))}async function DH(i,t){return Zv(i,"POST","/v1/accounts:signInWithEmailLink",Hf(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends e2{constructor(t,e,n,s=null){super("password",n),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new uv(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new uv(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return FA(t,e,"signInWithPassword",RH);case"emailLink":return CH(t,{email:this._email,oobCode:this._password});default:ic(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const n={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return FA(t,n,"signUpPassword",wH);case"emailLink":return DH(t,{idToken:e,email:this._email,oobCode:this._password});default:ic(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(i,t){return Zv(i,"POST","/v1/accounts:signInWithIdp",Hf(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH="http://localhost";class hp extends e2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new hp(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ic("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:s,...r}=e;if(!n||!s)return null;const a=new hp(n,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(t){const e=this.buildRequest();return gg(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,gg(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,gg(t,e)}buildRequest(){const t={requestUri:IH,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Yv(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OH(i){const t=My(Ay(i)).link,e=t?My(Ay(t)).deep_link_id:null,n=My(Ay(i)).deep_link_id;return(n?My(Ay(n)).link:null)||n||e||t||i}class n2{constructor(t){const e=My(Ay(t)),n=e.apiKey??null,s=e.oobCode??null,r=NH(e.mode??null);an(n&&s&&r,"argument-error"),this.apiKey=n,this.operation=r,this.code=s,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=OH(t);try{return new n2(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this.providerId=jg.PROVIDER_ID}static credential(t,e){return uv._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=n2.parseLink(e);return an(n,"argument-error"),uv._fromEmailAndCode(t,n.code,n.tenantId)}}jg.PROVIDER_ID="password";jg.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends uU{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends Qv{constructor(){super("facebook.com")}static credential(t){return hp._fromParams({providerId:df.PROVIDER_ID,signInMethod:df.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return df.credentialFromTaggedObject(t)}static credentialFromError(t){return df.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return df.credential(t.oauthAccessToken)}catch{return null}}}df.FACEBOOK_SIGN_IN_METHOD="facebook.com";df.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends Qv{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return hp._fromParams({providerId:pf.PROVIDER_ID,signInMethod:pf.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return pf.credentialFromTaggedObject(t)}static credentialFromError(t){return pf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return pf.credential(e,n)}catch{return null}}}pf.GOOGLE_SIGN_IN_METHOD="google.com";pf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends Qv{constructor(){super("github.com")}static credential(t){return hp._fromParams({providerId:mf.PROVIDER_ID,signInMethod:mf.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return mf.credentialFromTaggedObject(t)}static credentialFromError(t){return mf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return mf.credential(t.oauthAccessToken)}catch{return null}}}mf.GITHUB_SIGN_IN_METHOD="github.com";mf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends Qv{constructor(){super("twitter.com")}static credential(t,e){return hp._fromParams({providerId:gf.PROVIDER_ID,signInMethod:gf.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return gf.credentialFromTaggedObject(t)}static credentialFromError(t){return gf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return gf.credential(e,n)}catch{return null}}}gf.TWITTER_SIGN_IN_METHOD="twitter.com";gf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PH(i,t){return Zv(i,"POST","/v1/accounts:signUp",Hf(i,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,s=!1){const r=await Ql._fromIdTokenResponse(t,n,s),a=yD(n);return new fp({user:r,providerId:a,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const s=yD(n);return new fp({user:t,providerId:s,_tokenResponse:n,operationType:e})}}function yD(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends xl{constructor(t,e,n,s){super(e.code,e.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,SS.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,s){return new SS(t,e,n,s)}}function hU(i,t,e,n){return(t==="reauthenticate"?e._getReauthenticationResolver(i):e._getIdTokenResponse(i)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?SS._fromErrorAndOperation(i,r,t,n):r})}async function UH(i,t,e=!1){const n=await bg(i,t._linkToIdToken(i.auth,await i.getIdToken()),e);return fp._forOperation(i,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LH(i,t,e=!1){const{auth:n}=i;if(Fo(n.app))return Promise.reject(eh(n));const s="reauthenticate";try{const r=await bg(i,hU(n,s,t,i),e);an(r.idToken,n,"internal-error");const a=$w(r.idToken);an(a,n,"internal-error");const{sub:o}=a;return an(i.uid===o,n,"user-mismatch"),fp._forOperation(i,s,r)}catch(r){throw r?.code==="auth/user-not-found"&&ic(n,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(i,t,e=!1){if(Fo(i.app))return Promise.reject(eh(i));const n="signIn",s=await hU(i,n,t),r=await fp._fromIdTokenResponse(i,n,s);return e||await i._updateCurrentUser(r.user),r}async function kH(i,t){return fU(wp(i),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dU(i){const t=wp(i);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function BH(i,t,e){if(Fo(i.app))return Promise.reject(eh(i));const n=wp(i),a=await FA(n,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PH).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&dU(i),c}),o=await fp._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function zH(i,t,e){return Fo(i.app)?Promise.reject(eh(i)):kH(Lr(i),jg.credential(t,e)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&dU(i),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FH(i,t){return ph(i,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VH(i,{displayName:t,photoURL:e}){if(t===void 0&&e===void 0)return;const n=Lr(i),r={idToken:await n.getIdToken(),displayName:t,photoUrl:e,returnSecureToken:!0},a=await bg(n,FH(n.auth,r));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function HH(i,t,e,n){return Lr(i).onIdTokenChanged(t,e,n)}function GH(i,t,e){return Lr(i).beforeAuthStateChanged(t,e)}function jH(i,t,e,n){return Lr(i).onAuthStateChanged(t,e,n)}function WH(i){return Lr(i).signOut()}const ES="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(ES,"1"),this.storage.removeItem(ES),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH=1e3,XH=10;class mU extends pU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rU(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),s=this.localCache[e];n!==s&&t(e,s,n)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const n=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!e&&this.localCache[n]===a||this.notifyListeners(n,a)},r=this.storage.getItem(n);lH()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,XH):s()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const s of Array.from(n))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},qH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}mU.type="LOCAL";const YH=mU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU extends pU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}gU.type="SESSION";const yU=gU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KH(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const n=new X1(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:s,data:r}=e.data,a=this.handlersMap[s];if(!a?.size)return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async u=>u(e.origin,r)),c=await KH(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:c})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}X1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(i="",t=10){let e="";for(let n=0;n<t;n++)e+=Math.floor(Math.random()*10);return i+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((o,c)=>{const u=i2("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(g){const y=g;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(y.data.response);break;default:clearTimeout(d),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:u,data:e},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(){return window}function QH(i){Qc().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(){return typeof Qc().WorkerGlobalScope<"u"&&typeof Qc().importScripts=="function"}async function JH(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $H(){return navigator?.serviceWorker?.controller||null}function t8(){return vU()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U="firebaseLocalStorageDb",e8=1,TS="firebaseLocalStorage",xU="fbase_key";class Jv{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Y1(i,t){return i.transaction([TS],t?"readwrite":"readonly").objectStore(TS)}function n8(){const i=indexedDB.deleteDatabase(_U);return new Jv(i).toPromise()}function VA(){const i=indexedDB.open(_U,e8);return new Promise((t,e)=>{i.addEventListener("error",()=>{e(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(TS,{keyPath:xU})}catch(s){e(s)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(TS)?t(n):(n.close(),await n8(),t(await VA()))})})}async function vD(i,t,e){const n=Y1(i,!0).put({[xU]:t,value:e});return new Jv(n).toPromise()}async function i8(i,t){const e=Y1(i,!1).get(t),n=await new Jv(e).toPromise();return n===void 0?null:n.value}function _D(i,t){const e=Y1(i,!0).delete(t);return new Jv(e).toPromise()}const s8=800,r8=3;class bU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await VA(),this.db)}async _withRetries(t){let e=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(e++>r8)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vU()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=X1._getInstance(t8()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await JH(),!this.activeServiceWorker)return;this.sender=new ZH(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||$H()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await VA();return await vD(t,ES,"1"),await _D(t,ES),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vD(n,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(n=>i8(n,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>_D(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const r=Y1(s,!1).getAll();return new Jv(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],n=new Set;if(t.length!==0)for(const{fbase_key:s,value:r}of t)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const s of Array.from(n))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),s8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bU.type="LOCAL";const a8=bU;new Kv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(i,t){return t?Ju(t):(an(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2 extends e2{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return gg(t,this._buildIdpRequest())}_linkToIdToken(t,e){return gg(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return gg(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function l8(i){return fU(i.auth,new s2(i),i.bypassAuthState)}function c8(i){const{auth:t,user:e}=i;return an(e,t,"internal-error"),LH(e,new s2(i),i.bypassAuthState)}async function u8(i){const{auth:t,user:e}=i;return an(e,t,"internal-error"),UH(e,new s2(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(t,e,n,s,r=!1){this.auth=t,this.resolver=n,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:s,tenantId:r,error:a,type:o}=t;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return l8;case"linkViaPopup":case"linkViaRedirect":return u8;case"reauthViaPopup":case"reauthViaRedirect":return c8;default:ic(this.auth,"internal-error")}}resolve(t){oh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){oh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=new Kv(2e3,1e4);class cg extends SU{constructor(t,e,n,s,r){super(t,e,s,r),this.provider=n,this.authWindow=null,this.pollId=null,cg.currentPopupAction&&cg.currentPopupAction.cancel(),cg.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return an(t,this.auth,"internal-error"),t}async onExecution(){oh(this.filter.length===1,"Popup operations only handle one event");const t=i2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Zc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cg.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,h8.get())};t()}}cg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8="pendingRedirect",$b=new Map;class d8 extends SU{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=$b.get(this.auth._key());if(!t){try{const n=await p8(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}$b.set(this.auth._key(),t)}return this.bypassAuthState||$b.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p8(i,t){const e=y8(t),n=g8(i);if(!await n._isAvailable())return!1;const s=await n._get(e)==="true";return await n._remove(e),s}function m8(i,t){$b.set(i._key(),t)}function g8(i){return Ju(i._redirectPersistence)}function y8(i){return Jb(f8,i.config.apiKey,i.name)}async function v8(i,t,e=!1){if(Fo(i.app))return Promise.reject(eh(i));const n=wp(i),s=o8(n,t),a=await new d8(n,s,e).execute();return a&&!e&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8=600*1e3;class x8{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!b8(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!EU(t)){const n=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Zc(this.auth,n))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=_8&&this.cachedEventUids.clear(),this.cachedEventUids.has(xD(t))}saveEventToCache(t){this.cachedEventUids.add(xD(t)),this.lastProcessedEventTime=Date.now()}}function xD(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function EU({type:i,error:t}){return i==="unknown"&&t?.code==="auth/no-auth-event"}function b8(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EU(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(i,t={}){return ph(i,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T8=/^https?/;async function M8(i){if(i.config.emulator)return;const{authorizedDomains:t}=await S8(i);for(const e of t)try{if(A8(e))return}catch{}ic(i,"unauthorized-domain")}function A8(i){const t=BA(),{protocol:e,hostname:n}=new URL(t);if(i.startsWith("chrome-extension://")){const a=new URL(i);return a.hostname===""&&n===""?e==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&a.hostname===n}if(!T8.test(e))return!1;if(E8.test(i))return n===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8=new Kv(3e4,6e4);function bD(){const i=Qc().___jsl;if(i?.H){for(const t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let e=0;e<i.CP.length;e++)i.CP[e]=null}}function R8(i){return new Promise((t,e)=>{function n(){bD(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{bD(),e(Zc(i,"network-request-failed"))},timeout:w8.get()})}if(Qc().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Qc().gapi?.load)n();else{const s=yH("iframefcb");return Qc()[s]=()=>{gapi.load?n():e(Zc(i,"network-request-failed"))},oU(`${gH()}?onload=${s}`).catch(r=>e(r))}}).catch(t=>{throw tS=null,t})}let tS=null;function C8(i){return tS=tS||R8(i),tS}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8=new Kv(5e3,15e3),I8="__/auth/iframe",N8="emulator/auth/iframe",O8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U8(i){const t=i.config;an(t.authDomain,i,"auth-domain-config-required");const e=t.emulator?Jw(t,N8):`https://${i.config.authDomain}/${I8}`,n={apiKey:t.apiKey,appName:i.name,v:Ap},s=P8.get(i.config.apiHost);s&&(n.eid=s);const r=i._getFrameworks();return r.length&&(n.fw=r.join(",")),`${e}?${Yv(n).slice(1)}`}async function L8(i){const t=await C8(i),e=Qc().gapi;return an(e,i,"internal-error"),t.open({where:document.body,url:U8(i),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O8,dontclear:!0},n=>new Promise(async(s,r)=>{await n.restyle({setHideOnLeave:!1});const a=Zc(i,"network-request-failed"),o=Qc().setTimeout(()=>{r(a)},D8.get());function c(){Qc().clearTimeout(o),s(n)}n.ping(c).then(c,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B8=500,z8=600,F8="_blank",V8="http://localhost";class SD{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function H8(i,t,e,n=B8,s=z8){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c={...k8,width:n.toString(),height:s.toString(),top:r,left:a},u=ua().toLowerCase();e&&(o=tU(u)?F8:e),JP(u)&&(t=t||V8,c.scrollbars="yes");const d=Object.entries(c).reduce((y,[_,b])=>`${y}${_}=${b},`,"");if(oH(u)&&o!=="_self")return G8(t||"",o),new SD(null);const g=window.open(t||"",o,d);an(g,i,"popup-blocked");try{g.focus()}catch{}return new SD(g)}function G8(i,t){const e=document.createElement("a");e.href=i,e.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8="__/auth/handler",W8="emulator/auth/handler",q8=encodeURIComponent("fac");async function ED(i,t,e,n,s,r){an(i.config.authDomain,i,"auth-domain-config-required"),an(i.config.apiKey,i,"invalid-api-key");const a={apiKey:i.config.apiKey,appName:i.name,authType:e,redirectUrl:n,v:Ap,eventId:s};if(t instanceof uU){t.setDefaultLanguage(i.languageCode),a.providerId=t.providerId||"",A5(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(t instanceof Qv){const d=t.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}i.tenantId&&(a.tid=i.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await i._getAppCheckToken(),u=c?`#${q8}=${encodeURIComponent(c)}`:"";return`${X8(i)}?${Yv(o).slice(1)}${u}`}function X8({config:i}){return i.emulator?Jw(i,W8):`https://${i.authDomain}/${j8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="webStorageSupport";class Y8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yU,this._completeRedirectFn=v8,this._overrideRedirectResult=m8}async _openPopup(t,e,n,s){oh(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const r=await ED(t,e,n,BA(),s);return H8(t,r,i2())}async _openRedirect(t,e,n,s){await this._originValidation(t);const r=await ED(t,e,n,BA(),s);return QH(r),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:r}=this.eventManagers[e];return s?Promise.resolve(s):(oh(r,"If manager is not set, promise should be"),r)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}async initAndGetManager(t){const e=await L8(t),n=new x8(t);return e.register("authEvent",s=>(an(s?.authEvent,t,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(XT,{type:XT},s=>{const r=s?.[0]?.[XT];r!==void 0&&e(!!r),ic(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=M8(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return rU()||$P()||t2()}}const K8=Y8;var TD="@firebase/auth",MD="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(n=>{t(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J8(i){nc(new gl("auth",(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;an(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:o,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aU(i)},u=new dH(n,s,r,c);return EH(u,e),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),nc(new gl("auth-internal",t=>{const e=wp(t.getProvider("auth").getImmediate());return(n=>new Z8(n))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),go(TD,MD,Q8(i)),go(TD,MD,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=300,t9=OP("authIdTokenMaxAge")||$8;let AD=null;const e9=i=>async t=>{const e=t&&await t.getIdTokenResult(),n=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>t9)return;const s=e?.token;AD!==s&&(AD=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function n9(i=W1()){const t=Vf(i,"auth");if(t.isInitialized())return t.getImmediate();const e=SH(i,{popupRedirectResolver:K8,persistence:[a8,YH,yU]}),n=OP("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(n,location.origin);if(location.origin===r.origin){const a=e9(r.toString());GH(e,a,()=>a(e.currentUser)),HH(e,o=>a(o))}}const s=DP("auth");return s&&TH(e,`http://${s}`),e}function i9(){return document.getElementsByTagName("head")?.[0]??document}pH({loadJS(i){return new Promise((t,e)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=t,n.onerror=s=>{const r=Zc("internal-error");r.customData=s,e(r)},n.type="text/javascript",n.charset="UTF-8",i9().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J8("Browser");var wD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Af,TU;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(L,U){function D(){}D.prototype=U.prototype,L.F=U.prototype,L.prototype=new D,L.prototype.constructor=L,L.D=function(O,F,H){for(var G=Array(arguments.length-2),it=2;it<arguments.length;it++)G[it-2]=arguments[it];return U.prototype[F].apply(O,G)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(n,e),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(L,U,D){D||(D=0);const O=Array(16);if(typeof U=="string")for(var F=0;F<16;++F)O[F]=U.charCodeAt(D++)|U.charCodeAt(D++)<<8|U.charCodeAt(D++)<<16|U.charCodeAt(D++)<<24;else for(F=0;F<16;++F)O[F]=U[D++]|U[D++]<<8|U[D++]<<16|U[D++]<<24;U=L.g[0],D=L.g[1],F=L.g[2];let H=L.g[3],G;G=U+(H^D&(F^H))+O[0]+3614090360&4294967295,U=D+(G<<7&4294967295|G>>>25),G=H+(F^U&(D^F))+O[1]+3905402710&4294967295,H=U+(G<<12&4294967295|G>>>20),G=F+(D^H&(U^D))+O[2]+606105819&4294967295,F=H+(G<<17&4294967295|G>>>15),G=D+(U^F&(H^U))+O[3]+3250441966&4294967295,D=F+(G<<22&4294967295|G>>>10),G=U+(H^D&(F^H))+O[4]+4118548399&4294967295,U=D+(G<<7&4294967295|G>>>25),G=H+(F^U&(D^F))+O[5]+1200080426&4294967295,H=U+(G<<12&4294967295|G>>>20),G=F+(D^H&(U^D))+O[6]+2821735955&4294967295,F=H+(G<<17&4294967295|G>>>15),G=D+(U^F&(H^U))+O[7]+4249261313&4294967295,D=F+(G<<22&4294967295|G>>>10),G=U+(H^D&(F^H))+O[8]+1770035416&4294967295,U=D+(G<<7&4294967295|G>>>25),G=H+(F^U&(D^F))+O[9]+2336552879&4294967295,H=U+(G<<12&4294967295|G>>>20),G=F+(D^H&(U^D))+O[10]+4294925233&4294967295,F=H+(G<<17&4294967295|G>>>15),G=D+(U^F&(H^U))+O[11]+2304563134&4294967295,D=F+(G<<22&4294967295|G>>>10),G=U+(H^D&(F^H))+O[12]+1804603682&4294967295,U=D+(G<<7&4294967295|G>>>25),G=H+(F^U&(D^F))+O[13]+4254626195&4294967295,H=U+(G<<12&4294967295|G>>>20),G=F+(D^H&(U^D))+O[14]+2792965006&4294967295,F=H+(G<<17&4294967295|G>>>15),G=D+(U^F&(H^U))+O[15]+1236535329&4294967295,D=F+(G<<22&4294967295|G>>>10),G=U+(F^H&(D^F))+O[1]+4129170786&4294967295,U=D+(G<<5&4294967295|G>>>27),G=H+(D^F&(U^D))+O[6]+3225465664&4294967295,H=U+(G<<9&4294967295|G>>>23),G=F+(U^D&(H^U))+O[11]+643717713&4294967295,F=H+(G<<14&4294967295|G>>>18),G=D+(H^U&(F^H))+O[0]+3921069994&4294967295,D=F+(G<<20&4294967295|G>>>12),G=U+(F^H&(D^F))+O[5]+3593408605&4294967295,U=D+(G<<5&4294967295|G>>>27),G=H+(D^F&(U^D))+O[10]+38016083&4294967295,H=U+(G<<9&4294967295|G>>>23),G=F+(U^D&(H^U))+O[15]+3634488961&4294967295,F=H+(G<<14&4294967295|G>>>18),G=D+(H^U&(F^H))+O[4]+3889429448&4294967295,D=F+(G<<20&4294967295|G>>>12),G=U+(F^H&(D^F))+O[9]+568446438&4294967295,U=D+(G<<5&4294967295|G>>>27),G=H+(D^F&(U^D))+O[14]+3275163606&4294967295,H=U+(G<<9&4294967295|G>>>23),G=F+(U^D&(H^U))+O[3]+4107603335&4294967295,F=H+(G<<14&4294967295|G>>>18),G=D+(H^U&(F^H))+O[8]+1163531501&4294967295,D=F+(G<<20&4294967295|G>>>12),G=U+(F^H&(D^F))+O[13]+2850285829&4294967295,U=D+(G<<5&4294967295|G>>>27),G=H+(D^F&(U^D))+O[2]+4243563512&4294967295,H=U+(G<<9&4294967295|G>>>23),G=F+(U^D&(H^U))+O[7]+1735328473&4294967295,F=H+(G<<14&4294967295|G>>>18),G=D+(H^U&(F^H))+O[12]+2368359562&4294967295,D=F+(G<<20&4294967295|G>>>12),G=U+(D^F^H)+O[5]+4294588738&4294967295,U=D+(G<<4&4294967295|G>>>28),G=H+(U^D^F)+O[8]+2272392833&4294967295,H=U+(G<<11&4294967295|G>>>21),G=F+(H^U^D)+O[11]+1839030562&4294967295,F=H+(G<<16&4294967295|G>>>16),G=D+(F^H^U)+O[14]+4259657740&4294967295,D=F+(G<<23&4294967295|G>>>9),G=U+(D^F^H)+O[1]+2763975236&4294967295,U=D+(G<<4&4294967295|G>>>28),G=H+(U^D^F)+O[4]+1272893353&4294967295,H=U+(G<<11&4294967295|G>>>21),G=F+(H^U^D)+O[7]+4139469664&4294967295,F=H+(G<<16&4294967295|G>>>16),G=D+(F^H^U)+O[10]+3200236656&4294967295,D=F+(G<<23&4294967295|G>>>9),G=U+(D^F^H)+O[13]+681279174&4294967295,U=D+(G<<4&4294967295|G>>>28),G=H+(U^D^F)+O[0]+3936430074&4294967295,H=U+(G<<11&4294967295|G>>>21),G=F+(H^U^D)+O[3]+3572445317&4294967295,F=H+(G<<16&4294967295|G>>>16),G=D+(F^H^U)+O[6]+76029189&4294967295,D=F+(G<<23&4294967295|G>>>9),G=U+(D^F^H)+O[9]+3654602809&4294967295,U=D+(G<<4&4294967295|G>>>28),G=H+(U^D^F)+O[12]+3873151461&4294967295,H=U+(G<<11&4294967295|G>>>21),G=F+(H^U^D)+O[15]+530742520&4294967295,F=H+(G<<16&4294967295|G>>>16),G=D+(F^H^U)+O[2]+3299628645&4294967295,D=F+(G<<23&4294967295|G>>>9),G=U+(F^(D|~H))+O[0]+4096336452&4294967295,U=D+(G<<6&4294967295|G>>>26),G=H+(D^(U|~F))+O[7]+1126891415&4294967295,H=U+(G<<10&4294967295|G>>>22),G=F+(U^(H|~D))+O[14]+2878612391&4294967295,F=H+(G<<15&4294967295|G>>>17),G=D+(H^(F|~U))+O[5]+4237533241&4294967295,D=F+(G<<21&4294967295|G>>>11),G=U+(F^(D|~H))+O[12]+1700485571&4294967295,U=D+(G<<6&4294967295|G>>>26),G=H+(D^(U|~F))+O[3]+2399980690&4294967295,H=U+(G<<10&4294967295|G>>>22),G=F+(U^(H|~D))+O[10]+4293915773&4294967295,F=H+(G<<15&4294967295|G>>>17),G=D+(H^(F|~U))+O[1]+2240044497&4294967295,D=F+(G<<21&4294967295|G>>>11),G=U+(F^(D|~H))+O[8]+1873313359&4294967295,U=D+(G<<6&4294967295|G>>>26),G=H+(D^(U|~F))+O[15]+4264355552&4294967295,H=U+(G<<10&4294967295|G>>>22),G=F+(U^(H|~D))+O[6]+2734768916&4294967295,F=H+(G<<15&4294967295|G>>>17),G=D+(H^(F|~U))+O[13]+1309151649&4294967295,D=F+(G<<21&4294967295|G>>>11),G=U+(F^(D|~H))+O[4]+4149444226&4294967295,U=D+(G<<6&4294967295|G>>>26),G=H+(D^(U|~F))+O[11]+3174756917&4294967295,H=U+(G<<10&4294967295|G>>>22),G=F+(U^(H|~D))+O[2]+718787259&4294967295,F=H+(G<<15&4294967295|G>>>17),G=D+(H^(F|~U))+O[9]+3951481745&4294967295,L.g[0]=L.g[0]+U&4294967295,L.g[1]=L.g[1]+(F+(G<<21&4294967295|G>>>11))&4294967295,L.g[2]=L.g[2]+F&4294967295,L.g[3]=L.g[3]+H&4294967295}n.prototype.v=function(L,U){U===void 0&&(U=L.length);const D=U-this.blockSize,O=this.C;let F=this.h,H=0;for(;H<U;){if(F==0)for(;H<=D;)s(this,L,H),H+=this.blockSize;if(typeof L=="string"){for(;H<U;)if(O[F++]=L.charCodeAt(H++),F==this.blockSize){s(this,O),F=0;break}}else for(;H<U;)if(O[F++]=L[H++],F==this.blockSize){s(this,O),F=0;break}}this.h=F,this.o+=U},n.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var U=1;U<L.length-8;++U)L[U]=0;U=this.o*8;for(var D=L.length-8;D<L.length;++D)L[D]=U&255,U/=256;for(this.v(L),L=Array(16),U=0,D=0;D<4;++D)for(let O=0;O<32;O+=8)L[U++]=this.g[D]>>>O&255;return L};function r(L,U){var D=o;return Object.prototype.hasOwnProperty.call(D,L)?D[L]:D[L]=U(L)}function a(L,U){this.h=U;const D=[];let O=!0;for(let F=L.length-1;F>=0;F--){const H=L[F]|0;O&&H==U||(D[F]=H,O=!1)}this.g=D}var o={};function c(L){return-128<=L&&L<128?r(L,function(U){return new a([U|0],U<0?-1:0)}):new a([L|0],L<0?-1:0)}function u(L){if(isNaN(L)||!isFinite(L))return g;if(L<0)return S(u(-L));const U=[];let D=1;for(let O=0;L>=D;O++)U[O]=L/D|0,D*=4294967296;return new a(U,0)}function d(L,U){if(L.length==0)throw Error("number format error: empty string");if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(L.charAt(0)=="-")return S(d(L.substring(1),U));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=u(Math.pow(U,8));let O=g;for(let H=0;H<L.length;H+=8){var F=Math.min(8,L.length-H);const G=parseInt(L.substring(H,H+F),U);F<8?(F=u(Math.pow(U,F)),O=O.j(F).add(u(G))):(O=O.j(D),O=O.add(u(G)))}return O}var g=c(0),y=c(1),_=c(16777216);i=a.prototype,i.m=function(){if(M(this))return-S(this).m();let L=0,U=1;for(let D=0;D<this.g.length;D++){const O=this.i(D);L+=(O>=0?O:4294967296+O)*U,U*=4294967296}return L},i.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(b(this))return"0";if(M(this))return"-"+S(this).toString(L);const U=u(Math.pow(L,6));var D=this;let O="";for(;;){const F=P(D,U).g;D=E(D,F.j(U));let H=((D.g.length>0?D.g[0]:D.h)>>>0).toString(L);if(D=F,b(D))return H+O;for(;H.length<6;)H="0"+H;O=H+O}},i.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function b(L){if(L.h!=0)return!1;for(let U=0;U<L.g.length;U++)if(L.g[U]!=0)return!1;return!0}function M(L){return L.h==-1}i.l=function(L){return L=E(this,L),M(L)?-1:b(L)?0:1};function S(L){const U=L.g.length,D=[];for(let O=0;O<U;O++)D[O]=~L.g[O];return new a(D,~L.h).add(y)}i.abs=function(){return M(this)?S(this):this},i.add=function(L){const U=Math.max(this.g.length,L.g.length),D=[];let O=0;for(let F=0;F<=U;F++){let H=O+(this.i(F)&65535)+(L.i(F)&65535),G=(H>>>16)+(this.i(F)>>>16)+(L.i(F)>>>16);O=G>>>16,H&=65535,G&=65535,D[F]=G<<16|H}return new a(D,D[D.length-1]&-2147483648?-1:0)};function E(L,U){return L.add(S(U))}i.j=function(L){if(b(this)||b(L))return g;if(M(this))return M(L)?S(this).j(S(L)):S(S(this).j(L));if(M(L))return S(this.j(S(L)));if(this.l(_)<0&&L.l(_)<0)return u(this.m()*L.m());const U=this.g.length+L.g.length,D=[];for(var O=0;O<2*U;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(let F=0;F<L.g.length;F++){const H=this.i(O)>>>16,G=this.i(O)&65535,it=L.i(F)>>>16,lt=L.i(F)&65535;D[2*O+2*F]+=G*lt,R(D,2*O+2*F),D[2*O+2*F+1]+=H*lt,R(D,2*O+2*F+1),D[2*O+2*F+1]+=G*it,R(D,2*O+2*F+1),D[2*O+2*F+2]+=H*it,R(D,2*O+2*F+2)}for(L=0;L<U;L++)D[L]=D[2*L+1]<<16|D[2*L];for(L=U;L<2*U;L++)D[L]=0;return new a(D,0)};function R(L,U){for(;(L[U]&65535)!=L[U];)L[U+1]+=L[U]>>>16,L[U]&=65535,U++}function N(L,U){this.g=L,this.h=U}function P(L,U){if(b(U))throw Error("division by zero");if(b(L))return new N(g,g);if(M(L))return U=P(S(L),U),new N(S(U.g),S(U.h));if(M(U))return U=P(L,S(U)),new N(S(U.g),U.h);if(L.g.length>30){if(M(L)||M(U))throw Error("slowDivide_ only works with positive integers.");for(var D=y,O=U;O.l(L)<=0;)D=k(D),O=k(O);var F=z(D,1),H=z(O,1);for(O=z(O,2),D=z(D,2);!b(O);){var G=H.add(O);G.l(L)<=0&&(F=F.add(D),H=G),O=z(O,1),D=z(D,1)}return U=E(L,F.j(U)),new N(F,U)}for(F=g;L.l(U)>=0;){for(D=Math.max(1,Math.floor(L.m()/U.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),H=u(D),G=H.j(U);M(G)||G.l(L)>0;)D-=O,H=u(D),G=H.j(U);b(H)&&(H=y),F=F.add(H),L=E(L,G)}return new N(F,L)}i.B=function(L){return P(this,L).h},i.and=function(L){const U=Math.max(this.g.length,L.g.length),D=[];for(let O=0;O<U;O++)D[O]=this.i(O)&L.i(O);return new a(D,this.h&L.h)},i.or=function(L){const U=Math.max(this.g.length,L.g.length),D=[];for(let O=0;O<U;O++)D[O]=this.i(O)|L.i(O);return new a(D,this.h|L.h)},i.xor=function(L){const U=Math.max(this.g.length,L.g.length),D=[];for(let O=0;O<U;O++)D[O]=this.i(O)^L.i(O);return new a(D,this.h^L.h)};function k(L){const U=L.g.length+1,D=[];for(let O=0;O<U;O++)D[O]=L.i(O)<<1|L.i(O-1)>>>31;return new a(D,L.h)}function z(L,U){const D=U>>5;U%=32;const O=L.g.length-D,F=[];for(let H=0;H<O;H++)F[H]=U>0?L.i(H+D)>>>U|L.i(H+D+1)<<32-U:L.i(H+D);return new a(F,L.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,TU=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,Af=a}).apply(typeof wD<"u"?wD:typeof self<"u"?self:typeof window<"u"?window:{});var Ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MU,wy,AU,eS,HA,wU,RU,CU;(function(){var i,t=Object.defineProperty;function e(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ix=="object"&&Ix];for(var B=0;B<T.length;++B){var q=T[B];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}var n=e(this);function s(T,B){if(B)t:{var q=n;T=T.split(".");for(var st=0;st<T.length-1;st++){var Vt=T[st];if(!(Vt in q))break t;q=q[Vt]}T=T[T.length-1],st=q[T],B=B(st),B!=st&&B!=null&&t(q,T,{configurable:!0,writable:!0,value:B})}}s("Symbol.dispose",function(T){return T||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(T){return T||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(T){return T||function(B){var q=[],st;for(st in B)Object.prototype.hasOwnProperty.call(B,st)&&q.push([st,B[st]]);return q}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},a=this||self;function o(T){var B=typeof T;return B=="object"&&T!=null||B=="function"}function c(T,B,q){return T.call.apply(T.bind,arguments)}function u(T,B,q){return u=c,u.apply(null,arguments)}function d(T,B){var q=Array.prototype.slice.call(arguments,1);return function(){var st=q.slice();return st.push.apply(st,arguments),T.apply(this,st)}}function g(T,B){function q(){}q.prototype=B.prototype,T.Z=B.prototype,T.prototype=new q,T.prototype.constructor=T,T.Ob=function(st,Vt,Kt){for(var Te=Array(arguments.length-2),un=2;un<arguments.length;un++)Te[un-2]=arguments[un];return B.prototype[Vt].apply(st,Te)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?T=>T&&AsyncContext.Snapshot.wrap(T):T=>T;function _(T){const B=T.length;if(B>0){const q=Array(B);for(let st=0;st<B;st++)q[st]=T[st];return q}return[]}function b(T,B){for(let st=1;st<arguments.length;st++){const Vt=arguments[st];var q=typeof Vt;if(q=q!="object"?q:Vt?Array.isArray(Vt)?"array":q:"null",q=="array"||q=="object"&&typeof Vt.length=="number"){q=T.length||0;const Kt=Vt.length||0;T.length=q+Kt;for(let Te=0;Te<Kt;Te++)T[q+Te]=Vt[Te]}else T.push(Vt)}}class M{constructor(B,q){this.i=B,this.j=q,this.h=0,this.g=null}get(){let B;return this.h>0?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function S(T){a.setTimeout(()=>{throw T},0)}function E(){var T=L;let B=null;return T.g&&(B=T.g,T.g=T.g.next,T.g||(T.h=null),B.next=null),B}class R{constructor(){this.h=this.g=null}add(B,q){const st=N.get();st.set(B,q),this.h?this.h.next=st:this.g=st,this.h=st}}var N=new M(()=>new P,T=>T.reset());class P{constructor(){this.next=this.g=this.h=null}set(B,q){this.h=B,this.g=q,this.next=null}reset(){this.next=this.g=this.h=null}}let k,z=!1,L=new R,U=()=>{const T=Promise.resolve(void 0);k=()=>{T.then(D)}};function D(){for(var T;T=E();){try{T.h.call(T.g)}catch(q){S(q)}var B=N;B.j(T),B.h<100&&(B.h++,T.next=B.g,B.g=T)}z=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(T,B){this.type=T,this.g=this.target=B,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,B=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const q=()=>{};a.addEventListener("test",q,B),a.removeEventListener("test",q,B)}catch{}return T})();function G(T){return/^[\s\xa0]*$/.test(T)}function it(T,B){F.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T&&this.init(T,B)}g(it,F),it.prototype.init=function(T,B){const q=this.type=T.type,st=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;this.target=T.target||T.srcElement,this.g=B,B=T.relatedTarget,B||(q=="mouseover"?B=T.fromElement:q=="mouseout"&&(B=T.toElement)),this.relatedTarget=B,st?(this.clientX=st.clientX!==void 0?st.clientX:st.pageX,this.clientY=st.clientY!==void 0?st.clientY:st.pageY,this.screenX=st.screenX||0,this.screenY=st.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=T.pointerType,this.state=T.state,this.i=T,T.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);const T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var lt="closure_listenable_"+(Math.random()*1e6|0),j=0;function J(T,B,q,st,Vt){this.listener=T,this.proxy=null,this.src=B,this.type=q,this.capture=!!st,this.ha=Vt,this.key=++j,this.da=this.fa=!1}function $(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function at(T,B,q){for(const st in T)B.call(q,T[st],st,T)}function Y(T,B){for(const q in T)B.call(void 0,T[q],q,T)}function Z(T){const B={};for(const q in T)B[q]=T[q];return B}const rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(T,B){let q,st;for(let Vt=1;Vt<arguments.length;Vt++){st=arguments[Vt];for(q in st)T[q]=st[q];for(let Kt=0;Kt<rt.length;Kt++)q=rt[Kt],Object.prototype.hasOwnProperty.call(st,q)&&(T[q]=st[q])}}function dt(T){this.src=T,this.g={},this.h=0}dt.prototype.add=function(T,B,q,st,Vt){const Kt=T.toString();T=this.g[Kt],T||(T=this.g[Kt]=[],this.h++);const Te=ut(T,B,st,Vt);return Te>-1?(B=T[Te],q||(B.fa=!1)):(B=new J(B,this.src,Kt,!!st,Vt),B.fa=q,T.push(B)),B};function _t(T,B){const q=B.type;if(q in T.g){var st=T.g[q],Vt=Array.prototype.indexOf.call(st,B,void 0),Kt;(Kt=Vt>=0)&&Array.prototype.splice.call(st,Vt,1),Kt&&($(B),T.g[q].length==0&&(delete T.g[q],T.h--))}}function ut(T,B,q,st){for(let Vt=0;Vt<T.length;++Vt){const Kt=T[Vt];if(!Kt.da&&Kt.listener==B&&Kt.capture==!!q&&Kt.ha==st)return Vt}return-1}var gt="closure_lm_"+(Math.random()*1e6|0),Tt={};function $t(T,B,q,st,Vt){if(Array.isArray(B)){for(let Kt=0;Kt<B.length;Kt++)$t(T,B[Kt],q,st,Vt);return null}return q=Bt(q),T&&T[lt]?T.J(B,q,o(st)?!!st.capture:!1,Vt):ae(T,B,q,!1,st,Vt)}function ae(T,B,q,st,Vt,Kt){if(!B)throw Error("Invalid event type");const Te=o(Vt)?!!Vt.capture:!!Vt;let un=Pt(T);if(un||(T[gt]=un=new dt(T)),q=un.add(B,q,st,Te,Kt),q.proxy)return q;if(st=ne(),q.proxy=st,st.src=T,st.listener=q,T.addEventListener)H||(Vt=Te),Vt===void 0&&(Vt=!1),T.addEventListener(B.toString(),st,Vt);else if(T.attachEvent)T.attachEvent(Gt(B.toString()),st);else if(T.addListener&&T.removeListener)T.addListener(st);else throw Error("addEventListener and attachEvent are unavailable.");return q}function ne(){function T(q){return B.call(T.src,T.listener,q)}const B=zt;return T}function ee(T,B,q,st,Vt){if(Array.isArray(B))for(var Kt=0;Kt<B.length;Kt++)ee(T,B[Kt],q,st,Vt);else st=o(st)?!!st.capture:!!st,q=Bt(q),T&&T[lt]?(T=T.i,Kt=String(B).toString(),Kt in T.g&&(B=T.g[Kt],q=ut(B,q,st,Vt),q>-1&&($(B[q]),Array.prototype.splice.call(B,q,1),B.length==0&&(delete T.g[Kt],T.h--)))):T&&(T=Pt(T))&&(B=T.g[B.toString()],T=-1,B&&(T=ut(B,q,st,Vt)),(q=T>-1?B[T]:null)&&ct(q))}function ct(T){if(typeof T!="number"&&T&&!T.da){var B=T.src;if(B&&B[lt])_t(B.i,T);else{var q=T.type,st=T.proxy;B.removeEventListener?B.removeEventListener(q,st,T.capture):B.detachEvent?B.detachEvent(Gt(q),st):B.addListener&&B.removeListener&&B.removeListener(st),(q=Pt(B))?(_t(q,T),q.h==0&&(q.src=null,B[gt]=null)):$(T)}}}function Gt(T){return T in Tt?Tt[T]:Tt[T]="on"+T}function zt(T,B){if(T.da)T=!0;else{B=new it(B,this);const q=T.listener,st=T.ha||T.src;T.fa&&ct(T),T=q.call(st,B)}return T}function Pt(T){return T=T[gt],T instanceof dt?T:null}var Ct="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bt(T){return typeof T=="function"?T:(T[Ct]||(T[Ct]=function(B){return T.handleEvent(B)}),T[Ct])}function Dt(){O.call(this),this.i=new dt(this),this.M=this,this.G=null}g(Dt,O),Dt.prototype[lt]=!0,Dt.prototype.removeEventListener=function(T,B,q,st){ee(this,T,B,q,st)};function Ut(T,B){var q,st=T.G;if(st)for(q=[];st;st=st.G)q.push(st);if(T=T.M,st=B.type||B,typeof B=="string")B=new F(B,T);else if(B instanceof F)B.target=B.target||T;else{var Vt=B;B=new F(st,T),ft(B,Vt)}Vt=!0;let Kt,Te;if(q)for(Te=q.length-1;Te>=0;Te--)Kt=B.g=q[Te],Vt=Nt(Kt,st,!0,B)&&Vt;if(Kt=B.g=T,Vt=Nt(Kt,st,!0,B)&&Vt,Vt=Nt(Kt,st,!1,B)&&Vt,q)for(Te=0;Te<q.length;Te++)Kt=B.g=q[Te],Vt=Nt(Kt,st,!1,B)&&Vt}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var T=this.i;for(const B in T.g){const q=T.g[B];for(let st=0;st<q.length;st++)$(q[st]);delete T.g[B],T.h--}}this.G=null},Dt.prototype.J=function(T,B,q,st){return this.i.add(String(T),B,!1,q,st)},Dt.prototype.K=function(T,B,q,st){return this.i.add(String(T),B,!0,q,st)};function Nt(T,B,q,st){if(B=T.i.g[String(B)],!B)return!0;B=B.concat();let Vt=!0;for(let Kt=0;Kt<B.length;++Kt){const Te=B[Kt];if(Te&&!Te.da&&Te.capture==q){const un=Te.listener,xi=Te.ha||Te.src;Te.fa&&_t(T.i,Te),Vt=un.call(xi,st)!==!1&&Vt}}return Vt&&!st.defaultPrevented}function ge(T,B){if(typeof T!="function")if(T&&typeof T.handleEvent=="function")T=u(T.handleEvent,T);else throw Error("Invalid listener argument");return Number(B)>2147483647?-1:a.setTimeout(T,B||0)}function Q(T){T.g=ge(()=>{T.g=null,T.i&&(T.i=!1,Q(T))},T.l);const B=T.h;T.h=null,T.m.apply(null,B)}class K extends O{constructor(B,q){super(),this.m=B,this.l=q,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:Q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mt(T){O.call(this),this.h=T,this.g={}}g(mt,O);var Lt=[];function Rt(T){at(T.g,function(B,q){this.g.hasOwnProperty(q)&&ct(B)},T),T.g={}}mt.prototype.N=function(){mt.Z.N.call(this),Rt(this)},mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=a.JSON.stringify,oe=a.JSON.parse,le=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function ve(){}function be(){}var Xt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function te(){F.call(this,"d")}g(te,F);function re(){F.call(this,"c")}g(re,F);var ht={},wt=null;function de(){return wt=wt||new Dt}ht.Ia="serverreachability";function pt(T){F.call(this,ht.Ia,T)}g(pt,F);function Ft(T){const B=de();Ut(B,new pt(B))}ht.STAT_EVENT="statevent";function ie(T,B){F.call(this,ht.STAT_EVENT,T),this.stat=B}g(ie,F);function ye(T){const B=de();Ut(B,new ie(B,T))}ht.Ja="timingevent";function se(T,B){F.call(this,ht.Ja,T),this.size=B}g(se,F);function jt(T,B){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},B)}function xe(){this.g=!0}xe.prototype.ua=function(){this.g=!1};function we(T,B,q,st,Vt,Kt){T.info(function(){if(T.g)if(Kt){var Te="",un=Kt.split("&");for(let jn=0;jn<un.length;jn++){var xi=un[jn].split("=");if(xi.length>1){const Hi=xi[0];xi=xi[1];const Ts=Hi.split("_");Te=Ts.length>=2&&Ts[1]=="type"?Te+(Hi+"="+xi+"&"):Te+(Hi+"=redacted&")}}}else Te=null;else Te=Kt;return"XMLHTTP REQ ("+st+") [attempt "+Vt+"]: "+B+`
`+q+`
`+Te})}function Ce(T,B,q,st,Vt,Kt,Te){T.info(function(){return"XMLHTTP RESP ("+st+") [ attempt "+Vt+"]: "+B+`
`+q+`
`+Kt+" "+Te})}function Ie(T,B,q,st){T.info(function(){return"XMLHTTP TEXT ("+B+"): "+dn(T,q)+(st?" "+st:"")})}function Ln(T,B){T.info(function(){return"TIMEOUT: "+B})}xe.prototype.info=function(){};function dn(T,B){if(!T.g)return B;if(!B)return null;try{const Kt=JSON.parse(B);if(Kt){for(T=0;T<Kt.length;T++)if(Array.isArray(Kt[T])){var q=Kt[T];if(!(q.length<2)){var st=q[1];if(Array.isArray(st)&&!(st.length<1)){var Vt=st[0];if(Vt!="noop"&&Vt!="stop"&&Vt!="close")for(let Te=1;Te<st.length;Te++)st[Te]=""}}}}return At(Kt)}catch{return B}}var fn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fi;function vi(){}g(vi,ve),vi.prototype.g=function(){return new XMLHttpRequest},Fi=new vi;function ys(T){return encodeURIComponent(String(T))}function ji(T){var B=1;T=T.split(":");const q=[];for(;B>0&&T.length;)q.push(T.shift()),B--;return T.length&&q.push(T.join(":")),q}function Kn(T,B,q,st){this.j=T,this.i=B,this.l=q,this.S=st||1,this.V=new mt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Nn={},Ps={};function Us(T,B,q){T.M=1,T.A=ns(Ge(B)),T.u=q,T.R=!0,fa(T,null)}function fa(T,B){T.F=Date.now(),da(T),T.B=Ge(T.A);var q=T.B,st=T.S;Array.isArray(st)||(st=[String(st)]),za(q.i,"t",st),T.C=0,q=T.j.L,T.h=new Zn,T.g=fc(T.j,q?B:null,!T.u),T.P>0&&(T.O=new K(u(T.Y,T,T.g),T.P)),B=T.V,q=T.g,st=T.ba;var Vt="readystatechange";Array.isArray(Vt)||(Vt&&(Lt[0]=Vt.toString()),Vt=Lt);for(let Kt=0;Kt<Vt.length;Kt++){const Te=$t(q,Vt[Kt],st||B.handleEvent,!1,B.h||B);if(!Te)break;B.g[Te.key]=Te}B=T.J?Z(T.J):{},T.u?(T.v||(T.v="POST"),B["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.B,T.v,T.u,B)):(T.v="GET",T.g.ea(T.B,T.v,null,B)),Ft(),we(T.i,T.v,T.B,T.l,T.S,T.u)}Kn.prototype.ba=function(T){T=T.target;const B=this.O;B&&Wi(T)==3?B.j():this.Y(T)},Kn.prototype.Y=function(T){try{if(T==this.g)t:{const un=Wi(this.g),xi=this.g.ya(),jn=this.g.ca();if(!(un<3)&&(un!=3||this.g&&(this.h.h||this.g.la()||Ls(this.g)))){this.K||un!=4||xi==7||(xi==8||jn<=0?Ft(3):Ft(2)),St(this);var B=this.g.ca();this.X=B;var q=Br(this);if(this.o=B==200,Ce(this.i,this.v,this.B,this.l,this.S,un,B),this.o){if(this.U&&!this.L){e:{if(this.g){var st,Vt=this.g;if((st=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(st)){var Kt=st;break e}}Kt=null}if(T=Kt)Ie(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yt(this,T);else{this.o=!1,this.m=3,ye(12),qt(this),kt(this);break t}}if(this.R){T=!0;let Hi;for(;!this.K&&this.C<q.length;)if(Hi=Ba(this,q),Hi==Ps){un==4&&(this.m=4,ye(14),T=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}else if(Hi==Nn){this.m=4,ye(15),Ie(this.i,this.l,q,"[Invalid Chunk]"),T=!1;break}else Ie(this.i,this.l,Hi,null),yt(this,Hi);if(di(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||q.length!=0||this.h.h||(this.m=1,ye(16),T=!1),this.o=this.o&&T,!T)Ie(this.i,this.l,q,"[Invalid Chunked Response]"),qt(this),kt(this);else if(q.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),rs(Te),Te.P=!0,ye(11))}}else Ie(this.i,this.l,q,null),yt(this,q);un==4&&qt(this),this.o&&!this.K&&(un==4?ur(this.j,this):(this.o=!1,da(this)))}else To(this.g),B==400&&q.indexOf("Unknown SID")>0?(this.m=3,ye(12)):(this.m=0,ye(13)),qt(this),kt(this)}}}catch{}finally{}};function Br(T){if(!di(T))return T.g.la();const B=Ls(T.g);if(B==="")return"";let q="";const st=B.length,Vt=Wi(T.g)==4;if(!T.h.i){if(typeof TextDecoder>"u")return qt(T),kt(T),"";T.h.i=new a.TextDecoder}for(let Kt=0;Kt<st;Kt++)T.h.h=!0,q+=T.h.i.decode(B[Kt],{stream:!(Vt&&Kt==st-1)});return B.length=0,T.h.g+=q,T.C=0,T.h.g}function di(T){return T.g?T.v=="GET"&&T.M!=2&&T.j.Aa:!1}function Ba(T,B){var q=T.C,st=B.indexOf(`
`,q);return st==-1?Ps:(q=Number(B.substring(q,st)),isNaN(q)?Nn:(st+=1,st+q>B.length?Ps:(B=B.slice(st,st+q),T.C=st+q,B)))}Kn.prototype.cancel=function(){this.K=!0,qt(this)};function da(T){T.T=Date.now()+T.H,et(T,T.H)}function et(T,B){if(T.D!=null)throw Error("WatchDog timer not null");T.D=jt(u(T.aa,T),B)}function St(T){T.D&&(a.clearTimeout(T.D),T.D=null)}Kn.prototype.aa=function(){this.D=null;const T=Date.now();T-this.T>=0?(Ln(this.i,this.B),this.M!=2&&(Ft(),ye(17)),qt(this),this.m=2,kt(this)):et(this,this.T-T)};function kt(T){T.j.I==0||T.K||ur(T.j,T)}function qt(T){St(T);var B=T.O;B&&typeof B.dispose=="function"&&B.dispose(),T.O=null,Rt(T.V),T.g&&(B=T.g,T.g=null,B.abort(),B.dispose())}function yt(T,B){try{var q=T.j;if(q.I!=0&&(q.g==T||ze(q.h,T))){if(!T.L&&ze(q.h,T)&&q.I==3){try{var st=q.Ba.g.parse(B)}catch{st=null}if(Array.isArray(st)&&st.length==3){var Vt=st;if(Vt[0]==0){t:if(!q.v){if(q.g)if(q.g.F+3e3<T.F)Li(q),Vr(q);else break t;uc(q),ye(18)}}else q.xa=Vt[1],0<q.xa-q.K&&Vt[2]<37500&&q.F&&q.A==0&&!q.C&&(q.C=jt(u(q.Va,q),6e3));Re(q.h)<=1&&q.ta&&(q.ta=void 0)}else Wo(q,11)}else if((T.L||q.g==T)&&Li(q),!G(B))for(Vt=q.Ba.g.parse(B),B=0;B<Vt.length;B++){let jn=Vt[B];const Hi=jn[0];if(!(Hi<=q.K))if(q.K=Hi,jn=jn[1],q.I==2)if(jn[0]=="c"){q.M=jn[1],q.ba=jn[2];const Ts=jn[3];Ts!=null&&(q.ka=Ts,q.j.info("VER="+q.ka));const ki=jn[4];ki!=null&&(q.za=ki,q.j.info("SVER="+q.za));const Hr=jn[5];Hr!=null&&typeof Hr=="number"&&Hr>0&&(st=1.5*Hr,q.O=st,q.j.info("backChannelRequestTimeoutMs_="+st)),st=q;const Xa=T.g;if(Xa){const ya=Xa.g?Xa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var Kt=st.h;Kt.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(Kt.j=Kt.l,Kt.g=new Set,Kt.h&&(He(Kt,Kt.h),Kt.h=null))}if(st.G){const El=Xa.g?Xa.g.getResponseHeader("X-HTTP-Session-Id"):null;El&&(st.wa=El,Ke(st.J,st.G,El))}}q.I=3,q.l&&q.l.ra(),q.aa&&(q.T=Date.now()-T.F,q.j.info("Handshake RTT: "+q.T+"ms")),st=q;var Te=T;if(st.na=_h(st,st.L?st.ba:null,st.W),Te.L){Le(st.h,Te);var un=Te,xi=st.O;xi&&(un.H=xi),un.D&&(St(un),da(un)),st.g=Te}else cc(st);q.i.length>0&&Wa(q)}else jn[0]!="stop"&&jn[0]!="close"||Wo(q,7);else q.I==3&&(jn[0]=="stop"||jn[0]=="close"?jn[0]=="stop"?Wo(q,7):cr(q):jn[0]!="noop"&&q.l&&q.l.qa(jn),q.A=0)}}Ft(4)}catch{}}var _e=class{constructor(T,B){this.g=T,this.map=B}};function Me(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=T.length>0&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function De(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Re(T){return T.h?1:T.g?T.g.size:0}function ze(T,B){return T.h?T.h==B:T.g?T.g.has(B):!1}function He(T,B){T.g?T.g.add(B):T.h=B}function Le(T,B){T.h&&T.h==B?T.h=null:T.g&&T.g.has(B)&&T.g.delete(B)}Me.prototype.cancel=function(){if(this.i=$e(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function $e(T){if(T.h!=null)return T.i.concat(T.h.G);if(T.g!=null&&T.g.size!==0){let B=T.i;for(const q of T.g.values())B=B.concat(q.G);return B}return _(T.i)}var Cn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qn(T,B){if(T){T=T.split("&");for(let q=0;q<T.length;q++){const st=T[q].indexOf("=");let Vt,Kt=null;st>=0?(Vt=T[q].substring(0,st),Kt=T[q].substring(st+1)):Vt=T[q],B(Vt,Kt?decodeURIComponent(Kt.replace(/\+/g," ")):"")}}}function bn(T){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let B;T instanceof bn?(this.l=T.l,Be(this,T.j),this.o=T.o,this.g=T.g,On(this,T.u),this.h=T.h,cn(this,oc(T.i)),this.m=T.m):T&&(B=String(T).match(Cn))?(this.l=!1,Be(this,B[1]||"",!0),this.o=_i(B[2]||""),this.g=_i(B[3]||"",!0),On(this,B[4]),this.h=_i(B[5]||"",!0),cn(this,B[6]||"",!0),this.m=_i(B[7]||"")):(this.l=!1,this.i=new ri(null,this.l))}bn.prototype.toString=function(){const T=[];var B=this.j;B&&T.push(hi(B,is,!0),":");var q=this.g;return(q||B=="file")&&(T.push("//"),(B=this.o)&&T.push(hi(B,is,!0),"@"),T.push(ys(q).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),q=this.u,q!=null&&T.push(":",String(q))),(q=this.h)&&(this.g&&q.charAt(0)!="/"&&T.push("/"),T.push(hi(q,q.charAt(0)=="/"?ei:Vi,!0))),(q=this.i.toString())&&T.push("?",q),(q=this.m)&&T.push("#",hi(q,zr)),T.join("")},bn.prototype.resolve=function(T){const B=Ge(this);let q=!!T.j;q?Be(B,T.j):q=!!T.o,q?B.o=T.o:q=!!T.g,q?B.g=T.g:q=T.u!=null;var st=T.h;if(q)On(B,T.u);else if(q=!!T.h){if(st.charAt(0)!="/")if(this.g&&!this.h)st="/"+st;else{var Vt=B.h.lastIndexOf("/");Vt!=-1&&(st=B.h.slice(0,Vt+1)+st)}if(Vt=st,Vt==".."||Vt==".")st="";else if(Vt.indexOf("./")!=-1||Vt.indexOf("/.")!=-1){st=Vt.lastIndexOf("/",0)==0,Vt=Vt.split("/");const Kt=[];for(let Te=0;Te<Vt.length;){const un=Vt[Te++];un=="."?st&&Te==Vt.length&&Kt.push(""):un==".."?((Kt.length>1||Kt.length==1&&Kt[0]!="")&&Kt.pop(),st&&Te==Vt.length&&Kt.push("")):(Kt.push(un),st=!0)}st=Kt.join("/")}else st=Vt}return q?B.h=st:q=T.i.toString()!=="",q?cn(B,oc(T.i)):q=!!T.m,q&&(B.m=T.m),B};function Ge(T){return new bn(T)}function Be(T,B,q){T.j=q?_i(B,!0):B,T.j&&(T.j=T.j.replace(/:$/,""))}function On(T,B){if(B){if(B=Number(B),isNaN(B)||B<0)throw Error("Bad port number "+B);T.u=B}else T.u=null}function cn(T,B,q){B instanceof ri?(T.i=B,pa(T.i,T.l)):(q||(B=hi(B,Zi)),T.i=new ri(B,T.l))}function Ke(T,B,q){T.i.set(B,q)}function ns(T){return Ke(T,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),T}function _i(T,B){return T?B?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function hi(T,B,q){return typeof T=="string"?(T=encodeURI(T).replace(B,Sn),q&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function Sn(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var is=/[#\/\?@]/g,Vi=/[#\?:]/g,ei=/[#\?]/g,Zi=/[#\?@]/g,zr=/#/g;function ri(T,B){this.h=this.g=null,this.i=T||null,this.j=!!B}function Fr(T){T.g||(T.g=new Map,T.h=0,T.i&&Qn(T.i,function(B,q){T.add(decodeURIComponent(B.replace(/\+/g," ")),q)}))}i=ri.prototype,i.add=function(T,B){Fr(this),this.i=null,T=qs(this,T);let q=this.g.get(T);return q||this.g.set(T,q=[]),q.push(B),this.h+=1,this};function _o(T,B){Fr(T),B=qs(T,B),T.g.has(B)&&(T.i=null,T.h-=T.g.get(B).length,T.g.delete(B))}function xo(T,B){return Fr(T),B=qs(T,B),T.g.has(B)}i.forEach=function(T,B){Fr(this),this.g.forEach(function(q,st){q.forEach(function(Vt){T.call(B,Vt,st,this)},this)},this)};function bo(T,B){Fr(T);let q=[];if(typeof B=="string")xo(T,B)&&(q=q.concat(T.g.get(qs(T,B))));else for(T=Array.from(T.g.values()),B=0;B<T.length;B++)q=q.concat(T[B]);return q}i.set=function(T,B){return Fr(this),this.i=null,T=qs(this,T),xo(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[B]),this.h+=1,this},i.get=function(T,B){return T?(T=bo(this,T),T.length>0?String(T[0]):B):B};function za(T,B,q){_o(T,B),q.length>0&&(T.i=null,T.g.set(qs(T,B),_(q)),T.h+=q.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],B=Array.from(this.g.keys());for(let st=0;st<B.length;st++){var q=B[st];const Vt=ys(q);q=bo(this,q);for(let Kt=0;Kt<q.length;Kt++){let Te=Vt;q[Kt]!==""&&(Te+="="+ys(q[Kt])),T.push(Te)}}return this.i=T.join("&")};function oc(T){const B=new ri;return B.i=T.i,T.g&&(B.g=new Map(T.g),B.h=T.h),B}function qs(T,B){return B=String(B),T.j&&(B=B.toLowerCase()),B}function pa(T,B){B&&!T.j&&(Fr(T),T.i=null,T.g.forEach(function(q,st){const Vt=st.toLowerCase();st!=Vt&&(_o(this,st),za(this,Vt,q))},T)),T.j=B}function ma(T,B){const q=new xe;if(a.Image){const st=new Image;st.onload=d(Es,q,"TestLoadImage: loaded",!0,B,st),st.onerror=d(Es,q,"TestLoadImage: error",!1,B,st),st.onabort=d(Es,q,"TestLoadImage: abort",!1,B,st),st.ontimeout=d(Es,q,"TestLoadImage: timeout",!1,B,st),a.setTimeout(function(){st.ontimeout&&st.ontimeout()},1e4),st.src=T}else B(!1)}function or(T,B){const q=new xe,st=new AbortController,Vt=setTimeout(()=>{st.abort(),Es(q,"TestPingServer: timeout",!1,B)},1e4);fetch(T,{signal:st.signal}).then(Kt=>{clearTimeout(Vt),Kt.ok?Es(q,"TestPingServer: ok",!0,B):Es(q,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(Vt),Es(q,"TestPingServer: error",!1,B)})}function Es(T,B,q,st,Vt){try{Vt&&(Vt.onload=null,Vt.onerror=null,Vt.onabort=null,Vt.ontimeout=null),st(q)}catch{}}function So(){this.g=new le}function ga(T){this.i=T.Sb||null,this.h=T.ab||!1}g(ga,ve),ga.prototype.g=function(){return new Fa(this.i,this.h)};function Fa(T,B){Dt.call(this),this.H=T,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Fa,Dt),i=Fa.prototype,i.open=function(T,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=T,this.D=B,this.readyState=1,br(this)},i.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const B={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};T&&(B.body=T),(this.H||a).fetch(new Request(this.D,B)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ss(this)),this.readyState=0},i.Pa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Va(this)}else T.text().then(this.Oa.bind(this),this.ga.bind(this))};function Va(T){T.j.read().then(T.Ma.bind(T)).catch(T.ga.bind(T))}i.Ma=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var B=T.value?T.value:new Uint8Array(0);(B=this.B.decode(B,{stream:!T.done}))&&(this.response=this.responseText+=B)}T.done?ss(this):br(this),this.readyState==3&&Va(this)}},i.Oa=function(T){this.g&&(this.response=this.responseText=T,ss(this))},i.Na=function(T){this.g&&(this.response=T,ss(this))},i.ga=function(){this.g&&ss(this)};function ss(T){T.readyState=4,T.l=null,T.j=null,T.B=null,br(T)}i.setRequestHeader=function(T,B){this.A.append(T,B)},i.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],B=this.h.entries();for(var q=B.next();!q.done;)q=q.value,T.push(q[0]+": "+q[1]),q=B.next();return T.join(`\r
`)};function br(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function Ha(T){let B="";return at(T,function(q,st){B+=st,B+=":",B+=q,B+=`\r
`}),B}function Ui(T,B,q){t:{for(st in q){var st=!1;break t}st=!0}st||(q=Ha(q),typeof T=="string"?q!=null&&ys(q):Ke(T,B,q))}function ai(T){Dt.call(this),this.headers=new Map,this.L=T||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(ai,Dt);var Sl=/^https?$/i,lc=["POST","PUT"];i=ai.prototype,i.Fa=function(T){this.H=T},i.ea=function(T,B,q,st){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);B=B?B.toUpperCase():"GET",this.D=T,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fi.g(),this.g.onreadystatechange=y(u(this.Ca,this));try{this.B=!0,this.g.open(B,String(T),!0),this.B=!1}catch(Kt){Sr(this,Kt);return}if(T=q||"",q=new Map(this.headers),st)if(Object.getPrototypeOf(st)===Object.prototype)for(var Vt in st)q.set(Vt,st[Vt]);else if(typeof st.keys=="function"&&typeof st.get=="function")for(const Kt of st.keys())q.set(Kt,st.get(Kt));else throw Error("Unknown input type for opt_headers: "+String(st));st=Array.from(q.keys()).find(Kt=>Kt.toLowerCase()=="content-type"),Vt=a.FormData&&T instanceof a.FormData,!(Array.prototype.indexOf.call(lc,B,void 0)>=0)||st||Vt||q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Kt,Te]of q)this.g.setRequestHeader(Kt,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(T),this.v=!1}catch(Kt){Sr(this,Kt)}};function Sr(T,B){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=B,T.o=5,Ga(T),Ri(T)}function Ga(T){T.A||(T.A=!0,Ut(T,"complete"),Ut(T,"error"))}i.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=T||7,Ut(this,"complete"),Ut(this,"abort"),Ri(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ri(this,!0)),ai.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Eo(this):this.Xa())},i.Xa=function(){Eo(this)};function Eo(T){if(T.h&&typeof r<"u"){if(T.v&&Wi(T)==4)setTimeout(T.Ca.bind(T),0);else if(Ut(T,"readystatechange"),Wi(T)==4){T.h=!1;try{const Kt=T.ca();t:switch(Kt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break t;default:B=!1}var q;if(!(q=B)){var st;if(st=Kt===0){let Te=String(T.D).match(Cn)[1]||null;!Te&&a.self&&a.self.location&&(Te=a.self.location.protocol.slice(0,-1)),st=!Sl.test(Te?Te.toLowerCase():"")}q=st}if(q)Ut(T,"complete"),Ut(T,"success");else{T.o=6;try{var Vt=Wi(T)>2?T.g.statusText:""}catch{Vt=""}T.l=Vt+" ["+T.ca()+"]",Ga(T)}}finally{Ri(T)}}}}function Ri(T,B){if(T.g){T.m&&(clearTimeout(T.m),T.m=null);const q=T.g;T.g=null,B||Ut(T,"ready");try{q.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Wi(T){return T.g?T.g.readyState:0}i.ca=function(){try{return Wi(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(T){if(this.g){var B=this.g.responseText;return T&&B.indexOf(T)==0&&(B=B.substring(T.length)),oe(B)}};function Ls(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.F){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function To(T){const B={};T=(T.g&&Wi(T)>=2&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let st=0;st<T.length;st++){if(G(T[st]))continue;var q=ji(T[st]);const Vt=q[0];if(q=q[1],typeof q!="string")continue;q=q.trim();const Kt=B[Vt]||[];B[Vt]=Kt,Kt.push(q)}Y(B,function(st){return st.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(T,B,q){return q&&q.internalChannelParams&&q.internalChannelParams[T]||B}function lr(T){this.za=0,this.i=[],this.j=new xe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ja("failFast",!1,T),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ja("baseRetryDelayMs",5e3,T),this.Za=ja("retryDelaySeedMs",1e4,T),this.Ta=ja("forwardChannelMaxRetries",2,T),this.va=ja("forwardChannelRequestTimeoutMs",2e4,T),this.ma=T&&T.xmlHttpFactory||void 0,this.Ua=T&&T.Rb||void 0,this.Aa=T&&T.useFetchStreams||!1,this.O=void 0,this.L=T&&T.supportsCrossDomainXhr||!1,this.M="",this.h=new Me(T&&T.concurrentRequestLimit),this.Ba=new So,this.S=T&&T.fastHandshake||!1,this.R=T&&T.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=T&&T.Pb||!1,T&&T.ua&&this.j.ua(),T&&T.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&T&&T.detectBufferingProxy||!1,this.ia=void 0,T&&T.longPollingTimeout&&T.longPollingTimeout>0&&(this.ia=T.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=lr.prototype,i.ka=8,i.I=1,i.connect=function(T,B,q,st){ye(0),this.W=T,this.H=B||{},q&&st!==void 0&&(this.H.OSID=q,this.H.OAID=st),this.F=this.X,this.J=_h(this,null,this.W),Wa(this)};function cr(T){if(Er(T),T.I==3){var B=T.V++,q=Ge(T.J);if(Ke(q,"SID",T.M),Ke(q,"RID",B),Ke(q,"TYPE","terminate"),pi(T,q),B=new Kn(T,T.j,B),B.M=2,B.A=ns(Ge(q)),q=!1,a.navigator&&a.navigator.sendBeacon)try{q=a.navigator.sendBeacon(B.A.toString(),"")}catch{}!q&&a.Image&&(new Image().src=B.A,q=!0),q||(B.g=fc(B.j,null),B.g.ea(B.A)),B.F=Date.now(),da(B)}qf(T)}function Vr(T){T.g&&(rs(T),T.g.cancel(),T.g=null)}function Er(T){Vr(T),T.v&&(a.clearTimeout(T.v),T.v=null),Li(T),T.h.cancel(),T.m&&(typeof T.m=="number"&&a.clearTimeout(T.m),T.m=null)}function Wa(T){if(!De(T.h)&&!T.m){T.m=!0;var B=T.Ea;k||U(),z||(k(),z=!0),L.add(B,T),T.D=0}}function ks(T,B){return Re(T.h)>=T.h.j-(T.m?1:0)?!1:T.m?(T.i=B.G.concat(T.i),!0):T.I==1||T.I==2||T.D>=(T.Sa?0:T.Ta)?!1:(T.m=jt(u(T.Ea,T,B),hc(T,T.D)),T.D++,!0)}i.Ea=function(T){if(this.m)if(this.m=null,this.I==1){if(!T){this.V=Math.floor(Math.random()*1e5),T=this.V++;const Vt=new Kn(this,this.j,T);let Kt=this.o;if(this.U&&(Kt?(Kt=Z(Kt),ft(Kt,this.U)):Kt=this.U),this.u!==null||this.R||(Vt.J=Kt,Kt=null),this.S)t:{for(var B=0,q=0;q<this.i.length;q++){e:{var st=this.i[q];if("__data__"in st.map&&(st=st.map.__data__,typeof st=="string")){st=st.length;break e}st=void 0}if(st===void 0)break;if(B+=st,B>4096){B=q;break t}if(B===4096||q===this.i.length-1){B=q+1;break t}}B=1e3}else B=1e3;B=qa(this,Vt,B),q=Ge(this.J),Ke(q,"RID",T),Ke(q,"CVER",22),this.G&&Ke(q,"X-HTTP-Session-Id",this.G),pi(this,q),Kt&&(this.R?B="headers="+ys(Ha(Kt))+"&"+B:this.u&&Ui(q,this.u,Kt)),He(this.h,Vt),this.Ra&&Ke(q,"TYPE","init"),this.S?(Ke(q,"$req",B),Ke(q,"SID","null"),Vt.U=!0,Us(Vt,q,null)):Us(Vt,q,B),this.I=2}}else this.I==3&&(T?vh(this,T):this.i.length==0||De(this.h)||vh(this))};function vh(T,B){var q;B?q=B.l:q=T.V++;const st=Ge(T.J);Ke(st,"SID",T.M),Ke(st,"RID",q),Ke(st,"AID",T.K),pi(T,st),T.u&&T.o&&Ui(st,T.u,T.o),q=new Kn(T,T.j,q,T.D+1),T.u===null&&(q.J=T.o),B&&(T.i=B.G.concat(T.i)),B=qa(T,q,1e3),q.H=Math.round(T.va*.5)+Math.round(T.va*.5*Math.random()),He(T.h,q),Us(q,st,B)}function pi(T,B){T.H&&at(T.H,function(q,st){Ke(B,st,q)}),T.l&&at({},function(q,st){Ke(B,st,q)})}function qa(T,B,q){q=Math.min(T.i.length,q);const st=T.l?u(T.l.Ka,T.l,T):null;t:{var Vt=T.i;let un=-1;for(;;){const xi=["count="+q];un==-1?q>0?(un=Vt[0].g,xi.push("ofs="+un)):un=0:xi.push("ofs="+un);let jn=!0;for(let Hi=0;Hi<q;Hi++){var Kt=Vt[Hi].g;const Ts=Vt[Hi].map;if(Kt-=un,Kt<0)un=Math.max(0,Vt[Hi].g-100),jn=!1;else try{Kt="req"+Kt+"_"||"";try{var Te=Ts instanceof Map?Ts:Object.entries(Ts);for(const[ki,Hr]of Te){let Xa=Hr;o(Hr)&&(Xa=At(Hr)),xi.push(Kt+ki+"="+encodeURIComponent(Xa))}}catch(ki){throw xi.push(Kt+"type="+encodeURIComponent("_badmap")),ki}}catch{st&&st(Ts)}}if(jn){Te=xi.join("&");break t}}Te=void 0}return T=T.i.splice(0,q),B.G=T,Te}function cc(T){if(!T.g&&!T.v){T.Y=1;var B=T.Da;k||U(),z||(k(),z=!0),L.add(B,T),T.A=0}}function uc(T){return T.g||T.v||T.A>=3?!1:(T.Y++,T.v=jt(u(T.Da,T),hc(T,T.A)),T.A++,!0)}i.Da=function(){if(this.v=null,Xs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var T=4*this.T;this.j.info("BP detection timer enabled: "+T),this.B=jt(u(this.Wa,this),T)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ye(10),Vr(this),Xs(this))};function rs(T){T.B!=null&&(a.clearTimeout(T.B),T.B=null)}function Xs(T){T.g=new Kn(T,T.j,"rpc",T.Y),T.u===null&&(T.g.J=T.o),T.g.P=0;var B=Ge(T.na);Ke(B,"RID","rpc"),Ke(B,"SID",T.M),Ke(B,"AID",T.K),Ke(B,"CI",T.F?"0":"1"),!T.F&&T.ia&&Ke(B,"TO",T.ia),Ke(B,"TYPE","xmlhttp"),pi(T,B),T.u&&T.o&&Ui(B,T.u,T.o),T.O&&(T.g.H=T.O);var q=T.g;T=T.ba,q.M=1,q.A=ns(Ge(B)),q.u=null,q.R=!0,fa(q,T)}i.Va=function(){this.C!=null&&(this.C=null,Vr(this),uc(this),ye(19))};function Li(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function ur(T,B){var q=null;if(T.g==B){Li(T),rs(T),T.g=null;var st=2}else if(ze(T.h,B))q=B.G,Le(T.h,B),st=1;else return;if(T.I!=0){if(B.o)if(st==1){q=B.u?B.u.length:0,B=Date.now()-B.F;var Vt=T.D;st=de(),Ut(st,new se(st,q)),Wa(T)}else cc(T);else if(Vt=B.m,Vt==3||Vt==0&&B.X>0||!(st==1&&ks(T,B)||st==2&&uc(T)))switch(q&&q.length>0&&(B=T.h,B.i=B.i.concat(q)),Vt){case 1:Wo(T,5);break;case 4:Wo(T,10);break;case 3:Wo(T,6);break;default:Wo(T,2)}}}function hc(T,B){let q=T.Qa+Math.floor(Math.random()*T.Za);return T.isActive()||(q*=2),q*B}function Wo(T,B){if(T.j.info("Error code "+B),B==2){var q=u(T.bb,T),st=T.Ua;const Vt=!st;st=new bn(st||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Be(st,"https"),ns(st),Vt?ma(st.toString(),q):or(st.toString(),q)}else ye(2);T.I=0,T.l&&T.l.pa(B),qf(T),Er(T)}i.bb=function(T){T?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))};function qf(T){if(T.I=0,T.ja=[],T.l){const B=$e(T.h);(B.length!=0||T.i.length!=0)&&(b(T.ja,B),b(T.ja,T.i),T.h.i.length=0,_(T.i),T.i.length=0),T.l.oa()}}function _h(T,B,q){var st=q instanceof bn?Ge(q):new bn(q);if(st.g!="")B&&(st.g=B+"."+st.g),On(st,st.u);else{var Vt=a.location;st=Vt.protocol,B=B?B+"."+Vt.hostname:Vt.hostname,Vt=+Vt.port;const Kt=new bn(null);st&&Be(Kt,st),B&&(Kt.g=B),Vt&&On(Kt,Vt),q&&(Kt.h=q),st=Kt}return q=T.G,B=T.wa,q&&B&&Ke(st,q,B),Ke(st,"VER",T.ka),pi(T,st),st}function fc(T,B,q){if(B&&!T.L)throw Error("Can't create secondary domain capable XhrIo object.");return B=T.Aa&&!T.ma?new ai(new ga({ab:q})):new ai(T.ma),B.Fa(T.L),B}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xf(){}i=Xf.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function dc(){}dc.prototype.g=function(T,B){return new Ys(T,B)};function Ys(T,B){Dt.call(this),this.g=new lr(B),this.l=T,this.h=B&&B.messageUrlParams||null,T=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(T?T["X-WebChannel-Content-Type"]=B.messageContentType:T={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.sa&&(T?T["X-WebChannel-Client-Profile"]=B.sa:T={"X-WebChannel-Client-Profile":B.sa}),this.g.U=T,(T=B&&B.Qb)&&!G(T)&&(this.g.u=T),this.A=B&&B.supportsCrossDomainXhr||!1,this.v=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!G(B)&&(this.g.G=B,T=this.h,T!==null&&B in T&&(T=this.h,B in T&&delete T[B])),this.j=new qo(this)}g(Ys,Dt),Ys.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ys.prototype.close=function(){cr(this.g)},Ys.prototype.o=function(T){var B=this.g;if(typeof T=="string"){var q={};q.__data__=T,T=q}else this.v&&(q={},q.__data__=At(T),T=q);B.i.push(new _e(B.Ya++,T)),B.I==3&&Wa(B)},Ys.prototype.N=function(){this.g.l=null,delete this.j,cr(this.g),delete this.g,Ys.Z.N.call(this)};function pu(T){te.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var B=T.__sm__;if(B){t:{for(const q in B){T=q;break t}T=void 0}(this.i=T)&&(T=this.i,B=B!==null&&T in B?B[T]:void 0),this.data=B}else this.data=T}g(pu,te);function Yf(){re.call(this),this.status=1}g(Yf,re);function qo(T){this.g=T}g(qo,Xf),qo.prototype.ra=function(){Ut(this.g,"a")},qo.prototype.qa=function(T){Ut(this.g,new pu(T))},qo.prototype.pa=function(T){Ut(this.g,new Yf)},qo.prototype.oa=function(){Ut(this.g,"b")},dc.prototype.createWebChannel=dc.prototype.g,Ys.prototype.send=Ys.prototype.o,Ys.prototype.open=Ys.prototype.m,Ys.prototype.close=Ys.prototype.close,CU=function(){return new dc},RU=function(){return de()},wU=ht,HA={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fn.NO_ERROR=0,fn.TIMEOUT=8,fn.HTTP_ERROR=6,eS=fn,Rn.COMPLETE="complete",AU=Rn,be.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,wy=be,ai.prototype.listenOnce=ai.prototype.K,ai.prototype.getLastError=ai.prototype.Ha,ai.prototype.getLastErrorCode=ai.prototype.ya,ai.prototype.getStatus=ai.prototype.ca,ai.prototype.getResponseJson=ai.prototype.La,ai.prototype.getResponseText=ai.prototype.la,ai.prototype.send=ai.prototype.ea,ai.prototype.setWithCredentials=ai.prototype.Fa,MU=ai}).apply(typeof Ix<"u"?Ix:typeof self<"u"?self:typeof window<"u"?window:{});const RD="@firebase/firestore",CD="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ia.UNAUTHENTICATED=new ia(null),ia.GOOGLE_CREDENTIALS=new ia("google-credentials-uid"),ia.FIRST_PARTY=new ia("first-party-uid"),ia.MOCK_USER=new ia("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wg="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=new j1("@firebase/firestore");function rg(){return dp.logLevel}function ke(i,...t){if(dp.logLevel<=Vn.DEBUG){const e=t.map(r2);dp.debug(`Firestore (${Wg}): ${i}`,...e)}}function lh(i,...t){if(dp.logLevel<=Vn.ERROR){const e=t.map(r2);dp.error(`Firestore (${Wg}): ${i}`,...e)}}function Sg(i,...t){if(dp.logLevel<=Vn.WARN){const e=t.map(r2);dp.warn(`Firestore (${Wg}): ${i}`,...e)}}function r2(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(i,t,e){let n="Unexpected state";typeof t=="string"?n=t:e=t,DU(i,n,e)}function DU(i,t,e){let n=`FIRESTORE (${Wg}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(e!==void 0)try{n+=" CONTEXT: "+JSON.stringify(e)}catch{n+=" CONTEXT: "+e}throw lh(n),new Error(n)}function yi(i,t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,i||DU(t,s,n)}function xn(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends xl{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class s9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ia.UNAUTHENTICATED)))}shutdown(){}}class r9{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class a9{constructor(t){this.t=t,this.currentUser=ia.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){yi(this.o===void 0,42304);let n=this.i;const s=c=>this.i!==n?(n=this.i,e(c)):Promise.resolve();let r=new wf;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new wf,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const c=r;t.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},o=c=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new wf)}}),0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((n=>this.i!==t?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(yi(typeof n.accessToken=="string",31837,{l:n}),new IU(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yi(t===null||typeof t=="string",2055,{h:t}),new ia(t)}}class o9{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=ia.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l9{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new o9(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(ia.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class DD{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c9{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fo(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){yi(this.o===void 0,3512);const n=r=>{r.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,ke("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable((()=>n(r)))};const s=r=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>s(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new DD(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(yi(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new DD(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=u9(40);for(let r=0;r<s.length;++r)n.length<20&&s[r]<e&&(n+=t.charAt(s[r]%62))}return n}}function Hn(i,t){return i<t?-1:i>t?1:0}function GA(i,t){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++){const s=i.charAt(n),r=t.charAt(n);if(s!==r)return YT(s)===YT(r)?Hn(s,r):YT(s)?1:-1}return Hn(i.length,t.length)}const h9=55296,f9=57343;function YT(i){const t=i.charCodeAt(0);return t>=h9&&t<=f9}function Eg(i,t,e){return i.length===t.length&&i.every(((n,s)=>e(n,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="__name__";class Xc{constructor(t,e,n){e===void 0?e=0:e>t.length&&on(637,{offset:e,range:t.length}),n===void 0?n=t.length-e:n>t.length-e&&on(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return Xc.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Xc?t.forEach((n=>{e.push(n)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=Xc.compareSegments(t.get(s),e.get(s));if(r!==0)return r}return Hn(t.length,e.length)}static compareSegments(t,e){const n=Xc.isNumericId(t),s=Xc.isNumericId(e);return n&&!s?-1:!n&&s?1:n&&s?Xc.extractNumericId(t).compare(Xc.extractNumericId(e)):GA(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Af.fromString(t.substring(4,t.length-2))}}class fs extends Xc{construct(t,e,n){return new fs(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new qe(Se.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((s=>s.length>0)))}return new fs(e)}static emptyPath(){return new fs([])}}const d9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pr extends Xc{construct(t,e,n){return new Pr(t,e,n)}static isValidIdentifier(t){return d9.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pr.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ID}static keyField(){return new Pr([ID])}static fromServerFormat(t){const e=[];let n="",s=0;const r=()=>{if(n.length===0)throw new qe(Se.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let a=!1;for(;s<t.length;){const o=t[s];if(o==="\\"){if(s+1===t.length)throw new qe(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new qe(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(r(),s++)}if(r(),a)throw new qe(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Pr(e)}static emptyPath(){return new Pr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.path=t}static fromPath(t){return new Je(fs.fromString(t))}static fromName(t){return new Je(fs.fromString(t).popFirst(5))}static empty(){return new Je(fs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&fs.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return fs.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Je(new fs(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p9(i,t,e){if(!e)throw new qe(Se.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function m9(i,t,e,n){if(t===!0&&n===!0)throw new qe(Se.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function ND(i){if(!Je.isDocumentKey(i))throw new qe(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function NU(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function o2(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=(function(n){return n.constructor?n.constructor.name:null})(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":on(12329,{type:typeof i})}function hv(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new qe(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=o2(i);throw new qe(Se.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(i,t){const e={typeString:i};return t&&(e.value=t),e}function $v(i,t){if(!NU(i))throw new qe(Se.INVALID_ARGUMENT,"JSON must be an object");let e;for(const n in t)if(t[n]){const s=t[n].typeString,r="value"in t[n]?{value:t[n].value}:void 0;if(!(n in i)){e=`JSON missing required field: '${n}'`;break}const a=i[n];if(s&&typeof a!==s){e=`JSON field '${n}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){e=`Expected '${n}' field to equal '${r.value}'`;break}}if(e)throw new qe(Se.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=-62135596800,PD=1e6;class Ki{static now(){return Ki.fromMillis(Date.now())}static fromDate(t){return Ki.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*PD);return new Ki(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new qe(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new qe(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<OD)throw new qe(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qe(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PD}_compareTo(t){return this.seconds===t.seconds?Hn(this.nanoseconds,t.nanoseconds):Hn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ki._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if($v(t,Ki._jsonSchema))return new Ki(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-OD;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ki._jsonSchemaVersion="firestore/timestamp/1.0",Ki._jsonSchema={type:Ws("string",Ki._jsonSchemaVersion),seconds:Ws("number"),nanoseconds:Ws("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{static fromTimestamp(t){return new gn(t)}static min(){return new gn(new Ki(0,0))}static max(){return new gn(new Ki(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=-1;function g9(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,s=gn.fromTimestamp(n===1e9?new Ki(e+1,0):new Ki(e,n));return new If(s,Je.empty(),t)}function y9(i){return new If(i.readTime,i.key,fv)}class If{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new If(gn.min(),Je.empty(),fv)}static max(){return new If(gn.max(),Je.empty(),fv)}}function v9(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=Je.comparator(i.documentKey,t.documentKey),e!==0?e:Hn(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class x9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qg(i){if(i.code!==Se.FAILED_PRECONDITION||i.message!==_9)throw i;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&on(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new me(((n,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(n,s)},this.catchCallback=r=>{this.wrapFailure(e,r).next(n,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof me?e:me.resolve(e)}catch(e){return me.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):me.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):me.reject(e)}static resolve(t){return new me(((e,n)=>{e(t)}))}static reject(t){return new me(((e,n)=>{n(t)}))}static waitFor(t){return new me(((e,n)=>{let s=0,r=0,a=!1;t.forEach((o=>{++s,o.next((()=>{++r,a&&r===s&&e()}),(c=>n(c)))})),a=!0,r===s&&e()}))}static or(t){let e=me.resolve(!1);for(const n of t)e=e.next((s=>s?me.resolve(s):n()));return e}static forEach(t,e){const n=[];return t.forEach(((s,r)=>{n.push(e.call(this,s,r))})),this.waitFor(n)}static mapArray(t,e){return new me(((n,s)=>{const r=t.length,a=new Array(r);let o=0;for(let c=0;c<r;c++){const u=c;e(t[u]).next((d=>{a[u]=d,++o,o===r&&n(a)}),(d=>s(d)))}}))}static doWhile(t,e){return new me(((n,s)=>{const r=()=>{t()===!0?e().next((()=>{r()}),s):n()};r()}))}}function b9(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Xg(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>e.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}K1.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=-1;function Z1(i){return i==null}function MS(i){return i===0&&1/i==-1/0}function S9(i){return typeof i=="number"&&Number.isInteger(i)&&!MS(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU="";function E9(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=UD(t)),t=T9(i.get(e),t);return UD(t)}function T9(i,t){let e=t;const n=i.length;for(let s=0;s<n;s++){const r=i.charAt(s);switch(r){case"\0":e+="";break;case OU:e+="";break;default:e+=r}}return e}function UD(i){return i+OU+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Rp(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function PU(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(t,e){this.comparator=t,this.root=e||Or.EMPTY}insert(t,e){return new gs(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(t){return new gs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Or.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return e+n.left.size;s<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Nx(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Nx(this.root,t,this.comparator,!1)}getReverseIterator(){return new Nx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Nx(this.root,t,this.comparator,!0)}}class Nx{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Or{constructor(t,e,n,s,r){this.key=t,this.value=e,this.color=n??Or.RED,this.left=s??Or.EMPTY,this.right=r??Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,s,r){return new Or(t??this.key,e??this.value,n??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let s=this;const r=n(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,e,n),null):r===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return Or.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw on(43730,{key:this.key,value:this.value});if(this.right.isRed())throw on(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw on(27949);return t+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1;Or.EMPTY=new class{constructor(){this.size=0}get key(){throw on(57766)}get value(){throw on(16141)}get color(){throw on(16727)}get left(){throw on(29726)}get right(){throw on(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new Or(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t){this.comparator=t,this.data=new gs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new kD(this.data.getIterator())}getIteratorFrom(t){return new kD(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((n=>{e=e.add(n)})),e}isEqual(t){if(!(t instanceof sr)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,r=n.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new sr(this.comparator);return e.data=t,e}}class kD{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(t){this.fields=t,t.sort(Pr.comparator)}static empty(){return new Jl([])}unionWith(t){let e=new sr(Pr.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Jl(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Eg(this.fields,t.fields,((e,n)=>e.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new UU("Invalid base64 string: "+r):r}})(t);return new kr(e)}static fromUint8Array(t){const e=(function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r})(t);return new kr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Hn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const M9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nf(i){if(yi(!!i,39018),typeof i=="string"){let t=0;const e=M9.exec(i);if(yi(!!e,46558,{timestamp:i}),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ds(i.seconds),nanos:Ds(i.nanos)}}function Ds(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Of(i){return typeof i=="string"?kr.fromBase64String(i):kr.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU="server_timestamp",kU="__type__",BU="__previous_value__",zU="__local_write_time__";function c2(i){return(i?.mapValue?.fields||{})[kU]?.stringValue===LU}function Q1(i){const t=i.mapValue.fields[BU];return c2(t)?Q1(t):t}function dv(i){const t=Nf(i.mapValue.fields[zU].timestampValue);return new Ki(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(t,e,n,s,r,a,o,c,u,d){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const AS="(default)";class pv{constructor(t,e){this.projectId=t,this.database=e||AS}static empty(){return new pv("","")}get isDefaultDatabase(){return this.database===AS}isEqual(t){return t instanceof pv&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="__type__",w9="__max__",Ox={mapValue:{}},VU="__vector__",wS="value";function Pf(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?c2(i)?4:C9(i)?9007199254740991:R9(i)?10:11:on(28295,{value:i})}function ru(i,t){if(i===t)return!0;const e=Pf(i);if(e!==Pf(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return dv(i).isEqual(dv(t));case 3:return(function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=Nf(s.timestampValue),o=Nf(r.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(i,t);case 5:return i.stringValue===t.stringValue;case 6:return(function(s,r){return Of(s.bytesValue).isEqual(Of(r.bytesValue))})(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return(function(s,r){return Ds(s.geoPointValue.latitude)===Ds(r.geoPointValue.latitude)&&Ds(s.geoPointValue.longitude)===Ds(r.geoPointValue.longitude)})(i,t);case 2:return(function(s,r){if("integerValue"in s&&"integerValue"in r)return Ds(s.integerValue)===Ds(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Ds(s.doubleValue),o=Ds(r.doubleValue);return a===o?MS(a)===MS(o):isNaN(a)&&isNaN(o)}return!1})(i,t);case 9:return Eg(i.arrayValue.values||[],t.arrayValue.values||[],ru);case 10:case 11:return(function(s,r){const a=s.mapValue.fields||{},o=r.mapValue.fields||{};if(LD(a)!==LD(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!ru(a[c],o[c])))return!1;return!0})(i,t);default:return on(52216,{left:i})}}function mv(i,t){return(i.values||[]).find((e=>ru(e,t)))!==void 0}function Tg(i,t){if(i===t)return 0;const e=Pf(i),n=Pf(t);if(e!==n)return Hn(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return Hn(i.booleanValue,t.booleanValue);case 2:return(function(r,a){const o=Ds(r.integerValue||r.doubleValue),c=Ds(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(i,t);case 3:return BD(i.timestampValue,t.timestampValue);case 4:return BD(dv(i),dv(t));case 5:return GA(i.stringValue,t.stringValue);case 6:return(function(r,a){const o=Of(r),c=Of(a);return o.compareTo(c)})(i.bytesValue,t.bytesValue);case 7:return(function(r,a){const o=r.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=Hn(o[u],c[u]);if(d!==0)return d}return Hn(o.length,c.length)})(i.referenceValue,t.referenceValue);case 8:return(function(r,a){const o=Hn(Ds(r.latitude),Ds(a.latitude));return o!==0?o:Hn(Ds(r.longitude),Ds(a.longitude))})(i.geoPointValue,t.geoPointValue);case 9:return zD(i.arrayValue,t.arrayValue);case 10:return(function(r,a){const o=r.fields||{},c=a.fields||{},u=o[wS]?.arrayValue,d=c[wS]?.arrayValue,g=Hn(u?.values?.length||0,d?.values?.length||0);return g!==0?g:zD(u,d)})(i.mapValue,t.mapValue);case 11:return(function(r,a){if(r===Ox.mapValue&&a===Ox.mapValue)return 0;if(r===Ox.mapValue)return 1;if(a===Ox.mapValue)return-1;const o=r.fields||{},c=Object.keys(o),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let g=0;g<c.length&&g<d.length;++g){const y=GA(c[g],d[g]);if(y!==0)return y;const _=Tg(o[c[g]],u[d[g]]);if(_!==0)return _}return Hn(c.length,d.length)})(i.mapValue,t.mapValue);default:throw on(23264,{he:e})}}function BD(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Hn(i,t);const e=Nf(i),n=Nf(t),s=Hn(e.seconds,n.seconds);return s!==0?s:Hn(e.nanos,n.nanos)}function zD(i,t){const e=i.values||[],n=t.values||[];for(let s=0;s<e.length&&s<n.length;++s){const r=Tg(e[s],n[s]);if(r)return r}return Hn(e.length,n.length)}function Mg(i){return jA(i)}function jA(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(e){const n=Nf(e);return`time(${n.seconds},${n.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(e){return Of(e).toBase64()})(i.bytesValue):"referenceValue"in i?(function(e){return Je.fromName(e).toString()})(i.referenceValue):"geoPointValue"in i?(function(e){return`geo(${e.latitude},${e.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=jA(r);return n+"]"})(i.arrayValue):"mapValue"in i?(function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const a of n)r?r=!1:s+=",",s+=`${a}:${jA(e.fields[a])}`;return s+"}"})(i.mapValue):on(61005,{value:i})}function nS(i){switch(Pf(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Q1(i);return t?16+nS(t):16;case 5:return 2*i.stringValue.length;case 6:return Of(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((s,r)=>s+nS(r)),0)})(i.arrayValue);case 10:case 11:return(function(n){let s=0;return Rp(n.fields,((r,a)=>{s+=r.length+nS(a)})),s})(i.mapValue);default:throw on(13486,{value:i})}}function WA(i){return!!i&&"integerValue"in i}function u2(i){return!!i&&"arrayValue"in i}function FD(i){return!!i&&"nullValue"in i}function VD(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function iS(i){return!!i&&"mapValue"in i}function R9(i){return(i?.mapValue?.fields||{})[FU]?.stringValue===VU}function Fy(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const t={mapValue:{fields:{}}};return Rp(i.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Fy(n))),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Fy(i.arrayValue.values[e]);return t}return{...i}}function C9(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===w9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t){this.value=t}static empty(){return new fl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!iS(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Fy(e)}setAll(t){let e=Pr.emptyPath(),n={},s=[];t.forEach(((a,o)=>{if(!e.isImmediateParentOf(o)){const c=this.getFieldsMap(e);this.applyChanges(c,n,s),n={},s=[],e=o.popLast()}a?n[o.lastSegment()]=Fy(a):s.push(o.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,s)}delete(t){const e=this.field(t.popLast());iS(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ru(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let s=e.mapValue.fields[t.get(n)];iS(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,n){Rp(e,((s,r)=>t[s]=r));for(const s of n)delete t[s]}clone(){return new fl(Fy(this.value))}}function HU(i){const t=[];return Rp(i.fields,((e,n)=>{const s=new Pr([e]);if(iS(n)){const r=HU(n.mapValue).fields;if(r.length===0)t.push(s);else for(const a of r)t.push(s.child(a))}else t.push(s)})),new Jl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t,e,n,s,r,a,o){this.key=t,this.documentType=e,this.version=n,this.readTime=s,this.createTime=r,this.data=a,this.documentState=o}static newInvalidDocument(t){return new ra(t,0,gn.min(),gn.min(),gn.min(),fl.empty(),0)}static newFoundDocument(t,e,n,s){return new ra(t,1,e,gn.min(),n,s,0)}static newNoDocument(t,e){return new ra(t,2,e,gn.min(),gn.min(),fl.empty(),0)}static newUnknownDocument(t,e){return new ra(t,3,e,gn.min(),gn.min(),fl.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(gn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ra&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ra(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t,e){this.position=t,this.inclusive=e}}function HD(i,t,e){let n=0;for(let s=0;s<i.position.length;s++){const r=t[s],a=i.position[s];if(r.field.isKeyField()?n=Je.comparator(Je.fromName(a.referenceValue),e.key):n=Tg(a,e.data.field(r.field)),r.dir==="desc"&&(n*=-1),n!==0)break}return n}function GD(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!ru(i.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t,e="asc"){this.field=t,this.dir=e}}function D9(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{}class er extends GU{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new N9(t,e,n):e==="array-contains"?new U9(t,n):e==="in"?new L9(t,n):e==="not-in"?new k9(t,n):e==="array-contains-any"?new B9(t,n):new er(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new O9(t,n):new P9(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Tg(e,this.value)):e!==null&&Pf(this.value)===Pf(e)&&this.matchesComparison(Tg(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return on(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class au extends GU{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new au(t,e)}matches(t){return jU(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jU(i){return i.op==="and"}function WU(i){return I9(i)&&jU(i)}function I9(i){for(const t of i.filters)if(t instanceof au)return!1;return!0}function qA(i){if(i instanceof er)return i.field.canonicalString()+i.op.toString()+Mg(i.value);if(WU(i))return i.filters.map((t=>qA(t))).join(",");{const t=i.filters.map((e=>qA(e))).join(",");return`${i.op}(${t})`}}function qU(i,t){return i instanceof er?(function(n,s){return s instanceof er&&n.op===s.op&&n.field.isEqual(s.field)&&ru(n.value,s.value)})(i,t):i instanceof au?(function(n,s){return s instanceof au&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((r,a,o)=>r&&qU(a,s.filters[o])),!0):!1})(i,t):void on(19439)}function XU(i){return i instanceof er?(function(e){return`${e.field.canonicalString()} ${e.op} ${Mg(e.value)}`})(i):i instanceof au?(function(e){return e.op.toString()+" {"+e.getFilters().map(XU).join(" ,")+"}"})(i):"Filter"}class N9 extends er{constructor(t,e,n){super(t,e,n),this.key=Je.fromName(n.referenceValue)}matches(t){const e=Je.comparator(t.key,this.key);return this.matchesComparison(e)}}class O9 extends er{constructor(t,e){super(t,"in",e),this.keys=YU("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class P9 extends er{constructor(t,e){super(t,"not-in",e),this.keys=YU("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function YU(i,t){return(t.arrayValue?.values||[]).map((e=>Je.fromName(e.referenceValue)))}class U9 extends er{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return u2(e)&&mv(e.arrayValue,this.value)}}class L9 extends er{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&mv(this.value.arrayValue,e)}}class k9 extends er{constructor(t,e){super(t,"not-in",e)}matches(t){if(mv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!mv(this.value.arrayValue,e)}}class B9 extends er{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!u2(e)||!e.arrayValue.values)&&e.arrayValue.values.some((n=>mv(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(t,e=null,n=[],s=[],r=null,a=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=s,this.limit=r,this.startAt=a,this.endAt=o,this.Te=null}}function jD(i,t=null,e=[],n=[],s=null,r=null,a=null){return new z9(i,t,e,n,s,r,a)}function h2(i){const t=xn(i);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((n=>qA(n))).join(","),e+="|ob:",e+=t.orderBy.map((n=>(function(r){return r.field.canonicalString()+r.dir})(n))).join(","),Z1(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((n=>Mg(n))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((n=>Mg(n))).join(",")),t.Te=e}return t.Te}function f2(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!D9(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!qU(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!GD(i.startAt,t.startAt)&&GD(i.endAt,t.endAt)}function XA(i){return Je.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(t,e=null,n=[],s=[],r=null,a="F",o=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=s,this.limit=r,this.limitType=a,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function F9(i,t,e,n,s,r,a,o){return new J1(i,t,e,n,s,r,a,o)}function d2(i){return new J1(i)}function WD(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function V9(i){return i.collectionGroup!==null}function Vy(i){const t=xn(i);if(t.Ie===null){t.Ie=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new sr(Pr.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new CS(r,n))})),e.has(Pr.keyField().canonicalString())||t.Ie.push(new CS(Pr.keyField(),n))}return t.Ie}function Jc(i){const t=xn(i);return t.Ee||(t.Ee=H9(t,Vy(i))),t.Ee}function H9(i,t){if(i.limitType==="F")return jD(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map((s=>{const r=s.dir==="desc"?"asc":"desc";return new CS(s.field,r)}));const e=i.endAt?new RS(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new RS(i.startAt.position,i.startAt.inclusive):null;return jD(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function YA(i,t,e){return new J1(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function $1(i,t){return f2(Jc(i),Jc(t))&&i.limitType===t.limitType}function KU(i){return`${h2(Jc(i))}|lt:${i.limitType}`}function ag(i){return`Query(target=${(function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map((s=>XU(s))).join(", ")}]`),Z1(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Mg(s))).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Mg(s))).join(",")),`Target(${n})`})(Jc(i))}; limitType=${i.limitType})`}function tE(i,t){return t.isFoundDocument()&&(function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Je.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)})(i,t)&&(function(n,s){for(const r of Vy(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0})(i,t)&&(function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0})(i,t)&&(function(n,s){return!(n.startAt&&!(function(a,o,c){const u=HD(a,o,c);return a.inclusive?u<=0:u<0})(n.startAt,Vy(n),s)||n.endAt&&!(function(a,o,c){const u=HD(a,o,c);return a.inclusive?u>=0:u>0})(n.endAt,Vy(n),s))})(i,t)}function G9(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ZU(i){return(t,e)=>{let n=!1;for(const s of Vy(i)){const r=j9(s,t,e);if(r!==0)return r;n=n||s.field.isKeyField()}return 0}}function j9(i,t,e){const n=i.field.isKeyField()?Je.comparator(t.key,e.key):(function(r,a,o){const c=a.data.field(r),u=o.data.field(r);return c!==null&&u!==null?Tg(c,u):on(42886)})(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return on(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[s,r]of n)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return n.length===1?delete this.inner[e]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Rp(this.inner,((e,n)=>{for(const[s,r]of n)t(s,r)}))}isEmpty(){return PU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=new gs(Je.comparator);function ch(){return W9}const QU=new gs(Je.comparator);function Ry(...i){let t=QU;for(const e of i)t=t.insert(e.key,e);return t}function JU(i){let t=QU;return i.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function $d(){return Hy()}function $U(){return Hy()}function Hy(){return new Cp((i=>i.toString()),((i,t)=>i.isEqual(t)))}const q9=new gs(Je.comparator),X9=new sr(Je.comparator);function Gn(...i){let t=X9;for(const e of i)t=t.add(e);return t}const Y9=new sr(Hn);function K9(){return Y9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:MS(t)?"-0":t}}function tL(i){return{integerValue:""+i}}function Z9(i,t){return S9(t)?tL(t):p2(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this._=void 0}}function Q9(i,t,e){return i instanceof DS?(function(s,r){const a={fields:{[kU]:{stringValue:LU},[zU]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&c2(r)&&(r=Q1(r)),r&&(a.fields[BU]=r),{mapValue:a}})(e,t):i instanceof gv?nL(i,t):i instanceof yv?iL(i,t):(function(s,r){const a=eL(s,r),o=qD(a)+qD(s.Ae);return WA(a)&&WA(s.Ae)?tL(o):p2(s.serializer,o)})(i,t)}function J9(i,t,e){return i instanceof gv?nL(i,t):i instanceof yv?iL(i,t):e}function eL(i,t){return i instanceof IS?(function(n){return WA(n)||(function(r){return!!r&&"doubleValue"in r})(n)})(t)?t:{integerValue:0}:null}class DS extends eE{}class gv extends eE{constructor(t){super(),this.elements=t}}function nL(i,t){const e=sL(t);for(const n of i.elements)e.some((s=>ru(s,n)))||e.push(n);return{arrayValue:{values:e}}}class yv extends eE{constructor(t){super(),this.elements=t}}function iL(i,t){let e=sL(t);for(const n of i.elements)e=e.filter((s=>!ru(s,n)));return{arrayValue:{values:e}}}class IS extends eE{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function qD(i){return Ds(i.integerValue||i.doubleValue)}function sL(i){return u2(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function $9(i,t){return i.field.isEqual(t.field)&&(function(n,s){return n instanceof gv&&s instanceof gv||n instanceof yv&&s instanceof yv?Eg(n.elements,s.elements,ru):n instanceof IS&&s instanceof IS?ru(n.Ae,s.Ae):n instanceof DS&&s instanceof DS})(i.transform,t.transform)}class tG{constructor(t,e){this.version=t,this.transformResults=e}}class nh{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new nh}static exists(t){return new nh(void 0,t)}static updateTime(t){return new nh(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function sS(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class nE{}function rL(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new oL(i.key,nh.none()):new t_(i.key,i.data,nh.none());{const e=i.data,n=fl.empty();let s=new sr(Pr.comparator);for(let r of t.fields)if(!s.has(r)){let a=e.field(r);a===null&&r.length>1&&(r=r.popLast(),a=e.field(r)),a===null?n.delete(r):n.set(r,a),s=s.add(r)}return new Dp(i.key,n,new Jl(s.toArray()),nh.none())}}function eG(i,t,e){i instanceof t_?(function(s,r,a){const o=s.value.clone(),c=YD(s.fieldTransforms,r,a.transformResults);o.setAll(c),r.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(i,t,e):i instanceof Dp?(function(s,r,a){if(!sS(s.precondition,r))return void r.convertToUnknownDocument(a.version);const o=YD(s.fieldTransforms,r,a.transformResults),c=r.data;c.setAll(aL(s)),c.setAll(o),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(i,t,e):(function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,e)}function Gy(i,t,e,n){return i instanceof t_?(function(r,a,o,c){if(!sS(r.precondition,a))return o;const u=r.value.clone(),d=KD(r.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(i,t,e,n):i instanceof Dp?(function(r,a,o,c){if(!sS(r.precondition,a))return o;const u=KD(r.fieldTransforms,c,a),d=a.data;return d.setAll(aL(r)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((g=>g.field)))})(i,t,e,n):(function(r,a,o){return sS(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(i,t,e)}function nG(i,t){let e=null;for(const n of i.fieldTransforms){const s=t.data.field(n.field),r=eL(n.transform,s||null);r!=null&&(e===null&&(e=fl.empty()),e.set(n.field,r))}return e||null}function XD(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Eg(n,s,((r,a)=>$9(r,a)))})(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class t_ extends nE{constructor(t,e,n,s=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dp extends nE{constructor(t,e,n,s,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function aL(i){const t=new Map;return i.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}})),t}function YD(i,t,e){const n=new Map;yi(i.length===e.length,32656,{Re:e.length,Ve:i.length});for(let s=0;s<e.length;s++){const r=i[s],a=r.transform,o=t.data.field(r.field);n.set(r.field,J9(a,o,e[s]))}return n}function KD(i,t,e){const n=new Map;for(const s of i){const r=s.transform,a=e.data.field(s.field);n.set(s.field,Q9(r,a,t))}return n}class oL extends nE{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iG extends nE{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(t,e,n,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(t.key)&&eG(r,t,n[s])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Gy(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Gy(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=$U();return this.mutations.forEach((s=>{const r=t.get(s.key),a=r.overlayedDocument;let o=this.applyToLocalView(a,r.mutatedFields);o=e.has(s.key)?null:o;const c=rL(a,o);c!==null&&n.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(gn.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Gn())}isEqual(t){return this.batchId===t.batchId&&Eg(this.mutations,t.mutations,((e,n)=>XD(e,n)))&&Eg(this.baseMutations,t.baseMutations,((e,n)=>XD(e,n)))}}class m2{constructor(t,e,n,s){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=s}static from(t,e,n){yi(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let s=(function(){return q9})();const r=t.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,n[a].version);return new m2(t,e,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var js,ti;function oG(i){switch(i){case Se.OK:return on(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return on(15467,{code:i})}}function lL(i){if(i===void 0)return lh("GRPC error has no .code"),Se.UNKNOWN;switch(i){case js.OK:return Se.OK;case js.CANCELLED:return Se.CANCELLED;case js.UNKNOWN:return Se.UNKNOWN;case js.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case js.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case js.INTERNAL:return Se.INTERNAL;case js.UNAVAILABLE:return Se.UNAVAILABLE;case js.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case js.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case js.NOT_FOUND:return Se.NOT_FOUND;case js.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case js.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case js.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case js.ABORTED:return Se.ABORTED;case js.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case js.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case js.DATA_LOSS:return Se.DATA_LOSS;default:return on(39323,{code:i})}}(ti=js||(js={}))[ti.OK=0]="OK",ti[ti.CANCELLED=1]="CANCELLED",ti[ti.UNKNOWN=2]="UNKNOWN",ti[ti.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ti[ti.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ti[ti.NOT_FOUND=5]="NOT_FOUND",ti[ti.ALREADY_EXISTS=6]="ALREADY_EXISTS",ti[ti.PERMISSION_DENIED=7]="PERMISSION_DENIED",ti[ti.UNAUTHENTICATED=16]="UNAUTHENTICATED",ti[ti.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ti[ti.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ti[ti.ABORTED=10]="ABORTED",ti[ti.OUT_OF_RANGE=11]="OUT_OF_RANGE",ti[ti.UNIMPLEMENTED=12]="UNIMPLEMENTED",ti[ti.INTERNAL=13]="INTERNAL",ti[ti.UNAVAILABLE=14]="UNAVAILABLE",ti[ti.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lG(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cG=new Af([4294967295,4294967295],0);function ZD(i){const t=lG().encode(i),e=new TU;return e.update(t),new Uint8Array(e.digest())}function QD(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Af([e,n],0),new Af([s,r],0)]}class g2{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Cy(`Invalid padding: ${e}`);if(n<0)throw new Cy(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Cy(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Cy(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Af.fromNumber(this.ge)}ye(t,e,n){let s=t.add(e.multiply(Af.fromNumber(n)));return s.compare(cG)===1&&(s=new Af([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=ZD(t),[n,s]=QD(e);for(let r=0;r<this.hashCount;r++){const a=this.ye(n,s,r);if(!this.we(a))return!1}return!0}static create(t,e,n){const s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),a=new g2(r,s,e);return n.forEach((o=>a.insert(o))),a}insert(t){if(this.ge===0)return;const e=ZD(t),[n,s]=QD(e);for(let r=0;r<this.hashCount;r++){const a=this.ye(n,s,r);this.Se(a)}}Se(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Cy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(t,e,n,s,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const s=new Map;return s.set(t,e_.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new iE(gn.min(),s,new gs(Hn),ch(),Gn())}}class e_{constructor(t,e,n,s,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new e_(n,e,Gn(),Gn(),Gn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(t,e,n,s){this.be=t,this.removedTargetIds=e,this.key=n,this.De=s}}class cL{constructor(t,e){this.targetId=t,this.Ce=e}}class uL{constructor(t,e,n=kr.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=s}}class JD{constructor(){this.ve=0,this.Fe=$D(),this.Me=kr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Gn(),e=Gn(),n=Gn();return this.Fe.forEach(((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:n=n.add(s);break;default:on(38017,{changeType:r})}})),new e_(this.Me,this.xe,t,e,n)}qe(){this.Oe=!1,this.Fe=$D()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,yi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uG{constructor(t){this.Ge=t,this.ze=new Map,this.je=ch(),this.Je=Px(),this.He=Px(),this.Ye=new gs(Hn)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const n=this.nt(e);switch(t.state){case 0:this.rt(e)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),n.Le(t.resumeToken));break;default:on(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((n,s)=>{this.rt(s)&&e(s)}))}st(t){const e=t.targetId,n=t.Ce.count,s=this.ot(e);if(s){const r=s.target;if(XA(r))if(n===0){const a=new Je(r.path);this.et(e,a,ra.newNoDocument(a,gn.min()))}else yi(n===1,20013,{expectedCount:n});else{const a=this._t(e);if(a!==n){const o=this.ut(t),c=o?this.ct(o,t,a):1;if(c!==0){this.it(e);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,u)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:r=0}=e;let a,o;try{a=Of(n).toUint8Array()}catch(c){if(c instanceof UU)return Sg("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new g2(a,s,r)}catch(c){return Sg(c instanceof Cy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(t,e,n){return e.Ce.count===n-this.Pt(t,e.targetId)?0:2}Pt(t,e){const n=this.Ge.getRemoteKeysForTarget(e);let s=0;return n.forEach((r=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;t.mightContain(o)||(this.et(e,r,null),s++)})),s}Tt(t){const e=new Map;this.ze.forEach(((r,a)=>{const o=this.ot(a);if(o){if(r.current&&XA(o.target)){const c=new Je(o.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,ra.newNoDocument(c,t))}r.Be&&(e.set(a,r.ke()),r.qe())}}));let n=Gn();this.He.forEach(((r,a)=>{let o=!0;a.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(n=n.add(r))})),this.je.forEach(((r,a)=>a.setReadTime(t)));const s=new iE(t,e,this.Ye,this.je,n);return this.je=ch(),this.Je=Px(),this.He=Px(),this.Ye=new gs(Hn),s}Xe(t,e){if(!this.rt(t))return;const n=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,n),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,n){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,e)?s.Qe(e,1):s.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),n&&(this.je=this.je.insert(e,n))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new JD,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new sr(Hn),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new sr(Hn),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ke("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new JD),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Px(){return new gs(Je.comparator)}function $D(){return new gs(Je.comparator)}const hG={asc:"ASCENDING",desc:"DESCENDING"},fG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dG={and:"AND",or:"OR"};class pG{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function KA(i,t){return i.useProto3Json||Z1(t)?t:{value:t}}function NS(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function hL(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function mG(i,t){return NS(i,t.toTimestamp())}function $c(i){return yi(!!i,49232),gn.fromTimestamp((function(e){const n=Nf(e);return new Ki(n.seconds,n.nanos)})(i))}function y2(i,t){return ZA(i,t).canonicalString()}function ZA(i,t){const e=(function(s){return new fs(["projects",s.projectId,"databases",s.database])})(i).child("documents");return t===void 0?e:e.child(t)}function fL(i){const t=fs.fromString(i);return yi(yL(t),10190,{key:t.toString()}),t}function QA(i,t){return y2(i.databaseId,t.path)}function KT(i,t){const e=fL(t);if(e.get(1)!==i.databaseId.projectId)throw new qe(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new qe(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new Je(pL(e))}function dL(i,t){return y2(i.databaseId,t)}function gG(i){const t=fL(i);return t.length===4?fs.emptyPath():pL(t)}function JA(i){return new fs(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function pL(i){return yi(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function tI(i,t,e){return{name:QA(i,t),fields:e.value.mapValue.fields}}function yG(i,t){let e;if("targetChange"in t){t.targetChange;const n=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:on(39313,{state:u})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=(function(u,d){return u.useProto3Json?(yi(d===void 0||typeof d=="string",58123),kr.fromBase64String(d||"")):(yi(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),kr.fromUint8Array(d||new Uint8Array))})(i,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&(function(u){const d=u.code===void 0?Se.UNKNOWN:lL(u.code);return new qe(d,u.message||"")})(a);e=new uL(n,s,r,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const s=KT(i,n.document.name),r=$c(n.document.updateTime),a=n.document.createTime?$c(n.document.createTime):gn.min(),o=new fl({mapValue:{fields:n.document.fields}}),c=ra.newFoundDocument(s,r,a,o),u=n.targetIds||[],d=n.removedTargetIds||[];e=new rS(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const s=KT(i,n.document),r=n.readTime?$c(n.readTime):gn.min(),a=ra.newNoDocument(s,r),o=n.removedTargetIds||[];e=new rS([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const s=KT(i,n.document),r=n.removedTargetIds||[];e=new rS([],r,s,null)}else{if(!("filter"in t))return on(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:s=0,unchangedNames:r}=n,a=new aG(s,r),o=n.targetId;e=new cL(o,a)}}return e}function vG(i,t){let e;if(t instanceof t_)e={update:tI(i,t.key,t.value)};else if(t instanceof oL)e={delete:QA(i,t.key)};else if(t instanceof Dp)e={update:tI(i,t.key,t.data),updateMask:wG(t.fieldMask)};else{if(!(t instanceof iG))return on(16599,{Vt:t.type});e={verify:QA(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((n=>(function(r,a){const o=a.transform;if(o instanceof DS)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof gv)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof yv)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof IS)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw on(20930,{transform:a.transform})})(0,n)))),t.precondition.isNone||(e.currentDocument=(function(s,r){return r.updateTime!==void 0?{updateTime:mG(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:on(27497)})(i,t.precondition)),e}function _G(i,t){return i&&i.length>0?(yi(t!==void 0,14353),i.map((e=>(function(s,r){let a=s.updateTime?$c(s.updateTime):$c(r);return a.isEqual(gn.min())&&(a=$c(r)),new tG(a,s.transformResults||[])})(e,t)))):[]}function xG(i,t){return{documents:[dL(i,t.path)]}}function bG(i,t){const e={structuredQuery:{}},n=t.path;let s;t.collectionGroup!==null?(s=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=dL(i,s);const r=(function(u){if(u.length!==0)return gL(au.create(u,"and"))})(t.filters);r&&(e.structuredQuery.where=r);const a=(function(u){if(u.length!==0)return u.map((d=>(function(y){return{field:og(y.field),direction:TG(y.dir)}})(d)))})(t.orderBy);a&&(e.structuredQuery.orderBy=a);const o=KA(i,t.limit);return o!==null&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(t.endAt)),{ft:e,parent:s}}function SG(i){let t=gG(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let s=null;if(n>0){yi(n===1,65062);const d=e.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let r=[];e.where&&(r=(function(g){const y=mL(g);return y instanceof au&&WU(y)?y.getFilters():[y]})(e.where));let a=[];e.orderBy&&(a=(function(g){return g.map((y=>(function(b){return new CS(lg(b.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(y)))})(e.orderBy));let o=null;e.limit&&(o=(function(g){let y;return y=typeof g=="object"?g.value:g,Z1(y)?null:y})(e.limit));let c=null;e.startAt&&(c=(function(g){const y=!!g.before,_=g.values||[];return new RS(_,y)})(e.startAt));let u=null;return e.endAt&&(u=(function(g){const y=!g.before,_=g.values||[];return new RS(_,y)})(e.endAt)),F9(t,s,a,r,o,"F",c,u)}function EG(i,t){const e=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return on(28987,{purpose:s})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function mL(i){return i.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=lg(e.unaryFilter.field);return er.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=lg(e.unaryFilter.field);return er.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=lg(e.unaryFilter.field);return er.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=lg(e.unaryFilter.field);return er.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return on(61313);default:return on(60726)}})(i):i.fieldFilter!==void 0?(function(e){return er.create(lg(e.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return on(58110);default:return on(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(e){return au.create(e.compositeFilter.filters.map((n=>mL(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return on(1026)}})(e.compositeFilter.op))})(i):on(30097,{filter:i})}function TG(i){return hG[i]}function MG(i){return fG[i]}function AG(i){return dG[i]}function og(i){return{fieldPath:i.canonicalString()}}function lg(i){return Pr.fromServerFormat(i.fieldPath)}function gL(i){return i instanceof er?(function(e){if(e.op==="=="){if(VD(e.value))return{unaryFilter:{field:og(e.field),op:"IS_NAN"}};if(FD(e.value))return{unaryFilter:{field:og(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(VD(e.value))return{unaryFilter:{field:og(e.field),op:"IS_NOT_NAN"}};if(FD(e.value))return{unaryFilter:{field:og(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:og(e.field),op:MG(e.op),value:e.value}}})(i):i instanceof au?(function(e){const n=e.getFilters().map((s=>gL(s)));return n.length===1?n[0]:{compositeFilter:{op:AG(e.op),filters:n}}})(i):on(54877,{filter:i})}function wG(i){const t=[];return i.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function yL(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(t,e,n,s,r=gn.min(),a=gn.min(),o=kr.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(t){return new _f(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new _f(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new _f(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new _f(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(t){this.yt=t}}function CG(i){const t=SG({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?YA(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(){this.Cn=new IG}addToCollectionParentIndex(t,e){return this.Cn.add(e),me.resolve()}getCollectionParents(t,e){return me.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return me.resolve()}deleteFieldIndex(t,e){return me.resolve()}deleteAllFieldIndexes(t){return me.resolve()}createTargetIndexes(t,e){return me.resolve()}getDocumentsMatchingTarget(t,e){return me.resolve(null)}getIndexType(t,e){return me.resolve(0)}getFieldIndexes(t,e){return me.resolve([])}getNextCollectionGroupToUpdate(t){return me.resolve(null)}getMinOffset(t,e){return me.resolve(If.min())}getMinOffsetFromCollectionGroup(t,e){return me.resolve(If.min())}updateCollectionGroup(t,e,n){return me.resolve()}updateIndexEntries(t,e){return me.resolve()}}class IG{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e]||new sr(fs.comparator),r=!s.has(n);return this.index[e]=s.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e];return s&&s.has(n)}getEntries(t){return(this.index[t]||new sr(fs.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vL=41943040;class uo{static withCacheSize(t){return new uo(t,uo.DEFAULT_COLLECTION_PERCENTILE,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uo.DEFAULT_COLLECTION_PERCENTILE=10,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uo.DEFAULT=new uo(vL,uo.DEFAULT_COLLECTION_PERCENTILE,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uo.DISABLED=new uo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ag(0)}static cr(){return new Ag(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="LruGarbageCollector",NG=1048576;function iI([i,t],[e,n]){const s=Hn(i,e);return s===0?Hn(t,n):s}class OG{constructor(t){this.Ir=t,this.buffer=new sr(iI),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const n=this.buffer.last();iI(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}}get maxValue(){return this.buffer.last()[0]}}class PG{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ke(nI,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Xg(e)?ke(nI,"Ignoring IndexedDB error during garbage collection: ",e):await qg(e)}await this.Vr(3e5)}))}}class UG{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((n=>Math.floor(e/100*n)))}nthSequenceNumber(t,e){if(e===0)return me.resolve(K1.ce);const n=new OG(e);return this.mr.forEachTarget(t,(s=>n.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>n.Ar(s))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.mr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(eI)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eI):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let n,s,r,a,o,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(t,s)))).next((g=>(n=g,o=Date.now(),this.removeTargets(t,n,e)))).next((g=>(r=g,c=Date.now(),this.removeOrphanedDocuments(t,n)))).next((g=>(u=Date.now(),rg()<=Vn.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${r} targets in `+(c-o)+`ms
	Removed ${g} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g}))))}}function LG(i,t){return new UG(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(){this.changes=new Cp((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ra.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?me.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BG{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zG{constructor(t,e,n,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=s}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(n=s,this.remoteDocumentCache.getEntry(t,e)))).next((s=>(n!==null&&Gy(n.mutation,s,Jl.empty(),Ki.now()),s)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.getLocalViewOfDocuments(t,n,Gn()).next((()=>n))))}getLocalViewOfDocuments(t,e,n=Gn()){const s=$d();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,n).next((r=>{let a=Ry();return r.forEach(((o,c)=>{a=a.insert(o,c.overlayedDocument)})),a}))))}getOverlayedDocuments(t,e){const n=$d();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Gn())))}populateOverlays(t,e,n){const s=[];return n.forEach((r=>{e.has(r)||s.push(r)})),this.documentOverlayCache.getOverlays(t,s).next((r=>{r.forEach(((a,o)=>{e.set(a,o)}))}))}computeViews(t,e,n,s){let r=ch();const a=Hy(),o=(function(){return Hy()})();return e.forEach(((c,u)=>{const d=n.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Dp)?r=r.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),Gy(d.mutation,u,d.mutation.getFieldMask(),Ki.now())):a.set(u.key,Jl.empty())})),this.recalculateAndSaveOverlays(t,r).next((c=>(c.forEach(((u,d)=>a.set(u,d))),e.forEach(((u,d)=>o.set(u,new BG(d,a.get(u)??null)))),o)))}recalculateAndSaveOverlays(t,e){const n=Hy();let s=new gs(((a,o)=>a-o)),r=Gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((a=>{for(const o of a)o.keys().forEach((c=>{const u=e.get(c);if(u===null)return;let d=n.get(c)||Jl.empty();d=o.applyToLocalView(u,d),n.set(c,d);const g=(s.get(o.batchId)||Gn()).add(c);s=s.insert(o.batchId,g)}))})).next((()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,g=$U();d.forEach((y=>{if(!r.has(y)){const _=rL(e.get(y),n.get(y));_!==null&&g.set(y,_),r=r.add(y)}})),a.push(this.documentOverlayCache.saveOverlays(t,u,g))}return me.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((n=>this.recalculateAndSaveOverlays(t,n)))}getDocumentsMatchingQuery(t,e,n,s){return(function(a){return Je.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):V9(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,s):this.getDocumentsMatchingCollectionQuery(t,e,n,s)}getNextDocuments(t,e,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,s).next((r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,s-r.size):me.resolve($d());let o=fv,c=r;return a.next((u=>me.forEach(u,((d,g)=>(o<g.largestBatchId&&(o=g.largestBatchId),r.get(d)?me.resolve():this.remoteDocumentCache.getEntry(t,d).next((y=>{c=c.insert(d,y)}))))).next((()=>this.populateOverlays(t,u,r))).next((()=>this.computeViews(t,c,u,Gn()))).next((d=>({batchId:o,changes:JU(d)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Je(e)).next((n=>{let s=Ry();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,s){const r=e.collectionGroup;let a=Ry();return this.indexManager.getCollectionParents(t,r).next((o=>me.forEach(o,(c=>{const u=(function(g,y){return new J1(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(e,c.child(r));return this.getDocumentsMatchingCollectionQuery(t,u,n,s).next((d=>{d.forEach(((g,y)=>{a=a.insert(g,y)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,e,n,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,s)))).next((a=>{r.forEach(((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,ra.newInvalidDocument(d)))}));let o=Ry();return a.forEach(((c,u)=>{const d=r.get(c);d!==void 0&&Gy(d.mutation,u,Jl.empty(),Ki.now()),tE(e,u)&&(o=o.insert(c,u))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FG{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return me.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(s){return{id:s.id,version:s.version,createTime:$c(s.createTime)}})(e)),me.resolve()}getNamedQuery(t,e){return me.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(s){return{name:s.name,query:CG(s.bundledQuery),readTime:$c(s.readTime)}})(e)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(){this.overlays=new gs(Je.comparator),this.qr=new Map}getOverlay(t,e){return me.resolve(this.overlays.get(e))}getOverlays(t,e){const n=$d();return me.forEach(e,(s=>this.getOverlay(t,s).next((r=>{r!==null&&n.set(s,r)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((s,r)=>{this.St(t,e,r)})),me.resolve()}removeOverlaysForBatchId(t,e,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(n)),me.resolve()}getOverlaysForCollection(t,e,n){const s=$d(),r=e.length+1,a=new Je(e.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===r&&c.largestBatchId>n&&s.set(c.getKey(),c)}return me.resolve(s)}getOverlaysForCollectionGroup(t,e,n,s){let r=new gs(((u,d)=>u-d));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===e&&u.largestBatchId>n){let d=r.get(u.largestBatchId);d===null&&(d=$d(),r=r.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=$d(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,d)=>o.set(u,d))),!(o.size()>=s)););return me.resolve(o)}St(t,e,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new rG(e,n));let r=this.qr.get(e);r===void 0&&(r=Gn(),this.qr.set(e,r)),this.qr.set(e,r.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(){this.sessionToken=kr.EMPTY_BYTE_STRING}getSessionToken(t){return me.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.Qr=new sr(yr.$r),this.Ur=new sr(yr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const n=new yr(t,e);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,e){t.forEach((n=>this.addReference(n,e)))}removeReference(t,e){this.Gr(new yr(t,e))}zr(t,e){t.forEach((n=>this.removeReference(n,e)))}jr(t){const e=new Je(new fs([])),n=new yr(e,t),s=new yr(e,t+1),r=[];return this.Ur.forEachInRange([n,s],(a=>{this.Gr(a),r.push(a.key)})),r}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Je(new fs([])),n=new yr(e,t),s=new yr(e,t+1);let r=Gn();return this.Ur.forEachInRange([n,s],(a=>{r=r.add(a.key)})),r}containsKey(t){const e=new yr(t,0),n=this.Qr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class yr{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Je.comparator(t.key,e.key)||Hn(t.Yr,e.Yr)}static Kr(t,e){return Hn(t.Yr,e.Yr)||Je.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new sr(yr.$r)}checkEmpty(t){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new sG(r,e,n,s);this.mutationQueue.push(a);for(const o of s)this.Zr=this.Zr.add(new yr(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return me.resolve(a)}lookupMutationBatch(t,e){return me.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,s=this.ei(n),r=s<0?0:s;return me.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?l2:this.tr-1)}getAllMutationBatches(t){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new yr(e,0),s=new yr(e,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([n,s],(a=>{const o=this.Xr(a.Yr);r.push(o)})),me.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new sr(Hn);return e.forEach((s=>{const r=new yr(s,0),a=new yr(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,a],(o=>{n=n.add(o.Yr)}))})),me.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,s=n.length+1;let r=n;Je.isDocumentKey(r)||(r=r.child(""));const a=new yr(new Je(r),0);let o=new sr(Hn);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(o=o.add(c.Yr)),!0)}),a),me.resolve(this.ti(o))}ti(t){const e=[];return t.forEach((n=>{const s=this.Xr(n);s!==null&&e.push(s)})),e}removeMutationBatch(t,e){yi(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return me.forEach(e.mutations,(s=>{const r=new yr(s.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=n}))}ir(t){}containsKey(t,e){const n=new yr(e,0),s=this.Zr.firstAfterOrEqual(n);return me.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,me.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jG{constructor(t){this.ri=t,this.docs=(function(){return new gs(Je.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,s=this.docs.get(n),r=s?s.size:0,a=this.ri(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return me.resolve(n?n.document.mutableCopy():ra.newInvalidDocument(e))}getEntries(t,e){let n=ch();return e.forEach((s=>{const r=this.docs.get(s);n=n.insert(s,r?r.document.mutableCopy():ra.newInvalidDocument(s))})),me.resolve(n)}getDocumentsMatchingQuery(t,e,n,s){let r=ch();const a=e.path,o=new Je(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||v9(y9(d),n)<=0||(s.has(d.key)||tE(e,d))&&(r=r.insert(d.key,d.mutableCopy()))}return me.resolve(r)}getAllFromCollectionGroup(t,e,n,s){on(9500)}ii(t,e){return me.forEach(this.docs,(n=>e(n)))}newChangeBuffer(t){return new WG(this)}getSize(t){return me.resolve(this.size)}}class WG extends kG{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?e.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(n)})),me.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qG{constructor(t){this.persistence=t,this.si=new Cp((e=>h2(e)),f2),this.lastRemoteSnapshotVersion=gn.min(),this.highestTargetId=0,this.oi=0,this._i=new v2,this.targetCount=0,this.ai=Ag.ur()}forEachTarget(t,e){return this.si.forEach(((n,s)=>e(s))),me.resolve()}getLastRemoteSnapshotVersion(t){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return me.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.oi&&(this.oi=e),me.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Ag(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,me.resolve()}updateTargetData(t,e){return this.Pr(e),me.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,me.resolve()}removeTargets(t,e,n){let s=0;const r=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=e&&n.get(o.targetId)===null&&(this.si.delete(a),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),s++)})),me.waitFor(r).next((()=>s))}getTargetCount(t){return me.resolve(this.targetCount)}getTargetData(t,e){const n=this.si.get(e)||null;return me.resolve(n)}addMatchingKeys(t,e,n){return this._i.Wr(e,n),me.resolve()}removeMatchingKeys(t,e,n){this._i.zr(e,n);const s=this.persistence.referenceDelegate,r=[];return s&&e.forEach((a=>{r.push(s.markPotentiallyOrphaned(t,a))})),me.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),me.resolve()}getMatchingKeysForTargetId(t,e){const n=this._i.Hr(e);return me.resolve(n)}containsKey(t,e){return me.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(t,e){this.ui={},this.overlays={},this.ci=new K1(0),this.li=!1,this.li=!0,this.hi=new HG,this.referenceDelegate=t(this),this.Pi=new qG(this),this.indexManager=new DG,this.remoteDocumentCache=(function(s){return new jG(s)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new RG(e),this.Ii=new FG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new VG,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.ui[t.toKey()];return n||(n=new GG(e,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,n){ke("MemoryPersistence","Starting transaction:",t);const s=new XG(this.ci.next());return this.referenceDelegate.Ei(),n(s).next((r=>this.referenceDelegate.di(s).next((()=>r)))).toPromise().then((r=>(s.raiseOnCommittedEvent(),r)))}Ai(t,e){return me.or(Object.values(this.ui).map((n=>()=>n.containsKey(t,e))))}}class XG extends x9{constructor(t){super(),this.currentSequenceNumber=t}}class _2{constructor(t){this.persistence=t,this.Ri=new v2,this.Vi=null}static mi(t){return new _2(t)}get fi(){if(this.Vi)return this.Vi;throw on(60996)}addReference(t,e,n){return this.Ri.addReference(n,e),this.fi.delete(n.toString()),me.resolve()}removeReference(t,e,n){return this.Ri.removeReference(n,e),this.fi.add(n.toString()),me.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),me.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((s=>this.fi.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((s=>{s.forEach((r=>this.fi.add(r.toString())))})).next((()=>n.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,(n=>{const s=Je.fromPath(n);return this.gi(t,s).next((r=>{r||e.removeEntry(s,gn.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((n=>{n?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return me.or([()=>me.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class OS{constructor(t,e){this.persistence=t,this.pi=new Cp((n=>E9(n.path)),((n,s)=>n.isEqual(s))),this.garbageCollector=LG(this,e)}static mi(t,e){return new OS(t,e)}Ei(){}di(t){return me.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((n=>e.next((s=>n+s))))}wr(t){let e=0;return this.pr(t,(n=>{e++})).next((()=>e))}pr(t,e){return me.forEach(this.pi,((n,s)=>this.br(t,n,s).next((r=>r?me.resolve():e(s)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(t,(a=>this.br(t,a,e).next((o=>{o||(n++,r.removeEntry(a,gn.min()))})))).next((()=>r.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),me.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),me.resolve()}removeReference(t,e,n){return this.pi.set(n,t.currentSequenceNumber),me.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),me.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=nS(t.data.value)),e}br(t,e,n){return me.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.pi.get(e);return me.resolve(s!==void 0&&s>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t,e,n,s){this.targetId=t,this.fromCache=e,this.Es=n,this.ds=s}static As(t,e){let n=Gn(),s=Gn();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new x2(t,e.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KG{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return b5()?8:b9(ua())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,n,s){const r={result:null};return this.ys(t,e).next((a=>{r.result=a})).next((()=>{if(!r.result)return this.ws(t,e,s,n).next((a=>{r.result=a}))})).next((()=>{if(r.result)return;const a=new YG;return this.Ss(t,e,a).next((o=>{if(r.result=o,this.Vs)return this.bs(t,e,a,o.size)}))})).next((()=>r.result))}bs(t,e,n,s){return n.documentReadCount<this.fs?(rg()<=Vn.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",ag(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(rg()<=Vn.DEBUG&&ke("QueryEngine","Query:",ag(e),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(rg()<=Vn.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",ag(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Jc(e))):me.resolve())}ys(t,e){if(WD(e))return me.resolve(null);let n=Jc(e);return this.indexManager.getIndexType(t,n).next((s=>s===0?null:(e.limit!==null&&s===1&&(e=YA(e,null,"F"),n=Jc(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const a=Gn(...r);return this.ps.getDocuments(t,a).next((o=>this.indexManager.getMinOffset(t,n).next((c=>{const u=this.Ds(e,o);return this.Cs(e,u,a,c.readTime)?this.ys(t,YA(e,null,"F")):this.vs(t,u,e,c)}))))})))))}ws(t,e,n,s){return WD(e)||s.isEqual(gn.min())?me.resolve(null):this.ps.getDocuments(t,n).next((r=>{const a=this.Ds(e,r);return this.Cs(e,a,n,s)?me.resolve(null):(rg()<=Vn.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ag(e)),this.vs(t,a,e,g9(s,fv)).next((o=>o)))}))}Ds(t,e){let n=new sr(ZU(t));return e.forEach(((s,r)=>{tE(t,r)&&(n=n.add(r))})),n}Cs(t,e,n,s){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const r=t.limitType==="F"?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(t,e,n){return rg()<=Vn.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",ag(e)),this.ps.getDocumentsMatchingQuery(t,e,If.min(),n)}vs(t,e,n,s){return this.ps.getDocumentsMatchingQuery(t,n,s).next((r=>(e.forEach((a=>{r=r.insert(a.key,a)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="LocalStore",ZG=3e8;class QG{constructor(t,e,n,s){this.persistence=t,this.Fs=e,this.serializer=s,this.Ms=new gs(Hn),this.xs=new Cp((r=>h2(r)),f2),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new zG(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function JG(i,t,e,n){return new QG(i,t,e,n)}async function xL(i,t){const e=xn(i);return await e.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return e.mutationQueue.getAllMutationBatches(n).next((r=>(s=r,e.Bs(t),e.mutationQueue.getAllMutationBatches(n)))).next((r=>{const a=[],o=[];let c=Gn();for(const u of s){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of r){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return e.localDocuments.getDocuments(n,c).next((u=>({Ls:u,removedBatchIds:a,addedBatchIds:o})))}))}))}function $G(i,t){const e=xn(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=t.batch.keys(),r=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,d){const g=u.batch,y=g.keys();let _=me.resolve();return y.forEach((b=>{_=_.next((()=>d.getEntry(c,b))).next((M=>{const S=u.docVersions.get(b);yi(S!==null,48541),M.version.compareTo(S)<0&&(g.applyToRemoteDocument(M,u),M.isValidDocument()&&(M.setReadTime(u.commitVersion),d.addEntry(M)))}))})),_.next((()=>o.mutationQueue.removeMutationBatch(c,g)))})(e,n,t,r).next((()=>r.apply(n))).next((()=>e.mutationQueue.performConsistencyCheck(n))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(n,s,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(o){let c=Gn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(t)))).next((()=>e.localDocuments.getDocuments(n,s)))}))}function bL(i){const t=xn(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function t7(i,t){const e=xn(i),n=t.snapshotVersion;let s=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const a=e.Ns.newChangeBuffer({trackRemovals:!0});s=e.Ms;const o=[];t.targetChanges.forEach(((d,g)=>{const y=s.get(g);if(!y)return;o.push(e.Pi.removeMatchingKeys(r,d.removedDocuments,g).next((()=>e.Pi.addMatchingKeys(r,d.addedDocuments,g))));let _=y.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(g)!==null?_=_.withResumeToken(kr.EMPTY_BYTE_STRING,gn.min()).withLastLimboFreeSnapshotVersion(gn.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,n)),s=s.insert(g,_),(function(M,S,E){return M.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=ZG?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0})(y,_,d)&&o.push(e.Pi.updateTargetData(r,_))}));let c=ch(),u=Gn();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&o.push(e.persistence.referenceDelegate.updateLimboDocument(r,d))})),o.push(e7(r,a,t.documentUpdates).next((d=>{c=d.ks,u=d.qs}))),!n.isEqual(gn.min())){const d=e.Pi.getLastRemoteSnapshotVersion(r).next((g=>e.Pi.setTargetsMetadata(r,r.currentSequenceNumber,n)));o.push(d)}return me.waitFor(o).next((()=>a.apply(r))).next((()=>e.localDocuments.getLocalViewOfDocuments(r,c,u))).next((()=>c))})).then((r=>(e.Ms=s,r)))}function e7(i,t,e){let n=Gn(),s=Gn();return e.forEach((r=>n=n.add(r))),t.getEntries(i,n).next((r=>{let a=ch();return e.forEach(((o,c)=>{const u=r.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(o)),c.isNoDocument()&&c.version.isEqual(gn.min())?(t.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),a=a.insert(o,c)):ke(b2,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{ks:a,qs:s}}))}function n7(i,t){const e=xn(i);return e.persistence.runTransaction("Get next mutation batch","readonly",(n=>(t===void 0&&(t=l2),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t))))}function i7(i,t){const e=xn(i);return e.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return e.Pi.getTargetData(n,t).next((r=>r?(s=r,me.resolve(s)):e.Pi.allocateTargetId(n).next((a=>(s=new _f(t,a,"TargetPurposeListen",n.currentSequenceNumber),e.Pi.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=e.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(n.targetId,n),e.xs.set(t,n.targetId)),n}))}async function $A(i,t,e){const n=xn(i),s=n.Ms.get(t),r=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",r,(a=>n.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Xg(a))throw a;ke(b2,`Failed to update sequence numbers for target ${t}: ${a}`)}n.Ms=n.Ms.remove(t),n.xs.delete(s.target)}function sI(i,t,e){const n=xn(i);let s=gn.min(),r=Gn();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,u,d){const g=xn(c),y=g.xs.get(d);return y!==void 0?me.resolve(g.Ms.get(y)):g.Pi.getTargetData(u,d)})(n,a,Jc(t)).next((o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,o.targetId).next((c=>{r=c}))})).next((()=>n.Fs.getDocumentsMatchingQuery(a,t,e?s:gn.min(),e?r:Gn()))).next((o=>(s7(n,G9(t),o),{documents:o,Qs:r})))))}function s7(i,t,e){let n=i.Os.get(t)||gn.min();e.forEach(((s,r)=>{r.readTime.compareTo(n)>0&&(n=r.readTime)})),i.Os.set(t,n)}class rI{constructor(){this.activeTargetIds=K9()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class r7{constructor(){this.Mo=new rI,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,n){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new rI,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="ConnectivityMonitor";class oI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(aI,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ke(aI,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ux=null;function tw(){return Ux===null?Ux=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ux++,"0x"+Ux.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="RestConnection",o7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class l7{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===AS?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(t,e,n,s,r){const a=tw(),o=this.zo(t,e.toUriEncodedString());ke(ZT,`Sending RPC '${t}' ${a}:`,o,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,r);const{host:u}=new URL(o),d=Tp(u);return this.Jo(t,o,c,n,d).then((g=>(ke(ZT,`Received RPC '${t}' ${a}: `,g),g)),(g=>{throw Sg(ZT,`RPC '${t}' ${a} failed with error: `,g,"url: ",o,"request:",n),g}))}Ho(t,e,n,s,r,a){return this.Go(t,e,n,s,r)}jo(t,e,n){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wg})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((s,r)=>t[r]=s)),n&&n.headers.forEach(((s,r)=>t[r]=s))}zo(t,e){const n=o7[t];return`${this.Uo}/v1/${e}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="WebChannelConnection";class u7 extends l7{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,n,s,r){const a=tw();return new Promise(((o,c)=>{const u=new MU;u.setWithCredentials(!0),u.listenOnce(AU.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case eS.NO_ERROR:const g=u.getResponseJson();ke(Jr,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(g)),o(g);break;case eS.TIMEOUT:ke(Jr,`RPC '${t}' ${a} timed out`),c(new qe(Se.DEADLINE_EXCEEDED,"Request time out"));break;case eS.HTTP_ERROR:const y=u.getStatus();if(ke(Jr,`RPC '${t}' ${a} failed with status:`,y,"response text:",u.getResponseText()),y>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const b=_?.error;if(b&&b.status&&b.message){const M=(function(E){const R=E.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(R)>=0?R:Se.UNKNOWN})(b.status);c(new qe(M,b.message))}else c(new qe(Se.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new qe(Se.UNAVAILABLE,"Connection failed."));break;default:on(9055,{l_:t,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ke(Jr,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);ke(Jr,`RPC '${t}' ${a} sending request:`,s),u.send(e,"POST",d,n,15)}))}T_(t,e,n){const s=tw(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=CU(),o=RU(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,e,n),c.encodeInitMessageHeaders=!0;const d=r.join("");ke(Jr,`Creating RPC '${t}' stream ${s}: ${d}`,c);const g=a.createWebChannel(d,c);this.I_(g);let y=!1,_=!1;const b=new c7({Yo:S=>{_?ke(Jr,`Not sending because RPC '${t}' stream ${s} is closed:`,S):(y||(ke(Jr,`Opening RPC '${t}' stream ${s} transport.`),g.open(),y=!0),ke(Jr,`RPC '${t}' stream ${s} sending:`,S),g.send(S))},Zo:()=>g.close()}),M=(S,E,R)=>{S.listen(E,(N=>{try{R(N)}catch(P){setTimeout((()=>{throw P}),0)}}))};return M(g,wy.EventType.OPEN,(()=>{_||(ke(Jr,`RPC '${t}' stream ${s} transport opened.`),b.o_())})),M(g,wy.EventType.CLOSE,(()=>{_||(_=!0,ke(Jr,`RPC '${t}' stream ${s} transport closed`),b.a_(),this.E_(g))})),M(g,wy.EventType.ERROR,(S=>{_||(_=!0,Sg(Jr,`RPC '${t}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),b.a_(new qe(Se.UNAVAILABLE,"The operation could not be completed")))})),M(g,wy.EventType.MESSAGE,(S=>{if(!_){const E=S.data[0];yi(!!E,16349);const R=E,N=R?.error||R[0]?.error;if(N){ke(Jr,`RPC '${t}' stream ${s} received error:`,N);const P=N.status;let k=(function(U){const D=js[U];if(D!==void 0)return lL(D)})(P),z=N.message;k===void 0&&(k=Se.INTERNAL,z="Unknown error status: "+P+" with message "+N.message),_=!0,b.a_(new qe(k,z)),g.close()}else ke(Jr,`RPC '${t}' stream ${s} received:`,E),b.u_(E)}})),M(o,wU.STAT_EVENT,(S=>{S.stat===HA.PROXY?ke(Jr,`RPC '${t}' stream ${s} detected buffering proxy`):S.stat===HA.NOPROXY&&ke(Jr,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function QT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(i){return new pG(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(t,e,n=1e3,s=1.5,r=6e4){this.Mi=t,this.timerId=e,this.d_=n,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,e-n);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="PersistentStream";class EL{constructor(t,e,n,s,r,a,o,c){this.Mi=t,this.S_=n,this.b_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SL(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===Se.RESOURCE_EXHAUSTED?(lh(e.toString()),lh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.D_===e&&this.G_(n,s)}),(n=>{t((()=>{const s=new qe(Se.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)}))}))}G_(t,e){const n=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{n((()=>this.z_(s)))})),this.stream.onMessage((s=>{n((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ke(lI,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(ke(lI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h7 extends EL{constructor(t,e,n,s,r,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,s,a),this.serializer=r}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=yG(this.serializer,t),n=(function(r){if(!("targetChange"in r))return gn.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?gn.min():a.readTime?$c(a.readTime):gn.min()})(t);return this.listener.H_(e,n)}Y_(t){const e={};e.database=JA(this.serializer),e.addTarget=(function(r,a){let o;const c=a.target;if(o=XA(c)?{documents:xG(r,c)}:{query:bG(r,c).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=hL(r,a.resumeToken);const u=KA(r,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(gn.min())>0){o.readTime=NS(r,a.snapshotVersion.toTimestamp());const u=KA(r,a.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,t);const n=EG(this.serializer,t);n&&(e.labels=n),this.q_(e)}Z_(t){const e={};e.database=JA(this.serializer),e.removeTarget=t,this.q_(e)}}class f7 extends EL{constructor(t,e,n,s,r,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,s,a),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return yi(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,yi(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){yi(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=_G(t.writeResults,t.commitTime),n=$c(t.commitTime);return this.listener.na(n,e)}ra(){const t={};t.database=JA(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((n=>vG(this.serializer,n)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{}class p7 extends d7{constructor(t,e,n,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new qe(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,a])=>this.connection.Go(t,ZA(e,n),s,r,a))).catch((r=>{throw r.name==="FirebaseError"?(r.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new qe(Se.UNKNOWN,r.toString())}))}Ho(t,e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(t,ZA(e,n),s,a,o,r))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new qe(Se.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class m7{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(lh(e),this.aa=!1):ke("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="RemoteStore";class g7{constructor(t,e,n,s,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((a=>{n.enqueueAndForget((async()=>{Ip(this)&&(ke(pp,"Restarting streams for network reachability change."),await(async function(c){const u=xn(c);u.Ea.add(4),await n_(u),u.Ra.set("Unknown"),u.Ea.delete(4),await rE(u)})(this))}))})),this.Ra=new m7(n,s)}}async function rE(i){if(Ip(i))for(const t of i.da)await t(!0)}async function n_(i){for(const t of i.da)await t(!1)}function TL(i,t){const e=xn(i);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),M2(e)?T2(e):Yg(e).O_()&&E2(e,t))}function S2(i,t){const e=xn(i),n=Yg(e);e.Ia.delete(t),n.O_()&&ML(e,t),e.Ia.size===0&&(n.O_()?n.L_():Ip(e)&&e.Ra.set("Unknown"))}function E2(i,t){if(i.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gn.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Yg(i).Y_(t)}function ML(i,t){i.Va.Ue(t),Yg(i).Z_(t)}function T2(i){i.Va=new uG({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),At:t=>i.Ia.get(t)||null,ht:()=>i.datastore.serializer.databaseId}),Yg(i).start(),i.Ra.ua()}function M2(i){return Ip(i)&&!Yg(i).x_()&&i.Ia.size>0}function Ip(i){return xn(i).Ea.size===0}function AL(i){i.Va=void 0}async function y7(i){i.Ra.set("Online")}async function v7(i){i.Ia.forEach(((t,e)=>{E2(i,t)}))}async function _7(i,t){AL(i),M2(i)?(i.Ra.ha(t),T2(i)):i.Ra.set("Unknown")}async function x7(i,t,e){if(i.Ra.set("Online"),t instanceof uL&&t.state===2&&t.cause)try{await(async function(s,r){const a=r.cause;for(const o of r.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.Ia.delete(o),s.Va.removeTarget(o))})(i,t)}catch(n){ke(pp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await PS(i,n)}else if(t instanceof rS?i.Va.Ze(t):t instanceof cL?i.Va.st(t):i.Va.tt(t),!e.isEqual(gn.min()))try{const n=await bL(i.localStore);e.compareTo(n)>=0&&await(function(r,a){const o=r.Va.Tt(a);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=r.Ia.get(u);d&&r.Ia.set(u,d.withResumeToken(c.resumeToken,a))}})),o.targetMismatches.forEach(((c,u)=>{const d=r.Ia.get(c);if(!d)return;r.Ia.set(c,d.withResumeToken(kr.EMPTY_BYTE_STRING,d.snapshotVersion)),ML(r,c);const g=new _f(d.target,c,u,d.sequenceNumber);E2(r,g)})),r.remoteSyncer.applyRemoteEvent(o)})(i,e)}catch(n){ke(pp,"Failed to raise snapshot:",n),await PS(i,n)}}async function PS(i,t,e){if(!Xg(t))throw t;i.Ea.add(1),await n_(i),i.Ra.set("Offline"),e||(e=()=>bL(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ke(pp,"Retrying IndexedDB access"),await e(),i.Ea.delete(1),await rE(i)}))}function wL(i,t){return t().catch((e=>PS(i,e,t)))}async function aE(i){const t=xn(i),e=Uf(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:l2;for(;b7(t);)try{const s=await n7(t.localStore,n);if(s===null){t.Ta.length===0&&e.L_();break}n=s.batchId,S7(t,s)}catch(s){await PS(t,s)}RL(t)&&CL(t)}function b7(i){return Ip(i)&&i.Ta.length<10}function S7(i,t){i.Ta.push(t);const e=Uf(i);e.O_()&&e.X_&&e.ea(t.mutations)}function RL(i){return Ip(i)&&!Uf(i).x_()&&i.Ta.length>0}function CL(i){Uf(i).start()}async function E7(i){Uf(i).ra()}async function T7(i){const t=Uf(i);for(const e of i.Ta)t.ea(e.mutations)}async function M7(i,t,e){const n=i.Ta.shift(),s=m2.from(n,t,e);await wL(i,(()=>i.remoteSyncer.applySuccessfulWrite(s))),await aE(i)}async function A7(i,t){t&&Uf(i).X_&&await(async function(n,s){if((function(a){return oG(a)&&a!==Se.ABORTED})(s.code)){const r=n.Ta.shift();Uf(n).B_(),await wL(n,(()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s))),await aE(n)}})(i,t),RL(i)&&CL(i)}async function cI(i,t){const e=xn(i);e.asyncQueue.verifyOperationInProgress(),ke(pp,"RemoteStore received new credentials");const n=Ip(e);e.Ea.add(3),await n_(e),n&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await rE(e)}async function w7(i,t){const e=xn(i);t?(e.Ea.delete(2),await rE(e)):t||(e.Ea.add(2),await n_(e),e.Ra.set("Unknown"))}function Yg(i){return i.ma||(i.ma=(function(e,n,s){const r=xn(e);return r.sa(),new h7(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(i.datastore,i.asyncQueue,{Xo:y7.bind(null,i),t_:v7.bind(null,i),r_:_7.bind(null,i),H_:x7.bind(null,i)}),i.da.push((async t=>{t?(i.ma.B_(),M2(i)?T2(i):i.Ra.set("Unknown")):(await i.ma.stop(),AL(i))}))),i.ma}function Uf(i){return i.fa||(i.fa=(function(e,n,s){const r=xn(e);return r.sa(),new f7(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:E7.bind(null,i),r_:A7.bind(null,i),ta:T7.bind(null,i),na:M7.bind(null,i)}),i.da.push((async t=>{t?(i.fa.B_(),await aE(i)):(await i.fa.stop(),i.Ta.length>0&&(ke(pp,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(t,e,n,s,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=s,this.removalCallback=r,this.deferred=new wf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,s,r){const a=Date.now()+n,o=new A2(t,e,a,s,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Se.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function w2(i,t){if(lh("AsyncQueue",`${t}: ${i}`),Xg(i))return new qe(Se.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{static emptySet(t){return new yg(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||Je.comparator(e.key,n.key):(e,n)=>Je.comparator(e.key,n.key),this.keyedMap=Ry(),this.sortedSet=new gs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof yg)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,r=n.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new yg;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.ga=new gs(Je.comparator)}track(t){const e=t.doc.key,n=this.ga.get(e);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(e,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(e):t.type===1&&n.type===2?this.ga=this.ga.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):on(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,n)=>{t.push(n)})),t}}class wg{constructor(t,e,n,s,r,a,o,c,u){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,e,n,s,r){const a=[];return e.forEach((o=>{a.push({type:0,doc:o})})),new wg(t,e,yg.emptySet(e),a,n,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$1(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==n[s].type||!e[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class C7{constructor(){this.queries=hI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=xn(e),r=s.queries;s.queries=hI(),r.forEach(((a,o)=>{for(const c of o.Sa)c.onError(n)}))})(this,new qe(Se.ABORTED,"Firestore shutting down"))}}function hI(){return new Cp((i=>KU(i)),$1)}async function D7(i,t){const e=xn(i);let n=3;const s=t.query;let r=e.queries.get(s);r?!r.ba()&&t.Da()&&(n=2):(r=new R7,n=t.Da()?0:1);try{switch(n){case 0:r.wa=await e.onListen(s,!0);break;case 1:r.wa=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(a){const o=w2(a,`Initialization of query '${ag(t.query)}' failed`);return void t.onError(o)}e.queries.set(s,r),r.Sa.push(t),t.va(e.onlineState),r.wa&&t.Fa(r.wa)&&R2(e)}async function I7(i,t){const e=xn(i),n=t.query;let s=3;const r=e.queries.get(n);if(r){const a=r.Sa.indexOf(t);a>=0&&(r.Sa.splice(a,1),r.Sa.length===0?s=t.Da()?0:1:!r.ba()&&t.Da()&&(s=2))}switch(s){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function N7(i,t){const e=xn(i);let n=!1;for(const s of t){const r=s.query,a=e.queries.get(r);if(a){for(const o of a.Sa)o.Fa(s)&&(n=!0);a.wa=s}}n&&R2(e)}function O7(i,t,e){const n=xn(i),s=n.queries.get(t);if(s)for(const r of s.Sa)r.onError(e);n.queries.delete(t)}function R2(i){i.Ca.forEach((t=>{t.next()}))}var ew,fI;(fI=ew||(ew={})).Ma="default",fI.Cache="cache";class P7{constructor(t,e,n){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const s of t.docChanges)s.type!==3&&n.push(s);t=new wg(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const n=e!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=wg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ew.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(t){this.key=t}}class IL{constructor(t){this.key=t}}class U7{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gn(),this.mutatedKeys=Gn(),this.eu=ZU(t),this.tu=new yg(this.eu)}get nu(){return this.Ya}ru(t,e){const n=e?e.iu:new uI,s=e?e.tu:this.tu;let r=e?e.mutatedKeys:this.mutatedKeys,a=s,o=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,g)=>{const y=s.get(d),_=tE(this.query,g)?g:null,b=!!y&&this.mutatedKeys.has(y.key),M=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;y&&_?y.data.isEqual(_.data)?b!==M&&(n.track({type:3,doc:_}),S=!0):this.su(y,_)||(n.track({type:2,doc:_}),S=!0,(c&&this.eu(_,c)>0||u&&this.eu(_,u)<0)&&(o=!0)):!y&&_?(n.track({type:0,doc:_}),S=!0):y&&!_&&(n.track({type:1,doc:y}),S=!0,(c||u)&&(o=!0)),S&&(_?(a=a.add(_),r=M?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),n.track({type:1,doc:d})}return{tu:a,iu:n,Cs:o,mutatedKeys:r}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,s){const r=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort(((d,g)=>(function(_,b){const M=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return on(20277,{Rt:S})}};return M(_)-M(b)})(d.type,g.type)||this.eu(d.doc,g.doc))),this.ou(n),s=s??!1;const o=e&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new wg(this.query,t.tu,r,a,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Gn(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const e=[];return t.forEach((n=>{this.Xa.has(n)||e.push(new IL(n))})),this.Xa.forEach((n=>{t.has(n)||e.push(new DL(n))})),e}cu(t){this.Ya=t.Qs,this.Xa=Gn();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return wg.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const C2="SyncEngine";class L7{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class k7{constructor(t){this.key=t,this.hu=!1}}class B7{constructor(t,e,n,s,r,a){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Cp((o=>KU(o)),$1),this.Iu=new Map,this.Eu=new Set,this.du=new gs(Je.comparator),this.Au=new Map,this.Ru=new v2,this.Vu={},this.mu=new Map,this.fu=Ag.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function z7(i,t,e=!0){const n=kL(i);let s;const r=n.Tu.get(t);return r?(n.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await NL(n,t,e,!0),s}async function F7(i,t){const e=kL(i);await NL(e,t,!0,!1)}async function NL(i,t,e,n){const s=await i7(i.localStore,Jc(t)),r=s.targetId,a=i.sharedClientState.addLocalQueryTarget(r,e);let o;return n&&(o=await V7(i,t,r,a==="current",s.resumeToken)),i.isPrimaryClient&&e&&TL(i.remoteStore,s),o}async function V7(i,t,e,n,s){i.pu=(g,y,_)=>(async function(M,S,E,R){let N=S.view.ru(E);N.Cs&&(N=await sI(M.localStore,S.query,!1).then((({documents:L})=>S.view.ru(L,N))));const P=R&&R.targetChanges.get(S.targetId),k=R&&R.targetMismatches.get(S.targetId)!=null,z=S.view.applyChanges(N,M.isPrimaryClient,P,k);return pI(M,S.targetId,z.au),z.snapshot})(i,g,y,_);const r=await sI(i.localStore,t,!0),a=new U7(t,r.Qs),o=a.ru(r.documents),c=e_.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",s),u=a.applyChanges(o,i.isPrimaryClient,c);pI(i,e,u.au);const d=new L7(t,e,a);return i.Tu.set(t,d),i.Iu.has(e)?i.Iu.get(e).push(t):i.Iu.set(e,[t]),u.snapshot}async function H7(i,t,e){const n=xn(i),s=n.Tu.get(t),r=n.Iu.get(s.targetId);if(r.length>1)return n.Iu.set(s.targetId,r.filter((a=>!$1(a,t)))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await $A(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),e&&S2(n.remoteStore,s.targetId),nw(n,s.targetId)})).catch(qg)):(nw(n,s.targetId),await $A(n.localStore,s.targetId,!0))}async function G7(i,t){const e=xn(i),n=e.Tu.get(t),s=e.Iu.get(n.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),S2(e.remoteStore,n.targetId))}async function j7(i,t,e){const n=Q7(i);try{const s=await(function(a,o){const c=xn(a),u=Ki.now(),d=o.reduce(((_,b)=>_.add(b.key)),Gn());let g,y;return c.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let b=ch(),M=Gn();return c.Ns.getEntries(_,d).next((S=>{b=S,b.forEach(((E,R)=>{R.isValidDocument()||(M=M.add(E))}))})).next((()=>c.localDocuments.getOverlayedDocuments(_,b))).next((S=>{g=S;const E=[];for(const R of o){const N=nG(R,g.get(R.key).overlayedDocument);N!=null&&E.push(new Dp(R.key,N,HU(N.value.mapValue),nh.exists(!0)))}return c.mutationQueue.addMutationBatch(_,u,E,o)})).next((S=>{y=S;const E=S.applyToLocalDocumentSet(g,M);return c.documentOverlayCache.saveOverlays(_,S.batchId,E)}))})).then((()=>({batchId:y.batchId,changes:JU(g)})))})(n.localStore,t);n.sharedClientState.addPendingMutation(s.batchId),(function(a,o,c){let u=a.Vu[a.currentUser.toKey()];u||(u=new gs(Hn)),u=u.insert(o,c),a.Vu[a.currentUser.toKey()]=u})(n,s.batchId,e),await i_(n,s.changes),await aE(n.remoteStore)}catch(s){const r=w2(s,"Failed to persist write");e.reject(r)}}async function OL(i,t){const e=xn(i);try{const n=await t7(e.localStore,t);t.targetChanges.forEach(((s,r)=>{const a=e.Au.get(r);a&&(yi(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?yi(a.hu,14607):s.removedDocuments.size>0&&(yi(a.hu,42227),a.hu=!1))})),await i_(e,n,t)}catch(n){await qg(n)}}function dI(i,t,e){const n=xn(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const s=[];n.Tu.forEach(((r,a)=>{const o=a.view.va(t);o.snapshot&&s.push(o.snapshot)})),(function(a,o){const c=xn(a);c.onlineState=o;let u=!1;c.queries.forEach(((d,g)=>{for(const y of g.Sa)y.va(o)&&(u=!0)})),u&&R2(c)})(n.eventManager,t),s.length&&n.Pu.H_(s),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function W7(i,t,e){const n=xn(i);n.sharedClientState.updateQueryState(t,"rejected",e);const s=n.Au.get(t),r=s&&s.key;if(r){let a=new gs(Je.comparator);a=a.insert(r,ra.newNoDocument(r,gn.min()));const o=Gn().add(r),c=new iE(gn.min(),new Map,new gs(Hn),a,o);await OL(n,c),n.du=n.du.remove(r),n.Au.delete(t),D2(n)}else await $A(n.localStore,t,!1).then((()=>nw(n,t,e))).catch(qg)}async function q7(i,t){const e=xn(i),n=t.batch.batchId;try{const s=await $G(e.localStore,t);UL(e,n,null),PL(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await i_(e,s)}catch(s){await qg(s)}}async function X7(i,t,e){const n=xn(i);try{const s=await(function(a,o){const c=xn(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next((g=>(yi(g!==null,37113),d=g.keys(),c.mutationQueue.removeMutationBatch(u,g)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d))).next((()=>c.localDocuments.getDocuments(u,d)))}))})(n.localStore,t);UL(n,t,e),PL(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await i_(n,s)}catch(s){await qg(s)}}function PL(i,t){(i.mu.get(t)||[]).forEach((e=>{e.resolve()})),i.mu.delete(t)}function UL(i,t,e){const n=xn(i);let s=n.Vu[n.currentUser.toKey()];if(s){const r=s.get(t);r&&(e?r.reject(e):r.resolve(),s=s.remove(t)),n.Vu[n.currentUser.toKey()]=s}}function nw(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Iu.get(t))i.Tu.delete(n),e&&i.Pu.yu(n,e);i.Iu.delete(t),i.isPrimaryClient&&i.Ru.jr(t).forEach((n=>{i.Ru.containsKey(n)||LL(i,n)}))}function LL(i,t){i.Eu.delete(t.path.canonicalString());const e=i.du.get(t);e!==null&&(S2(i.remoteStore,e),i.du=i.du.remove(t),i.Au.delete(e),D2(i))}function pI(i,t,e){for(const n of e)n instanceof DL?(i.Ru.addReference(n.key,t),Y7(i,n)):n instanceof IL?(ke(C2,"Document no longer in limbo: "+n.key),i.Ru.removeReference(n.key,t),i.Ru.containsKey(n.key)||LL(i,n.key)):on(19791,{wu:n})}function Y7(i,t){const e=t.key,n=e.path.canonicalString();i.du.get(e)||i.Eu.has(n)||(ke(C2,"New document in limbo: "+e),i.Eu.add(n),D2(i))}function D2(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const t=i.Eu.values().next().value;i.Eu.delete(t);const e=new Je(fs.fromString(t)),n=i.fu.next();i.Au.set(n,new k7(e)),i.du=i.du.insert(e,n),TL(i.remoteStore,new _f(Jc(d2(e.path)),n,"TargetPurposeLimboResolution",K1.ce))}}async function i_(i,t,e){const n=xn(i),s=[],r=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach(((o,c)=>{a.push(n.pu(c,t,e).then((u=>{if((u||e)&&n.isPrimaryClient){const d=u?!u.fromCache:e?.targetChanges.get(c.targetId)?.current;n.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){s.push(u);const d=x2.As(c.targetId,u);r.push(d)}})))})),await Promise.all(a),n.Pu.H_(s),await(async function(c,u){const d=xn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>me.forEach(u,(y=>me.forEach(y.Es,(_=>d.persistence.referenceDelegate.addReference(g,y.targetId,_))).next((()=>me.forEach(y.ds,(_=>d.persistence.referenceDelegate.removeReference(g,y.targetId,_)))))))))}catch(g){if(!Xg(g))throw g;ke(b2,"Failed to update sequence numbers: "+g)}for(const g of u){const y=g.targetId;if(!g.fromCache){const _=d.Ms.get(y),b=_.snapshotVersion,M=_.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(y,M)}}})(n.localStore,r))}async function K7(i,t){const e=xn(i);if(!e.currentUser.isEqual(t)){ke(C2,"User change. New user:",t.toKey());const n=await xL(e.localStore,t);e.currentUser=t,(function(r,a){r.mu.forEach((o=>{o.forEach((c=>{c.reject(new qe(Se.CANCELLED,a))}))})),r.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await i_(e,n.Ls)}}function Z7(i,t){const e=xn(i),n=e.Au.get(t);if(n&&n.hu)return Gn().add(n.key);{let s=Gn();const r=e.Iu.get(t);if(!r)return s;for(const a of r){const o=e.Tu.get(a);s=s.unionWith(o.view.nu)}return s}}function kL(i){const t=xn(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=OL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z7.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=W7.bind(null,t),t.Pu.H_=N7.bind(null,t.eventManager),t.Pu.yu=O7.bind(null,t.eventManager),t}function Q7(i){const t=xn(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=q7.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=X7.bind(null,t),t}class US{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=sE(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return JG(this.persistence,new KG,t.initialUser,this.serializer)}Cu(t){return new _L(_2.mi,this.serializer)}Du(t){return new r7}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}US.provider={build:()=>new US};class J7 extends US{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){yi(this.persistence.referenceDelegate instanceof OS,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new PG(n,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?uo.withCacheSize(this.cacheSizeBytes):uo.DEFAULT;return new _L((n=>OS.mi(n,e)),this.serializer)}}class iw{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>dI(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=K7.bind(null,this.syncEngine),await w7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new C7})()}createDatastore(t){const e=sE(t.databaseInfo.databaseId),n=(function(r){return new u7(r)})(t.databaseInfo);return(function(r,a,o,c){return new p7(r,a,o,c)})(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return(function(n,s,r,a,o){return new g7(n,s,r,a,o)})(this.localStore,this.datastore,t.asyncQueue,(e=>dI(this.syncEngine,e,0)),(function(){return oI.v()?new oI:new a7})())}createSyncEngine(t,e){return(function(s,r,a,o,c,u,d){const g=new B7(s,r,a,o,c,u);return d&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const n=xn(e);ke(pp,"RemoteStore shutting down."),n.Ea.add(5),await n_(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}iw.provider={build:()=>new iw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):lh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="FirestoreClient";class tj{constructor(t,e,n,s,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=s,this.user=ia.UNAUTHENTICATED,this.clientId=a2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,(async a=>{ke(Lf,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(ke(Lf,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new wf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=w2(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function JT(i,t){i.asyncQueue.verifyOperationInProgress(),ke(Lf,"Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener((async s=>{n.isEqual(s)||(await xL(t.localStore,s),n=s)})),t.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=t}async function mI(i,t){i.asyncQueue.verifyOperationInProgress();const e=await ej(i);ke(Lf,"Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener((n=>cI(t.remoteStore,n))),i.setAppCheckTokenChangeListener(((n,s)=>cI(t.remoteStore,s))),i._onlineComponents=t}async function ej(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ke(Lf,"Using user provided OfflineComponentProvider");try{await JT(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(s){return s.name==="FirebaseError"?s.code===Se.FAILED_PRECONDITION||s.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(e))throw e;Sg("Error using user provided cache. Falling back to memory cache: "+e),await JT(i,new US)}}else ke(Lf,"Using default OfflineComponentProvider"),await JT(i,new J7(void 0));return i._offlineComponents}async function BL(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ke(Lf,"Using user provided OnlineComponentProvider"),await mI(i,i._uninitializedComponentsProvider._online)):(ke(Lf,"Using default OnlineComponentProvider"),await mI(i,new iw))),i._onlineComponents}function nj(i){return BL(i).then((t=>t.syncEngine))}async function ij(i){const t=await BL(i),e=t.eventManager;return e.onListen=z7.bind(null,t.syncEngine),e.onUnlisten=H7.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=F7.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=G7.bind(null,t.syncEngine),e}function sj(i,t,e={}){const n=new wf;return i.asyncQueue.enqueueAndForget((async()=>(function(r,a,o,c,u){const d=new $7({next:y=>{d.Nu(),a.enqueueAndForget((()=>I7(r,g)));const _=y.docs.has(o);!_&&y.fromCache?u.reject(new qe(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&c&&c.source==="server"?u.reject(new qe(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),g=new P7(d2(o.path),d,{includeMetadataChanges:!0,qa:!0});return D7(r,g)})(await ij(i),i.asyncQueue,t,e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="firestore.googleapis.com",yI=!0;class vI{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new qe(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FL,this.ssl=yI}else this.host=t.host,this.ssl=t.ssl??yI;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=vL;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<NG)throw new qe(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}m9("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zL(t.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new qe(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new qe(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new qe(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class I2{constructor(t,e,n,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new qe(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vI(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new s9;switch(n.type){case"firstParty":return new l9(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new qe(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=gI.get(e);n&&(ke("ComponentProvider","Removing Datastore"),gI.delete(e),n.terminate())})(this),Promise.resolve()}}function rj(i,t,e,n={}){i=hv(i,I2);const s=Tp(t),r=i._getSettings(),a={...r,emulatorOptions:i._getEmulatorOptions()},o=`${t}:${e}`;s&&(Yw(`https://${o}`),Kw("Firestore",!0)),r.host!==FL&&r.host!==o&&Sg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...r,host:o,ssl:s,emulatorOptions:n};if(!Df(c,a)&&(i._setSettings(c),n.mockUserToken)){let u,d;if(typeof n.mockUserToken=="string")u=n.mockUserToken,d=ia.MOCK_USER;else{u=PP(n.mockUserToken,i._app?.options.projectId);const g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new qe(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ia(g)}i._authCredentials=new r9(new IU(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new N2(this.firestore,t,this._query)}}class vr{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vv(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new vr(this.firestore,t,this._key)}toJSON(){return{type:vr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if($v(e,vr._jsonSchema))return new vr(t,n||null,new Je(fs.fromString(e.referencePath)))}}vr._jsonSchemaVersion="firestore/documentReference/1.0",vr._jsonSchema={type:Ws("string",vr._jsonSchemaVersion),referencePath:Ws("string")};class vv extends N2{constructor(t,e,n){super(t,e,d2(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new vr(this.firestore,null,new Je(t))}withConverter(t){return new vv(this.firestore,t,this._path)}}function $T(i,t,...e){if(i=Lr(i),arguments.length===1&&(t=a2.newId()),p9("doc","path",t),i instanceof I2){const n=fs.fromString(t,...e);return ND(n),new vr(i,null,new Je(n))}{if(!(i instanceof vr||i instanceof vv))throw new qe(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(fs.fromString(t,...e));return ND(n),new vr(i.firestore,i instanceof vv?i.converter:null,new Je(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="AsyncQueue";class xI{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SL(this,"async_queue_retry"),this._c=()=>{const n=QT();n&&ke(_I,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const e=QT();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=QT();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new wf;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Xg(t))throw t;ke(_I,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((n=>{throw this.nc=n,this.rc=!1,lh("INTERNAL UNHANDLED ERROR: ",bI(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=e,e}enqueueAfterDelay(t,e,n){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const s=A2.createAndSchedule(this,t,e,n,(r=>this.hc(r)));return this.tc.push(s),s}uc(){this.nc&&on(47125,{Pc:bI(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,n)=>e.targetTimeMs-n.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function bI(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}class O2 extends I2{constructor(t,e,n,s){super(t,e,n,s),this.type="firestore",this._queue=new xI,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new xI(t),this._firestoreClient=void 0,await t}}}function aj(i,t){const e=typeof i=="object"?i:W1(),n=typeof i=="string"?i:AS,s=Vf(e,"firestore").getImmediate({identifier:n});if(!s._initialized){const r=IP("firestore");r&&rj(s,...r)}return s}function VL(i){if(i._terminated)throw new qe(Se.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||oj(i),i._firestoreClient}function oj(i){const t=i._freezeSettings(),e=(function(s,r,a,o){return new A9(s,r,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,zL(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,t);i._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),i._firestoreClient=new tj(i._authCredentials,i._appCheckCredentials,i._queue,e,i._componentsProvider&&(function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new dl(kr.fromBase64String(t))}catch(e){throw new qe(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new dl(kr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:dl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if($v(t,dl._jsonSchema))return dl.fromBase64String(t.bytes)}}dl._jsonSchemaVersion="firestore/bytes/1.0",dl._jsonSchema={type:Ws("string",dl._jsonSchemaVersion),bytes:Ws("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new qe(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new qe(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new qe(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Hn(this._lat,t._lat)||Hn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:tu._jsonSchemaVersion}}static fromJSON(t){if($v(t,tu._jsonSchema))return new tu(t.latitude,t.longitude)}}tu._jsonSchemaVersion="firestore/geoPoint/1.0",tu._jsonSchema={type:Ws("string",tu._jsonSchemaVersion),latitude:Ws("number"),longitude:Ws("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0})(this._values,t._values)}toJSON(){return{type:eu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if($v(t,eu._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new eu(t.vectorValues);throw new qe(Se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}eu._jsonSchemaVersion="firestore/vectorValue/1.0",eu._jsonSchema={type:Ws("string",eu._jsonSchemaVersion),vectorValues:Ws("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=/^__.*__$/;class cj{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Dp(t,this.data,this.fieldMask,e,this.fieldTransforms):new t_(t,this.data,e,this.fieldTransforms)}}function GL(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw on(40011,{Ac:i})}}class U2{constructor(t,e,n,s,r,a){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new U2({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),n=this.Vc({path:e,fc:!1});return n.gc(t),n}yc(t){const e=this.path?.child(t),n=this.Vc({path:e,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return LS(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(GL(this.Ac)&&lj.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class uj{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||sE(t)}Cc(t,e,n,s=!1){return new U2({Ac:t,methodName:e,Dc:n,path:Pr.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hj(i){const t=i._freezeSettings(),e=sE(i._databaseId);return new uj(i._databaseId,!!t.ignoreUndefinedProperties,e)}function fj(i,t,e,n,s,r={}){const a=i.Cc(r.merge||r.mergeFields?2:0,t,e,s);XL("Data must be an object, but it was:",a,n);const o=WL(n,a);let c,u;if(r.merge)c=new Jl(a.fieldMask),u=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const g of r.mergeFields){const y=dj(t,g,e);if(!a.contains(y))throw new qe(Se.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);mj(d,y)||d.push(y)}c=new Jl(d),u=a.fieldTransforms.filter((g=>c.covers(g.field)))}else c=null,u=a.fieldTransforms;return new cj(new fl(o),c,u)}function jL(i,t){if(qL(i=Lr(i)))return XL("Unsupported field value:",t,i),WL(i,t);if(i instanceof HL)return(function(n,s){if(!GL(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)})(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(n,s){const r=[];let a=0;for(const o of n){let c=jL(o,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),a++}return{arrayValue:{values:r}}})(i,t)}return(function(n,s){if((n=Lr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Z9(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Ki.fromDate(n);return{timestampValue:NS(s.serializer,r)}}if(n instanceof Ki){const r=new Ki(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:NS(s.serializer,r)}}if(n instanceof tu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof dl)return{bytesValue:hL(s.serializer,n._byteString)};if(n instanceof vr){const r=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(r))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:y2(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof eu)return(function(a,o){return{mapValue:{fields:{[FU]:{stringValue:VU},[wS]:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return p2(o.serializer,u)}))}}}}}})(n,s);throw s.Sc(`Unsupported field value: ${o2(n)}`)})(i,t)}function WL(i,t){const e={};return PU(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rp(i,((n,s)=>{const r=jL(s,t.mc(n));r!=null&&(e[n]=r)})),{mapValue:{fields:e}}}function qL(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ki||i instanceof tu||i instanceof dl||i instanceof vr||i instanceof HL||i instanceof eu)}function XL(i,t,e){if(!qL(e)||!NU(e)){const n=o2(e);throw n==="an object"?t.Sc(i+" a custom object"):t.Sc(i+" "+n)}}function dj(i,t,e){if((t=Lr(t))instanceof P2)return t._internalPath;if(typeof t=="string")return YL(i,t);throw LS("Field path arguments must be of type string or ",i,!1,void 0,e)}const pj=new RegExp("[~\\*/\\[\\]]");function YL(i,t,e){if(t.search(pj)>=0)throw LS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new P2(...t.split("."))._internalPath}catch{throw LS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function LS(i,t,e,n,s){const r=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${t}() called with invalid data`;e&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(r||a)&&(c+=" (found",r&&(c+=` in field ${n}`),a&&(c+=` in document ${s}`),c+=")"),new qe(Se.INVALID_ARGUMENT,o+i+c)}function mj(i,t){return i.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(t,e,n,s,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new gj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(ZL("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class gj extends KL{data(){return super.data()}}function ZL(i,t){return typeof t=="string"?YL(i,t):t instanceof P2?t._internalPath:t._delegate._internalPath}class yj{convertValue(t,e="none"){switch(Pf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ds(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Of(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw on(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Rp(t,((s,r)=>{n[s]=this.convertValue(r,e)})),n}convertVectorValue(t){const e=t.fields?.[wS].arrayValue?.values?.map((n=>Ds(n.doubleValue)));return new eu(e)}convertGeoPoint(t){return new tu(Ds(t.latitude),Ds(t.longitude))}convertArray(t,e){return(t.values||[]).map((n=>this.convertValue(n,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Q1(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(dv(t));default:return null}}convertTimestamp(t){const e=Nf(t);return new Ki(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=fs.fromString(t);yi(yL(n),9688,{name:t});const s=new pv(n.get(1),n.get(3)),r=new Je(n.popFirst(5));return s.isEqual(e)||lh(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(i,t,e){let n;return n=i?i.toFirestore(t):t,n}class Dy{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class rp extends KL{constructor(t,e,n,s,r,a){super(t,e,n,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new aS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(ZL("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=rp._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}rp._jsonSchemaVersion="firestore/documentSnapshot/1.0",rp._jsonSchema={type:Ws("string",rp._jsonSchemaVersion),bundleSource:Ws("string","DocumentSnapshot"),bundleName:Ws("string"),bundle:Ws("string")};class aS extends rp{data(t={}){return super.data(t)}}class jy{constructor(t,e,n,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Dy(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new aS(this._firestore,this._userDataWriter,n.key,n,new Dy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new qe(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((o=>{const c=new aS(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Dy(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((o=>r||o.type!==3)).map((o=>{const c=new aS(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Dy(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:_j(o.type),doc:c,oldIndex:u,newIndex:d}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=jy._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=a2.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],s=[];return this.docs.forEach((r=>{r._document!==null&&(e.push(r._document),n.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function _j(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return on(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(i){i=hv(i,vr);const t=hv(i.firestore,O2);return sj(VL(t),i._key).then((e=>Ej(t,i,e)))}jy._jsonSchemaVersion="firestore/querySnapshot/1.0",jy._jsonSchema={type:Ws("string",jy._jsonSchemaVersion),bundleSource:Ws("string","QuerySnapshot"),bundleName:Ws("string"),bundle:Ws("string")};class bj extends yj{constructor(t){super(),this.firestore=t}convertBytes(t){return new dl(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new vr(this.firestore,null,e)}}function SI(i,t,e){i=hv(i,vr);const n=hv(i.firestore,O2),s=vj(i.converter,t);return Sj(n,[fj(hj(n),"setDoc",i._key,s,i.converter!==null,e).toMutation(i._key,nh.none())])}function Sj(i,t){return(function(n,s){const r=new wf;return n.asyncQueue.enqueueAndForget((async()=>j7(await nj(n),s,r))),r.promise})(VL(i),t)}function Ej(i,t,e){const n=e.docs.get(t._key),s=new bj(i);return new rp(i,s,t._key,n,new Dy(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(s){Wg=s})(Ap),nc(new gl("firestore",((n,{instanceIdentifier:s,options:r})=>{const a=n.getProvider("app").getImmediate(),o=new O2(new a9(n.getProvider("auth-internal")),new c9(a,n.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new qe(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pv(u.options.projectId,d)})(a,s),a);return r={useFetchStreams:e,...r},o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),go(RD,CD,t),go(RD,CD,"esm2020")})();var Tj="firebase",Mj="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */go(Tj,Mj,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL="firebasestorage.googleapis.com",Aj="storageBucket",wj=120*1e3,Rj=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends xl{constructor(t,e,n=0){super(tM(t),`Firebase Storage: ${e} (${tM(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hu.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return tM(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ou;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ou||(ou={}));function tM(i){return"storage/"+i}function Cj(){const i="An unknown error occurred, please check the error payload for server response.";return new hu(ou.UNKNOWN,i)}function Dj(){return new hu(ou.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ij(){return new hu(ou.CANCELED,"User canceled the upload/download.")}function Nj(i){return new hu(ou.INVALID_URL,"Invalid URL '"+i+"'.")}function Oj(i){return new hu(ou.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function EI(i){return new hu(ou.INVALID_ARGUMENT,i)}function JL(){return new hu(ou.APP_DELETED,"The Firebase app was deleted.")}function Pj(i){return new hu(ou.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=$l.makeFromUrl(t,e)}catch{return new $l(t,"")}if(n.path==="")return n;throw Oj(t)}static makeFromUrl(t,e){let n=null;const s="([A-Za-z0-9.\\-_]+)";function r(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function u(P){P.path_=decodeURIComponent(P.path)}const d="v[A-Za-z0-9_]+",g=e.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",_=new RegExp(`^https?://${g}/${d}/b/${s}/o${y}`,"i"),b={bucket:1,path:3},M=e===QL?"(?:storage.googleapis.com|storage.cloud.google.com)":e,S="([^?#]*)",E=new RegExp(`^https?://${M}/${s}/${S}`,"i"),N=[{regex:o,indices:c,postModify:r},{regex:_,indices:b,postModify:u},{regex:E,indices:{bucket:1,path:2},postModify:u}];for(let P=0;P<N.length;P++){const k=N[P],z=k.regex.exec(t);if(z){const L=z[k.indices.bucket];let U=z[k.indices.path];U||(U=""),n=new $l(L,U),k.postModify(n);break}}if(n==null)throw Nj(t);return n}}class Uj{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(i,t,e){let n=1,s=null,r=null,a=!1,o=0;function c(){return o===2}let u=!1;function d(...S){u||(u=!0,t.apply(null,S))}function g(S){s=setTimeout(()=>{s=null,i(_,c())},S)}function y(){r&&clearTimeout(r)}function _(S,...E){if(u){y();return}if(S){y(),d.call(null,S,...E);return}if(c()||a){y(),d.call(null,S,...E);return}n<64&&(n*=2);let N;o===1?(o=2,N=0):N=(n+Math.random())*1e3,g(N)}let b=!1;function M(S){b||(b=!0,y(),!u&&(s!==null?(S||(o=2),clearTimeout(s),g(0)):S||(o=1)))}return g(0),r=setTimeout(()=>{a=!0,M(!0)},e),M}function kj(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(i){return i!==void 0}function TI(i,t,e,n){if(n<t)throw EI(`Invalid value for '${i}'. Expected ${t} or greater.`);if(n>e)throw EI(`Invalid value for '${i}'. Expected ${e} or less.`)}function zj(i){const t=encodeURIComponent;let e="?";for(const n in i)if(i.hasOwnProperty(n)){const s=t(n)+"="+t(i[n]);e=e+s+"&"}return e=e.slice(0,-1),e}var kS;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(kS||(kS={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(i,t){const e=i>=500&&i<600,s=[408,429].indexOf(i)!==-1,r=t.indexOf(i)!==-1;return e||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(t,e,n,s,r,a,o,c,u,d,g,y=!0,_=!1){this.url_=t,this.method_=e,this.headers_=n,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=g,this.retry=y,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,M)=>{this.resolve_=b,this.reject_=M,this.start_()})}start_(){const t=(n,s)=>{if(s){n(!1,new Lx(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const a=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&r.addUploadProgressListener(a),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(a),this.pendingConnection_=null;const o=r.getErrorCode()===kS.NO_ERROR,c=r.getStatus();if(!o||Fj(c,this.additionalRetryCodes_)&&this.retry){const d=r.getErrorCode()===kS.ABORT;n(!1,new Lx(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new Lx(u,r))})},e=(n,s)=>{const r=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());Bj(c)?r(c):r()}catch(c){a(c)}else if(o!==null){const c=Cj();c.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,c)):a(c)}else if(s.canceled){const c=this.appDelete_?JL():Ij();a(c)}else{const c=Dj();a(c)}};this.canceled_?e(!1,new Lx(!1,null,!0)):this.backoffId_=Lj(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&kj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Lx{constructor(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}function Hj(i,t){t!==null&&t.length>0&&(i.Authorization="Firebase "+t)}function Gj(i,t){i["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function jj(i,t){t&&(i["X-Firebase-GMPID"]=t)}function Wj(i,t){t!==null&&(i["X-Firebase-AppCheck"]=t)}function qj(i,t,e,n,s,r,a=!0,o=!1){const c=zj(i.urlParams),u=i.url+c,d=Object.assign({},i.headers);return jj(d,t),Hj(d,e),Gj(d,r),Wj(d,n),new Vj(u,i.method,d,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,s,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(i){if(i.length===0)return null;const t=i.lastIndexOf("/");return t===-1?"":i.slice(0,t)}function Yj(i){const t=i.lastIndexOf("/",i.length-2);return t===-1?i:i.slice(t+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(t,e){this._service=t,e instanceof $l?this._location=e:this._location=$l.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new BS(t,e)}get root(){const t=new $l(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Yj(this._location.path)}get storage(){return this._service}get parent(){const t=Xj(this._location.path);if(t===null)return null;const e=new $l(this._location.bucket,t);return new BS(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw Pj(t)}}function MI(i,t){const e=t?.[Aj];return e==null?null:$l.makeFromBucketSpec(e,i)}function Kj(i,t,e,n={}){i.host=`${t}:${e}`;const s=Tp(t);s&&(Yw(`https://${i.host}/b`),Kw("Storage",!0)),i._isUsingEmulator=!0,i._protocol=s?"https":"http";const{mockUserToken:r}=n;r&&(i._overrideAuthToken=typeof r=="string"?r:PP(r,i.app.options.projectId))}class Zj{constructor(t,e,n,s,r,a=!1){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._url=s,this._firebaseVersion=r,this._isUsingEmulator=a,this._bucket=null,this._host=QL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wj,this._maxUploadRetryTime=Rj,this._requests=new Set,s!=null?this._bucket=$l.makeFromBucketSpec(s,this._host):this._bucket=MI(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=$l.makeFromBucketSpec(this._url,t):this._bucket=MI(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){TI("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){TI("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(e!==null)return e.accessToken}return null}async _getAppCheckToken(){if(Fo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new BS(this,t)}_makeRequest(t,e,n,s,r=!0){if(this._deleted)return new Uj(JL());{const a=qj(t,this._appId,n,s,e,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,e){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,n,s).getPromise()}}const AI="@firebase/storage",wI="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L="storage";function Qj(i=W1(),t){i=Lr(i);const n=Vf(i,$L).getImmediate({identifier:t}),s=IP("storage");return s&&Jj(n,...s),n}function Jj(i,t,e,n={}){Kj(i,t,e,n)}function $j(i,{instanceIdentifier:t}){const e=i.getProvider("app").getImmediate(),n=i.getProvider("auth-internal"),s=i.getProvider("app-check-internal");return new Zj(e,n,s,t,Ap)}function tW(){nc(new gl($L,$j,"PUBLIC").setMultipleInstances(!0)),go(AI,wI,""),go(AI,wI,"esm2020")}tW();const t4="@firebase/installations",L2="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=1e4,n4=`w:${L2}`,i4="FIS_v2",eW="https://firebaseinstallations.googleapis.com/v1",nW=3600*1e3,iW="installations",sW="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},mp=new Mp(iW,sW,rW);function s4(i){return i instanceof xl&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4({projectId:i}){return`${eW}/projects/${i}/installations`}function a4(i){return{token:i.token,requestStatus:2,expiresIn:oW(i.expiresIn),creationTime:Date.now()}}async function o4(i,t){const n=(await t.json()).error;return mp.create("request-failed",{requestName:i,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function l4({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function aW(i,{refreshToken:t}){const e=l4(i);return e.append("Authorization",lW(t)),e}async function c4(i){const t=await i();return t.status>=500&&t.status<600?i():t}function oW(i){return Number(i.replace("s","000"))}function lW(i){return`${i4} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cW({appConfig:i,heartbeatServiceProvider:t},{fid:e}){const n=r4(i),s=l4(i),r=t.getImmediate({optional:!0});if(r){const u=await r.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const a={fid:e,authVersion:i4,appId:i.appId,sdkVersion:n4},o={method:"POST",headers:s,body:JSON.stringify(a)},c=await c4(()=>fetch(n,o));if(c.ok){const u=await c.json();return{fid:u.fid||e,registrationStatus:2,refreshToken:u.refreshToken,authToken:a4(u.authToken)}}else throw await o4("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(i){return new Promise(t=>{setTimeout(t,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uW(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=/^[cdef][\w-]{21}$/,sw="";function fW(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const e=dW(i);return hW.test(e)?e:sw}catch{return sw}}function dW(i){return uW(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new Map;function f4(i,t){const e=oE(i);d4(e,t),pW(e,t)}function d4(i,t){const e=h4.get(i);if(e)for(const n of e)n(t)}function pW(i,t){const e=mW();e&&e.postMessage({key:i,fid:t}),gW()}let tp=null;function mW(){return!tp&&"BroadcastChannel"in self&&(tp=new BroadcastChannel("[Firebase] FID Change"),tp.onmessage=i=>{d4(i.data.key,i.data.fid)}),tp}function gW(){h4.size===0&&tp&&(tp.close(),tp=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW="firebase-installations-database",vW=1,gp="firebase-installations-store";let eM=null;function k2(){return eM||(eM=FP(yW,vW,{upgrade:(i,t)=>{switch(t){case 0:i.createObjectStore(gp)}}})),eM}async function zS(i,t){const e=oE(i),s=(await k2()).transaction(gp,"readwrite"),r=s.objectStore(gp),a=await r.get(e);return await r.put(t,e),await s.done,(!a||a.fid!==t.fid)&&f4(i,t.fid),t}async function p4(i){const t=oE(i),n=(await k2()).transaction(gp,"readwrite");await n.objectStore(gp).delete(t),await n.done}async function lE(i,t){const e=oE(i),s=(await k2()).transaction(gp,"readwrite"),r=s.objectStore(gp),a=await r.get(e),o=t(a);return o===void 0?await r.delete(e):await r.put(o,e),await s.done,o&&(!a||a.fid!==o.fid)&&f4(i,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(i){let t;const e=await lE(i.appConfig,n=>{const s=_W(n),r=xW(i,s);return t=r.registrationPromise,r.installationEntry});return e.fid===sw?{installationEntry:await t}:{installationEntry:e,registrationPromise:t}}function _W(i){const t=i||{fid:fW(),registrationStatus:0};return m4(t)}function xW(i,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(mp.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=bW(i,e);return{installationEntry:e,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:SW(i)}:{installationEntry:t}}async function bW(i,t){try{const e=await cW(i,t);return zS(i.appConfig,e)}catch(e){throw s4(e)&&e.customData.serverCode===409?await p4(i.appConfig):await zS(i.appConfig,{fid:t.fid,registrationStatus:0}),e}}async function SW(i){let t=await RI(i.appConfig);for(;t.registrationStatus===1;)await u4(100),t=await RI(i.appConfig);if(t.registrationStatus===0){const{installationEntry:e,registrationPromise:n}=await B2(i);return n||e}return t}function RI(i){return lE(i,t=>{if(!t)throw mp.create("installation-not-found");return m4(t)})}function m4(i){return EW(i)?{fid:i.fid,registrationStatus:0}:i}function EW(i){return i.registrationStatus===1&&i.registrationTime+e4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TW({appConfig:i,heartbeatServiceProvider:t},e){const n=MW(i,e),s=aW(i,e),r=t.getImmediate({optional:!0});if(r){const u=await r.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const a={installation:{sdkVersion:n4,appId:i.appId}},o={method:"POST",headers:s,body:JSON.stringify(a)},c=await c4(()=>fetch(n,o));if(c.ok){const u=await c.json();return a4(u)}else throw await o4("Generate Auth Token",c)}function MW(i,{fid:t}){return`${r4(i)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(i,t=!1){let e;const n=await lE(i.appConfig,r=>{if(!g4(r))throw mp.create("not-registered");const a=r.authToken;if(!t&&RW(a))return r;if(a.requestStatus===1)return e=AW(i,t),r;{if(!navigator.onLine)throw mp.create("app-offline");const o=DW(r);return e=wW(i,o),o}});return e?await e:n.authToken}async function AW(i,t){let e=await CI(i.appConfig);for(;e.authToken.requestStatus===1;)await u4(100),e=await CI(i.appConfig);const n=e.authToken;return n.requestStatus===0?z2(i,t):n}function CI(i){return lE(i,t=>{if(!g4(t))throw mp.create("not-registered");const e=t.authToken;return IW(e)?{...t,authToken:{requestStatus:0}}:t})}async function wW(i,t){try{const e=await TW(i,t),n={...t,authToken:e};return await zS(i.appConfig,n),e}catch(e){if(s4(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))await p4(i.appConfig);else{const n={...t,authToken:{requestStatus:0}};await zS(i.appConfig,n)}throw e}}function g4(i){return i!==void 0&&i.registrationStatus===2}function RW(i){return i.requestStatus===2&&!CW(i)}function CW(i){const t=Date.now();return t<i.creationTime||i.creationTime+i.expiresIn<t+nW}function DW(i){const t={requestStatus:1,requestTime:Date.now()};return{...i,authToken:t}}function IW(i){return i.requestStatus===1&&i.requestTime+e4<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NW(i){const t=i,{installationEntry:e,registrationPromise:n}=await B2(t);return n?n.catch(console.error):z2(t).catch(console.error),e.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OW(i,t=!1){const e=i;return await PW(e),(await z2(e,t)).token}async function PW(i){const{registrationPromise:t}=await B2(i);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(i){if(!i||!i.options)throw nM("App Configuration");if(!i.name)throw nM("App Name");const t=["projectId","apiKey","appId"];for(const e of t)if(!i.options[e])throw nM(e);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function nM(i){return mp.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="installations",LW="installations-internal",kW=i=>{const t=i.getProvider("app").getImmediate(),e=UW(t),n=Vf(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},BW=i=>{const t=i.getProvider("app").getImmediate(),e=Vf(t,y4).getImmediate();return{getId:()=>NW(e),getToken:s=>OW(e,s)}};function zW(){nc(new gl(y4,kW,"PUBLIC")),nc(new gl(LW,BW,"PRIVATE"))}zW();go(t4,L2);go(t4,L2,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="analytics",FW="firebase_id",VW="origin",HW=60*1e3,GW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",F2="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new j1("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ho=new Mp("analytics","Analytics",jW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(i){if(!i.startsWith(F2)){const t=Ho.create("invalid-gtag-resource",{gtagURL:i});return yo.warn(t.message),""}return i}function v4(i){return Promise.all(i.map(t=>t.catch(e=>e)))}function qW(i,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(i,t)),e}function XW(i,t){const e=qW("firebase-js-sdk-policy",{createScriptURL:WW}),n=document.createElement("script"),s=`${F2}?l=${i}&id=${t}`;n.src=e?e?.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function YW(i){let t=[];return Array.isArray(window[i])?t=window[i]:window[i]=t,t}async function KW(i,t,e,n,s,r){const a=n[s];try{if(a)await t[a];else{const c=(await v4(e)).find(u=>u.measurementId===s);c&&await t[c.appId]}}catch(o){yo.error(o)}i("config",s,r)}async function ZW(i,t,e,n,s){try{let r=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const o=await v4(e);for(const c of a){const u=o.find(g=>g.measurementId===c),d=u&&t[u.appId];if(d)r.push(d);else{r=[];break}}}r.length===0&&(r=Object.values(t)),await Promise.all(r),i("event",n,s||{})}catch(r){yo.error(r)}}function QW(i,t,e,n){async function s(r,...a){try{if(r==="event"){const[o,c]=a;await ZW(i,t,e,o,c)}else if(r==="config"){const[o,c]=a;await KW(i,t,e,n,o,c)}else if(r==="consent"){const[o,c]=a;i("consent",o,c)}else if(r==="get"){const[o,c,u]=a;i("get",o,c,u)}else if(r==="set"){const[o]=a;i("set",o)}else i(r,...a)}catch(o){yo.error(o)}}return s}function JW(i,t,e,n,s){let r=function(...a){window[n].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=QW(r,i,t,e),{gtagCore:r,wrappedGtag:window[s]}}function $W(i){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(F2)&&e.src.includes(i))return e;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq=30,eq=1e3;class nq{constructor(t={},e=eq){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const _4=new nq;function iq(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function sq(i){const{appId:t,apiKey:e}=i,n={method:"GET",headers:iq(e)},s=GW.replace("{app-id}",t),r=await fetch(s,n);if(r.status!==200&&r.status!==304){let a="";try{const o=await r.json();o.error?.message&&(a=o.error.message)}catch{}throw Ho.create("config-fetch-failed",{httpStatus:r.status,responseMessage:a})}return r.json()}async function rq(i,t=_4,e){const{appId:n,apiKey:s,measurementId:r}=i.options;if(!n)throw Ho.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:n};throw Ho.create("no-api-key")}const a=t.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new lq;return setTimeout(async()=>{o.abort()},HW),x4({appId:n,apiKey:s,measurementId:r},a,o,t)}async function x4(i,{throttleEndTimeMillis:t,backoffCount:e},n,s=_4){const{appId:r,measurementId:a}=i;try{await aq(n,t)}catch(o){if(a)return yo.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${o?.message}]`),{appId:r,measurementId:a};throw o}try{const o=await sq(i);return s.deleteThrottleMetadata(r),o}catch(o){const c=o;if(!oq(c)){if(s.deleteThrottleMetadata(r),a)return yo.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:r,measurementId:a};throw o}const u=Number(c?.customData?.httpStatus)===503?$C(e,s.intervalMillis,tq):$C(e,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:e+1};return s.setThrottleMetadata(r,d),yo.debug(`Calling attemptFetch again in ${u} millis`),x4(i,d,n,s)}}function aq(i,t){return new Promise((e,n)=>{const s=Math.max(t-Date.now(),0),r=setTimeout(e,s);i.addEventListener(()=>{clearTimeout(r),n(Ho.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function oq(i){if(!(i instanceof xl)||!i.customData)return!1;const t=Number(i.customData.httpStatus);return t===429||t===500||t===503||t===504}class lq{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function cq(i,t,e,n,s){if(s&&s.global){i("event",e,n);return}else{const r=await t,a={...n,send_to:r};i("event",e,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uq(){if(LP())try{await kP()}catch(i){return yo.warn(Ho.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return yo.warn(Ho.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function hq(i,t,e,n,s,r,a){const o=rq(i);o.then(y=>{e[y.measurementId]=y.appId,i.options.measurementId&&y.measurementId!==i.options.measurementId&&yo.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>yo.error(y)),t.push(o);const c=uq().then(y=>{if(y)return n.getId()}),[u,d]=await Promise.all([o,c]);$W(r)||XW(r,u.measurementId),s("js",new Date);const g=a?.config??{};return g[VW]="firebase",g.update=!0,d!=null&&(g[FW]=d),s("config",u.measurementId,g),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{constructor(t){this.app=t}_delete(){return delete Wy[this.app.options.appId],Promise.resolve()}}let Wy={},DI=[];const II={};let iM="dataLayer",dq="gtag",NI,b4,OI=!1;function pq(){const i=[];if(UP()&&i.push("This is a browser extension environment."),S5()||i.push("Cookies are not available."),i.length>0){const t=i.map((n,s)=>`(${s+1}) ${n}`).join(" "),e=Ho.create("invalid-analytics-context",{errorInfo:t});yo.warn(e.message)}}function mq(i,t,e){pq();const n=i.options.appId;if(!n)throw Ho.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)yo.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ho.create("no-api-key");if(Wy[n]!=null)throw Ho.create("already-exists",{id:n});if(!OI){YW(iM);const{wrappedGtag:r,gtagCore:a}=JW(Wy,DI,II,iM,dq);b4=r,NI=a,OI=!0}return Wy[n]=hq(i,DI,II,t,NI,iM,e),new fq(i)}function gq(i=W1()){i=Lr(i);const t=Vf(i,FS);return t.isInitialized()?t.getImmediate():yq(i)}function yq(i,t={}){const e=Vf(i,FS);if(e.isInitialized()){const s=e.getImmediate();if(Df(t,e.getOptions()))return s;throw Ho.create("already-initialized")}return e.initialize({options:t})}function vq(i,t,e,n){i=Lr(i),cq(b4,Wy[i.app.options.appId],t,e,n).catch(s=>yo.error(s))}const PI="@firebase/analytics",UI="0.10.18";function _q(){nc(new gl(FS,(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return mq(n,s,e)},"PUBLIC")),nc(new gl("analytics-internal",i,"PRIVATE")),go(PI,UI),go(PI,UI,"esm2020");function i(t){try{const e=t.getProvider(FS).getImmediate();return{logEvent:(n,s,r)=>vq(e,n,s,r)}}catch(e){throw Ho.create("interop-component-reg-failed",{reason:e})}}}_q();const xq={apiKey:"AIzaSyCQ8j97On9vd2WP-j8dITJEW3MXwAZjGuM",authDomain:"t-zone-8df87.firebaseapp.com",projectId:"t-zone-8df87",storageBucket:"t-zone-8df87.firebasestorage.app",messagingSenderId:"665913659255",appId:"1:665913659255:web:ef2234bebab85b08c39b72",measurementId:"G-D7ZWX1BN6M"},cE=VP(xq),kx=n9(cE),sM=aj(cE);Qj(cE);typeof window<"u"&&gq(cE);const S4=bt.createContext(void 0),s_=()=>{const i=bt.useContext(S4);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i},bq=({children:i})=>{const[t,e]=bt.useState(null),[n,s]=bt.useState(!0);bt.useEffect(()=>jH(kx,async d=>{if(d){const g=await xj($T(sM,"users",d.uid));if(g.exists()){const y=g.data();e({uid:d.uid,email:d.email,displayName:d.displayName||y.displayName,photoURL:d.photoURL||y.photoURL,createdAt:y.createdAt?.toDate()||new Date,updatedAt:y.updatedAt?.toDate()||new Date})}else{const y={uid:d.uid,email:d.email,displayName:d.displayName||"",photoURL:d.photoURL||"",createdAt:new Date,updatedAt:new Date};await SI($T(sM,"users",d.uid),{...y,createdAt:y.createdAt,updatedAt:y.updatedAt}),e(y)}}else e(null);s(!1)}),[]);const c={user:t,loading:n,signIn:async(u,d)=>{try{await zH(kx,u,d)}catch(g){throw g}},signUp:async(u,d,g)=>{try{const{user:y}=await BH(kx,u,d);await VH(y,{displayName:g});const _={uid:y.uid,email:y.email,displayName:g,photoURL:y.photoURL||"",createdAt:new Date,updatedAt:new Date};await SI($T(sM,"users",y.uid),{..._,createdAt:_.createdAt,updatedAt:_.updatedAt})}catch(y){throw y}},signOut:async()=>{try{await WH(kx)}catch(u){throw u}}};return W.jsx(S4.Provider,{value:c,children:i})},E4=bt.createContext(void 0),Sq=()=>{const i=bt.useContext(E4);if(i===void 0)throw new Error("useTheme must be used within a ThemeProvider");return i},Eq=({children:i})=>{const[t,e]=bt.useState(()=>{const r=localStorage.getItem("theme");return r?r==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});bt.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const s={isDark:t,toggleTheme:()=>{e(!t)}};return W.jsx(E4.Provider,{value:s,children:i})},rM=({children:i})=>{const{user:t,loading:e}=s_(),n=uu();return e?W.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:W.jsxs("div",{className:"text-center",children:[W.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:W.jsx("span",{className:"text-white font-bold text-2xl",children:"T"})}),W.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):t?W.jsx(W.Fragment,{children:i}):W.jsx(bP,{to:"/login",state:{from:n},replace:!0})},Tq=()=>{const{user:i,signOut:t}=s_(),{isDark:e,toggleTheme:n}=Sq(),s=uu(),r=async()=>{try{await t()}catch(a){console.error("Error signing out:",a)}};return W.jsx("header",{className:"bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-700",children:W.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:W.jsxs("div",{className:"flex justify-between items-center h-16",children:[W.jsx("div",{className:"flex items-center",children:W.jsxs(zo,{to:"/",className:"flex items-center space-x-2",children:[W.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-lg flex items-center justify-center",children:W.jsx("span",{className:"text-white font-bold text-lg",children:"T"})}),W.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"T-Zone"})]})}),W.jsxs("nav",{className:"hidden md:flex space-x-8",children:[W.jsx(zo,{to:"/dashboard",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${s.pathname==="/dashboard"?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300":"text-gray-700 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400"}`,children:"Dashboard"}),W.jsx(zo,{to:"/workout",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${s.pathname==="/workout"?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300":"text-gray-700 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400"}`,children:"Workout"}),W.jsx(zo,{to:"/health-log",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${s.pathname==="/health-log"?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300":"text-gray-700 hover:text-primary-600 dark:text-gray-300 dark:hover:text-primary-400"}`,children:"Health Log"})]}),W.jsxs("div",{className:"flex items-center space-x-4",children:[W.jsx("button",{onClick:n,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e?W.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):W.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),i?W.jsxs("div",{className:"flex items-center space-x-3",children:[W.jsxs("div",{className:"flex items-center space-x-2",children:[i.photoURL?W.jsx("img",{src:i.photoURL,alt:i.displayName||"User",className:"w-8 h-8 rounded-full"}):W.jsx("div",{className:"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center",children:W.jsx("span",{className:"text-white text-sm font-medium",children:i.displayName?.charAt(0)||i.email.charAt(0).toUpperCase()})}),W.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:i.displayName||i.email})]}),W.jsx("button",{onClick:r,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Sign Out"})]}):W.jsxs("div",{className:"flex items-center space-x-2",children:[W.jsx(zo,{to:"/login",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Sign In"}),W.jsx(zo,{to:"/register",className:"btn-primary text-sm",children:"Sign Up"})]})]})]})})})},Kg=({children:i})=>W.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[W.jsx(Tq,{}),W.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i})]}),Mq=()=>W.jsx(Kg,{children:W.jsxs("div",{className:"text-center",children:[W.jsxs("div",{className:"max-w-4xl mx-auto",children:[W.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6",children:["Welcome to"," ",W.jsx("span",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"T-Zone"})]}),W.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto",children:"Your personal fitness and health companion. Track workouts, monitor health metrics, and achieve your wellness goals with our comprehensive platform."}),W.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[W.jsx(zo,{to:"/register",className:"btn-primary text-lg px-8 py-3",children:"Get Started"}),W.jsx(zo,{to:"/login",className:"btn-secondary text-lg px-8 py-3",children:"Sign In"})]})]}),W.jsxs("div",{className:"mt-20 grid grid-cols-1 md:grid-cols-3 gap-8",children:[W.jsxs("div",{className:"card text-center",children:[W.jsx("div",{className:"w-16 h-16 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center mx-auto mb-4",children:W.jsx("svg",{className:"w-8 h-8 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),W.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Workout Tracking"}),W.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Track your exercises, monitor progress, and follow guided workout routines with 3D animations."})]}),W.jsxs("div",{className:"card text-center",children:[W.jsx("div",{className:"w-16 h-16 bg-success-100 dark:bg-success-900 rounded-full flex items-center justify-center mx-auto mb-4",children:W.jsx("svg",{className:"w-8 h-8 text-success-600 dark:text-success-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),W.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Health Analytics"}),W.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Monitor your health metrics with detailed charts and analytics to track your wellness journey."})]}),W.jsxs("div",{className:"card text-center",children:[W.jsx("div",{className:"w-16 h-16 bg-warning-100 dark:bg-warning-900 rounded-full flex items-center justify-center mx-auto mb-4",children:W.jsx("svg",{className:"w-8 h-8 text-warning-600 dark:text-warning-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),W.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Goal Setting"}),W.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Set and track your fitness goals with personalized recommendations and progress monitoring."})]})]}),W.jsxs("div",{className:"mt-20 bg-gradient-to-r from-primary-600 to-secondary-600 rounded-2xl p-8 text-white",children:[W.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Transform Your Health?"}),W.jsx("p",{className:"text-xl mb-6 opacity-90",children:"Join thousands of users who are already achieving their fitness goals with T-Zone."}),W.jsx(zo,{to:"/register",className:"bg-white text-primary-600 hover:bg-gray-100 font-semibold py-3 px-8 rounded-lg transition-colors duration-200",children:"Start Your Journey Today"})]})]})}),Aq=()=>{const[i,t]=bt.useState(""),[e,n]=bt.useState(""),[s,r]=bt.useState(""),[a,o]=bt.useState(!1),{signIn:c}=s_(),u=V1(),d=async g=>{if(g.preventDefault(),!i||!e){r("Please fill in all fields");return}try{r(""),o(!0),await c(i,e),u("/dashboard")}catch(y){r("Failed to sign in. Please check your credentials."),console.error("Login error:",y)}finally{o(!1)}};return W.jsx(Kg,{children:W.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center",children:W.jsxs("div",{className:"max-w-md w-full space-y-8",children:[W.jsxs("div",{className:"text-center",children:[W.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full flex items-center justify-center mx-auto mb-4",children:W.jsx("span",{className:"text-white font-bold text-2xl",children:"T"})}),W.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Welcome Back"}),W.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Sign in to your T-Zone account"})]}),W.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[s&&W.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-lg",children:s}),W.jsxs("div",{className:"space-y-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),W.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:g=>t(g.target.value),className:"input-field",placeholder:"Enter your email"})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),W.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:e,onChange:g=>n(g.target.value),className:"input-field",placeholder:"Enter your password"})]})]}),W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsxs("div",{className:"flex items-center",children:[W.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),W.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Remember me"})]}),W.jsx("div",{className:"text-sm",children:W.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400",children:"Forgot your password?"})})]}),W.jsx("div",{children:W.jsx("button",{type:"submit",disabled:a,className:"w-full btn-primary py-3 text-base font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Signing In...":"Sign In"})}),W.jsx("div",{className:"text-center",children:W.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Don't have an account?"," ",W.jsx(zo,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400",children:"Sign up here"})]})})]})]})})})},wq=()=>{const[i,t]=bt.useState({displayName:"",email:"",password:"",confirmPassword:""}),[e,n]=bt.useState(""),[s,r]=bt.useState(!1),{signUp:a}=s_(),o=V1(),c=d=>{t({...i,[d.target.name]:d.target.value})},u=async d=>{if(d.preventDefault(),!i.displayName||!i.email||!i.password||!i.confirmPassword){n("Please fill in all fields");return}if(i.password!==i.confirmPassword){n("Passwords do not match");return}if(i.password.length<6){n("Password must be at least 6 characters");return}try{n(""),r(!0),await a(i.email,i.password,i.displayName),o("/dashboard")}catch(g){n("Failed to create account. Please try again."),console.error("Registration error:",g)}finally{r(!1)}};return W.jsx(Kg,{children:W.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center",children:W.jsxs("div",{className:"max-w-md w-full space-y-8",children:[W.jsxs("div",{className:"text-center",children:[W.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full flex items-center justify-center mx-auto mb-4",children:W.jsx("span",{className:"text-white font-bold text-2xl",children:"T"})}),W.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Create Account"}),W.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Join T-Zone and start your fitness journey"})]}),W.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[e&&W.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-lg",children:e}),W.jsxs("div",{className:"space-y-4",children:[W.jsxs("div",{children:[W.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),W.jsx("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:i.displayName,onChange:c,className:"input-field",placeholder:"Enter your full name"})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email Address"}),W.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i.email,onChange:c,className:"input-field",placeholder:"Enter your email"})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),W.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:i.password,onChange:c,className:"input-field",placeholder:"Create a password"})]}),W.jsxs("div",{children:[W.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),W.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:i.confirmPassword,onChange:c,className:"input-field",placeholder:"Confirm your password"})]})]}),W.jsxs("div",{className:"flex items-center",children:[W.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),W.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:["I agree to the"," ",W.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-500 dark:text-primary-400",children:"Terms of Service"})," ","and"," ",W.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-500 dark:text-primary-400",children:"Privacy Policy"})]})]}),W.jsx("div",{children:W.jsx("button",{type:"submit",disabled:s,className:"w-full btn-primary py-3 text-base font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Creating Account...":"Create Account"})}),W.jsx("div",{className:"text-center",children:W.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",W.jsx(zo,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400",children:"Sign in here"})]})})]})]})})})},Rq=()=>{const{user:i}=s_(),t={totalWorkouts:24,totalCaloriesBurned:1840,totalWorkoutTime:480,currentStreak:7,weeklyGoal:5,weeklyProgress:3},e=[{id:1,name:"Morning Cardio",duration:30,calories:250,date:"2024-01-15"},{id:2,name:"Strength Training",duration:45,calories:320,date:"2024-01-14"},{id:3,name:"Yoga Flow",duration:25,calories:120,date:"2024-01-13"}],n=[{label:"Weight",value:"70.5 kg",change:"-0.5 kg",trend:"down"},{label:"Body Fat",value:"18.2%",change:"-1.2%",trend:"down"},{label:"Muscle Mass",value:"32.1 kg",change:"+0.8 kg",trend:"up"},{label:"Heart Rate",value:"65 bpm",change:"-3 bpm",trend:"down"}];return W.jsx(Kg,{children:W.jsxs("div",{className:"space-y-8",children:[W.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 rounded-2xl p-8 text-white",children:[W.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",i?.displayName||"User","! 👋"]}),W.jsx("p",{className:"text-lg opacity-90",children:"Ready to crush your fitness goals today?"})]}),W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[W.jsx("div",{className:"card",children:W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsxs("div",{children:[W.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Workouts"}),W.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.totalWorkouts})]}),W.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900 rounded-lg flex items-center justify-center",children:W.jsx("svg",{className:"w-6 h-6 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})}),W.jsx("div",{className:"card",children:W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsxs("div",{children:[W.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Calories Burned"}),W.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.totalCaloriesBurned.toLocaleString()})]}),W.jsx("div",{className:"w-12 h-12 bg-success-100 dark:bg-success-900 rounded-lg flex items-center justify-center",children:W.jsx("svg",{className:"w-6 h-6 text-success-600 dark:text-success-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"})})})]})}),W.jsx("div",{className:"card",children:W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsxs("div",{children:[W.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Workout Time"}),W.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[Math.floor(t.totalWorkoutTime/60),"h ",t.totalWorkoutTime%60,"m"]})]}),W.jsx("div",{className:"w-12 h-12 bg-warning-100 dark:bg-warning-900 rounded-lg flex items-center justify-center",children:W.jsx("svg",{className:"w-6 h-6 text-warning-600 dark:text-warning-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),W.jsx("div",{className:"card",children:W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsxs("div",{children:[W.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Current Streak"}),W.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[t.currentStreak," days"]})]}),W.jsx("div",{className:"w-12 h-12 bg-danger-100 dark:bg-danger-900 rounded-lg flex items-center justify-center",children:W.jsx("svg",{className:"w-6 h-6 text-danger-600 dark:text-danger-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]})})]}),W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Weekly Progress"}),W.jsxs("div",{className:"flex items-center justify-between mb-4",children:[W.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.weeklyProgress," of ",t.weeklyGoal," workouts completed"]}),W.jsxs("span",{className:"text-sm font-medium text-primary-600 dark:text-primary-400",children:[Math.round(t.weeklyProgress/t.weeklyGoal*100),"%"]})]}),W.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:W.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 h-2 rounded-full transition-all duration-300",style:{width:`${t.weeklyProgress/t.weeklyGoal*100}%`}})})]}),W.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Workouts"}),W.jsx("div",{className:"space-y-3",children:e.map(s=>W.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[W.jsxs("div",{children:[W.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.date})]}),W.jsxs("div",{className:"text-right",children:[W.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[s.duration," min"]}),W.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.calories," cal"]})]})]},s.id))})]}),W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Health Metrics"}),W.jsx("div",{className:"space-y-4",children:n.map((s,r)=>W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsxs("div",{children:[W.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.label}),W.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.value})]}),W.jsxs("div",{className:"text-right",children:[W.jsx("p",{className:`text-sm font-medium ${s.trend==="up"?"text-success-600 dark:text-success-400":"text-danger-600 dark:text-danger-400"}`,children:s.change}),W.jsx("div",{className:`w-2 h-2 rounded-full ${s.trend==="up"?"bg-success-500":"bg-danger-500"}`})]})]},r))})]})]}),W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[W.jsx("button",{className:"p-4 bg-primary-50 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800 rounded-lg hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors",children:W.jsxs("div",{className:"flex items-center space-x-3",children:[W.jsx("div",{className:"w-10 h-10 bg-primary-500 rounded-lg flex items-center justify-center",children:W.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),W.jsxs("div",{className:"text-left",children:[W.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Start Workout"}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Begin a new session"})]})]})}),W.jsx("button",{className:"p-4 bg-success-50 dark:bg-success-900/20 border border-success-200 dark:border-success-800 rounded-lg hover:bg-success-100 dark:hover:bg-success-900/30 transition-colors",children:W.jsxs("div",{className:"flex items-center space-x-3",children:[W.jsx("div",{className:"w-10 h-10 bg-success-500 rounded-lg flex items-center justify-center",children:W.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),W.jsxs("div",{className:"text-left",children:[W.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Log Health"}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Record metrics"})]})]})}),W.jsx("button",{className:"p-4 bg-warning-50 dark:bg-warning-900/20 border border-warning-200 dark:border-warning-800 rounded-lg hover:bg-warning-100 dark:hover:bg-warning-900/30 transition-colors",children:W.jsxs("div",{className:"flex items-center space-x-3",children:[W.jsx("div",{className:"w-10 h-10 bg-warning-500 rounded-lg flex items-center justify-center",children:W.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:W.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),W.jsxs("div",{className:"text-left",children:[W.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Set Goals"}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Track progress"})]})]})})]})]})]})})};var aM={exports:{}},Lu={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LI;function Cq(){return LI||(LI=1,Lu.ConcurrentRoot=1,Lu.ContinuousEventPriority=8,Lu.DefaultEventPriority=32,Lu.DiscreteEventPriority=2,Lu.IdleEventPriority=268435456,Lu.LegacyRoot=0,Lu.NoEventPriority=0),Lu}var kI;function Dq(){return kI||(kI=1,aM.exports=Cq()),aM.exports}var oS=Dq();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const uE="180",qd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Xd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},T4=0,rw=1,M4=2,Iq=3,A4=0,hE=1,qy=2,Xl=3,uh=0,La=1,Zl=2,ih=0,ap=1,aw=2,ow=3,lw=4,w4=5,yf=100,R4=101,C4=102,D4=103,I4=104,N4=200,O4=201,P4=202,U4=203,VS=204,HS=205,L4=206,k4=207,B4=208,z4=209,F4=210,V4=211,H4=212,G4=213,j4=214,GS=0,jS=1,WS=2,yp=3,qS=4,XS=5,YS=6,KS=7,r_=0,W4=1,q4=2,nu=0,X4=1,Y4=2,K4=3,V2=4,Z4=5,Q4=6,J4=7,cw="attached",$4="detached",fE=300,hh=301,kf=302,_v=303,xv=304,Zg=306,bv=1e3,pl=1001,Sv=1002,Ur=1003,H2=1004,Nq=1004,ug=1005,Oq=1005,Ns=1006,Xy=1007,Pq=1007,Yc=1008,Uq=1008,yl=1009,G2=1010,j2=1011,Rg=1012,dE=1013,fh=1014,mo=1015,Qg=1016,pE=1017,mE=1018,Cg=1020,W2=35902,q2=35899,X2=1021,Y2=1022,aa=1023,Dg=1026,Ig=1027,gE=1028,a_=1029,K2=1030,yE=1031,Lq=1032,vE=1033,Yy=33776,Ky=33777,Zy=33778,Qy=33779,ZS=35840,QS=35841,JS=35842,$S=35843,t1=36196,e1=37492,n1=37496,i1=37808,s1=37809,r1=37810,a1=37811,o1=37812,l1=37813,c1=37814,u1=37815,h1=37816,f1=37817,d1=37818,p1=37819,m1=37820,g1=37821,y1=36492,v1=36494,_1=36495,x1=36283,b1=36284,S1=36285,E1=36286,tk=2200,ek=2201,nk=2202,Ev=2300,T1=2301,lS=2302,ep=2400,np=2401,Tv=2402,_E=2500,Z2=2501,kq=0,Bq=1,zq=2,ik=3200,Q2=3201,Fq=3202,Vq=3203,Gf=0,sk=1,Ku="",sa="srgb",Bf="srgb-linear",Mv="linear",Mi="srgb",Hq=0,Yd=7680,Gq=7681,jq=7682,Wq=7683,qq=34055,Xq=34056,Yq=5386,Kq=512,Zq=513,Qq=514,Jq=515,$q=516,tX=517,eX=518,uw=519,rk=512,ak=513,ok=514,J2=515,lk=516,ck=517,uk=518,hk=519,Av=35044,nX=35048,iX=35040,sX=35045,rX=35049,aX=35041,oX=35046,lX=35050,cX=35042,uX="100",hw="300 es",Vo=2e3,Ng=2001,hX={COMPUTE:"compute",RENDER:"render"},fX={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},dX={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let fu=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const s=n[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,t);t.target=null}}};const $r=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let BI=1234567;const op=Math.PI/180,Og=180/Math.PI;function Go(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return($r[i&255]+$r[i>>8&255]+$r[i>>16&255]+$r[i>>24&255]+"-"+$r[t&255]+$r[t>>8&255]+"-"+$r[t>>16&15|64]+$r[t>>24&255]+"-"+$r[e&63|128]+$r[e>>8&255]+"-"+$r[e>>16&255]+$r[e>>24&255]+$r[n&255]+$r[n>>8&255]+$r[n>>16&255]+$r[n>>24&255]).toLowerCase()}function rn(i,t,e){return Math.max(t,Math.min(e,i))}function $2(i,t){return(i%t+t)%t}function pX(i,t,e,n,s){return n+(i-t)*(s-n)/(e-t)}function mX(i,t,e){return i!==t?(e-i)/(t-i):0}function Jy(i,t,e){return(1-e)*i+e*t}function gX(i,t,e,n){return Jy(i,t,1-Math.exp(-e*n))}function yX(i,t=1){return t-Math.abs($2(i,t*2)-t)}function vX(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*(3-2*i))}function _X(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*i*(i*(i*6-15)+10))}function xX(i,t){return i+Math.floor(Math.random()*(t-i+1))}function bX(i,t){return i+Math.random()*(t-i)}function SX(i){return i*(.5-Math.random())}function EX(i){i!==void 0&&(BI=i);let t=BI+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function TX(i){return i*op}function MX(i){return i*Og}function AX(i){return(i&i-1)===0&&i!==0}function wX(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function RX(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function CX(i,t,e,n,s){const r=Math.cos,a=Math.sin,o=r(e/2),c=a(e/2),u=r((t+n)/2),d=a((t+n)/2),g=r((t-n)/2),y=a((t-n)/2),_=r((n-t)/2),b=a((n-t)/2);switch(s){case"XYX":i.set(o*d,c*g,c*y,o*u);break;case"YZY":i.set(c*y,o*d,c*g,o*u);break;case"ZXZ":i.set(c*g,c*y,o*d,o*u);break;case"XZX":i.set(o*d,c*b,c*_,o*u);break;case"YXY":i.set(c*_,o*d,c*b,o*u);break;case"ZYZ":i.set(c*b,c*_,o*d,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ua(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function An(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const DX={DEG2RAD:op,RAD2DEG:Og,generateUUID:Go,clamp:rn,euclideanModulo:$2,mapLinear:pX,inverseLerp:mX,lerp:Jy,damp:gX,pingpong:yX,smoothstep:vX,smootherstep:_X,randInt:xX,randFloat:bX,randFloatSpread:SX,seededRandom:EX,degToRad:TX,radToDeg:MX,isPowerOfTwo:AX,ceilPowerOfTwo:wX,floorPowerOfTwo:RX,setQuaternionFromProperEuler:CX,normalize:An,denormalize:Ua};class ce{constructor(t=0,e=0){ce.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6],this.y=s[1]*e+s[4]*n+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=rn(this.x,t.x,e.x),this.y=rn(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=rn(this.x,t,e),this.y=rn(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(rn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(rn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*s+t.x,this.y=r*s+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ca{constructor(t=0,e=0,n=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=s}static slerpFlat(t,e,n,s,r,a,o){let c=n[s+0],u=n[s+1],d=n[s+2],g=n[s+3];const y=r[a+0],_=r[a+1],b=r[a+2],M=r[a+3];if(o===0){t[e+0]=c,t[e+1]=u,t[e+2]=d,t[e+3]=g;return}if(o===1){t[e+0]=y,t[e+1]=_,t[e+2]=b,t[e+3]=M;return}if(g!==M||c!==y||u!==_||d!==b){let S=1-o;const E=c*y+u*_+d*b+g*M,R=E>=0?1:-1,N=1-E*E;if(N>Number.EPSILON){const k=Math.sqrt(N),z=Math.atan2(k,E*R);S=Math.sin(S*z)/k,o=Math.sin(o*z)/k}const P=o*R;if(c=c*S+y*P,u=u*S+_*P,d=d*S+b*P,g=g*S+M*P,S===1-o){const k=1/Math.sqrt(c*c+u*u+d*d+g*g);c*=k,u*=k,d*=k,g*=k}}t[e]=c,t[e+1]=u,t[e+2]=d,t[e+3]=g}static multiplyQuaternionsFlat(t,e,n,s,r,a){const o=n[s],c=n[s+1],u=n[s+2],d=n[s+3],g=r[a],y=r[a+1],_=r[a+2],b=r[a+3];return t[e]=o*b+d*g+c*_-u*y,t[e+1]=c*b+d*y+u*g-o*_,t[e+2]=u*b+d*_+o*y-c*g,t[e+3]=d*b-o*g-c*y-u*_,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,s){return this._x=t,this._y=e,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,s=t._y,r=t._z,a=t._order,o=Math.cos,c=Math.sin,u=o(n/2),d=o(s/2),g=o(r/2),y=c(n/2),_=c(s/2),b=c(r/2);switch(a){case"XYZ":this._x=y*d*g+u*_*b,this._y=u*_*g-y*d*b,this._z=u*d*b+y*_*g,this._w=u*d*g-y*_*b;break;case"YXZ":this._x=y*d*g+u*_*b,this._y=u*_*g-y*d*b,this._z=u*d*b-y*_*g,this._w=u*d*g+y*_*b;break;case"ZXY":this._x=y*d*g-u*_*b,this._y=u*_*g+y*d*b,this._z=u*d*b+y*_*g,this._w=u*d*g-y*_*b;break;case"ZYX":this._x=y*d*g-u*_*b,this._y=u*_*g+y*d*b,this._z=u*d*b-y*_*g,this._w=u*d*g+y*_*b;break;case"YZX":this._x=y*d*g+u*_*b,this._y=u*_*g+y*d*b,this._z=u*d*b-y*_*g,this._w=u*d*g-y*_*b;break;case"XZY":this._x=y*d*g-u*_*b,this._y=u*_*g-y*d*b,this._z=u*d*b+y*_*g,this._w=u*d*g+y*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],s=e[4],r=e[8],a=e[1],o=e[5],c=e[9],u=e[2],d=e[6],g=e[10],y=n+o+g;if(y>0){const _=.5/Math.sqrt(y+1);this._w=.25/_,this._x=(d-c)*_,this._y=(r-u)*_,this._z=(a-s)*_}else if(n>o&&n>g){const _=2*Math.sqrt(1+n-o-g);this._w=(d-c)/_,this._x=.25*_,this._y=(s+a)/_,this._z=(r+u)/_}else if(o>g){const _=2*Math.sqrt(1+o-n-g);this._w=(r-u)/_,this._x=(s+a)/_,this._y=.25*_,this._z=(c+d)/_}else{const _=2*Math.sqrt(1+g-n-o);this._w=(a-s)/_,this._x=(r+u)/_,this._y=(c+d)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-8?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(rn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const s=Math.min(1,e/n);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,s=t._y,r=t._z,a=t._w,o=e._x,c=e._y,u=e._z,d=e._w;return this._x=n*d+a*o+s*u-r*c,this._y=s*d+a*c+r*o-n*u,this._z=r*d+a*u+n*c-s*o,this._w=a*d-n*o-s*c-r*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,s=this._y,r=this._z,a=this._w;let o=a*t._w+n*t._x+s*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=s,this._z=r,this;const c=1-o*o;if(c<=Number.EPSILON){const _=1-e;return this._w=_*a+e*this._w,this._x=_*n+e*this._x,this._y=_*s+e*this._y,this._z=_*r+e*this._z,this.normalize(),this}const u=Math.sqrt(c),d=Math.atan2(u,o),g=Math.sin((1-e)*d)/u,y=Math.sin(e*d)/u;return this._w=a*g+this._w*y,this._x=n*g+this._x*y,this._y=s*g+this._y*y,this._z=r*g+this._z*y,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(t),s*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ot{constructor(t=0,e=0,n=0){ot.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(zI.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(zI.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*s,this.y=r[1]*e+r[4]*n+r[7]*s,this.z=r[2]*e+r[5]*n+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*s+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*s+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*s+r[14])*a,this}applyQuaternion(t){const e=this.x,n=this.y,s=this.z,r=t.x,a=t.y,o=t.z,c=t.w,u=2*(a*s-o*n),d=2*(o*e-r*s),g=2*(r*n-a*e);return this.x=e+c*u+a*g-o*d,this.y=n+c*d+o*u-r*g,this.z=s+c*g+r*d-a*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*s,this.y=r[1]*e+r[5]*n+r[9]*s,this.z=r[2]*e+r[6]*n+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=rn(this.x,t.x,e.x),this.y=rn(this.y,t.y,e.y),this.z=rn(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=rn(this.x,t,e),this.y=rn(this.y,t,e),this.z=rn(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(rn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,s=t.y,r=t.z,a=e.x,o=e.y,c=e.z;return this.x=s*c-r*o,this.y=r*a-n*c,this.z=n*o-s*a,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return oM.copy(this).projectOnVector(t),this.sub(oM)}reflect(t){return this.sub(oM.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(rn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,s=this.z-t.z;return e*e+n*n+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const s=Math.sin(e)*t;return this.x=s*Math.sin(n),this.y=Math.cos(e)*t,this.z=s*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const oM=new ot,zI=new ca;class _n{constructor(t,e,n,s,r,a,o,c,u){_n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,a,o,c,u)}set(t,e,n,s,r,a,o,c,u){const d=this.elements;return d[0]=t,d[1]=s,d[2]=o,d[3]=e,d[4]=r,d[5]=c,d[6]=n,d[7]=a,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,a=n[0],o=n[3],c=n[6],u=n[1],d=n[4],g=n[7],y=n[2],_=n[5],b=n[8],M=s[0],S=s[3],E=s[6],R=s[1],N=s[4],P=s[7],k=s[2],z=s[5],L=s[8];return r[0]=a*M+o*R+c*k,r[3]=a*S+o*N+c*z,r[6]=a*E+o*P+c*L,r[1]=u*M+d*R+g*k,r[4]=u*S+d*N+g*z,r[7]=u*E+d*P+g*L,r[2]=y*M+_*R+b*k,r[5]=y*S+_*N+b*z,r[8]=y*E+_*P+b*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],c=t[6],u=t[7],d=t[8];return e*a*d-e*o*u-n*r*d+n*o*c+s*r*u-s*a*c}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],c=t[6],u=t[7],d=t[8],g=d*a-o*u,y=o*c-d*r,_=u*r-a*c,b=e*g+n*y+s*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/b;return t[0]=g*M,t[1]=(s*u-d*n)*M,t[2]=(o*n-s*a)*M,t[3]=y*M,t[4]=(d*e-s*c)*M,t[5]=(s*r-o*e)*M,t[6]=_*M,t[7]=(n*c-u*e)*M,t[8]=(a*e-n*r)*M,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,s,r,a,o){const c=Math.cos(r),u=Math.sin(r);return this.set(n*c,n*u,-n*(c*a+u*o)+a+t,-s*u,s*c,-s*(-u*a+c*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply(lM.makeScale(t,e)),this}rotate(t){return this.premultiply(lM.makeRotation(-t)),this}translate(t,e){return this.premultiply(lM.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<9;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const lM=new _n;function fk(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const IX={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function hg(i,t){return new IX[i](t)}function wv(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function dk(){const i=wv("canvas");return i.style.display="block",i}const FI={};function Rv(i){i in FI||(FI[i]=!0,console.warn(i))}function NX(i,t,e){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,e);break;default:n()}}setTimeout(r,e)})}const VI=new _n().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),HI=new _n().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function OX(){const i={enabled:!0,workingColorSpace:Bf,spaces:{},convert:function(s,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===Mi&&(s.r=sh(s.r),s.g=sh(s.g),s.b=sh(s.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Mi&&(s.r=vg(s.r),s.g=vg(s.g),s.b=vg(s.b))),s},workingToColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},colorSpaceToWorking:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Ku?Mv:this.spaces[s].transfer},getToneMappingMode:function(s){return this.spaces[s].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,a){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,r){return Rv("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(s,r)},toWorkingColorSpace:function(s,r){return Rv("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(s,r)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Bf]:{primaries:t,whitePoint:n,transfer:Mv,toXYZ:VI,fromXYZ:HI,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:sa},outputColorSpaceConfig:{drawingBufferColorSpace:sa}},[sa]:{primaries:t,whitePoint:n,transfer:Mi,toXYZ:VI,fromXYZ:HI,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:sa}}}),i}const Xn=OX();function sh(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function vg(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Im;class pk{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{Im===void 0&&(Im=wv("canvas")),Im.width=t.width,Im.height=t.height;const s=Im.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),n=Im}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=wv("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const s=n.getImageData(0,0,t.width,t.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=sh(r[a]/255)*255;return n.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(sh(e[n]/255)*255):e[n]=sh(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let PX=0;class xf{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:PX++}),this.uuid=Go(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,o=s.length;a<o;a++)s[a].isDataTexture?r.push(cM(s[a].image)):r.push(cM(s[a]))}else r=cM(s);n.url=r}return e||(t.images[this.uuid]=n),n}}function cM(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?pk.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let UX=0;const uM=new ot;class ms extends fu{constructor(t=ms.DEFAULT_IMAGE,e=ms.DEFAULT_MAPPING,n=pl,s=pl,r=Ns,a=Yc,o=aa,c=yl,u=ms.DEFAULT_ANISOTROPY,d=Ku){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:UX++}),this.uuid=Go(),this.name="",this.source=new xf(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=c,this.offset=new ce(0,0),this.repeat=new ce(1,1),this.center=new ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _n,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(uM).x}get height(){return this.source.getSize(uM).y}get depth(){return this.source.getSize(uM).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Texture.setValues(): property '${e}' does not exist.`);continue}s&&n&&s.isVector2&&n.isVector2||s&&n&&s.isVector3&&n.isVector3||s&&n&&s.isMatrix3&&n.isMatrix3?s.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==fE)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case bv:t.x=t.x-Math.floor(t.x);break;case pl:t.x=t.x<0?0:1;break;case Sv:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case bv:t.y=t.y-Math.floor(t.y);break;case pl:t.y=t.y<0?0:1;break;case Sv:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}ms.DEFAULT_IMAGE=null;ms.DEFAULT_MAPPING=fE;ms.DEFAULT_ANISOTROPY=1;class Yn{constructor(t=0,e=0,n=0,s=1){Yn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,s){return this.x=t,this.y=e,this.z=n,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,s=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*s+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*s+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*s+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*s+a[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,s,r;const c=t.elements,u=c[0],d=c[4],g=c[8],y=c[1],_=c[5],b=c[9],M=c[2],S=c[6],E=c[10];if(Math.abs(d-y)<.01&&Math.abs(g-M)<.01&&Math.abs(b-S)<.01){if(Math.abs(d+y)<.1&&Math.abs(g+M)<.1&&Math.abs(b+S)<.1&&Math.abs(u+_+E-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const N=(u+1)/2,P=(_+1)/2,k=(E+1)/2,z=(d+y)/4,L=(g+M)/4,U=(b+S)/4;return N>P&&N>k?N<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(N),s=z/n,r=L/n):P>k?P<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(P),n=z/s,r=U/s):k<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(k),n=L/r,s=U/r),this.set(n,s,r,e),this}let R=Math.sqrt((S-b)*(S-b)+(g-M)*(g-M)+(y-d)*(y-d));return Math.abs(R)<.001&&(R=1),this.x=(S-b)/R,this.y=(g-M)/R,this.z=(y-d)/R,this.w=Math.acos((u+_+E-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=rn(this.x,t.x,e.x),this.y=rn(this.y,t.y,e.y),this.z=rn(this.z,t.z,e.z),this.w=rn(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=rn(this.x,t,e),this.y=rn(this.y,t,e),this.z=rn(this.z,t,e),this.w=rn(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(rn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tR extends fu{constructor(t=1,e=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ns,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth,this.scissor=new Yn(0,0,t,e),this.scissorTest=!1,this.viewport=new Yn(0,0,t,e);const s={width:t,height:e,depth:n.depth},r=new ms(s);this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(t={}){const e={minFilter:Ns,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=t,this.textures[s].image.height=e,this.textures[s].image.depth=n,this.textures[s].isArrayTexture=this.textures[s].image.depth>1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const s=Object.assign({},t.textures[e].image);this.textures[e].source=new xf(s)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class lu extends tR{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class xE extends ms{constructor(t=null,e=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=pl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class LX extends lu{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new xE(null,t,e,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class bE extends ms{constructor(t=null,e=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:s},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=pl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kX extends lu{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new bE(null,t,e,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class _r{constructor(t=new ot(1/0,1/0,1/0),e=new ot(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(jl.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(jl.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=jl.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const r=n.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let a=0,o=r.count;a<o;a++)t.isMesh===!0?t.getVertexPosition(a,jl):jl.fromBufferAttribute(r,a),jl.applyMatrix4(t.matrixWorld),this.expandByPoint(jl);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Bx.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Bx.copy(n.boundingBox)),Bx.applyMatrix4(t.matrixWorld),this.union(Bx)}const s=t.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,jl),jl.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(oy),zx.subVectors(this.max,oy),Nm.subVectors(t.a,oy),Om.subVectors(t.b,oy),Pm.subVectors(t.c,oy),rf.subVectors(Om,Nm),af.subVectors(Pm,Om),wd.subVectors(Nm,Pm);let e=[0,-rf.z,rf.y,0,-af.z,af.y,0,-wd.z,wd.y,rf.z,0,-rf.x,af.z,0,-af.x,wd.z,0,-wd.x,-rf.y,rf.x,0,-af.y,af.x,0,-wd.y,wd.x,0];return!hM(e,Nm,Om,Pm,zx)||(e=[1,0,0,0,1,0,0,0,1],!hM(e,Nm,Om,Pm,zx))?!1:(Fx.crossVectors(rf,af),e=[Fx.x,Fx.y,Fx.z],hM(e,Nm,Om,Pm,zx))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,jl).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(jl).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(ku[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ku[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ku[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ku[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ku[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ku[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ku[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ku[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ku),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const ku=[new ot,new ot,new ot,new ot,new ot,new ot,new ot,new ot],jl=new ot,Bx=new _r,Nm=new ot,Om=new ot,Pm=new ot,rf=new ot,af=new ot,wd=new ot,oy=new ot,zx=new ot,Fx=new ot,Rd=new ot;function hM(i,t,e,n,s){for(let r=0,a=i.length-3;r<=a;r+=3){Rd.fromArray(i,r);const o=s.x*Math.abs(Rd.x)+s.y*Math.abs(Rd.y)+s.z*Math.abs(Rd.z),c=t.dot(Rd),u=e.dot(Rd),d=n.dot(Rd);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>o)return!1}return!0}const BX=new _r,ly=new ot,fM=new ot;let xr=class{constructor(t=new ot,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):BX.setFromPoints(t).getCenter(n);let s=0;for(let r=0,a=t.length;r<a;r++)s=Math.max(s,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ly.subVectors(t,this.center);const e=ly.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),s=(n-this.radius)*.5;this.center.addScaledVector(ly,s/n),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(fM.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ly.copy(t.center).add(fM)),this.expandByPoint(ly.copy(t.center).sub(fM))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}};const Bu=new ot,dM=new ot,Vx=new ot,of=new ot,pM=new ot,Hx=new ot,mM=new ot;class Np{constructor(t=new ot,e=new ot(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Bu)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Bu.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Bu.copy(this.origin).addScaledVector(this.direction,e),Bu.distanceToSquared(t))}distanceSqToSegment(t,e,n,s){dM.copy(t).add(e).multiplyScalar(.5),Vx.copy(e).sub(t).normalize(),of.copy(this.origin).sub(dM);const r=t.distanceTo(e)*.5,a=-this.direction.dot(Vx),o=of.dot(this.direction),c=-of.dot(Vx),u=of.lengthSq(),d=Math.abs(1-a*a);let g,y,_,b;if(d>0)if(g=a*c-o,y=a*o-c,b=r*d,g>=0)if(y>=-b)if(y<=b){const M=1/d;g*=M,y*=M,_=g*(g+a*y+2*o)+y*(a*g+y+2*c)+u}else y=r,g=Math.max(0,-(a*y+o)),_=-g*g+y*(y+2*c)+u;else y=-r,g=Math.max(0,-(a*y+o)),_=-g*g+y*(y+2*c)+u;else y<=-b?(g=Math.max(0,-(-a*r+o)),y=g>0?-r:Math.min(Math.max(-r,-c),r),_=-g*g+y*(y+2*c)+u):y<=b?(g=0,y=Math.min(Math.max(-r,-c),r),_=y*(y+2*c)+u):(g=Math.max(0,-(a*r+o)),y=g>0?r:Math.min(Math.max(-r,-c),r),_=-g*g+y*(y+2*c)+u);else y=a>0?-r:r,g=Math.max(0,-(a*y+o)),_=-g*g+y*(y+2*c)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,g),s&&s.copy(dM).addScaledVector(Vx,y),_}intersectSphere(t,e){Bu.subVectors(t.center,this.origin);const n=Bu.dot(this.direction),s=Bu.dot(Bu)-n*n,r=t.radius*t.radius;if(s>r)return null;const a=Math.sqrt(r-s),o=n-a,c=n+a;return c<0?null:o<0?this.at(c,e):this.at(o,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,s,r,a,o,c;const u=1/this.direction.x,d=1/this.direction.y,g=1/this.direction.z,y=this.origin;return u>=0?(n=(t.min.x-y.x)*u,s=(t.max.x-y.x)*u):(n=(t.max.x-y.x)*u,s=(t.min.x-y.x)*u),d>=0?(r=(t.min.y-y.y)*d,a=(t.max.y-y.y)*d):(r=(t.max.y-y.y)*d,a=(t.min.y-y.y)*d),n>a||r>s||((r>n||isNaN(n))&&(n=r),(a<s||isNaN(s))&&(s=a),g>=0?(o=(t.min.z-y.z)*g,c=(t.max.z-y.z)*g):(o=(t.max.z-y.z)*g,c=(t.min.z-y.z)*g),n>c||o>s)||((o>n||n!==n)&&(n=o),(c<s||s!==s)&&(s=c),s<0)?null:this.at(n>=0?n:s,e)}intersectsBox(t){return this.intersectBox(t,Bu)!==null}intersectTriangle(t,e,n,s,r){pM.subVectors(e,t),Hx.subVectors(n,t),mM.crossVectors(pM,Hx);let a=this.direction.dot(mM),o;if(a>0){if(s)return null;o=1}else if(a<0)o=-1,a=-a;else return null;of.subVectors(this.origin,t);const c=o*this.direction.dot(Hx.crossVectors(of,Hx));if(c<0)return null;const u=o*this.direction.dot(pM.cross(of));if(u<0||c+u>a)return null;const d=-o*of.dot(mM);return d<0?null:this.at(d/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ln{constructor(t,e,n,s,r,a,o,c,u,d,g,y,_,b,M,S){ln.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,s,r,a,o,c,u,d,g,y,_,b,M,S)}set(t,e,n,s,r,a,o,c,u,d,g,y,_,b,M,S){const E=this.elements;return E[0]=t,E[4]=e,E[8]=n,E[12]=s,E[1]=r,E[5]=a,E[9]=o,E[13]=c,E[2]=u,E[6]=d,E[10]=g,E[14]=y,E[3]=_,E[7]=b,E[11]=M,E[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ln().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,s=1/Um.setFromMatrixColumn(t,0).length(),r=1/Um.setFromMatrixColumn(t,1).length(),a=1/Um.setFromMatrixColumn(t,2).length();return e[0]=n[0]*s,e[1]=n[1]*s,e[2]=n[2]*s,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,s=t.y,r=t.z,a=Math.cos(n),o=Math.sin(n),c=Math.cos(s),u=Math.sin(s),d=Math.cos(r),g=Math.sin(r);if(t.order==="XYZ"){const y=a*d,_=a*g,b=o*d,M=o*g;e[0]=c*d,e[4]=-c*g,e[8]=u,e[1]=_+b*u,e[5]=y-M*u,e[9]=-o*c,e[2]=M-y*u,e[6]=b+_*u,e[10]=a*c}else if(t.order==="YXZ"){const y=c*d,_=c*g,b=u*d,M=u*g;e[0]=y+M*o,e[4]=b*o-_,e[8]=a*u,e[1]=a*g,e[5]=a*d,e[9]=-o,e[2]=_*o-b,e[6]=M+y*o,e[10]=a*c}else if(t.order==="ZXY"){const y=c*d,_=c*g,b=u*d,M=u*g;e[0]=y-M*o,e[4]=-a*g,e[8]=b+_*o,e[1]=_+b*o,e[5]=a*d,e[9]=M-y*o,e[2]=-a*u,e[6]=o,e[10]=a*c}else if(t.order==="ZYX"){const y=a*d,_=a*g,b=o*d,M=o*g;e[0]=c*d,e[4]=b*u-_,e[8]=y*u+M,e[1]=c*g,e[5]=M*u+y,e[9]=_*u-b,e[2]=-u,e[6]=o*c,e[10]=a*c}else if(t.order==="YZX"){const y=a*c,_=a*u,b=o*c,M=o*u;e[0]=c*d,e[4]=M-y*g,e[8]=b*g+_,e[1]=g,e[5]=a*d,e[9]=-o*d,e[2]=-u*d,e[6]=_*g+b,e[10]=y-M*g}else if(t.order==="XZY"){const y=a*c,_=a*u,b=o*c,M=o*u;e[0]=c*d,e[4]=-g,e[8]=u*d,e[1]=y*g+M,e[5]=a*d,e[9]=_*g-b,e[2]=b*g-_,e[6]=o*d,e[10]=M*g+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(zX,t,FX)}lookAt(t,e,n){const s=this.elements;return ko.subVectors(t,e),ko.lengthSq()===0&&(ko.z=1),ko.normalize(),lf.crossVectors(n,ko),lf.lengthSq()===0&&(Math.abs(n.z)===1?ko.x+=1e-4:ko.z+=1e-4,ko.normalize(),lf.crossVectors(n,ko)),lf.normalize(),Gx.crossVectors(ko,lf),s[0]=lf.x,s[4]=Gx.x,s[8]=ko.x,s[1]=lf.y,s[5]=Gx.y,s[9]=ko.y,s[2]=lf.z,s[6]=Gx.z,s[10]=ko.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,s=e.elements,r=this.elements,a=n[0],o=n[4],c=n[8],u=n[12],d=n[1],g=n[5],y=n[9],_=n[13],b=n[2],M=n[6],S=n[10],E=n[14],R=n[3],N=n[7],P=n[11],k=n[15],z=s[0],L=s[4],U=s[8],D=s[12],O=s[1],F=s[5],H=s[9],G=s[13],it=s[2],lt=s[6],j=s[10],J=s[14],$=s[3],at=s[7],Y=s[11],Z=s[15];return r[0]=a*z+o*O+c*it+u*$,r[4]=a*L+o*F+c*lt+u*at,r[8]=a*U+o*H+c*j+u*Y,r[12]=a*D+o*G+c*J+u*Z,r[1]=d*z+g*O+y*it+_*$,r[5]=d*L+g*F+y*lt+_*at,r[9]=d*U+g*H+y*j+_*Y,r[13]=d*D+g*G+y*J+_*Z,r[2]=b*z+M*O+S*it+E*$,r[6]=b*L+M*F+S*lt+E*at,r[10]=b*U+M*H+S*j+E*Y,r[14]=b*D+M*G+S*J+E*Z,r[3]=R*z+N*O+P*it+k*$,r[7]=R*L+N*F+P*lt+k*at,r[11]=R*U+N*H+P*j+k*Y,r[15]=R*D+N*G+P*J+k*Z,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],s=t[8],r=t[12],a=t[1],o=t[5],c=t[9],u=t[13],d=t[2],g=t[6],y=t[10],_=t[14],b=t[3],M=t[7],S=t[11],E=t[15];return b*(+r*c*g-s*u*g-r*o*y+n*u*y+s*o*_-n*c*_)+M*(+e*c*_-e*u*y+r*a*y-s*a*_+s*u*d-r*c*d)+S*(+e*u*g-e*o*_-r*a*g+n*a*_+r*o*d-n*u*d)+E*(-s*o*d-e*c*g+e*o*y+s*a*g-n*a*y+n*c*d)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],c=t[6],u=t[7],d=t[8],g=t[9],y=t[10],_=t[11],b=t[12],M=t[13],S=t[14],E=t[15],R=g*S*u-M*y*u+M*c*_-o*S*_-g*c*E+o*y*E,N=b*y*u-d*S*u-b*c*_+a*S*_+d*c*E-a*y*E,P=d*M*u-b*g*u+b*o*_-a*M*_-d*o*E+a*g*E,k=b*g*c-d*M*c-b*o*y+a*M*y+d*o*S-a*g*S,z=e*R+n*N+s*P+r*k;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/z;return t[0]=R*L,t[1]=(M*y*r-g*S*r-M*s*_+n*S*_+g*s*E-n*y*E)*L,t[2]=(o*S*r-M*c*r+M*s*u-n*S*u-o*s*E+n*c*E)*L,t[3]=(g*c*r-o*y*r-g*s*u+n*y*u+o*s*_-n*c*_)*L,t[4]=N*L,t[5]=(d*S*r-b*y*r+b*s*_-e*S*_-d*s*E+e*y*E)*L,t[6]=(b*c*r-a*S*r-b*s*u+e*S*u+a*s*E-e*c*E)*L,t[7]=(a*y*r-d*c*r+d*s*u-e*y*u-a*s*_+e*c*_)*L,t[8]=P*L,t[9]=(b*g*r-d*M*r-b*n*_+e*M*_+d*n*E-e*g*E)*L,t[10]=(a*M*r-b*o*r+b*n*u-e*M*u-a*n*E+e*o*E)*L,t[11]=(d*o*r-a*g*r-d*n*u+e*g*u+a*n*_-e*o*_)*L,t[12]=k*L,t[13]=(d*M*s-b*g*s+b*n*y-e*M*y-d*n*S+e*g*S)*L,t[14]=(b*o*s-a*M*s-b*n*c+e*M*c+a*n*S-e*o*S)*L,t[15]=(a*g*s-d*o*s+d*n*c-e*g*c-a*n*y+e*o*y)*L,this}scale(t){const e=this.elements,n=t.x,s=t.y,r=t.z;return e[0]*=n,e[4]*=s,e[8]*=r,e[1]*=n,e[5]*=s,e[9]*=r,e[2]*=n,e[6]*=s,e[10]*=r,e[3]*=n,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,s))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),s=Math.sin(e),r=1-n,a=t.x,o=t.y,c=t.z,u=r*a,d=r*o;return this.set(u*a+n,u*o-s*c,u*c+s*o,0,u*o+s*c,d*o+n,d*c-s*a,0,u*c-s*o,d*c+s*a,r*c*c+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,s,r,a){return this.set(1,n,r,0,t,1,a,0,e,s,1,0,0,0,0,1),this}compose(t,e,n){const s=this.elements,r=e._x,a=e._y,o=e._z,c=e._w,u=r+r,d=a+a,g=o+o,y=r*u,_=r*d,b=r*g,M=a*d,S=a*g,E=o*g,R=c*u,N=c*d,P=c*g,k=n.x,z=n.y,L=n.z;return s[0]=(1-(M+E))*k,s[1]=(_+P)*k,s[2]=(b-N)*k,s[3]=0,s[4]=(_-P)*z,s[5]=(1-(y+E))*z,s[6]=(S+R)*z,s[7]=0,s[8]=(b+N)*L,s[9]=(S-R)*L,s[10]=(1-(y+M))*L,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,n){const s=this.elements;let r=Um.set(s[0],s[1],s[2]).length();const a=Um.set(s[4],s[5],s[6]).length(),o=Um.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],Wl.copy(this);const u=1/r,d=1/a,g=1/o;return Wl.elements[0]*=u,Wl.elements[1]*=u,Wl.elements[2]*=u,Wl.elements[4]*=d,Wl.elements[5]*=d,Wl.elements[6]*=d,Wl.elements[8]*=g,Wl.elements[9]*=g,Wl.elements[10]*=g,e.setFromRotationMatrix(Wl),n.x=r,n.y=a,n.z=o,this}makePerspective(t,e,n,s,r,a,o=Vo,c=!1){const u=this.elements,d=2*r/(e-t),g=2*r/(n-s),y=(e+t)/(e-t),_=(n+s)/(n-s);let b,M;if(c)b=r/(a-r),M=a*r/(a-r);else if(o===Vo)b=-(a+r)/(a-r),M=-2*a*r/(a-r);else if(o===Ng)b=-a/(a-r),M=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=d,u[4]=0,u[8]=y,u[12]=0,u[1]=0,u[5]=g,u[9]=_,u[13]=0,u[2]=0,u[6]=0,u[10]=b,u[14]=M,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(t,e,n,s,r,a,o=Vo,c=!1){const u=this.elements,d=2/(e-t),g=2/(n-s),y=-(e+t)/(e-t),_=-(n+s)/(n-s);let b,M;if(c)b=1/(a-r),M=a/(a-r);else if(o===Vo)b=-2/(a-r),M=-(a+r)/(a-r);else if(o===Ng)b=-1/(a-r),M=-r/(a-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=d,u[4]=0,u[8]=0,u[12]=y,u[1]=0,u[5]=g,u[9]=0,u[13]=_,u[2]=0,u[6]=0,u[10]=b,u[14]=M,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let s=0;s<16;s++)if(e[s]!==n[s])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Um=new ot,Wl=new ln,zX=new ot(0,0,0),FX=new ot(1,1,1),lf=new ot,Gx=new ot,ko=new ot,GI=new ln,jI=new ca;class jo{constructor(t=0,e=0,n=0,s=jo.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,s=this._order){return this._x=t,this._y=e,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const s=t.elements,r=s[0],a=s[4],o=s[8],c=s[1],u=s[5],d=s[9],g=s[2],y=s[6],_=s[10];switch(e){case"XYZ":this._y=Math.asin(rn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,_),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(y,u),this._z=0);break;case"YXZ":this._x=Math.asin(-rn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,_),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-g,r),this._z=0);break;case"ZXY":this._x=Math.asin(rn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-g,_),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,r));break;case"ZYX":this._y=Math.asin(-rn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(y,_),this._z=Math.atan2(c,r)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(rn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-g,r)):(this._x=0,this._y=Math.atan2(o,_));break;case"XZY":this._z=Math.asin(-rn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(y,u),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-d,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return GI.makeRotationFromQuaternion(t),this.setFromRotationMatrix(GI,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return jI.setFromEuler(this),this.setFromQuaternion(jI,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}jo.DEFAULT_ORDER="XYZ";class Pg{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let VX=0;const WI=new ot,Lm=new ca,zu=new ln,jx=new ot,cy=new ot,HX=new ot,GX=new ca,qI=new ot(1,0,0),XI=new ot(0,1,0),YI=new ot(0,0,1),KI={type:"added"},jX={type:"removed"},km={type:"childadded",child:null},gM={type:"childremoved",child:null};class si extends fu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:VX++}),this.uuid=Go(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=si.DEFAULT_UP.clone();const t=new ot,e=new jo,n=new ca,s=new ot(1,1,1);function r(){n.setFromEuler(e,!1)}function a(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ln},normalMatrix:{value:new _n}}),this.matrix=new ln,this.matrixWorld=new ln,this.matrixAutoUpdate=si.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=si.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Pg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Lm.setFromAxisAngle(t,e),this.quaternion.multiply(Lm),this}rotateOnWorldAxis(t,e){return Lm.setFromAxisAngle(t,e),this.quaternion.premultiply(Lm),this}rotateX(t){return this.rotateOnAxis(qI,t)}rotateY(t){return this.rotateOnAxis(XI,t)}rotateZ(t){return this.rotateOnAxis(YI,t)}translateOnAxis(t,e){return WI.copy(t).applyQuaternion(this.quaternion),this.position.add(WI.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(qI,t)}translateY(t){return this.translateOnAxis(XI,t)}translateZ(t){return this.translateOnAxis(YI,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(zu.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?jx.copy(t):jx.set(t,e,n);const s=this.parent;this.updateWorldMatrix(!0,!1),cy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zu.lookAt(cy,jx,this.up):zu.lookAt(jx,cy,this.up),this.quaternion.setFromRotationMatrix(zu),s&&(zu.extractRotation(s.matrixWorld),Lm.setFromRotationMatrix(zu),this.quaternion.premultiply(Lm.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(KI),km.child=t,this.dispatchEvent(km),km.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(jX),gM.child=t,this.dispatchEvent(gM),gM.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),zu.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),zu.multiply(t.parent.matrixWorld)),t.applyMatrix4(zu),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(KI),km.child=t,this.dispatchEvent(km),km.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,s=this.children.length;n<s;n++){const a=this.children[n].getObjectByProperty(t,e);if(a!==void 0)return a}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cy,t,HX),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cy,GX,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,s=e.length;n<s;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(o=>({...o})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function r(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){const g=c[u];r(t.shapes,g)}else r(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,u=this.material.length;c<u;c++)o.push(r(t.materials,this.material[c]));s.material=o}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let o=0;o<this.children.length;o++)s.children.push(this.children[o].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];s.animations.push(r(t.animations,c))}}if(e){const o=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),g=a(t.shapes),y=a(t.skeletons),_=a(t.animations),b=a(t.nodes);o.length>0&&(n.geometries=o),c.length>0&&(n.materials=c),u.length>0&&(n.textures=u),d.length>0&&(n.images=d),g.length>0&&(n.shapes=g),y.length>0&&(n.skeletons=y),_.length>0&&(n.animations=_),b.length>0&&(n.nodes=b)}return n.object=s,n;function a(o){const c=[];for(const u in o){const d=o[u];delete d.metadata,c.push(d)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const s=t.children[n];this.add(s.clone())}return this}}si.DEFAULT_UP=new ot(0,1,0);si.DEFAULT_MATRIX_AUTO_UPDATE=!0;si.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ql=new ot,Fu=new ot,yM=new ot,Vu=new ot,Bm=new ot,zm=new ot,ZI=new ot,vM=new ot,_M=new ot,xM=new ot,bM=new Yn,SM=new Yn,EM=new Yn;class fo{constructor(t=new ot,e=new ot,n=new ot){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,s){s.subVectors(n,e),ql.subVectors(t,e),s.cross(ql);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,n,s,r){ql.subVectors(s,e),Fu.subVectors(n,e),yM.subVectors(t,e);const a=ql.dot(ql),o=ql.dot(Fu),c=ql.dot(yM),u=Fu.dot(Fu),d=Fu.dot(yM),g=a*u-o*o;if(g===0)return r.set(0,0,0),null;const y=1/g,_=(u*c-o*d)*y,b=(a*d-o*c)*y;return r.set(1-_-b,b,_)}static containsPoint(t,e,n,s){return this.getBarycoord(t,e,n,s,Vu)===null?!1:Vu.x>=0&&Vu.y>=0&&Vu.x+Vu.y<=1}static getInterpolation(t,e,n,s,r,a,o,c){return this.getBarycoord(t,e,n,s,Vu)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(r,Vu.x),c.addScaledVector(a,Vu.y),c.addScaledVector(o,Vu.z),c)}static getInterpolatedAttribute(t,e,n,s,r,a){return bM.setScalar(0),SM.setScalar(0),EM.setScalar(0),bM.fromBufferAttribute(t,e),SM.fromBufferAttribute(t,n),EM.fromBufferAttribute(t,s),a.setScalar(0),a.addScaledVector(bM,r.x),a.addScaledVector(SM,r.y),a.addScaledVector(EM,r.z),a}static isFrontFacing(t,e,n,s){return ql.subVectors(n,e),Fu.subVectors(t,e),ql.cross(Fu).dot(s)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,s){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,n,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ql.subVectors(this.c,this.b),Fu.subVectors(this.a,this.b),ql.cross(Fu).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return fo.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return fo.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,s,r){return fo.getInterpolation(t,this.a,this.b,this.c,e,n,s,r)}containsPoint(t){return fo.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return fo.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,s=this.b,r=this.c;let a,o;Bm.subVectors(s,n),zm.subVectors(r,n),vM.subVectors(t,n);const c=Bm.dot(vM),u=zm.dot(vM);if(c<=0&&u<=0)return e.copy(n);_M.subVectors(t,s);const d=Bm.dot(_M),g=zm.dot(_M);if(d>=0&&g<=d)return e.copy(s);const y=c*g-d*u;if(y<=0&&c>=0&&d<=0)return a=c/(c-d),e.copy(n).addScaledVector(Bm,a);xM.subVectors(t,r);const _=Bm.dot(xM),b=zm.dot(xM);if(b>=0&&_<=b)return e.copy(r);const M=_*u-c*b;if(M<=0&&u>=0&&b<=0)return o=u/(u-b),e.copy(n).addScaledVector(zm,o);const S=d*b-_*g;if(S<=0&&g-d>=0&&_-b>=0)return ZI.subVectors(r,s),o=(g-d)/(g-d+(_-b)),e.copy(s).addScaledVector(ZI,o);const E=1/(S+M+y);return a=M*E,o=y*E,e.copy(n).addScaledVector(Bm,a).addScaledVector(zm,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const mk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cf={h:0,s:0,l:0},Wx={h:0,s:0,l:0};function TM(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*6*(2/3-e):i}let Pe=class{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=sa){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Xn.colorSpaceToWorking(this,e),this}setRGB(t,e,n,s=Xn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Xn.colorSpaceToWorking(this,s),this}setHSL(t,e,n,s=Xn.workingColorSpace){if(t=$2(t,1),e=rn(e,0,1),n=rn(n,0,1),e===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,a=2*n-r;this.r=TM(a,r,t+1/3),this.g=TM(a,r,t),this.b=TM(a,r,t-1/3)}return Xn.colorSpaceToWorking(this,s),this}setStyle(t,e=sa){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const a=s[1],o=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(a===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=sa){const n=mk[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=sh(t.r),this.g=sh(t.g),this.b=sh(t.b),this}copyLinearToSRGB(t){return this.r=vg(t.r),this.g=vg(t.g),this.b=vg(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=sa){return Xn.workingToColorSpace(ta.copy(this),t),Math.round(rn(ta.r*255,0,255))*65536+Math.round(rn(ta.g*255,0,255))*256+Math.round(rn(ta.b*255,0,255))}getHexString(t=sa){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Xn.workingColorSpace){Xn.workingToColorSpace(ta.copy(this),e);const n=ta.r,s=ta.g,r=ta.b,a=Math.max(n,s,r),o=Math.min(n,s,r);let c,u;const d=(o+a)/2;if(o===a)c=0,u=0;else{const g=a-o;switch(u=d<=.5?g/(a+o):g/(2-a-o),a){case n:c=(s-r)/g+(s<r?6:0);break;case s:c=(r-n)/g+2;break;case r:c=(n-s)/g+4;break}c/=6}return t.h=c,t.s=u,t.l=d,t}getRGB(t,e=Xn.workingColorSpace){return Xn.workingToColorSpace(ta.copy(this),e),t.r=ta.r,t.g=ta.g,t.b=ta.b,t}getStyle(t=sa){Xn.workingToColorSpace(ta.copy(this),t);const e=ta.r,n=ta.g,s=ta.b;return t!==sa?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(t,e,n){return this.getHSL(cf),this.setHSL(cf.h+t,cf.s+e,cf.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(cf),t.getHSL(Wx);const n=Jy(cf.h,Wx.h,e),s=Jy(cf.s,Wx.s,e),r=Jy(cf.l,Wx.l,e);return this.setHSL(n,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,s=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*s,this.g=r[1]*e+r[4]*n+r[7]*s,this.b=r[2]*e+r[5]*n+r[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const ta=new Pe;Pe.NAMES=mk;let WX=0;class ha extends fu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:WX++}),this.uuid=Go(),this.name="",this.type="Material",this.blending=ap,this.side=uh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=VS,this.blendDst=HS,this.blendEquation=yf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Pe(0,0,0),this.blendAlpha=0,this.depthFunc=yp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=uw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Yd,this.stencilZFail=Yd,this.stencilZPass=Yd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const s=this[e];if(s===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(t).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(t).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ap&&(n.blending=this.blending),this.side!==uh&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==VS&&(n.blendSrc=this.blendSrc),this.blendDst!==HS&&(n.blendDst=this.blendDst),this.blendEquation!==yf&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==yp&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==uw&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Yd&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Yd&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Yd&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const a=[];for(const o in r){const c=r[o];delete c.metadata,a.push(c)}return a}if(e){const r=s(t.textures),a=s(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const s=e.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class mh extends ha{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new jo,this.combine=r_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Zu=qX();function qX(){const i=new ArrayBuffer(4),t=new Float32Array(i),e=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(n[c]=0,n[c|256]=32768,s[c]=24,s[c|256]=24):u<-14?(n[c]=1024>>-u-14,n[c|256]=1024>>-u-14|32768,s[c]=-u-1,s[c|256]=-u-1):u<=15?(n[c]=u+15<<10,n[c|256]=u+15<<10|32768,s[c]=13,s[c|256]=13):u<128?(n[c]=31744,n[c|256]=64512,s[c]=24,s[c|256]=24):(n[c]=31744,n[c|256]=64512,s[c]=13,s[c|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,d=0;for(;(u&8388608)===0;)u<<=1,d-=8388608;u&=-8388609,d+=947912704,r[c]=u|d}for(let c=1024;c<2048;++c)r[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:a,offsetTable:o}}function co(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=rn(i,-65504,65504),Zu.floatView[0]=i;const t=Zu.uint32View[0],e=t>>23&511;return Zu.baseTable[e]+((t&8388607)>>Zu.shiftTable[e])}function Iy(i){const t=i>>10;return Zu.uint32View[0]=Zu.mantissaTable[Zu.offsetTable[t]+(i&1023)]+Zu.exponentTable[t],Zu.floatView[0]}class XX{static toHalfFloat(t){return co(t)}static fromHalfFloat(t){return Iy(t)}}const Gs=new ot,qx=new ce;let YX=0;class Pi{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:YX++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=Av,this.updateRanges=[],this.gpuType=mo,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[n+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)qx.fromBufferAttribute(this,e),qx.applyMatrix3(t),this.setXY(e,qx.x,qx.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Gs.fromBufferAttribute(this,e),Gs.applyMatrix3(t),this.setXYZ(e,Gs.x,Gs.y,Gs.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Gs.fromBufferAttribute(this,e),Gs.applyMatrix4(t),this.setXYZ(e,Gs.x,Gs.y,Gs.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Gs.fromBufferAttribute(this,e),Gs.applyNormalMatrix(t),this.setXYZ(e,Gs.x,Gs.y,Gs.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Gs.fromBufferAttribute(this,e),Gs.transformDirection(t),this.setXYZ(e,Gs.x,Gs.y,Gs.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Ua(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=An(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Ua(e,this.array)),e}setX(t,e){return this.normalized&&(e=An(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Ua(e,this.array)),e}setY(t,e){return this.normalized&&(e=An(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Ua(e,this.array)),e}setZ(t,e){return this.normalized&&(e=An(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Ua(e,this.array)),e}setW(t,e){return this.normalized&&(e=An(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=An(e,this.array),n=An(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=An(e,this.array),n=An(n,this.array),s=An(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=An(e,this.array),n=An(n,this.array),s=An(s,this.array),r=An(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Av&&(t.usage=this.usage),t}}class KX extends Pi{constructor(t,e,n){super(new Int8Array(t),e,n)}}class ZX extends Pi{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class QX extends Pi{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class JX extends Pi{constructor(t,e,n){super(new Int16Array(t),e,n)}}class eR extends Pi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class $X extends Pi{constructor(t,e,n){super(new Int32Array(t),e,n)}}class nR extends Pi{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class tY extends Pi{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=Iy(this.array[t*this.itemSize]);return this.normalized&&(e=Ua(e,this.array)),e}setX(t,e){return this.normalized&&(e=An(e,this.array)),this.array[t*this.itemSize]=co(e),this}getY(t){let e=Iy(this.array[t*this.itemSize+1]);return this.normalized&&(e=Ua(e,this.array)),e}setY(t,e){return this.normalized&&(e=An(e,this.array)),this.array[t*this.itemSize+1]=co(e),this}getZ(t){let e=Iy(this.array[t*this.itemSize+2]);return this.normalized&&(e=Ua(e,this.array)),e}setZ(t,e){return this.normalized&&(e=An(e,this.array)),this.array[t*this.itemSize+2]=co(e),this}getW(t){let e=Iy(this.array[t*this.itemSize+3]);return this.normalized&&(e=Ua(e,this.array)),e}setW(t,e){return this.normalized&&(e=An(e,this.array)),this.array[t*this.itemSize+3]=co(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=An(e,this.array),n=An(n,this.array)),this.array[t+0]=co(e),this.array[t+1]=co(n),this}setXYZ(t,e,n,s){return t*=this.itemSize,this.normalized&&(e=An(e,this.array),n=An(n,this.array),s=An(s,this.array)),this.array[t+0]=co(e),this.array[t+1]=co(n),this.array[t+2]=co(s),this}setXYZW(t,e,n,s,r){return t*=this.itemSize,this.normalized&&(e=An(e,this.array),n=An(n,this.array),s=An(s,this.array),r=An(r,this.array)),this.array[t+0]=co(e),this.array[t+1]=co(n),this.array[t+2]=co(s),this.array[t+3]=co(r),this}}class Ve extends Pi{constructor(t,e,n){super(new Float32Array(t),e,n)}}let eY=0;const ul=new ln,MM=new si,Fm=new ot,Bo=new _r,uy=new _r,gr=new ot;class wn extends fu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:eY++}),this.uuid=Go(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(fk(t)?nR:eR)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new _n().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return ul.makeRotationFromQuaternion(t),this.applyMatrix4(ul),this}rotateX(t){return ul.makeRotationX(t),this.applyMatrix4(ul),this}rotateY(t){return ul.makeRotationY(t),this.applyMatrix4(ul),this}rotateZ(t){return ul.makeRotationZ(t),this.applyMatrix4(ul),this}translate(t,e,n){return ul.makeTranslation(t,e,n),this.applyMatrix4(ul),this}scale(t,e,n){return ul.makeScale(t,e,n),this.applyMatrix4(ul),this}lookAt(t){return MM.lookAt(t),MM.updateMatrix(),this.applyMatrix4(MM.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fm).negate(),this.translate(Fm.x,Fm.y,Fm.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Ve(n,3))}else{const n=Math.min(t.length,e.count);for(let s=0;s<n;s++){const r=t[s];e.setXYZ(s,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _r);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ot(-1/0,-1/0,-1/0),new ot(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,s=e.length;n<s;n++){const r=e[n];Bo.setFromBufferAttribute(r),this.morphTargetsRelative?(gr.addVectors(this.boundingBox.min,Bo.min),this.boundingBox.expandByPoint(gr),gr.addVectors(this.boundingBox.max,Bo.max),this.boundingBox.expandByPoint(gr)):(this.boundingBox.expandByPoint(Bo.min),this.boundingBox.expandByPoint(Bo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ot,1/0);return}if(t){const n=this.boundingSphere.center;if(Bo.setFromBufferAttribute(t),e)for(let r=0,a=e.length;r<a;r++){const o=e[r];uy.setFromBufferAttribute(o),this.morphTargetsRelative?(gr.addVectors(Bo.min,uy.min),Bo.expandByPoint(gr),gr.addVectors(Bo.max,uy.max),Bo.expandByPoint(gr)):(Bo.expandByPoint(uy.min),Bo.expandByPoint(uy.max))}Bo.getCenter(n);let s=0;for(let r=0,a=t.count;r<a;r++)gr.fromBufferAttribute(t,r),s=Math.max(s,n.distanceToSquared(gr));if(e)for(let r=0,a=e.length;r<a;r++){const o=e[r],c=this.morphTargetsRelative;for(let u=0,d=o.count;u<d;u++)gr.fromBufferAttribute(o,u),c&&(Fm.fromBufferAttribute(t,u),gr.add(Fm)),s=Math.max(s,n.distanceToSquared(gr))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,s=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Pi(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],c=[];for(let U=0;U<n.count;U++)o[U]=new ot,c[U]=new ot;const u=new ot,d=new ot,g=new ot,y=new ce,_=new ce,b=new ce,M=new ot,S=new ot;function E(U,D,O){u.fromBufferAttribute(n,U),d.fromBufferAttribute(n,D),g.fromBufferAttribute(n,O),y.fromBufferAttribute(r,U),_.fromBufferAttribute(r,D),b.fromBufferAttribute(r,O),d.sub(u),g.sub(u),_.sub(y),b.sub(y);const F=1/(_.x*b.y-b.x*_.y);isFinite(F)&&(M.copy(d).multiplyScalar(b.y).addScaledVector(g,-_.y).multiplyScalar(F),S.copy(g).multiplyScalar(_.x).addScaledVector(d,-b.x).multiplyScalar(F),o[U].add(M),o[D].add(M),o[O].add(M),c[U].add(S),c[D].add(S),c[O].add(S))}let R=this.groups;R.length===0&&(R=[{start:0,count:t.count}]);for(let U=0,D=R.length;U<D;++U){const O=R[U],F=O.start,H=O.count;for(let G=F,it=F+H;G<it;G+=3)E(t.getX(G+0),t.getX(G+1),t.getX(G+2))}const N=new ot,P=new ot,k=new ot,z=new ot;function L(U){k.fromBufferAttribute(s,U),z.copy(k);const D=o[U];N.copy(D),N.sub(k.multiplyScalar(k.dot(D))).normalize(),P.crossVectors(z,D);const F=P.dot(c[U])<0?-1:1;a.setXYZW(U,N.x,N.y,N.z,F)}for(let U=0,D=R.length;U<D;++U){const O=R[U],F=O.start,H=O.count;for(let G=F,it=F+H;G<it;G+=3)L(t.getX(G+0)),L(t.getX(G+1)),L(t.getX(G+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Pi(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let y=0,_=n.count;y<_;y++)n.setXYZ(y,0,0,0);const s=new ot,r=new ot,a=new ot,o=new ot,c=new ot,u=new ot,d=new ot,g=new ot;if(t)for(let y=0,_=t.count;y<_;y+=3){const b=t.getX(y+0),M=t.getX(y+1),S=t.getX(y+2);s.fromBufferAttribute(e,b),r.fromBufferAttribute(e,M),a.fromBufferAttribute(e,S),d.subVectors(a,r),g.subVectors(s,r),d.cross(g),o.fromBufferAttribute(n,b),c.fromBufferAttribute(n,M),u.fromBufferAttribute(n,S),o.add(d),c.add(d),u.add(d),n.setXYZ(b,o.x,o.y,o.z),n.setXYZ(M,c.x,c.y,c.z),n.setXYZ(S,u.x,u.y,u.z)}else for(let y=0,_=e.count;y<_;y+=3)s.fromBufferAttribute(e,y+0),r.fromBufferAttribute(e,y+1),a.fromBufferAttribute(e,y+2),d.subVectors(a,r),g.subVectors(s,r),d.cross(g),n.setXYZ(y+0,d.x,d.y,d.z),n.setXYZ(y+1,d.x,d.y,d.z),n.setXYZ(y+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)gr.fromBufferAttribute(t,e),gr.normalize(),t.setXYZ(e,gr.x,gr.y,gr.z)}toNonIndexed(){function t(o,c){const u=o.array,d=o.itemSize,g=o.normalized,y=new u.constructor(c.length*d);let _=0,b=0;for(let M=0,S=c.length;M<S;M++){o.isInterleavedBufferAttribute?_=c[M]*o.data.stride+o.offset:_=c[M]*d;for(let E=0;E<d;E++)y[b++]=u[_++]}return new Pi(y,d,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new wn,n=this.index.array,s=this.attributes;for(const o in s){const c=s[o],u=t(c,n);e.setAttribute(o,u)}const r=this.morphAttributes;for(const o in r){const c=[],u=r[o];for(let d=0,g=u.length;d<g;d++){const y=u[d],_=t(y,n);c.push(_)}e.morphAttributes[o]=c}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,c=a.length;o<c;o++){const u=a[o];e.addGroup(u.start,u.count,u.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(t[u]=c[u]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const c in n){const u=n[c];t.data.attributes[c]=u.toJSON(t.data)}const s={};let r=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],d=[];for(let g=0,y=u.length;g<y;g++){const _=u[g];d.push(_.toJSON(t.data))}d.length>0&&(s[c]=d,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(t.data.boundingSphere=o.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const s=t.attributes;for(const u in s){const d=s[u];this.setAttribute(u,d.clone(e))}const r=t.morphAttributes;for(const u in r){const d=[],g=r[u];for(let y=0,_=g.length;y<_;y++)d.push(g[y].clone(e));this.morphAttributes[u]=d}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let u=0,d=a.length;u<d;u++){const g=a[u];this.addGroup(g.start,g.count,g.materialIndex)}const o=t.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const QI=new ln,Cd=new Np,Xx=new xr,JI=new ot,Yx=new ot,Kx=new ot,Zx=new ot,AM=new ot,Qx=new ot,$I=new ot,Jx=new ot;class ps extends si{constructor(t=new wn,e=new mh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}getVertexPosition(t,e){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;e.fromBufferAttribute(s,t);const o=this.morphTargetInfluences;if(r&&o){Qx.set(0,0,0);for(let c=0,u=r.length;c<u;c++){const d=o[c],g=r[c];d!==0&&(AM.fromBufferAttribute(g,t),a?Qx.addScaledVector(AM,d):Qx.addScaledVector(AM.sub(e),d))}e.add(Qx)}return e}raycast(t,e){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Xx.copy(n.boundingSphere),Xx.applyMatrix4(r),Cd.copy(t.ray).recast(t.near),!(Xx.containsPoint(Cd.origin)===!1&&(Cd.intersectSphere(Xx,JI)===null||Cd.origin.distanceToSquared(JI)>(t.far-t.near)**2))&&(QI.copy(r).invert(),Cd.copy(t.ray).applyMatrix4(QI),!(n.boundingBox!==null&&Cd.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,Cd)))}_computeIntersections(t,e,n){let s;const r=this.geometry,a=this.material,o=r.index,c=r.attributes.position,u=r.attributes.uv,d=r.attributes.uv1,g=r.attributes.normal,y=r.groups,_=r.drawRange;if(o!==null)if(Array.isArray(a))for(let b=0,M=y.length;b<M;b++){const S=y[b],E=a[S.materialIndex],R=Math.max(S.start,_.start),N=Math.min(o.count,Math.min(S.start+S.count,_.start+_.count));for(let P=R,k=N;P<k;P+=3){const z=o.getX(P),L=o.getX(P+1),U=o.getX(P+2);s=$x(this,E,t,n,u,d,g,z,L,U),s&&(s.faceIndex=Math.floor(P/3),s.face.materialIndex=S.materialIndex,e.push(s))}}else{const b=Math.max(0,_.start),M=Math.min(o.count,_.start+_.count);for(let S=b,E=M;S<E;S+=3){const R=o.getX(S),N=o.getX(S+1),P=o.getX(S+2);s=$x(this,a,t,n,u,d,g,R,N,P),s&&(s.faceIndex=Math.floor(S/3),e.push(s))}}else if(c!==void 0)if(Array.isArray(a))for(let b=0,M=y.length;b<M;b++){const S=y[b],E=a[S.materialIndex],R=Math.max(S.start,_.start),N=Math.min(c.count,Math.min(S.start+S.count,_.start+_.count));for(let P=R,k=N;P<k;P+=3){const z=P,L=P+1,U=P+2;s=$x(this,E,t,n,u,d,g,z,L,U),s&&(s.faceIndex=Math.floor(P/3),s.face.materialIndex=S.materialIndex,e.push(s))}}else{const b=Math.max(0,_.start),M=Math.min(c.count,_.start+_.count);for(let S=b,E=M;S<E;S+=3){const R=S,N=S+1,P=S+2;s=$x(this,a,t,n,u,d,g,R,N,P),s&&(s.faceIndex=Math.floor(S/3),e.push(s))}}}}function nY(i,t,e,n,s,r,a,o){let c;if(t.side===La?c=n.intersectTriangle(a,r,s,!0,o):c=n.intersectTriangle(s,r,a,t.side===uh,o),c===null)return null;Jx.copy(o),Jx.applyMatrix4(i.matrixWorld);const u=e.ray.origin.distanceTo(Jx);return u<e.near||u>e.far?null:{distance:u,point:Jx.clone(),object:i}}function $x(i,t,e,n,s,r,a,o,c,u){i.getVertexPosition(o,Yx),i.getVertexPosition(c,Kx),i.getVertexPosition(u,Zx);const d=nY(i,t,e,n,Yx,Kx,Zx,$I);if(d){const g=new ot;fo.getBarycoord($I,Yx,Kx,Zx,g),s&&(d.uv=fo.getInterpolatedAttribute(s,o,c,u,g,new ce)),r&&(d.uv1=fo.getInterpolatedAttribute(r,o,c,u,g,new ce)),a&&(d.normal=fo.getInterpolatedAttribute(a,o,c,u,g,new ot),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const y={a:o,b:c,c:u,normal:new ot,materialIndex:0};fo.getNormal(Yx,Kx,Zx,y.normal),d.face=y,d.barycoord=g}return d}class Op extends wn{constructor(t=1,e=1,n=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:s,heightSegments:r,depthSegments:a};const o=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const c=[],u=[],d=[],g=[];let y=0,_=0;b("z","y","x",-1,-1,n,e,t,a,r,0),b("z","y","x",1,-1,n,e,-t,a,r,1),b("x","z","y",1,1,t,n,e,s,a,2),b("x","z","y",1,-1,t,n,-e,s,a,3),b("x","y","z",1,-1,t,e,n,s,r,4),b("x","y","z",-1,-1,t,e,-n,s,r,5),this.setIndex(c),this.setAttribute("position",new Ve(u,3)),this.setAttribute("normal",new Ve(d,3)),this.setAttribute("uv",new Ve(g,2));function b(M,S,E,R,N,P,k,z,L,U,D){const O=P/L,F=k/U,H=P/2,G=k/2,it=z/2,lt=L+1,j=U+1;let J=0,$=0;const at=new ot;for(let Y=0;Y<j;Y++){const Z=Y*F-G;for(let rt=0;rt<lt;rt++){const ft=rt*O-H;at[M]=ft*R,at[S]=Z*N,at[E]=it,u.push(at.x,at.y,at.z),at[M]=0,at[S]=0,at[E]=z>0?1:-1,d.push(at.x,at.y,at.z),g.push(rt/L),g.push(1-Y/U),J+=1}}for(let Y=0;Y<U;Y++)for(let Z=0;Z<L;Z++){const rt=y+Z+lt*Y,ft=y+Z+lt*(Y+1),dt=y+(Z+1)+lt*(Y+1),_t=y+(Z+1)+lt*Y;c.push(rt,ft,_t),c.push(ft,dt,_t),$+=6}o.addGroup(_,$,D),_+=$,y+=J}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Op(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ug(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const s=i[e][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=s.clone():Array.isArray(s)?t[e][n]=s.slice():t[e][n]=s}}return t}function Pa(i){const t={};for(let e=0;e<i.length;e++){const n=Ug(i[e]);for(const s in n)t[s]=n[s]}return t}function iY(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}function gk(i){const t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Xn.workingColorSpace}const iR={clone:Ug,merge:Pa};var sY=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,rY=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class sc extends ha{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=sY,this.fragmentShader=rY,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ug(t.uniforms),this.uniformsGroups=iY(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?e.uniforms[s]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?e.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?e.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?e.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?e.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?e.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?e.uniforms[s]={type:"m4",value:a.toArray()}:e.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class SE extends si{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ln,this.projectionMatrix=new ln,this.projectionMatrixInverse=new ln,this.coordinateSystem=Vo,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const uf=new ot,tN=new ce,eN=new ce;class Is extends SE{constructor(t=50,e=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=Og*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(op*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Og*2*Math.atan(Math.tan(op*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){uf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(uf.x,uf.y).multiplyScalar(-t/uf.z),uf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(uf.x,uf.y).multiplyScalar(-t/uf.z)}getViewSize(t,e){return this.getViewBounds(t,tN,eN),e.subVectors(eN,tN)}setViewOffset(t,e,n,s,r,a){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(op*.5*this.fov)/this.zoom,n=2*e,s=this.aspect*n,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,u=a.fullHeight;r+=a.offsetX*s/c,e-=a.offsetY*n/u,s*=a.width/c,n*=a.height/u}const o=this.filmOffset;o!==0&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,e,e-n,t,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Vm=-90,Hm=1;class yk extends si{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Is(Vm,Hm,t,e);s.layers=this.layers,this.add(s);const r=new Is(Vm,Hm,t,e);r.layers=this.layers,this.add(r);const a=new Is(Vm,Hm,t,e);a.layers=this.layers,this.add(a);const o=new Is(Vm,Hm,t,e);o.layers=this.layers,this.add(o);const c=new Is(Vm,Hm,t,e);c.layers=this.layers,this.add(c);const u=new Is(Vm,Hm,t,e);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,s,r,a,o,c]=e;for(const u of e)this.remove(u);if(t===Vo)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(t===Ng)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const u of e)this.add(u),u.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,a,o,c,u,d]=this.children,g=t.getRenderTarget(),y=t.getActiveCubeFace(),_=t.getActiveMipmapLevel(),b=t.xr.enabled;t.xr.enabled=!1;const M=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,s),t.render(e,r),t.setRenderTarget(n,1,s),t.render(e,a),t.setRenderTarget(n,2,s),t.render(e,o),t.setRenderTarget(n,3,s),t.render(e,c),t.setRenderTarget(n,4,s),t.render(e,u),n.texture.generateMipmaps=M,t.setRenderTarget(n,5,s),t.render(e,d),t.setRenderTarget(g,y,_),t.xr.enabled=b,n.texture.needsPMREMUpdate=!0}}class o_ extends ms{constructor(t=[],e=hh,n,s,r,a,o,c,u,d){super(t,e,n,s,r,a,o,c,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class vk extends lu{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},s=[n,n,n,n,n,n];this.texture=new o_(s),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Op(5,5,5),r=new sc({name:"CubemapFromEquirect",uniforms:Ug(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:La,blending:ih});r.uniforms.tEquirect.value=e;const a=new ps(s,r),o=e.minFilter;return e.minFilter===Yc&&(e.minFilter=Ns),new yk(1,10,this).update(t,a),e.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(t,e=!0,n=!0,s=!0){const r=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(e,n,s);t.setRenderTarget(r)}}class fg extends si{constructor(){super(),this.isGroup=!0,this.type="Group"}}const aY={type:"move"};class cS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new fg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new fg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ot,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ot),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new fg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ot,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ot),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let s=null,r=null,a=null;const o=this._targetRay,c=this._grip,u=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(u&&t.hand){a=!0;for(const M of t.hand.values()){const S=e.getJointPose(M,n),E=this._getHandJoint(u,M);S!==null&&(E.matrix.fromArray(S.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=S.radius),E.visible=S!==null}const d=u.joints["index-finger-tip"],g=u.joints["thumb-tip"],y=d.position.distanceTo(g.position),_=.02,b=.005;u.inputState.pinching&&y>_+b?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&y<=_-b&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else c!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(s=e.getPose(t.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(aY)))}return o!==null&&(o.visible=s!==null),c!==null&&(c.visible=r!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new fg;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class EE{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Pe(t),this.density=e}clone(){return new EE(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class TE{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new Pe(t),this.near=e,this.far=n}clone(){return new TE(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class sR extends si{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new jo,this.environmentIntensity=1,this.environmentRotation=new jo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class ME{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Av,this.updateRanges=[],this.version=0,this.uuid=Go()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let s=0,r=this.stride;s<r;s++)this.array[t+s]=e.array[n+s];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Go()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Go()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Oa=new ot;class vp{constructor(t,e,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Oa.fromBufferAttribute(this,e),Oa.applyMatrix4(t),this.setXYZ(e,Oa.x,Oa.y,Oa.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Oa.fromBufferAttribute(this,e),Oa.applyNormalMatrix(t),this.setXYZ(e,Oa.x,Oa.y,Oa.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Oa.fromBufferAttribute(this,e),Oa.transformDirection(t),this.setXYZ(e,Oa.x,Oa.y,Oa.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=Ua(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=An(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=An(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=An(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=An(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=An(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Ua(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Ua(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Ua(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Ua(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=An(e,this.array),n=An(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=An(e,this.array),n=An(n,this.array),s=An(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this}setXYZW(t,e,n,s,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=An(e,this.array),n=An(n,this.array),s=An(s,this.array),r=An(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=s,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return new Pi(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new vp(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class rR extends ha{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Pe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Gm;const hy=new ot,jm=new ot,Wm=new ot,qm=new ce,fy=new ce,_k=new ln,tb=new ot,dy=new ot,eb=new ot,nN=new ce,wM=new ce,iN=new ce;class xk extends si{constructor(t=new rR){if(super(),this.isSprite=!0,this.type="Sprite",Gm===void 0){Gm=new wn;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new ME(e,5);Gm.setIndex([0,1,2,0,2,3]),Gm.setAttribute("position",new vp(n,3,0,!1)),Gm.setAttribute("uv",new vp(n,2,3,!1))}this.geometry=Gm,this.material=t,this.center=new ce(.5,.5),this.count=1}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),jm.setFromMatrixScale(this.matrixWorld),_k.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Wm.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&jm.multiplyScalar(-Wm.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const a=this.center;nb(tb.set(-.5,-.5,0),Wm,a,jm,s,r),nb(dy.set(.5,-.5,0),Wm,a,jm,s,r),nb(eb.set(.5,.5,0),Wm,a,jm,s,r),nN.set(0,0),wM.set(1,0),iN.set(1,1);let o=t.ray.intersectTriangle(tb,dy,eb,!1,hy);if(o===null&&(nb(dy.set(-.5,.5,0),Wm,a,jm,s,r),wM.set(0,1),o=t.ray.intersectTriangle(tb,eb,dy,!1,hy),o===null))return;const c=t.ray.origin.distanceTo(hy);c<t.near||c>t.far||e.push({distance:c,point:hy.clone(),uv:fo.getInterpolation(hy,tb,dy,eb,nN,wM,iN,new ce),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function nb(i,t,e,n,s,r){qm.subVectors(i,e).addScalar(.5).multiply(n),s!==void 0?(fy.x=r*qm.x-s*qm.y,fy.y=s*qm.x+r*qm.y):fy.copy(qm),i.copy(t),i.x+=fy.x,i.y+=fy.y,i.applyMatrix4(_k)}const ib=new ot,sN=new ot;class bk extends si{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,s=e.length;n<s;n++){const r=e[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const s=this.levels;let r;for(r=0;r<s.length&&!(e<s[r].distance);r++);return s.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const s=e.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,s;for(n=1,s=e.length;n<s;n++){let r=e[n].distance;if(e[n].object.visible&&(r-=r*e[n].hysteresis),t<r)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){ib.setFromMatrixPosition(this.matrixWorld);const s=t.ray.origin.distanceTo(ib);this.getObjectForDistance(s).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){ib.setFromMatrixPosition(t.matrixWorld),sN.setFromMatrixPosition(this.matrixWorld);const n=ib.distanceTo(sN)/t.zoom;e[0].object.visible=!0;let s,r;for(s=1,r=e.length;s<r;s++){let a=e[s].distance;if(e[s].object.visible&&(a-=a*e[s].hysteresis),n>=a)e[s-1].object.visible=!1,e[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)e[s].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const a=n[s];e.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return e}}const rN=new ot,aN=new Yn,oN=new Yn,oY=new ot,lN=new ln,sb=new ot,RM=new xr,cN=new ln,CM=new Np;class Sk extends ps{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=cw,this.bindMatrix=new ln,this.bindMatrixInverse=new ln,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new _r),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,sb),this.boundingBox.expandByPoint(sb)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xr),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,sb),this.boundingSphere.expandByPoint(sb)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),RM.copy(this.boundingSphere),RM.applyMatrix4(s),t.ray.intersectsSphere(RM)!==!1&&(cN.copy(s).invert(),CM.copy(t.ray).applyMatrix4(cN),!(this.boundingBox!==null&&CM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,CM)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Yn,e=this.geometry.attributes.skinWeight;for(let n=0,s=e.count;n<s;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===cw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===$4?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,s=this.geometry;aN.fromBufferAttribute(s.attributes.skinIndex,t),oN.fromBufferAttribute(s.attributes.skinWeight,t),rN.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const a=oN.getComponent(r);if(a!==0){const o=aN.getComponent(r);lN.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),e.addScaledVector(oY.copy(rN).applyMatrix4(lN),a)}}return e.applyMatrix4(this.bindMatrixInverse)}}class aR extends si{constructor(){super(),this.isBone=!0,this.type="Bone"}}class iu extends ms{constructor(t=null,e=1,n=1,s,r,a,o,c,u=Ur,d=Ur,g,y){super(null,a,o,c,u,d,s,r,g,y),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const uN=new ln,lY=new ln;class AE{constructor(t=[],e=[]){this.uuid=Go(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new ln)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new ln;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,a=t.length;r<a;r++){const o=t[r]?t[r].matrixWorld:lY;uN.multiplyMatrices(o,e[r]),uN.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new AE(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new iu(e,t,t,aa,mo);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const s=this.bones[e];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,s=t.bones.length;n<s;n++){const r=t.bones[n];let a=e[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new aR),this.bones.push(a),this.boneInverses.push(new ln().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let s=0,r=e.length;s<r;s++){const a=e[s];t.bones.push(a.uuid);const o=n[s];t.boneInverses.push(o.toArray())}return t}}class _p extends Pi{constructor(t,e,n,s=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Xm=new ln,hN=new ln,rb=[],fN=new _r,cY=new ln,py=new ps,my=new xr;class Ek extends ps{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new _p(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,cY)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new _r),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Xm),fN.copy(t.boundingBox).applyMatrix4(Xm),this.boundingBox.union(fN)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new xr),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Xm),my.copy(t.boundingSphere).applyMatrix4(Xm),this.boundingSphere.union(my)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,a=t*r+1;for(let o=0;o<n.length;o++)n[o]=s[a+o]}raycast(t,e){const n=this.matrixWorld,s=this.count;if(py.geometry=this.geometry,py.material=this.material,py.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),my.copy(this.boundingSphere),my.applyMatrix4(n),t.ray.intersectsSphere(my)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Xm),hN.multiplyMatrices(n,Xm),py.matrixWorld=hN,py.raycast(t,rb);for(let a=0,o=rb.length;a<o;a++){const c=rb[a];c.instanceId=r,c.object=this,e.push(c)}rb.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new _p(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new iu(new Float32Array(s*this.count),s,this.count,gE,mo));const r=this.morphTexture.source.data.data;let a=0;for(let u=0;u<n.length;u++)a+=n[u];const o=this.geometry.morphTargetsRelative?1:1-a,c=s*t;r[c]=o,r.set(n,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const DM=new ot,uY=new ot,hY=new _n;class Xu{constructor(t=new ot(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,s){return this.normal.set(t,e,n),this.constant=s,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const s=DM.subVectors(n,e).cross(uY.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(DM),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||hY.getNormalMatrix(t),s=this.coplanarPoint(DM).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Dd=new xr,fY=new ce(.5,.5),ab=new ot;class Jg{constructor(t=new Xu,e=new Xu,n=new Xu,s=new Xu,r=new Xu,a=new Xu){this.planes=[t,e,n,s,r,a]}set(t,e,n,s,r,a){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(s),o[4].copy(r),o[5].copy(a),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=Vo,n=!1){const s=this.planes,r=t.elements,a=r[0],o=r[1],c=r[2],u=r[3],d=r[4],g=r[5],y=r[6],_=r[7],b=r[8],M=r[9],S=r[10],E=r[11],R=r[12],N=r[13],P=r[14],k=r[15];if(s[0].setComponents(u-a,_-d,E-b,k-R).normalize(),s[1].setComponents(u+a,_+d,E+b,k+R).normalize(),s[2].setComponents(u+o,_+g,E+M,k+N).normalize(),s[3].setComponents(u-o,_-g,E-M,k-N).normalize(),n)s[4].setComponents(c,y,S,P).normalize(),s[5].setComponents(u-c,_-y,E-S,k-P).normalize();else if(s[4].setComponents(u-c,_-y,E-S,k-P).normalize(),e===Vo)s[5].setComponents(u+c,_+y,E+S,k+P).normalize();else if(e===Ng)s[5].setComponents(c,y,S,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Dd.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Dd.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Dd)}intersectsSprite(t){Dd.center.set(0,0,0);const e=fY.distanceTo(t.center);return Dd.radius=.7071067811865476+e,Dd.applyMatrix4(t.matrixWorld),this.intersectsSphere(Dd)}intersectsSphere(t){const e=this.planes,n=t.center,s=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const s=e[n];if(ab.x=s.normal.x>0?t.max.x:t.min.x,ab.y=s.normal.y>0?t.max.y:t.min.y,ab.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(ab)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Hc=new ln,Gc=new Jg;class wE{constructor(){this.coordinateSystem=Vo}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(Hc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Gc.setFromProjectionMatrix(Hc,s.coordinateSystem,s.reversedDepth),Gc.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(Hc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Gc.setFromProjectionMatrix(Hc,s.coordinateSystem,s.reversedDepth),Gc.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(Hc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Gc.setFromProjectionMatrix(Hc,s.coordinateSystem,s.reversedDepth),Gc.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(Hc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Gc.setFromProjectionMatrix(Hc,s.coordinateSystem,s.reversedDepth),Gc.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const s=e.cameras[n];if(Hc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Gc.setFromProjectionMatrix(Hc,s.coordinateSystem,s.reversedDepth),Gc.containsPoint(t))return!0}return!1}clone(){return new wE}}function IM(i,t){return i-t}function dY(i,t){return i.z-t.z}function pY(i,t){return t.z-i.z}class mY{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,s){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];a.push(o),this.index++,o.start=t,o.count=e,o.z=n,o.index=s}reset(){this.list.length=0,this.index=0}}const oo=new ln,gY=new Pe(1,1,1),dN=new Jg,yY=new wE,ob=new _r,Id=new xr,gy=new ot,pN=new ot,vY=new ot,NM=new mY,ea=new ps,lb=[];function _Y(i,t,e=0){const n=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let a=0;a<n;a++)t.setComponent(r+e,a,i.getComponent(r,a))}else t.array.set(i.array,e*n);t.needsUpdate=!0}function Nd(i,t){if(i.constructor!==t.constructor){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)t[n]=i[n]}else{const e=Math.min(i.length,t.length);t.set(new i.constructor(i.buffer,0,e))}}class Tk extends ps{constructor(t,e,n=e*2,s){super(new wn,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new iu(e,t,t,aa,mo);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new iu(e,t,t,a_,fh);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new iu(e,t,t,aa,mo);n.colorSpace=Xn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in t.attributes){const a=t.getAttribute(r),{array:o,itemSize:c,normalized:u}=a,d=new o.constructor(n*c),g=new Pi(d,c,u);e.setAttribute(r,g)}if(t.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);e.setIndex(new Pi(r,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=t.getAttribute(n),r=e.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new _r);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,oo),this.getBoundingBoxAt(r,ob).applyMatrix4(oo),t.union(ob)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xr);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,s=e.length;n<s;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,oo),this.getBoundingSphereAt(r,Id).applyMatrix4(oo),t.union(Id)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(IM),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;oo.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const a=this._colorsTexture;return a&&(gY.toArray(a.image.data,s*4),a.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const a=t.getIndex();if(a!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?a.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(IM),c=this._availableGeometryIds.shift(),r[c]=s):(c=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(c,t),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,c}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),a=e.getIndex(),o=this._geometryInfo[t];if(s&&a.count>o.reservedIndexCount||e.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=o.vertexStart,u=o.reservedVertexCount;o.vertexCount=e.getAttribute("position").count;for(const d in n.attributes){const g=e.getAttribute(d),y=n.getAttribute(d);_Y(g,y,c);const _=g.itemSize;for(let b=g.count,M=u;b<M;b++){const S=c+b;for(let E=0;E<_;E++)y.setComponent(S,E,0)}y.needsUpdate=!0,y.addUpdateRange(c*_,u*_)}if(s){const d=o.indexStart,g=o.reservedIndexCount;o.indexCount=e.getIndex().count;for(let y=0;y<a.count;y++)r.setX(d+y,c+a.getX(y));for(let y=a.count,_=g;y<_;y++)r.setX(d+y,c);r.needsUpdate=!0,r.addUpdateRange(d,o.reservedIndexCount)}return o.start=s?o.indexStart:o.vertexStart,o.count=s?o.indexCount:o.vertexCount,o.boundingBox=null,e.boundingBox!==null&&(o.boundingBox=e.boundingBox.clone()),o.boundingSphere=null,e.boundingSphere!==null&&(o.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===t&&this.deleteInstance(s);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,s=n.map((a,o)=>o).sort((a,o)=>n[a].vertexStart-n[o].vertexStart),r=this.geometry;for(let a=0,o=n.length;a<o;a++){const c=s[a],u=n[c];if(u.active!==!1){if(r.index!==null){if(u.indexStart!==e){const{indexStart:d,vertexStart:g,reservedIndexCount:y}=u,_=r.index,b=_.array,M=t-g;for(let S=d;S<d+y;S++)b[S]=b[S]+M;_.array.copyWithin(e,d,d+y),_.addUpdateRange(e,y),u.indexStart=e}e+=u.reservedIndexCount}if(u.vertexStart!==t){const{vertexStart:d,reservedVertexCount:g}=u,y=r.attributes;for(const _ in y){const b=y[_],{array:M,itemSize:S}=b;M.copyWithin(t*S,d*S,(d+g)*S),b.addUpdateRange(t*S,g*S)}u.vertexStart=t}t+=u.reservedVertexCount,u.start=r.index?u.indexStart:u.vertexStart,this._nextIndexStart=r.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingBox===null){const r=new _r,a=n.index,o=n.attributes.position;for(let c=s.start,u=s.start+s.count;c<u;c++){let d=c;a&&(d=a.getX(d)),r.expandByPoint(gy.fromBufferAttribute(o,d))}s.boundingBox=r}return e.copy(s.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[t];if(s.boundingSphere===null){const r=new xr;this.getBoundingBoxAt(t,ob),ob.getCenter(r.center);const a=n.index,o=n.attributes.position;let c=0;for(let u=s.start,d=s.start+s.count;u<d;u++){let g=u;a&&(g=a.getX(g)),gy.fromBufferAttribute(o,g),c=Math.max(c,r.center.distanceToSquared(gy))}r.radius=Math.sqrt(c),s.boundingSphere=r}return e.copy(s.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,s=this._matricesTexture.image.data;return e.toArray(s,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(IM);e[e.length-1]===n.length-1;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const s=new Int32Array(t),r=new Int32Array(t);Nd(this._multiDrawCounts,s),Nd(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=t;const a=this._indirectTexture,o=this._matricesTexture,c=this._colorsTexture;a.dispose(),this._initIndirectTexture(),Nd(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Nd(o.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Nd(c.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...n.map(o=>o.vertexStart+o.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(c=>c.indexStart+c.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new wn,this._initializeGeometry(r));const a=this.geometry;r.index&&Nd(r.index.array,a.index.array);for(const o in r.attributes)Nd(r.attributes[o].array,a.attributes[o].array)}raycast(t,e){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,a=this.geometry;ea.material=this.material,ea.geometry.index=a.index,ea.geometry.attributes=a.attributes,ea.geometry.boundingBox===null&&(ea.geometry.boundingBox=new _r),ea.geometry.boundingSphere===null&&(ea.geometry.boundingSphere=new xr);for(let o=0,c=n.length;o<c;o++){if(!n[o].visible||!n[o].active)continue;const u=n[o].geometryIndex,d=s[u];ea.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(o,ea.matrixWorld).premultiply(r),this.getBoundingBoxAt(u,ea.geometry.boundingBox),this.getBoundingSphereAt(u,ea.geometry.boundingSphere),ea.raycast(t,lb);for(let g=0,y=lb.length;g<y;g++){const _=lb[g];_.object=this,_.batchId=o,e.push(_)}lb.length=0}ea.material=null,ea.geometry.index=null,ea.geometry.attributes={},ea.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,c=this._instanceInfo,u=this._multiDrawStarts,d=this._multiDrawCounts,g=this._geometryInfo,y=this.perObjectFrustumCulled,_=this._indirectTexture,b=_.image.data,M=n.isArrayCamera?yY:dN;y&&!n.isArrayCamera&&(oo.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),dN.setFromProjectionMatrix(oo,n.coordinateSystem,n.reversedDepth));let S=0;if(this.sortObjects){oo.copy(this.matrixWorld).invert(),gy.setFromMatrixPosition(n.matrixWorld).applyMatrix4(oo),pN.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(oo);for(let N=0,P=c.length;N<P;N++)if(c[N].visible&&c[N].active){const k=c[N].geometryIndex;this.getMatrixAt(N,oo),this.getBoundingSphereAt(k,Id).applyMatrix4(oo);let z=!1;if(y&&(z=!M.intersectsSphere(Id,n)),!z){const L=g[k],U=vY.subVectors(Id.center,gy).dot(pN);NM.push(L.start,L.count,U,N)}}const E=NM.list,R=this.customSort;R===null?E.sort(r.transparent?pY:dY):R.call(this,E,n);for(let N=0,P=E.length;N<P;N++){const k=E[N];u[S]=k.start*o,d[S]=k.count,b[S]=k.index,S++}NM.reset()}else for(let E=0,R=c.length;E<R;E++)if(c[E].visible&&c[E].active){const N=c[E].geometryIndex;let P=!1;if(y&&(this.getMatrixAt(E,oo),this.getBoundingSphereAt(N,Id).applyMatrix4(oo),P=!M.intersectsSphere(Id,n)),!P){const k=g[N];u[S]=k.start*o,d[S]=k.count,b[S]=E,S++}}_.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(t,e,n,s,r,a){this.onBeforeRender(t,null,s,r,a)}}class ka extends ha{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Pe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const M1=new ot,A1=new ot,mN=new ln,yy=new Np,cb=new xr,OM=new ot,gN=new ot;let zf=class extends si{constructor(t=new wn,e=new ka){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let s=1,r=e.count;s<r;s++)M1.fromBufferAttribute(e,s-1),A1.fromBufferAttribute(e,s),n[s]=n[s-1],n[s]+=M1.distanceTo(A1);t.setAttribute("lineDistance",new Ve(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),cb.copy(n.boundingSphere),cb.applyMatrix4(s),cb.radius+=r,t.ray.intersectsSphere(cb)===!1)return;mN.copy(s).invert(),yy.copy(t.ray).applyMatrix4(mN);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=this.isLineSegments?2:1,d=n.index,y=n.attributes.position;if(d!==null){const _=Math.max(0,a.start),b=Math.min(d.count,a.start+a.count);for(let M=_,S=b-1;M<S;M+=u){const E=d.getX(M),R=d.getX(M+1),N=ub(this,t,yy,c,E,R,M);N&&e.push(N)}if(this.isLineLoop){const M=d.getX(b-1),S=d.getX(_),E=ub(this,t,yy,c,M,S,b-1);E&&e.push(E)}}else{const _=Math.max(0,a.start),b=Math.min(y.count,a.start+a.count);for(let M=_,S=b-1;M<S;M+=u){const E=ub(this,t,yy,c,M,M+1,M);E&&e.push(E)}if(this.isLineLoop){const M=ub(this,t,yy,c,b-1,_,b-1);M&&e.push(M)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}};function ub(i,t,e,n,s,r,a){const o=i.geometry.attributes.position;if(M1.fromBufferAttribute(o,s),A1.fromBufferAttribute(o,r),e.distanceSqToSegment(M1,A1,OM,gN)>n)return;OM.applyMatrix4(i.matrixWorld);const u=t.ray.origin.distanceTo(OM);if(!(u<t.near||u>t.far))return{distance:u,point:gN.clone().applyMatrix4(i.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:i}}const yN=new ot,vN=new ot;class du extends zf{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let s=0,r=e.count;s<r;s+=2)yN.fromBufferAttribute(e,s),vN.fromBufferAttribute(e,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+yN.distanceTo(vN);t.setAttribute("lineDistance",new Ve(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Mk extends zf{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class oR extends ha{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Pe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const _N=new ln,fw=new Np,hb=new xr,fb=new ot;class Ak extends si{constructor(t=new wn,e=new oR){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,s=this.matrixWorld,r=t.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),hb.copy(n.boundingSphere),hb.applyMatrix4(s),hb.radius+=r,t.ray.intersectsSphere(hb)===!1)return;_N.copy(s).invert(),fw.copy(t.ray).applyMatrix4(_N);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,u=n.index,g=n.attributes.position;if(u!==null){const y=Math.max(0,a.start),_=Math.min(u.count,a.start+a.count);for(let b=y,M=_;b<M;b++){const S=u.getX(b);fb.fromBufferAttribute(g,S),xN(fb,S,c,s,t,e,this)}}else{const y=Math.max(0,a.start),_=Math.min(g.count,a.start+a.count);for(let b=y,M=_;b<M;b++)fb.fromBufferAttribute(g,b),xN(fb,b,c,s,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const s=e[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function xN(i,t,e,n,s,r,a){const o=fw.distanceSqToPoint(i);if(o<e){const c=new ot;fw.closestPointToPoint(i,c),c.applyMatrix4(n);const u=s.ray.origin.distanceTo(c);if(u<s.near||u>s.far)return;r.push({distance:u,distanceToRay:Math.sqrt(o),point:c,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class wk extends ms{constructor(t,e,n,s,r=Ns,a=Ns,o,c,u){super(t,e,n,s,r,a,o,c,u),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const d=this;function g(){d.needsUpdate=!0,d._requestVideoFrameCallbackId=t.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in t&&(this._requestVideoFrameCallbackId=t.requestVideoFrameCallback(g))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class xY extends wk{constructor(t,e,n,s,r,a,o,c){super({},t,e,n,s,r,a,o,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class bY extends ms{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=Ur,this.minFilter=Ur,this.generateMipmaps=!1,this.needsUpdate=!0}}class RE extends ms{constructor(t,e,n,s,r,a,o,c,u,d,g,y){super(null,a,o,c,u,d,s,r,g,y),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class SY extends RE{constructor(t,e,n,s,r,a){super(t,e,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=pl,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class EY extends RE{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,hh),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class TY extends ms{constructor(t,e,n,s,r,a,o,c,u){super(t,e,n,s,r,a,o,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class lR extends ms{constructor(t,e,n=fh,s,r,a,o=Ur,c=Ur,u,d=Dg,g=1){if(d!==Dg&&d!==Ig)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const y={width:t,height:e,depth:g};super(y,s,r,a,o,c,d,n,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new xf(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class cR extends ms{constructor(t=null){super(),this.sourceTexture=t,this.isExternalTexture=!0}copy(t){return super.copy(t),this.sourceTexture=t.sourceTexture,this}}class CE extends wn{constructor(t=1,e=1,n=4,s=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:s,heightSegments:r},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),r=Math.max(1,Math.floor(r));const a=[],o=[],c=[],u=[],d=e/2,g=Math.PI/2*t,y=e,_=2*g+y,b=n*2+r,M=s+1,S=new ot,E=new ot;for(let R=0;R<=b;R++){let N=0,P=0,k=0,z=0;if(R<=n){const D=R/n,O=D*Math.PI/2;P=-d-t*Math.cos(O),k=t*Math.sin(O),z=-t*Math.cos(O),N=D*g}else if(R<=n+r){const D=(R-n)/r;P=-d+D*e,k=t,z=0,N=g+D*y}else{const D=(R-n-r)/n,O=D*Math.PI/2;P=d+t*Math.sin(O),k=t*Math.cos(O),z=t*Math.sin(O),N=g+y+D*g}const L=Math.max(0,Math.min(1,N/_));let U=0;R===0?U=.5/s:R===b&&(U=-.5/s);for(let D=0;D<=s;D++){const O=D/s,F=O*Math.PI*2,H=Math.sin(F),G=Math.cos(F);E.x=-k*G,E.y=P,E.z=k*H,o.push(E.x,E.y,E.z),S.set(-k*G,z,k*H),S.normalize(),c.push(S.x,S.y,S.z),u.push(O+U,L)}if(R>0){const D=(R-1)*M;for(let O=0;O<s;O++){const F=D+O,H=D+O+1,G=R*M+O,it=R*M+O+1;a.push(F,H,G),a.push(H,it,G)}}}this.setIndex(a),this.setAttribute("position",new Ve(o,3)),this.setAttribute("normal",new Ve(c,3)),this.setAttribute("uv",new Ve(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new CE(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class DE extends wn{constructor(t=1,e=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:s},e=Math.max(3,e);const r=[],a=[],o=[],c=[],u=new ot,d=new ce;a.push(0,0,0),o.push(0,0,1),c.push(.5,.5);for(let g=0,y=3;g<=e;g++,y+=3){const _=n+g/e*s;u.x=t*Math.cos(_),u.y=t*Math.sin(_),a.push(u.x,u.y,u.z),o.push(0,0,1),d.x=(a[y]/t+1)/2,d.y=(a[y+1]/t+1)/2,c.push(d.x,d.y)}for(let g=1;g<=e;g++)r.push(g,g+1,0);this.setIndex(r),this.setAttribute("position",new Ve(a,3)),this.setAttribute("normal",new Ve(o,3)),this.setAttribute("uv",new Ve(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new DE(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class l_ extends wn{constructor(t=1,e=1,n=1,s=32,r=1,a=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:s,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:c};const u=this;s=Math.floor(s),r=Math.floor(r);const d=[],g=[],y=[],_=[];let b=0;const M=[],S=n/2;let E=0;R(),a===!1&&(t>0&&N(!0),e>0&&N(!1)),this.setIndex(d),this.setAttribute("position",new Ve(g,3)),this.setAttribute("normal",new Ve(y,3)),this.setAttribute("uv",new Ve(_,2));function R(){const P=new ot,k=new ot;let z=0;const L=(e-t)/n;for(let U=0;U<=r;U++){const D=[],O=U/r,F=O*(e-t)+t;for(let H=0;H<=s;H++){const G=H/s,it=G*c+o,lt=Math.sin(it),j=Math.cos(it);k.x=F*lt,k.y=-O*n+S,k.z=F*j,g.push(k.x,k.y,k.z),P.set(lt,L,j).normalize(),y.push(P.x,P.y,P.z),_.push(G,1-O),D.push(b++)}M.push(D)}for(let U=0;U<s;U++)for(let D=0;D<r;D++){const O=M[D][U],F=M[D+1][U],H=M[D+1][U+1],G=M[D][U+1];(t>0||D!==0)&&(d.push(O,F,G),z+=3),(e>0||D!==r-1)&&(d.push(F,H,G),z+=3)}u.addGroup(E,z,0),E+=z}function N(P){const k=b,z=new ce,L=new ot;let U=0;const D=P===!0?t:e,O=P===!0?1:-1;for(let H=1;H<=s;H++)g.push(0,S*O,0),y.push(0,O,0),_.push(.5,.5),b++;const F=b;for(let H=0;H<=s;H++){const it=H/s*c+o,lt=Math.cos(it),j=Math.sin(it);L.x=D*j,L.y=S*O,L.z=D*lt,g.push(L.x,L.y,L.z),y.push(0,O,0),z.x=lt*.5+.5,z.y=j*.5*O+.5,_.push(z.x,z.y),b++}for(let H=0;H<s;H++){const G=k+H,it=F+H;P===!0?d.push(it,it+1,G):d.push(it+1,it,G),U+=3}u.addGroup(E,U,P===!0?1:2),E+=U}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new l_(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class c_ extends l_{constructor(t=1,e=1,n=32,s=1,r=!1,a=0,o=Math.PI*2){super(0,t,e,n,s,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:a,thetaLength:o}}static fromJSON(t){return new c_(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class jf extends wn{constructor(t=[],e=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:s};const r=[],a=[];o(s),u(n),d(),this.setAttribute("position",new Ve(r,3)),this.setAttribute("normal",new Ve(r.slice(),3)),this.setAttribute("uv",new Ve(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function o(R){const N=new ot,P=new ot,k=new ot;for(let z=0;z<e.length;z+=3)_(e[z+0],N),_(e[z+1],P),_(e[z+2],k),c(N,P,k,R)}function c(R,N,P,k){const z=k+1,L=[];for(let U=0;U<=z;U++){L[U]=[];const D=R.clone().lerp(P,U/z),O=N.clone().lerp(P,U/z),F=z-U;for(let H=0;H<=F;H++)H===0&&U===z?L[U][H]=D:L[U][H]=D.clone().lerp(O,H/F)}for(let U=0;U<z;U++)for(let D=0;D<2*(z-U)-1;D++){const O=Math.floor(D/2);D%2===0?(y(L[U][O+1]),y(L[U+1][O]),y(L[U][O])):(y(L[U][O+1]),y(L[U+1][O+1]),y(L[U+1][O]))}}function u(R){const N=new ot;for(let P=0;P<r.length;P+=3)N.x=r[P+0],N.y=r[P+1],N.z=r[P+2],N.normalize().multiplyScalar(R),r[P+0]=N.x,r[P+1]=N.y,r[P+2]=N.z}function d(){const R=new ot;for(let N=0;N<r.length;N+=3){R.x=r[N+0],R.y=r[N+1],R.z=r[N+2];const P=S(R)/2/Math.PI+.5,k=E(R)/Math.PI+.5;a.push(P,1-k)}b(),g()}function g(){for(let R=0;R<a.length;R+=6){const N=a[R+0],P=a[R+2],k=a[R+4],z=Math.max(N,P,k),L=Math.min(N,P,k);z>.9&&L<.1&&(N<.2&&(a[R+0]+=1),P<.2&&(a[R+2]+=1),k<.2&&(a[R+4]+=1))}}function y(R){r.push(R.x,R.y,R.z)}function _(R,N){const P=R*3;N.x=t[P+0],N.y=t[P+1],N.z=t[P+2]}function b(){const R=new ot,N=new ot,P=new ot,k=new ot,z=new ce,L=new ce,U=new ce;for(let D=0,O=0;D<r.length;D+=9,O+=6){R.set(r[D+0],r[D+1],r[D+2]),N.set(r[D+3],r[D+4],r[D+5]),P.set(r[D+6],r[D+7],r[D+8]),z.set(a[O+0],a[O+1]),L.set(a[O+2],a[O+3]),U.set(a[O+4],a[O+5]),k.copy(R).add(N).add(P).divideScalar(3);const F=S(k);M(z,O+0,R,F),M(L,O+2,N,F),M(U,O+4,P,F)}}function M(R,N,P,k){k<0&&R.x===1&&(a[N]=R.x-1),P.x===0&&P.z===0&&(a[N]=k/2/Math.PI+.5)}function S(R){return Math.atan2(R.z,-R.x)}function E(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new jf(t.vertices,t.indices,t.radius,t.details)}}class IE extends jf{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new IE(t.radius,t.detail)}}const db=new ot,pb=new ot,PM=new ot,mb=new fo;class Rk extends wn{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const s=Math.pow(10,4),r=Math.cos(op*e),a=t.getIndex(),o=t.getAttribute("position"),c=a?a.count:o.count,u=[0,0,0],d=["a","b","c"],g=new Array(3),y={},_=[];for(let b=0;b<c;b+=3){a?(u[0]=a.getX(b),u[1]=a.getX(b+1),u[2]=a.getX(b+2)):(u[0]=b,u[1]=b+1,u[2]=b+2);const{a:M,b:S,c:E}=mb;if(M.fromBufferAttribute(o,u[0]),S.fromBufferAttribute(o,u[1]),E.fromBufferAttribute(o,u[2]),mb.getNormal(PM),g[0]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,g[1]=`${Math.round(S.x*s)},${Math.round(S.y*s)},${Math.round(S.z*s)}`,g[2]=`${Math.round(E.x*s)},${Math.round(E.y*s)},${Math.round(E.z*s)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let R=0;R<3;R++){const N=(R+1)%3,P=g[R],k=g[N],z=mb[d[R]],L=mb[d[N]],U=`${P}_${k}`,D=`${k}_${P}`;D in y&&y[D]?(PM.dot(y[D].normal)<=r&&(_.push(z.x,z.y,z.z),_.push(L.x,L.y,L.z)),y[D]=null):U in y||(y[U]={index0:u[R],index1:u[N],normal:PM.clone()})}}for(const b in y)if(y[b]){const{index0:M,index1:S}=y[b];db.fromBufferAttribute(o,M),pb.fromBufferAttribute(o,S),_.push(db.x,db.y,db.z),_.push(pb.x,pb.y,pb.z)}this.setAttribute("position",new Ve(_,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class ac{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,s=this.getPoint(0),r=0;e.push(0);for(let a=1;a<=t;a++)n=this.getPoint(a/t),r+=n.distanceTo(s),e.push(r),s=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let s=0;const r=n.length;let a;e?a=e:a=t*n[r-1];let o=0,c=r-1,u;for(;o<=c;)if(s=Math.floor(o+(c-o)/2),u=n[s]-a,u<0)o=s+1;else if(u>0)c=s-1;else{c=s;break}if(s=c,n[s]===a)return s/(r-1);const d=n[s],y=n[s+1]-d,_=(a-d)/y;return(s+_)/(r-1)}getTangent(t,e){let s=t-1e-4,r=t+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),o=this.getPoint(r),c=e||(a.isVector2?new ce:new ot);return c.copy(o).sub(a).normalize(),c}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new ot,s=[],r=[],a=[],o=new ot,c=new ln;for(let _=0;_<=t;_++){const b=_/t;s[_]=this.getTangentAt(b,new ot)}r[0]=new ot,a[0]=new ot;let u=Number.MAX_VALUE;const d=Math.abs(s[0].x),g=Math.abs(s[0].y),y=Math.abs(s[0].z);d<=u&&(u=d,n.set(1,0,0)),g<=u&&(u=g,n.set(0,1,0)),y<=u&&n.set(0,0,1),o.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],o),a[0].crossVectors(s[0],r[0]);for(let _=1;_<=t;_++){if(r[_]=r[_-1].clone(),a[_]=a[_-1].clone(),o.crossVectors(s[_-1],s[_]),o.length()>Number.EPSILON){o.normalize();const b=Math.acos(rn(s[_-1].dot(s[_]),-1,1));r[_].applyMatrix4(c.makeRotationAxis(o,b))}a[_].crossVectors(s[_],r[_])}if(e===!0){let _=Math.acos(rn(r[0].dot(r[t]),-1,1));_/=t,s[0].dot(o.crossVectors(r[0],r[t]))>0&&(_=-_);for(let b=1;b<=t;b++)r[b].applyMatrix4(c.makeRotationAxis(s[b],_*b)),a[b].crossVectors(s[b],r[b])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class NE extends ac{constructor(t=0,e=0,n=1,s=1,r=0,a=Math.PI*2,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o,this.aRotation=c}getPoint(t,e=new ce){const n=e,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(a?r=0:r=s),this.aClockwise===!0&&!a&&(r===s?r=-s:r=r-s);const o=this.aStartAngle+t*r;let c=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const d=Math.cos(this.aRotation),g=Math.sin(this.aRotation),y=c-this.aX,_=u-this.aY;c=y*d-_*g+this.aX,u=y*g+_*d+this.aY}return n.set(c,u)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class Ck extends NE{constructor(t,e,n,s,r,a){super(t,e,n,n,s,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function uR(){let i=0,t=0,e=0,n=0;function s(r,a,o,c){i=r,t=o,e=-3*r+3*a-2*o-c,n=2*r-2*a+o+c}return{initCatmullRom:function(r,a,o,c,u){s(a,o,u*(o-r),u*(c-a))},initNonuniformCatmullRom:function(r,a,o,c,u,d,g){let y=(a-r)/u-(o-r)/(u+d)+(o-a)/d,_=(o-a)/d-(c-a)/(d+g)+(c-o)/g;y*=d,_*=d,s(a,o,y,_)},calc:function(r){const a=r*r,o=a*r;return i+t*r+e*a+n*o}}}const gb=new ot,UM=new uR,LM=new uR,kM=new uR;class Dk extends ac{constructor(t=[],e=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=s}getPoint(t,e=new ot){const n=e,s=this.points,r=s.length,a=(r-(this.closed?0:1))*t;let o=Math.floor(a),c=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:c===0&&o===r-1&&(o=r-2,c=1);let u,d;this.closed||o>0?u=s[(o-1)%r]:(gb.subVectors(s[0],s[1]).add(s[0]),u=gb);const g=s[o%r],y=s[(o+1)%r];if(this.closed||o+2<r?d=s[(o+2)%r]:(gb.subVectors(s[r-1],s[r-2]).add(s[r-1]),d=gb),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let b=Math.pow(u.distanceToSquared(g),_),M=Math.pow(g.distanceToSquared(y),_),S=Math.pow(y.distanceToSquared(d),_);M<1e-4&&(M=1),b<1e-4&&(b=M),S<1e-4&&(S=M),UM.initNonuniformCatmullRom(u.x,g.x,y.x,d.x,b,M,S),LM.initNonuniformCatmullRom(u.y,g.y,y.y,d.y,b,M,S),kM.initNonuniformCatmullRom(u.z,g.z,y.z,d.z,b,M,S)}else this.curveType==="catmullrom"&&(UM.initCatmullRom(u.x,g.x,y.x,d.x,this.tension),LM.initCatmullRom(u.y,g.y,y.y,d.y,this.tension),kM.initCatmullRom(u.z,g.z,y.z,d.z,this.tension));return n.set(UM.calc(c),LM.calc(c),kM.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new ot().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function bN(i,t,e,n,s){const r=(n-t)*.5,a=(s-e)*.5,o=i*i,c=i*o;return(2*e-2*n+r+a)*c+(-3*e+3*n-2*r-a)*o+r*i+e}function MY(i,t){const e=1-i;return e*e*t}function AY(i,t){return 2*(1-i)*i*t}function wY(i,t){return i*i*t}function $y(i,t,e,n){return MY(i,t)+AY(i,e)+wY(i,n)}function RY(i,t){const e=1-i;return e*e*e*t}function CY(i,t){const e=1-i;return 3*e*e*i*t}function DY(i,t){return 3*(1-i)*i*i*t}function IY(i,t){return i*i*i*t}function tv(i,t,e,n,s){return RY(i,t)+CY(i,e)+DY(i,n)+IY(i,s)}class hR extends ac{constructor(t=new ce,e=new ce,n=new ce,s=new ce){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new ce){const n=e,s=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(tv(t,s.x,r.x,a.x,o.x),tv(t,s.y,r.y,a.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Ik extends ac{constructor(t=new ot,e=new ot,n=new ot,s=new ot){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=s}getPoint(t,e=new ot){const n=e,s=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(tv(t,s.x,r.x,a.x,o.x),tv(t,s.y,r.y,a.y,o.y),tv(t,s.z,r.z,a.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class fR extends ac{constructor(t=new ce,e=new ce){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new ce){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new ce){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Nk extends ac{constructor(t=new ot,e=new ot){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new ot){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new ot){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class dR extends ac{constructor(t=new ce,e=new ce,n=new ce){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new ce){const n=e,s=this.v0,r=this.v1,a=this.v2;return n.set($y(t,s.x,r.x,a.x),$y(t,s.y,r.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class pR extends ac{constructor(t=new ot,e=new ot,n=new ot){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new ot){const n=e,s=this.v0,r=this.v1,a=this.v2;return n.set($y(t,s.x,r.x,a.x),$y(t,s.y,r.y,a.y),$y(t,s.z,r.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class mR extends ac{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new ce){const n=e,s=this.points,r=(s.length-1)*t,a=Math.floor(r),o=r-a,c=s[a===0?a:a-1],u=s[a],d=s[a>s.length-2?s.length-1:a+1],g=s[a>s.length-3?s.length-1:a+2];return n.set(bN(o,c.x,u.x,d.x,g.x),bN(o,c.y,u.y,d.y,g.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const s=this.points[e];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const s=t.points[e];this.points.push(new ce().fromArray(s))}return this}}var w1=Object.freeze({__proto__:null,ArcCurve:Ck,CatmullRomCurve3:Dk,CubicBezierCurve:hR,CubicBezierCurve3:Ik,EllipseCurve:NE,LineCurve:fR,LineCurve3:Nk,QuadraticBezierCurve:dR,QuadraticBezierCurve3:pR,SplineCurve:mR});class Ok extends ac{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new w1[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const a=s[r]-n,o=this.curves[r],c=o.getLength(),u=c===0?0:1-a/c;return o.getPointAt(u,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,s=this.curves.length;n<s;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const a=r[s],o=a.isEllipseCurve?t*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,c=a.getPoints(o);for(let u=0;u<c.length;u++){const d=c[u];n&&n.equals(d)||(e.push(d),n=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const s=this.curves[e];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const s=t.curves[e];this.curves.push(new w1[s.type]().fromJSON(s))}return this}}class R1 extends Ok{constructor(t){super(),this.type="Path",this.currentPoint=new ce,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new fR(this.currentPoint.clone(),new ce(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,s){const r=new dR(this.currentPoint.clone(),new ce(t,e),new ce(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(t,e,n,s,r,a){const o=new hR(this.currentPoint.clone(),new ce(t,e),new ce(n,s),new ce(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new mR(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,s,r,a){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+o,e+c,n,s,r,a),this}absarc(t,e,n,s,r,a){return this.absellipse(t,e,n,n,s,r,a),this}ellipse(t,e,n,s,r,a,o,c){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(t+u,e+d,n,s,r,a,o,c),this}absellipse(t,e,n,s,r,a,o,c){const u=new NE(t,e,n,s,r,a,o,c);if(this.curves.length>0){const g=u.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class lp extends R1{constructor(t){super(t),this.uuid=Go(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,s=this.holes.length;n<s;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(s.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const s=this.holes[e];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const s=t.holes[e];this.holes.push(new R1().fromJSON(s))}return this}}function NY(i,t,e=2){const n=t&&t.length,s=n?t[0]*e:i.length;let r=Pk(i,0,s,e,!0);const a=[];if(!r||r.next===r.prev)return a;let o,c,u;if(n&&(r=kY(i,t,r,e)),i.length>80*e){o=1/0,c=1/0;let d=-1/0,g=-1/0;for(let y=e;y<s;y+=e){const _=i[y],b=i[y+1];_<o&&(o=_),b<c&&(c=b),_>d&&(d=_),b>g&&(g=b)}u=Math.max(d-o,g-c),u=u!==0?32767/u:0}return Cv(r,a,e,o,c,u,0),a}function Pk(i,t,e,n,s){let r;if(s===YY(i,t,e,n)>0)for(let a=t;a<e;a+=n)r=SN(a/n|0,i[a],i[a+1],r);else for(let a=e-n;a>=t;a-=n)r=SN(a/n|0,i[a],i[a+1],r);return r&&Lg(r,r.next)&&(Iv(r),r=r.next),r}function xp(i,t){if(!i)return i;t||(t=i);let e=i,n;do if(n=!1,!e.steiner&&(Lg(e,e.next)||ds(e.prev,e,e.next)===0)){if(Iv(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function Cv(i,t,e,n,s,r,a){if(!i)return;!a&&r&&HY(i,n,s,r);let o=i;for(;i.prev!==i.next;){const c=i.prev,u=i.next;if(r?PY(i,n,s,r):OY(i)){t.push(c.i,i.i,u.i),Iv(i),i=u.next,o=u.next;continue}if(i=u,i===o){a?a===1?(i=UY(xp(i),t),Cv(i,t,e,n,s,r,2)):a===2&&LY(i,t,e,n,s,r):Cv(xp(i),t,e,n,s,r,1);break}}}function OY(i){const t=i.prev,e=i,n=i.next;if(ds(t,e,n)>=0)return!1;const s=t.x,r=e.x,a=n.x,o=t.y,c=e.y,u=n.y,d=Math.min(s,r,a),g=Math.min(o,c,u),y=Math.max(s,r,a),_=Math.max(o,c,u);let b=n.next;for(;b!==t;){if(b.x>=d&&b.x<=y&&b.y>=g&&b.y<=_&&Ny(s,o,r,c,a,u,b.x,b.y)&&ds(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function PY(i,t,e,n){const s=i.prev,r=i,a=i.next;if(ds(s,r,a)>=0)return!1;const o=s.x,c=r.x,u=a.x,d=s.y,g=r.y,y=a.y,_=Math.min(o,c,u),b=Math.min(d,g,y),M=Math.max(o,c,u),S=Math.max(d,g,y),E=dw(_,b,t,e,n),R=dw(M,S,t,e,n);let N=i.prevZ,P=i.nextZ;for(;N&&N.z>=E&&P&&P.z<=R;){if(N.x>=_&&N.x<=M&&N.y>=b&&N.y<=S&&N!==s&&N!==a&&Ny(o,d,c,g,u,y,N.x,N.y)&&ds(N.prev,N,N.next)>=0||(N=N.prevZ,P.x>=_&&P.x<=M&&P.y>=b&&P.y<=S&&P!==s&&P!==a&&Ny(o,d,c,g,u,y,P.x,P.y)&&ds(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;N&&N.z>=E;){if(N.x>=_&&N.x<=M&&N.y>=b&&N.y<=S&&N!==s&&N!==a&&Ny(o,d,c,g,u,y,N.x,N.y)&&ds(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;P&&P.z<=R;){if(P.x>=_&&P.x<=M&&P.y>=b&&P.y<=S&&P!==s&&P!==a&&Ny(o,d,c,g,u,y,P.x,P.y)&&ds(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function UY(i,t){let e=i;do{const n=e.prev,s=e.next.next;!Lg(n,s)&&Lk(n,e,e.next,s)&&Dv(n,s)&&Dv(s,n)&&(t.push(n.i,e.i,s.i),Iv(e),Iv(e.next),e=i=s),e=e.next}while(e!==i);return xp(e)}function LY(i,t,e,n,s,r){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&WY(a,o)){let c=kk(a,o);a=xp(a,a.next),c=xp(c,c.next),Cv(a,t,e,n,s,r,0),Cv(c,t,e,n,s,r,0);return}o=o.next}a=a.next}while(a!==i)}function kY(i,t,e,n){const s=[];for(let r=0,a=t.length;r<a;r++){const o=t[r]*n,c=r<a-1?t[r+1]*n:i.length,u=Pk(i,o,c,n,!1);u===u.next&&(u.steiner=!0),s.push(jY(u))}s.sort(BY);for(let r=0;r<s.length;r++)e=zY(s[r],e);return e}function BY(i,t){let e=i.x-t.x;if(e===0&&(e=i.y-t.y,e===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(t.next.y-t.y)/(t.next.x-t.x);e=n-s}return e}function zY(i,t){const e=FY(i,t);if(!e)return t;const n=kk(e,i);return xp(n,n.next),xp(e,e.next)}function FY(i,t){let e=t;const n=i.x,s=i.y;let r=-1/0,a;if(Lg(i,e))return e;do{if(Lg(i,e.next))return e.next;if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){const g=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(g<=n&&g>r&&(r=g,a=e.x<e.next.x?e:e.next,g===n))return a}e=e.next}while(e!==t);if(!a)return null;const o=a,c=a.x,u=a.y;let d=1/0;e=a;do{if(n>=e.x&&e.x>=c&&n!==e.x&&Uk(s<u?n:r,s,c,u,s<u?r:n,s,e.x,e.y)){const g=Math.abs(s-e.y)/(n-e.x);Dv(e,i)&&(g<d||g===d&&(e.x>a.x||e.x===a.x&&VY(a,e)))&&(a=e,d=g)}e=e.next}while(e!==o);return a}function VY(i,t){return ds(i.prev,i,t.prev)<0&&ds(t.next,i,i.next)<0}function HY(i,t,e,n){let s=i;do s.z===0&&(s.z=dw(s.x,s.y,t,e,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,GY(s)}function GY(i){let t,e=1;do{let n=i,s;i=null;let r=null;for(t=0;n;){t++;let a=n,o=0;for(let u=0;u<e&&(o++,a=a.nextZ,!!a);u++);let c=e;for(;o>0||c>0&&a;)o!==0&&(c===0||!a||n.z<=a.z)?(s=n,n=n.nextZ,o--):(s=a,a=a.nextZ,c--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=a}r.nextZ=null,e*=2}while(t>1);return i}function dw(i,t,e,n,s){return i=(i-e)*s|0,t=(t-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function jY(i){let t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function Uk(i,t,e,n,s,r,a,o){return(s-a)*(t-o)>=(i-a)*(r-o)&&(i-a)*(n-o)>=(e-a)*(t-o)&&(e-a)*(r-o)>=(s-a)*(n-o)}function Ny(i,t,e,n,s,r,a,o){return!(i===a&&t===o)&&Uk(i,t,e,n,s,r,a,o)}function WY(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!qY(i,t)&&(Dv(i,t)&&Dv(t,i)&&XY(i,t)&&(ds(i.prev,i,t.prev)||ds(i,t.prev,t))||Lg(i,t)&&ds(i.prev,i,i.next)>0&&ds(t.prev,t,t.next)>0)}function ds(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function Lg(i,t){return i.x===t.x&&i.y===t.y}function Lk(i,t,e,n){const s=vb(ds(i,t,e)),r=vb(ds(i,t,n)),a=vb(ds(e,n,i)),o=vb(ds(e,n,t));return!!(s!==r&&a!==o||s===0&&yb(i,e,t)||r===0&&yb(i,n,t)||a===0&&yb(e,i,n)||o===0&&yb(e,t,n))}function yb(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function vb(i){return i>0?1:i<0?-1:0}function qY(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&Lk(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function Dv(i,t){return ds(i.prev,i,i.next)<0?ds(i,t,i.next)>=0&&ds(i,i.prev,t)>=0:ds(i,t,i.prev)<0||ds(i,i.next,t)<0}function XY(i,t){let e=i,n=!1;const s=(i.x+t.x)/2,r=(i.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&s<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==i);return n}function kk(i,t){const e=pw(i.i,i.x,i.y),n=pw(t.i,t.x,t.y),s=i.next,r=t.prev;return i.next=t,t.prev=i,e.next=s,s.prev=e,n.next=e,e.prev=n,r.next=n,n.prev=r,n}function SN(i,t,e,n){const s=pw(i,t,e);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Iv(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function pw(i,t,e){return{i,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function YY(i,t,e,n){let s=0;for(let r=t,a=e-n;r<e;r+=n)s+=(i[a]-i[r])*(i[r+1]+i[a+1]),a=r;return s}class KY{static triangulate(t,e,n=2){return NY(t,e,n)}}class tc{static area(t){const e=t.length;let n=0;for(let s=e-1,r=0;r<e;s=r++)n+=t[s].x*t[r].y-t[r].x*t[s].y;return n*.5}static isClockWise(t){return tc.area(t)<0}static triangulateShape(t,e){const n=[],s=[],r=[];EN(t),TN(n,t);let a=t.length;e.forEach(EN);for(let c=0;c<e.length;c++)s.push(a),a+=e[c].length,TN(n,e[c]);const o=KY.triangulate(n,s);for(let c=0;c<o.length;c+=3)r.push(o.slice(c,c+3));return r}}function EN(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function TN(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class OE extends wn{constructor(t=new lp([new ce(.5,.5),new ce(-.5,.5),new ce(-.5,-.5),new ce(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,s=[],r=[];for(let o=0,c=t.length;o<c;o++){const u=t[o];a(u)}this.setAttribute("position",new Ve(s,3)),this.setAttribute("uv",new Ve(r,2)),this.computeVertexNormals();function a(o){const c=[],u=e.curveSegments!==void 0?e.curveSegments:12,d=e.steps!==void 0?e.steps:1,g=e.depth!==void 0?e.depth:1;let y=e.bevelEnabled!==void 0?e.bevelEnabled:!0,_=e.bevelThickness!==void 0?e.bevelThickness:.2,b=e.bevelSize!==void 0?e.bevelSize:_-.1,M=e.bevelOffset!==void 0?e.bevelOffset:0,S=e.bevelSegments!==void 0?e.bevelSegments:3;const E=e.extrudePath,R=e.UVGenerator!==void 0?e.UVGenerator:ZY;let N,P=!1,k,z,L,U;E&&(N=E.getSpacedPoints(d),P=!0,y=!1,k=E.computeFrenetFrames(d,!1),z=new ot,L=new ot,U=new ot),y||(S=0,_=0,b=0,M=0);const D=o.extractPoints(u);let O=D.shape;const F=D.holes;if(!tc.isClockWise(O)){O=O.reverse();for(let Gt=0,zt=F.length;Gt<zt;Gt++){const Pt=F[Gt];tc.isClockWise(Pt)&&(F[Gt]=Pt.reverse())}}function G(Gt){const Pt=10000000000000001e-36;let Ct=Gt[0];for(let Bt=1;Bt<=Gt.length;Bt++){const Dt=Bt%Gt.length,Ut=Gt[Dt],Nt=Ut.x-Ct.x,ge=Ut.y-Ct.y,Q=Nt*Nt+ge*ge,K=Math.max(Math.abs(Ut.x),Math.abs(Ut.y),Math.abs(Ct.x),Math.abs(Ct.y)),mt=Pt*K*K;if(Q<=mt){Gt.splice(Dt,1),Bt--;continue}Ct=Ut}}G(O),F.forEach(G);const it=F.length,lt=O;for(let Gt=0;Gt<it;Gt++){const zt=F[Gt];O=O.concat(zt)}function j(Gt,zt,Pt){return zt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Gt.clone().addScaledVector(zt,Pt)}const J=O.length;function $(Gt,zt,Pt){let Ct,Bt,Dt;const Ut=Gt.x-zt.x,Nt=Gt.y-zt.y,ge=Pt.x-Gt.x,Q=Pt.y-Gt.y,K=Ut*Ut+Nt*Nt,mt=Ut*Q-Nt*ge;if(Math.abs(mt)>Number.EPSILON){const Lt=Math.sqrt(K),Rt=Math.sqrt(ge*ge+Q*Q),At=zt.x-Nt/Lt,oe=zt.y+Ut/Lt,le=Pt.x-Q/Rt,ve=Pt.y+ge/Rt,be=((le-At)*Q-(ve-oe)*ge)/(Ut*Q-Nt*ge);Ct=At+Ut*be-Gt.x,Bt=oe+Nt*be-Gt.y;const Xt=Ct*Ct+Bt*Bt;if(Xt<=2)return new ce(Ct,Bt);Dt=Math.sqrt(Xt/2)}else{let Lt=!1;Ut>Number.EPSILON?ge>Number.EPSILON&&(Lt=!0):Ut<-Number.EPSILON?ge<-Number.EPSILON&&(Lt=!0):Math.sign(Nt)===Math.sign(Q)&&(Lt=!0),Lt?(Ct=-Nt,Bt=Ut,Dt=Math.sqrt(K)):(Ct=Ut,Bt=Nt,Dt=Math.sqrt(K/2))}return new ce(Ct/Dt,Bt/Dt)}const at=[];for(let Gt=0,zt=lt.length,Pt=zt-1,Ct=Gt+1;Gt<zt;Gt++,Pt++,Ct++)Pt===zt&&(Pt=0),Ct===zt&&(Ct=0),at[Gt]=$(lt[Gt],lt[Pt],lt[Ct]);const Y=[];let Z,rt=at.concat();for(let Gt=0,zt=it;Gt<zt;Gt++){const Pt=F[Gt];Z=[];for(let Ct=0,Bt=Pt.length,Dt=Bt-1,Ut=Ct+1;Ct<Bt;Ct++,Dt++,Ut++)Dt===Bt&&(Dt=0),Ut===Bt&&(Ut=0),Z[Ct]=$(Pt[Ct],Pt[Dt],Pt[Ut]);Y.push(Z),rt=rt.concat(Z)}let ft;if(S===0)ft=tc.triangulateShape(lt,F);else{const Gt=[],zt=[];for(let Pt=0;Pt<S;Pt++){const Ct=Pt/S,Bt=_*Math.cos(Ct*Math.PI/2),Dt=b*Math.sin(Ct*Math.PI/2)+M;for(let Ut=0,Nt=lt.length;Ut<Nt;Ut++){const ge=j(lt[Ut],at[Ut],Dt);$t(ge.x,ge.y,-Bt),Ct===0&&Gt.push(ge)}for(let Ut=0,Nt=it;Ut<Nt;Ut++){const ge=F[Ut];Z=Y[Ut];const Q=[];for(let K=0,mt=ge.length;K<mt;K++){const Lt=j(ge[K],Z[K],Dt);$t(Lt.x,Lt.y,-Bt),Ct===0&&Q.push(Lt)}Ct===0&&zt.push(Q)}}ft=tc.triangulateShape(Gt,zt)}const dt=ft.length,_t=b+M;for(let Gt=0;Gt<J;Gt++){const zt=y?j(O[Gt],rt[Gt],_t):O[Gt];P?(L.copy(k.normals[0]).multiplyScalar(zt.x),z.copy(k.binormals[0]).multiplyScalar(zt.y),U.copy(N[0]).add(L).add(z),$t(U.x,U.y,U.z)):$t(zt.x,zt.y,0)}for(let Gt=1;Gt<=d;Gt++)for(let zt=0;zt<J;zt++){const Pt=y?j(O[zt],rt[zt],_t):O[zt];P?(L.copy(k.normals[Gt]).multiplyScalar(Pt.x),z.copy(k.binormals[Gt]).multiplyScalar(Pt.y),U.copy(N[Gt]).add(L).add(z),$t(U.x,U.y,U.z)):$t(Pt.x,Pt.y,g/d*Gt)}for(let Gt=S-1;Gt>=0;Gt--){const zt=Gt/S,Pt=_*Math.cos(zt*Math.PI/2),Ct=b*Math.sin(zt*Math.PI/2)+M;for(let Bt=0,Dt=lt.length;Bt<Dt;Bt++){const Ut=j(lt[Bt],at[Bt],Ct);$t(Ut.x,Ut.y,g+Pt)}for(let Bt=0,Dt=F.length;Bt<Dt;Bt++){const Ut=F[Bt];Z=Y[Bt];for(let Nt=0,ge=Ut.length;Nt<ge;Nt++){const Q=j(Ut[Nt],Z[Nt],Ct);P?$t(Q.x,Q.y+N[d-1].y,N[d-1].x+Pt):$t(Q.x,Q.y,g+Pt)}}}ut(),gt();function ut(){const Gt=s.length/3;if(y){let zt=0,Pt=J*zt;for(let Ct=0;Ct<dt;Ct++){const Bt=ft[Ct];ae(Bt[2]+Pt,Bt[1]+Pt,Bt[0]+Pt)}zt=d+S*2,Pt=J*zt;for(let Ct=0;Ct<dt;Ct++){const Bt=ft[Ct];ae(Bt[0]+Pt,Bt[1]+Pt,Bt[2]+Pt)}}else{for(let zt=0;zt<dt;zt++){const Pt=ft[zt];ae(Pt[2],Pt[1],Pt[0])}for(let zt=0;zt<dt;zt++){const Pt=ft[zt];ae(Pt[0]+J*d,Pt[1]+J*d,Pt[2]+J*d)}}n.addGroup(Gt,s.length/3-Gt,0)}function gt(){const Gt=s.length/3;let zt=0;Tt(lt,zt),zt+=lt.length;for(let Pt=0,Ct=F.length;Pt<Ct;Pt++){const Bt=F[Pt];Tt(Bt,zt),zt+=Bt.length}n.addGroup(Gt,s.length/3-Gt,1)}function Tt(Gt,zt){let Pt=Gt.length;for(;--Pt>=0;){const Ct=Pt;let Bt=Pt-1;Bt<0&&(Bt=Gt.length-1);for(let Dt=0,Ut=d+S*2;Dt<Ut;Dt++){const Nt=J*Dt,ge=J*(Dt+1),Q=zt+Ct+Nt,K=zt+Bt+Nt,mt=zt+Bt+ge,Lt=zt+Ct+ge;ne(Q,K,mt,Lt)}}}function $t(Gt,zt,Pt){c.push(Gt),c.push(zt),c.push(Pt)}function ae(Gt,zt,Pt){ee(Gt),ee(zt),ee(Pt);const Ct=s.length/3,Bt=R.generateTopUV(n,s,Ct-3,Ct-2,Ct-1);ct(Bt[0]),ct(Bt[1]),ct(Bt[2])}function ne(Gt,zt,Pt,Ct){ee(Gt),ee(zt),ee(Ct),ee(zt),ee(Pt),ee(Ct);const Bt=s.length/3,Dt=R.generateSideWallUV(n,s,Bt-6,Bt-3,Bt-2,Bt-1);ct(Dt[0]),ct(Dt[1]),ct(Dt[3]),ct(Dt[1]),ct(Dt[2]),ct(Dt[3])}function ee(Gt){s.push(c[Gt*3+0]),s.push(c[Gt*3+1]),s.push(c[Gt*3+2])}function ct(Gt){r.push(Gt.x),r.push(Gt.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return QY(e,n,t)}static fromJSON(t,e){const n=[];for(let r=0,a=t.shapes.length;r<a;r++){const o=e[t.shapes[r]];n.push(o)}const s=t.options.extrudePath;return s!==void 0&&(t.options.extrudePath=new w1[s.type]().fromJSON(s)),new OE(n,t.options)}}const ZY={generateTopUV:function(i,t,e,n,s){const r=t[e*3],a=t[e*3+1],o=t[n*3],c=t[n*3+1],u=t[s*3],d=t[s*3+1];return[new ce(r,a),new ce(o,c),new ce(u,d)]},generateSideWallUV:function(i,t,e,n,s,r){const a=t[e*3],o=t[e*3+1],c=t[e*3+2],u=t[n*3],d=t[n*3+1],g=t[n*3+2],y=t[s*3],_=t[s*3+1],b=t[s*3+2],M=t[r*3],S=t[r*3+1],E=t[r*3+2];return Math.abs(o-d)<Math.abs(a-u)?[new ce(a,1-c),new ce(u,1-g),new ce(y,1-b),new ce(M,1-E)]:[new ce(o,1-c),new ce(d,1-g),new ce(_,1-b),new ce(S,1-E)]}};function QY(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class PE extends jf{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new PE(t.radius,t.detail)}}class UE extends wn{constructor(t=[new ce(0,-.5),new ce(.5,0),new ce(0,.5)],e=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:s},e=Math.floor(e),s=rn(s,0,Math.PI*2);const r=[],a=[],o=[],c=[],u=[],d=1/e,g=new ot,y=new ce,_=new ot,b=new ot,M=new ot;let S=0,E=0;for(let R=0;R<=t.length-1;R++)switch(R){case 0:S=t[R+1].x-t[R].x,E=t[R+1].y-t[R].y,_.x=E*1,_.y=-S,_.z=E*0,M.copy(_),_.normalize(),c.push(_.x,_.y,_.z);break;case t.length-1:c.push(M.x,M.y,M.z);break;default:S=t[R+1].x-t[R].x,E=t[R+1].y-t[R].y,_.x=E*1,_.y=-S,_.z=E*0,b.copy(_),_.x+=M.x,_.y+=M.y,_.z+=M.z,_.normalize(),c.push(_.x,_.y,_.z),M.copy(b)}for(let R=0;R<=e;R++){const N=n+R*d*s,P=Math.sin(N),k=Math.cos(N);for(let z=0;z<=t.length-1;z++){g.x=t[z].x*P,g.y=t[z].y,g.z=t[z].x*k,a.push(g.x,g.y,g.z),y.x=R/e,y.y=z/(t.length-1),o.push(y.x,y.y);const L=c[3*z+0]*P,U=c[3*z+1],D=c[3*z+0]*k;u.push(L,U,D)}}for(let R=0;R<e;R++)for(let N=0;N<t.length-1;N++){const P=N+R*t.length,k=P,z=P+t.length,L=P+t.length+1,U=P+1;r.push(k,z,U),r.push(L,U,z)}this.setIndex(r),this.setAttribute("position",new Ve(a,3)),this.setAttribute("uv",new Ve(o,2)),this.setAttribute("normal",new Ve(u,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new UE(t.points,t.segments,t.phiStart,t.phiLength)}}class u_ extends jf{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new u_(t.radius,t.detail)}}class gh extends wn{constructor(t=1,e=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:s};const r=t/2,a=e/2,o=Math.floor(n),c=Math.floor(s),u=o+1,d=c+1,g=t/o,y=e/c,_=[],b=[],M=[],S=[];for(let E=0;E<d;E++){const R=E*y-a;for(let N=0;N<u;N++){const P=N*g-r;b.push(P,-R,0),M.push(0,0,1),S.push(N/o),S.push(1-E/c)}}for(let E=0;E<c;E++)for(let R=0;R<o;R++){const N=R+u*E,P=R+u*(E+1),k=R+1+u*(E+1),z=R+1+u*E;_.push(N,P,z),_.push(P,k,z)}this.setIndex(_),this.setAttribute("position",new Ve(b,3)),this.setAttribute("normal",new Ve(M,3)),this.setAttribute("uv",new Ve(S,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new gh(t.width,t.height,t.widthSegments,t.heightSegments)}}class LE extends wn{constructor(t=.5,e=1,n=32,s=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:a},n=Math.max(3,n),s=Math.max(1,s);const o=[],c=[],u=[],d=[];let g=t;const y=(e-t)/s,_=new ot,b=new ce;for(let M=0;M<=s;M++){for(let S=0;S<=n;S++){const E=r+S/n*a;_.x=g*Math.cos(E),_.y=g*Math.sin(E),c.push(_.x,_.y,_.z),u.push(0,0,1),b.x=(_.x/e+1)/2,b.y=(_.y/e+1)/2,d.push(b.x,b.y)}g+=y}for(let M=0;M<s;M++){const S=M*(n+1);for(let E=0;E<n;E++){const R=E+S,N=R,P=R+n+1,k=R+n+2,z=R+1;o.push(N,P,z),o.push(P,k,z)}}this.setIndex(o),this.setAttribute("position",new Ve(c,3)),this.setAttribute("normal",new Ve(u,3)),this.setAttribute("uv",new Ve(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new LE(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class kE extends wn{constructor(t=new lp([new ce(0,.5),new ce(-.5,-.5),new ce(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],s=[],r=[],a=[];let o=0,c=0;if(Array.isArray(t)===!1)u(t);else for(let d=0;d<t.length;d++)u(t[d]),this.addGroup(o,c,d),o+=c,c=0;this.setIndex(n),this.setAttribute("position",new Ve(s,3)),this.setAttribute("normal",new Ve(r,3)),this.setAttribute("uv",new Ve(a,2));function u(d){const g=s.length/3,y=d.extractPoints(e);let _=y.shape;const b=y.holes;tc.isClockWise(_)===!1&&(_=_.reverse());for(let S=0,E=b.length;S<E;S++){const R=b[S];tc.isClockWise(R)===!0&&(b[S]=R.reverse())}const M=tc.triangulateShape(_,b);for(let S=0,E=b.length;S<E;S++){const R=b[S];_=_.concat(R)}for(let S=0,E=_.length;S<E;S++){const R=_[S];s.push(R.x,R.y,0),r.push(0,0,1),a.push(R.x,R.y)}for(let S=0,E=M.length;S<E;S++){const R=M[S],N=R[0]+g,P=R[1]+g,k=R[2]+g;n.push(N,P,k),c+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return JY(e,t)}static fromJSON(t,e){const n=[];for(let s=0,r=t.shapes.length;s<r;s++){const a=e[t.shapes[s]];n.push(a)}return new kE(n,t.curveSegments)}}function JY(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const s=i[e];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t}class h_ extends wn{constructor(t=1,e=32,n=16,s=0,r=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:s,phiLength:r,thetaStart:a,thetaLength:o},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const c=Math.min(a+o,Math.PI);let u=0;const d=[],g=new ot,y=new ot,_=[],b=[],M=[],S=[];for(let E=0;E<=n;E++){const R=[],N=E/n;let P=0;E===0&&a===0?P=.5/e:E===n&&c===Math.PI&&(P=-.5/e);for(let k=0;k<=e;k++){const z=k/e;g.x=-t*Math.cos(s+z*r)*Math.sin(a+N*o),g.y=t*Math.cos(a+N*o),g.z=t*Math.sin(s+z*r)*Math.sin(a+N*o),b.push(g.x,g.y,g.z),y.copy(g).normalize(),M.push(y.x,y.y,y.z),S.push(z+P,1-N),R.push(u++)}d.push(R)}for(let E=0;E<n;E++)for(let R=0;R<e;R++){const N=d[E][R+1],P=d[E][R],k=d[E+1][R],z=d[E+1][R+1];(E!==0||a>0)&&_.push(N,P,z),(E!==n-1||c<Math.PI)&&_.push(P,k,z)}this.setIndex(_),this.setAttribute("position",new Ve(b,3)),this.setAttribute("normal",new Ve(M,3)),this.setAttribute("uv",new Ve(S,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new h_(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class BE extends jf{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new BE(t.radius,t.detail)}}class zE extends wn{constructor(t=1,e=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const a=[],o=[],c=[],u=[],d=new ot,g=new ot,y=new ot;for(let _=0;_<=n;_++)for(let b=0;b<=s;b++){const M=b/s*r,S=_/n*Math.PI*2;g.x=(t+e*Math.cos(S))*Math.cos(M),g.y=(t+e*Math.cos(S))*Math.sin(M),g.z=e*Math.sin(S),o.push(g.x,g.y,g.z),d.x=t*Math.cos(M),d.y=t*Math.sin(M),y.subVectors(g,d).normalize(),c.push(y.x,y.y,y.z),u.push(b/s),u.push(_/n)}for(let _=1;_<=n;_++)for(let b=1;b<=s;b++){const M=(s+1)*_+b-1,S=(s+1)*(_-1)+b-1,E=(s+1)*(_-1)+b,R=(s+1)*_+b;a.push(M,S,R),a.push(S,E,R)}this.setIndex(a),this.setAttribute("position",new Ve(o,3)),this.setAttribute("normal",new Ve(c,3)),this.setAttribute("uv",new Ve(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new zE(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class FE extends wn{constructor(t=1,e=.4,n=64,s=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:s,p:r,q:a},n=Math.floor(n),s=Math.floor(s);const o=[],c=[],u=[],d=[],g=new ot,y=new ot,_=new ot,b=new ot,M=new ot,S=new ot,E=new ot;for(let N=0;N<=n;++N){const P=N/n*r*Math.PI*2;R(P,r,a,t,_),R(P+.01,r,a,t,b),S.subVectors(b,_),E.addVectors(b,_),M.crossVectors(S,E),E.crossVectors(M,S),M.normalize(),E.normalize();for(let k=0;k<=s;++k){const z=k/s*Math.PI*2,L=-e*Math.cos(z),U=e*Math.sin(z);g.x=_.x+(L*E.x+U*M.x),g.y=_.y+(L*E.y+U*M.y),g.z=_.z+(L*E.z+U*M.z),c.push(g.x,g.y,g.z),y.subVectors(g,_).normalize(),u.push(y.x,y.y,y.z),d.push(N/n),d.push(k/s)}}for(let N=1;N<=n;N++)for(let P=1;P<=s;P++){const k=(s+1)*(N-1)+(P-1),z=(s+1)*N+(P-1),L=(s+1)*N+P,U=(s+1)*(N-1)+P;o.push(k,z,U),o.push(z,L,U)}this.setIndex(o),this.setAttribute("position",new Ve(c,3)),this.setAttribute("normal",new Ve(u,3)),this.setAttribute("uv",new Ve(d,2));function R(N,P,k,z,L){const U=Math.cos(N),D=Math.sin(N),O=k/P*N,F=Math.cos(O);L.x=z*(2+F)*.5*U,L.y=z*(2+F)*D*.5,L.z=z*Math.sin(O)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new FE(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class VE extends wn{constructor(t=new pR(new ot(-1,-1,0),new ot(-1,1,0),new ot(1,1,0)),e=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:s,closed:r};const a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new ot,c=new ot,u=new ce;let d=new ot;const g=[],y=[],_=[],b=[];M(),this.setIndex(b),this.setAttribute("position",new Ve(g,3)),this.setAttribute("normal",new Ve(y,3)),this.setAttribute("uv",new Ve(_,2));function M(){for(let N=0;N<e;N++)S(N);S(r===!1?e:0),R(),E()}function S(N){d=t.getPointAt(N/e,d);const P=a.normals[N],k=a.binormals[N];for(let z=0;z<=s;z++){const L=z/s*Math.PI*2,U=Math.sin(L),D=-Math.cos(L);c.x=D*P.x+U*k.x,c.y=D*P.y+U*k.y,c.z=D*P.z+U*k.z,c.normalize(),y.push(c.x,c.y,c.z),o.x=d.x+n*c.x,o.y=d.y+n*c.y,o.z=d.z+n*c.z,g.push(o.x,o.y,o.z)}}function E(){for(let N=1;N<=e;N++)for(let P=1;P<=s;P++){const k=(s+1)*(N-1)+(P-1),z=(s+1)*N+(P-1),L=(s+1)*N+P,U=(s+1)*(N-1)+P;b.push(k,z,U),b.push(z,L,U)}}function R(){for(let N=0;N<=e;N++)for(let P=0;P<=s;P++)u.x=N/e,u.y=P/s,_.push(u.x,u.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new VE(new w1[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class Bk extends wn{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,s=new ot,r=new ot;if(t.index!==null){const a=t.attributes.position,o=t.index;let c=t.groups;c.length===0&&(c=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,d=c.length;u<d;++u){const g=c[u],y=g.start,_=g.count;for(let b=y,M=y+_;b<M;b+=3)for(let S=0;S<3;S++){const E=o.getX(b+S),R=o.getX(b+(S+1)%3);s.fromBufferAttribute(a,E),r.fromBufferAttribute(a,R),MN(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}}else{const a=t.attributes.position;for(let o=0,c=a.count/3;o<c;o++)for(let u=0;u<3;u++){const d=3*o+u,g=3*o+(u+1)%3;s.fromBufferAttribute(a,d),r.fromBufferAttribute(a,g),MN(s,r,n)===!0&&(e.push(s.x,s.y,s.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Ve(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function MN(i,t,e){const n=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return e.has(n)===!0||e.has(s)===!0?!1:(e.add(n),e.add(s),!0)}var AN=Object.freeze({__proto__:null,BoxGeometry:Op,CapsuleGeometry:CE,CircleGeometry:DE,ConeGeometry:c_,CylinderGeometry:l_,DodecahedronGeometry:IE,EdgesGeometry:Rk,ExtrudeGeometry:OE,IcosahedronGeometry:PE,LatheGeometry:UE,OctahedronGeometry:u_,PlaneGeometry:gh,PolyhedronGeometry:jf,RingGeometry:LE,ShapeGeometry:kE,SphereGeometry:h_,TetrahedronGeometry:BE,TorusGeometry:zE,TorusKnotGeometry:FE,TubeGeometry:VE,WireframeGeometry:Bk});class zk extends ha{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Pe(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class Fk extends sc{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class gR extends ha{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Pe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new jo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Vk extends gR{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return rn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Pe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Pe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class Hk extends ha{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Pe(16777215),this.specular=new Pe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new jo,this.combine=r_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Gk extends ha{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class jk extends ha{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class Wk extends ha{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new jo,this.combine=r_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class HE extends ha{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ik,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class GE extends ha{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class qk extends ha{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gf,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Xk extends ka{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function ip(i,t){return!i||i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function Yk(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Kk(i){function t(s,r){return i[s]-i[r]}const e=i.length,n=new Array(e);for(let s=0;s!==e;++s)n[s]=s;return n.sort(t),n}function mw(i,t,e){const n=i.length,s=new i.constructor(n);for(let r=0,a=0;a!==n;++r){const o=e[r]*t;for(let c=0;c!==t;++c)s[a++]=i[o+c]}return s}function yR(i,t,e,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(t.push(r.time),e.push(...a)),r=i[s++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(t.push(r.time),a.toArray(e,e.length)),r=i[s++];while(r!==void 0);else do a=r[n],a!==void 0&&(t.push(r.time),e.push(a)),r=i[s++];while(r!==void 0)}function $Y(i,t,e,n,s=30){const r=i.clone();r.name=t;const a=[];for(let c=0;c<r.tracks.length;++c){const u=r.tracks[c],d=u.getValueSize(),g=[],y=[];for(let _=0;_<u.times.length;++_){const b=u.times[_]*s;if(!(b<e||b>=n)){g.push(u.times[_]);for(let M=0;M<d;++M)y.push(u.values[_*d+M])}}g.length!==0&&(u.times=ip(g,u.times.constructor),u.values=ip(y,u.values.constructor),a.push(u))}r.tracks=a;let o=1/0;for(let c=0;c<r.tracks.length;++c)o>r.tracks[c].times[0]&&(o=r.tracks[c].times[0]);for(let c=0;c<r.tracks.length;++c)r.tracks[c].shift(-1*o);return r.resetDuration(),r}function tK(i,t=0,e=i,n=30){n<=0&&(n=30);const s=e.tracks.length,r=t/n;for(let a=0;a<s;++a){const o=e.tracks[a],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const u=i.tracks.find(function(E){return E.name===o.name&&E.ValueTypeName===c});if(u===void 0)continue;let d=0;const g=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=g/3);let y=0;const _=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);const b=o.times.length-1;let M;if(r<=o.times[0]){const E=d,R=g-d;M=o.values.slice(E,R)}else if(r>=o.times[b]){const E=b*g+d,R=E+g-d;M=o.values.slice(E,R)}else{const E=o.createInterpolant(),R=d,N=g-d;E.evaluate(r),M=E.resultBuffer.slice(R,N)}c==="quaternion"&&new ca().fromArray(M).normalize().conjugate().toArray(M);const S=u.times.length;for(let E=0;E<S;++E){const R=E*_+y;if(c==="quaternion")ca.multiplyQuaternionsFlat(u.values,R,M,0,u.values,R);else{const N=_-y*2;for(let P=0;P<N;++P)u.values[R+P]-=M[P]}}}return i.blendMode=Z2,i}class eK{static convertArray(t,e){return ip(t,e)}static isTypedArray(t){return Yk(t)}static getKeyframeOrder(t){return Kk(t)}static sortedArray(t,e,n){return mw(t,e,n)}static flattenJSON(t,e,n,s){yR(t,e,n,s)}static subclip(t,e,n,s,r=30){return $Y(t,e,n,s,r)}static makeClipAdditive(t,e=0,n=t,s=30){return tK(t,e,n,s)}}class f_{constructor(t,e,n,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,s=e[n],r=e[n-1];t:{e:{let a;n:{i:if(!(t<s)){for(let o=n+2;;){if(s===void 0){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=s,s=e[++n],t<s)break e}a=e.length;break n}if(!(t>=r)){const o=e[1];t<o&&(n=2,r=o);for(let c=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(s=r,r=e[--n-1],t>=r)break e}a=n,n=0;break n}break t}for(;n<a;){const o=n+a>>>1;t<e[o]?a=o:n=o+1}if(s=e[n],r=e[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=t*s;for(let a=0;a!==s;++a)e[a]=n[r+a];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Zk extends f_{constructor(t,e,n,s){super(t,e,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ep,endingEnd:ep}}intervalChanged_(t,e,n){const s=this.parameterPositions;let r=t-2,a=t+1,o=s[r],c=s[a];if(o===void 0)switch(this.getSettings_().endingStart){case np:r=t,o=2*e-n;break;case Tv:r=s.length-2,o=e+s[r]-s[r+1];break;default:r=t,o=n}if(c===void 0)switch(this.getSettings_().endingEnd){case np:a=t,c=2*n-e;break;case Tv:a=1,c=n+s[1]-s[0];break;default:a=t-1,c=e}const u=(n-e)*.5,d=this.valueSize;this._weightPrev=u/(e-o),this._weightNext=u/(c-n),this._offsetPrev=r*d,this._offsetNext=a*d}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=t*o,u=c-o,d=this._offsetPrev,g=this._offsetNext,y=this._weightPrev,_=this._weightNext,b=(n-e)/(s-e),M=b*b,S=M*b,E=-y*S+2*y*M-y*b,R=(1+y)*S+(-1.5-2*y)*M+(-.5+y)*b+1,N=(-1-_)*S+(1.5+_)*M+.5*b,P=_*S-_*M;for(let k=0;k!==o;++k)r[k]=E*a[d+k]+R*a[u+k]+N*a[c+k]+P*a[g+k];return r}}class vR extends f_{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=t*o,u=c-o,d=(n-e)/(s-e),g=1-d;for(let y=0;y!==o;++y)r[y]=a[u+y]*g+a[c+y]*d;return r}}class Qk extends f_{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t){return this.copySampleValue_(t-1)}}class bl{constructor(t,e,n,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ip(e,this.TimeBufferType),this.values=ip(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:ip(t.times,Array),values:ip(t.values,Array)};const s=t.getInterpolation();s!==t.DefaultInterpolation&&(n.interpolation=s)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Qk(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new vR(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Zk(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Ev:e=this.InterpolantFactoryMethodDiscrete;break;case T1:e=this.InterpolantFactoryMethodLinear;break;case lS:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ev;case this.InterpolantFactoryMethodLinear:return T1;case this.InterpolantFactoryMethodSmooth:return lS}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,s=e.length;n!==s;++n)e[n]*=t}return this}trim(t,e){const n=this.times,s=n.length;let r=0,a=s-1;for(;r!==s&&n[r]<t;)++r;for(;a!==-1&&n[a]>e;)--a;if(++a,r!==0||a!==s){r>=a&&(a=Math.max(a,1),r=a-1);const o=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*o,a*o)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let o=0;o!==r;o++){const c=n[o];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,c),t=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,c,a),t=!1;break}a=c}if(s!==void 0&&Yk(s))for(let o=0,c=s.length;o!==c;++o){const u=s[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===lS,r=t.length-1;let a=1;for(let o=1;o<r;++o){let c=!1;const u=t[o],d=t[o+1];if(u!==d&&(o!==1||u!==t[0]))if(s)c=!0;else{const g=o*n,y=g-n,_=g+n;for(let b=0;b!==n;++b){const M=e[g+b];if(M!==e[y+b]||M!==e[_+b]){c=!0;break}}}if(c){if(o!==a){t[a]=t[o];const g=o*n,y=a*n;for(let _=0;_!==n;++_)e[y+_]=e[g+_]}++a}}if(r>0){t[a]=t[r];for(let o=r*n,c=a*n,u=0;u!==n;++u)e[c+u]=e[o+u];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=e.slice(0,a*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,s=new n(this.name,t,e);return s.createInterpolant=this.createInterpolant,s}}bl.prototype.ValueTypeName="";bl.prototype.TimeBufferType=Float32Array;bl.prototype.ValueBufferType=Float32Array;bl.prototype.DefaultInterpolation=T1;class Pp extends bl{constructor(t,e,n){super(t,e,n)}}Pp.prototype.ValueTypeName="bool";Pp.prototype.ValueBufferType=Array;Pp.prototype.DefaultInterpolation=Ev;Pp.prototype.InterpolantFactoryMethodLinear=void 0;Pp.prototype.InterpolantFactoryMethodSmooth=void 0;class _R extends bl{constructor(t,e,n,s){super(t,e,n,s)}}_R.prototype.ValueTypeName="color";class Nv extends bl{constructor(t,e,n,s){super(t,e,n,s)}}Nv.prototype.ValueTypeName="number";class Jk extends f_{constructor(t,e,n,s){super(t,e,n,s)}interpolate_(t,e,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=(n-e)/(s-e);let u=t*o;for(let d=u+o;u!==d;u+=4)ca.slerpFlat(r,0,a,u-o,a,u,c);return r}}class d_ extends bl{constructor(t,e,n,s){super(t,e,n,s)}InterpolantFactoryMethodLinear(t){return new Jk(this.times,this.values,this.getValueSize(),t)}}d_.prototype.ValueTypeName="quaternion";d_.prototype.InterpolantFactoryMethodSmooth=void 0;class Up extends bl{constructor(t,e,n){super(t,e,n)}}Up.prototype.ValueTypeName="string";Up.prototype.ValueBufferType=Array;Up.prototype.DefaultInterpolation=Ev;Up.prototype.InterpolantFactoryMethodLinear=void 0;Up.prototype.InterpolantFactoryMethodSmooth=void 0;class Ov extends bl{constructor(t,e,n,s){super(t,e,n,s)}}Ov.prototype.ValueTypeName="vector";class Pv{constructor(t="",e=-1,n=[],s=_E){this.name=t,this.tracks=n,this.duration=e,this.blendMode=s,this.uuid=Go(),this.userData={},this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,s=1/(t.fps||1);for(let a=0,o=n.length;a!==o;++a)e.push(iK(n[a]).scale(s));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r.userData=JSON.parse(t.userData||"{}"),r}static toJSON(t){const e=[],n=t.tracks,s={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode,userData:JSON.stringify(t.userData)};for(let r=0,a=n.length;r!==a;++r)e.push(bl.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(t,e,n,s){const r=e.length,a=[];for(let o=0;o<r;o++){let c=[],u=[];c.push((o+r-1)%r,o,(o+1)%r),u.push(0,1,0);const d=Kk(c);c=mw(c,1,d),u=mw(u,1,d),!s&&c[0]===0&&(c.push(r),u.push(u[0])),a.push(new Nv(".morphTargetInfluences["+e[o].name+"]",c,u).scale(1/n))}return new this(t,-1,a)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const s=t;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===e)return n[s];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,c=t.length;o<c;o++){const u=t[o],d=u.name.match(r);if(d&&d.length>1){const g=d[1];let y=s[g];y||(s[g]=y=[]),y.push(u)}}const a=[];for(const o in s)a.push(this.CreateFromMorphTargetSequence(o,s[o],e,n));return a}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,y,_,b,M){if(_.length!==0){const S=[],E=[];yR(_,S,E,b),S.length!==0&&M.push(new g(y,S,E))}},s=[],r=t.name||"default",a=t.fps||30,o=t.blendMode;let c=t.length||-1;const u=t.hierarchy||[];for(let g=0;g<u.length;g++){const y=u[g].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const _={};let b;for(b=0;b<y.length;b++)if(y[b].morphTargets)for(let M=0;M<y[b].morphTargets.length;M++)_[y[b].morphTargets[M]]=-1;for(const M in _){const S=[],E=[];for(let R=0;R!==y[b].morphTargets.length;++R){const N=y[b];S.push(N.time),E.push(N.morphTarget===M?1:0)}s.push(new Nv(".morphTargetInfluence["+M+"]",S,E))}c=_.length*a}else{const _=".bones["+e[g].name+"]";n(Ov,_+".position",y,"pos",s),n(d_,_+".quaternion",y,"rot",s),n(Ov,_+".scale",y,"scl",s)}}return s.length===0?null:new this(r,c,s,o)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,s=t.length;n!==s;++n){const r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let n=0;n<this.tracks.length;n++)t.push(this.tracks[n].clone());const e=new this.constructor(this.name,this.duration,t,this.blendMode);return e.userData=JSON.parse(JSON.stringify(this.userData)),e}toJSON(){return this.constructor.toJSON(this)}}function nK(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Nv;case"vector":case"vector2":case"vector3":case"vector4":return Ov;case"color":return _R;case"quaternion":return d_;case"bool":case"boolean":return Pp;case"string":return Up}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function iK(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=nK(i.type);if(i.times===void 0){const e=[],n=[];yR(i.keys,e,n,"value"),i.times=e,i.values=n}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Kc={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class xR{constructor(t,e,n){const s=this;let r=!1,a=0,o=0,c;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.abortController=new AbortController,this.itemStart=function(d){o++,r===!1&&s.onStart!==void 0&&s.onStart(d,a,o),r=!0},this.itemEnd=function(d){a++,s.onProgress!==void 0&&s.onProgress(d,a,o),a===o&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(d){s.onError!==void 0&&s.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,g){return u.push(d,g),this},this.removeHandler=function(d){const g=u.indexOf(d);return g!==-1&&u.splice(g,2),this},this.getHandler=function(d){for(let g=0,y=u.length;g<y;g+=2){const _=u[g],b=u[g+1];if(_.global&&(_.lastIndex=0),_.test(d))return b}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const $k=new xR;class vo{constructor(t){this.manager=t!==void 0?t:$k,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(s,r){n.load(t,s,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}}vo.DEFAULT_MATERIAL_NAME="__DEFAULT";const Hu={};class sK extends Error{constructor(t,e){super(t),this.response=e}}class dh extends vo{constructor(t){super(t),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Kc.get(`file:${t}`);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(Hu[t]!==void 0){Hu[t].push({onLoad:e,onProgress:n,onError:s});return}Hu[t]=[],Hu[t].push({onLoad:e,onProgress:n,onError:s});const a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,c=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Hu[t],g=u.body.getReader(),y=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),_=y?parseInt(y):0,b=_!==0;let M=0;const S=new ReadableStream({start(E){R();function R(){g.read().then(({done:N,value:P})=>{if(N)E.close();else{M+=P.byteLength;const k=new ProgressEvent("progress",{lengthComputable:b,loaded:M,total:_});for(let z=0,L=d.length;z<L;z++){const U=d[z];U.onProgress&&U.onProgress(k)}E.enqueue(P),R()}},N=>{E.error(N)})}}});return new Response(S)}else throw new sK(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return u.json();default:if(o==="")return u.text();{const g=/charset="?([^;"\s]*)"?/i.exec(o),y=g&&g[1]?g[1].toLowerCase():void 0,_=new TextDecoder(y);return u.arrayBuffer().then(b=>_.decode(b))}}}).then(u=>{Kc.add(`file:${t}`,u);const d=Hu[t];delete Hu[t];for(let g=0,y=d.length;g<y;g++){const _=d[g];_.onLoad&&_.onLoad(u)}}).catch(u=>{const d=Hu[t];if(d===void 0)throw this.manager.itemError(t),u;delete Hu[t];for(let g=0,y=d.length;g<y;g++){const _=d[g];_.onError&&_.onError(u)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class rK extends vo{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new dh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(o){try{e(r.parse(JSON.parse(o)))}catch(c){s?s(c):console.error(c),r.manager.itemError(t)}},n,s)}parse(t){const e=[];for(let n=0;n<t.length;n++){const s=Pv.parse(t[n]);e.push(s)}return e}}class aK extends vo{constructor(t){super(t)}load(t,e,n,s){const r=this,a=[],o=new RE,c=new dh(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(r.withCredentials);let u=0;function d(g){c.load(t[g],function(y){const _=r.parse(y,!0);a[g]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},u+=1,u===6&&(_.mipmapCount===1&&(o.minFilter=Ns),o.image=a,o.format=_.format,o.needsUpdate=!0,e&&e(o))},n,s)}if(Array.isArray(t))for(let g=0,y=t.length;g<y;++g)d(g);else c.load(t,function(g){const y=r.parse(g,!0);if(y.isCubemap){const _=y.mipmaps.length/y.mipmapCount;for(let b=0;b<_;b++){a[b]={mipmaps:[]};for(let M=0;M<y.mipmapCount;M++)a[b].mipmaps.push(y.mipmaps[b*y.mipmapCount+M]),a[b].format=y.format,a[b].width=y.width,a[b].height=y.height}o.image=a}else o.image.width=y.width,o.image.height=y.height,o.mipmaps=y.mipmaps;y.mipmapCount===1&&(o.minFilter=Ns),o.format=y.format,o.needsUpdate=!0,e&&e(o)},n,s);return o}}const Ym=new WeakMap;class Uv extends vo{constructor(t){super(t)}load(t,e,n,s){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Kc.get(`image:${t}`);if(a!==void 0){if(a.complete===!0)r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0);else{let g=Ym.get(a);g===void 0&&(g=[],Ym.set(a,g)),g.push({onLoad:e,onError:s})}return a}const o=wv("img");function c(){d(),e&&e(this);const g=Ym.get(this)||[];for(let y=0;y<g.length;y++){const _=g[y];_.onLoad&&_.onLoad(this)}Ym.delete(this),r.manager.itemEnd(t)}function u(g){d(),s&&s(g),Kc.remove(`image:${t}`);const y=Ym.get(this)||[];for(let _=0;_<y.length;_++){const b=y[_];b.onError&&b.onError(g)}Ym.delete(this),r.manager.itemError(t),r.manager.itemEnd(t)}function d(){o.removeEventListener("load",c,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),Kc.add(`image:${t}`,o),r.manager.itemStart(t),o.src=t,o}}class oK extends vo{constructor(t){super(t)}load(t,e,n,s){const r=new o_;r.colorSpace=sa;const a=new Uv(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function c(u){a.load(t[u],function(d){r.images[u]=d,o++,o===6&&(r.needsUpdate=!0,e&&e(r))},void 0,s)}for(let u=0;u<t.length;++u)c(u);return r}}class lK extends vo{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new iu,o=new dh(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(t,function(c){let u;try{u=r.parse(c)}catch(d){if(s!==void 0)s(d);else{console.error(d);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:pl,a.wrapT=u.wrapT!==void 0?u.wrapT:pl,a.magFilter=u.magFilter!==void 0?u.magFilter:Ns,a.minFilter=u.minFilter!==void 0?u.minFilter:Ns,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(a.colorSpace=u.colorSpace),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=Yc),u.mipmapCount===1&&(a.minFilter=Ns),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,e&&e(a,u)},n,s),a}}class cK extends vo{constructor(t){super(t)}load(t,e,n,s){const r=new ms,a=new Uv(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(o){r.image=o,r.needsUpdate=!0,e!==void 0&&e(r)},n,s),r}}class Wf extends si{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Pe(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}class tB extends Wf{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(si.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Pe(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const BM=new ln,wN=new ot,RN=new ot;class bR{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ce(512,512),this.mapType=yl,this.map=null,this.mapPass=null,this.matrix=new ln,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Jg,this._frameExtents=new ce(1,1),this._viewportCount=1,this._viewports=[new Yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;wN.setFromMatrixPosition(t.matrixWorld),e.position.copy(wN),RN.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(RN),e.updateMatrixWorld(),BM.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(BM,e.coordinateSystem,e.reversedDepth),e.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(BM)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class uK extends bR{constructor(){super(new Is(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){const e=this.camera,n=Og*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,r=t.distance||e.far;(n!==e.fov||s!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=s,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class eB extends Wf{constructor(t,e,n=0,s=Math.PI/3,r=0,a=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(si.DEFAULT_UP),this.updateMatrix(),this.target=new si,this.distance=n,this.angle=s,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new uK}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const CN=new ln,vy=new ot,zM=new ot;class hK extends bR{constructor(){super(new Is(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ce(4,2),this._viewportCount=6,this._viewports=[new Yn(2,1,1,1),new Yn(0,1,1,1),new Yn(3,1,1,1),new Yn(1,1,1,1),new Yn(3,0,1,1),new Yn(1,0,1,1)],this._cubeDirections=[new ot(1,0,0),new ot(-1,0,0),new ot(0,0,1),new ot(0,0,-1),new ot(0,1,0),new ot(0,-1,0)],this._cubeUps=[new ot(0,1,0),new ot(0,1,0),new ot(0,1,0),new ot(0,1,0),new ot(0,0,1),new ot(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,s=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),vy.setFromMatrixPosition(t.matrixWorld),n.position.copy(vy),zM.copy(n.position),zM.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(zM),n.updateMatrixWorld(),s.makeTranslation(-vy.x,-vy.y,-vy.z),CN.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(CN,n.coordinateSystem,n.reversedDepth)}}class nB extends Wf{constructor(t,e,n=0,s=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new hK}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Rf extends SE{constructor(t=-1,e=1,n=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-t,a=n+t,o=s+e,c=s-e;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=u*this.view.offsetX,a=r+u*this.view.width,o-=d*this.view.offsetY,c=o-d*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class fK extends bR{constructor(){super(new Rf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class iB extends Wf{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(si.DEFAULT_UP),this.updateMatrix(),this.target=new si,this.shadow=new fK}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class sB extends Wf{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class rB extends Wf{constructor(t,e,n=10,s=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class aB{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new ot)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,s=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*s),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],1.092548*(n*s)),e.addScaledVector(a[5],1.092548*(s*r)),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],1.092548*(n*r)),e.addScaledVector(a[8],.546274*(n*n-s*s)),e}getIrradianceAt(t,e){const n=t.x,s=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],2*.511664*s),e.addScaledVector(a[2],2*.511664*r),e.addScaledVector(a[3],2*.511664*n),e.addScaledVector(a[4],2*.429043*n*s),e.addScaledVector(a[5],2*.429043*s*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],2*.429043*n*r),e.addScaledVector(a[8],.429043*(n*n-s*s)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(t,e+s*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(t,e+s*3);return t}static getBasisAt(t,e){const n=t.x,s=t.y,r=t.z;e[0]=.282095,e[1]=.488603*s,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*s,e[5]=1.092548*s*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-s*s)}}class oB extends Wf{constructor(t=new aB,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class jE extends vo{constructor(t){super(t),this.textures={}}load(t,e,n,s){const r=this,a=new dh(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(o){try{e(r.parse(JSON.parse(o)))}catch(c){s?s(c):console.error(c),r.manager.itemError(t)}},n,s)}parse(t){const e=this.textures;function n(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const s=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(s.uuid=t.uuid),t.name!==void 0&&(s.name=t.name),t.color!==void 0&&s.color!==void 0&&s.color.setHex(t.color),t.roughness!==void 0&&(s.roughness=t.roughness),t.metalness!==void 0&&(s.metalness=t.metalness),t.sheen!==void 0&&(s.sheen=t.sheen),t.sheenColor!==void 0&&(s.sheenColor=new Pe().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(s.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(t.emissive),t.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(t.specular),t.specularIntensity!==void 0&&(s.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(s.shininess=t.shininess),t.clearcoat!==void 0&&(s.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(s.dispersion=t.dispersion),t.iridescence!==void 0&&(s.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(s.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(s.transmission=t.transmission),t.thickness!==void 0&&(s.thickness=t.thickness),t.attenuationDistance!==void 0&&(s.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(s.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(s.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(s.fog=t.fog),t.flatShading!==void 0&&(s.flatShading=t.flatShading),t.blending!==void 0&&(s.blending=t.blending),t.combine!==void 0&&(s.combine=t.combine),t.side!==void 0&&(s.side=t.side),t.shadowSide!==void 0&&(s.shadowSide=t.shadowSide),t.opacity!==void 0&&(s.opacity=t.opacity),t.transparent!==void 0&&(s.transparent=t.transparent),t.alphaTest!==void 0&&(s.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(s.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(s.depthFunc=t.depthFunc),t.depthTest!==void 0&&(s.depthTest=t.depthTest),t.depthWrite!==void 0&&(s.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(s.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(s.blendSrc=t.blendSrc),t.blendDst!==void 0&&(s.blendDst=t.blendDst),t.blendEquation!==void 0&&(s.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(s.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(s.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(s.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(s.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(s.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(s.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(s.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(s.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(s.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(s.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(s.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(s.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(s.rotation=t.rotation),t.linewidth!==void 0&&(s.linewidth=t.linewidth),t.dashSize!==void 0&&(s.dashSize=t.dashSize),t.gapSize!==void 0&&(s.gapSize=t.gapSize),t.scale!==void 0&&(s.scale=t.scale),t.polygonOffset!==void 0&&(s.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(s.dithering=t.dithering),t.alphaToCoverage!==void 0&&(s.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(s.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(s.visible=t.visible),t.toneMapped!==void 0&&(s.toneMapped=t.toneMapped),t.userData!==void 0&&(s.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?s.vertexColors=t.vertexColors>0:s.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const r in t.uniforms){const a=t.uniforms[r];switch(s.uniforms[r]={},a.type){case"t":s.uniforms[r].value=n(a.value);break;case"c":s.uniforms[r].value=new Pe().setHex(a.value);break;case"v2":s.uniforms[r].value=new ce().fromArray(a.value);break;case"v3":s.uniforms[r].value=new ot().fromArray(a.value);break;case"v4":s.uniforms[r].value=new Yn().fromArray(a.value);break;case"m3":s.uniforms[r].value=new _n().fromArray(a.value);break;case"m4":s.uniforms[r].value=new ln().fromArray(a.value);break;default:s.uniforms[r].value=a.value}}if(t.defines!==void 0&&(s.defines=t.defines),t.vertexShader!==void 0&&(s.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(s.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(s.glslVersion=t.glslVersion),t.extensions!==void 0)for(const r in t.extensions)s.extensions[r]=t.extensions[r];if(t.lights!==void 0&&(s.lights=t.lights),t.clipping!==void 0&&(s.clipping=t.clipping),t.size!==void 0&&(s.size=t.size),t.sizeAttenuation!==void 0&&(s.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(s.map=n(t.map)),t.matcap!==void 0&&(s.matcap=n(t.matcap)),t.alphaMap!==void 0&&(s.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(s.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(s.bumpScale=t.bumpScale),t.normalMap!==void 0&&(s.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(s.normalMapType=t.normalMapType),t.normalScale!==void 0){let r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new ce().fromArray(r)}return t.displacementMap!==void 0&&(s.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(s.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(s.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(s.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(s.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(s.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(s.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(s.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(s.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(s.envMap=n(t.envMap)),t.envMapRotation!==void 0&&s.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(s.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(s.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(s.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(s.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(s.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(s.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(s.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(s.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(s.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new ce().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(s.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(s.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(s.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(s.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(s.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(t.sheenRoughnessMap)),s}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return jE.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:zk,SpriteMaterial:rR,RawShaderMaterial:Fk,ShaderMaterial:sc,PointsMaterial:oR,MeshPhysicalMaterial:Vk,MeshStandardMaterial:gR,MeshPhongMaterial:Hk,MeshToonMaterial:Gk,MeshNormalMaterial:jk,MeshLambertMaterial:Wk,MeshDepthMaterial:HE,MeshDistanceMaterial:GE,MeshBasicMaterial:mh,MeshMatcapMaterial:qk,LineDashedMaterial:Xk,LineBasicMaterial:ka,Material:ha};return new e[t]}}class gw{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class SR extends wn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class lB extends vo{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new dh(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(o){try{e(r.parse(JSON.parse(o)))}catch(c){s?s(c):console.error(c),r.manager.itemError(t)}},n,s)}parse(t){const e={},n={};function s(_,b){if(e[b]!==void 0)return e[b];const S=_.interleavedBuffers[b],E=r(_,S.buffer),R=hg(S.type,E),N=new ME(R,S.stride);return N.uuid=S.uuid,e[b]=N,N}function r(_,b){if(n[b]!==void 0)return n[b];const S=_.arrayBuffers[b],E=new Uint32Array(S).buffer;return n[b]=E,E}const a=t.isInstancedBufferGeometry?new SR:new wn,o=t.data.index;if(o!==void 0){const _=hg(o.type,o.array);a.setIndex(new Pi(_,1))}const c=t.data.attributes;for(const _ in c){const b=c[_];let M;if(b.isInterleavedBufferAttribute){const S=s(t.data,b.data);M=new vp(S,b.itemSize,b.offset,b.normalized)}else{const S=hg(b.type,b.array),E=b.isInstancedBufferAttribute?_p:Pi;M=new E(S,b.itemSize,b.normalized)}b.name!==void 0&&(M.name=b.name),b.usage!==void 0&&M.setUsage(b.usage),a.setAttribute(_,M)}const u=t.data.morphAttributes;if(u)for(const _ in u){const b=u[_],M=[];for(let S=0,E=b.length;S<E;S++){const R=b[S];let N;if(R.isInterleavedBufferAttribute){const P=s(t.data,R.data);N=new vp(P,R.itemSize,R.offset,R.normalized)}else{const P=hg(R.type,R.array);N=new Pi(P,R.itemSize,R.normalized)}R.name!==void 0&&(N.name=R.name),M.push(N)}a.morphAttributes[_]=M}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=t.data.groups||t.data.drawcalls||t.data.offsets;if(g!==void 0)for(let _=0,b=g.length;_!==b;++_){const M=g[_];a.addGroup(M.start,M.count,M.materialIndex)}const y=t.data.boundingSphere;return y!==void 0&&(a.boundingSphere=new xr().fromJSON(y)),t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}}class dK extends vo{constructor(t){super(t)}load(t,e,n,s){const r=this,a=this.path===""?gw.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const o=new dh(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(c){let u=null;try{u=JSON.parse(c)}catch(g){s!==void 0&&s(g),console.error("THREE:ObjectLoader: Can't parse "+t+".",g.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}r.parse(u,e)},n,s)}async loadAsync(t,e){const n=this,s=this.path===""?gw.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||s;const r=new dh(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(t,e),o=JSON.parse(a),c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(o)}parse(t,e){const n=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,s),a=this.parseImages(t.images,function(){e!==void 0&&e(u)}),o=this.parseTextures(t.textures,a),c=this.parseMaterials(t.materials,o),u=this.parseObject(t.object,r,c,o,n),d=this.parseSkeletons(t.skeletons,u);if(this.bindSkeletons(u,d),this.bindLightTargets(u),e!==void 0){let g=!1;for(const y in a)if(a[y].data instanceof HTMLImageElement){g=!0;break}g===!1&&e(u)}return u}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),a=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,a),c=this.parseObject(t.object,s,o,a,e),u=this.parseSkeletons(t.skeletons,c);return this.bindSkeletons(c,u),this.bindLightTargets(c),c}parseShapes(t){const e={};if(t!==void 0)for(let n=0,s=t.length;n<s;n++){const r=new lp().fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},s={};if(e.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),t!==void 0)for(let r=0,a=t.length;r<a;r++){const o=new AE().fromJSON(t[r],s);n[o.uuid]=o}return n}parseGeometries(t,e){const n={};if(t!==void 0){const s=new lB;for(let r=0,a=t.length;r<a;r++){let o;const c=t[r];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":o=s.parse(c);break;default:c.type in AN?o=AN[c.type].fromJSON(c,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}o.uuid=c.uuid,c.name!==void 0&&(o.name=c.name),c.userData!==void 0&&(o.userData=c.userData),n[c.uuid]=o}}return n}parseMaterials(t,e){const n={},s={};if(t!==void 0){const r=new jE;r.setTextures(e);for(let a=0,o=t.length;a<o;a++){const c=t[a];n[c.uuid]===void 0&&(n[c.uuid]=r.parse(c)),s[c.uuid]=n[c.uuid]}}return s}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const s=t[n],r=Pv.parse(s);e[r.uuid]=r}return e}parseImages(t,e){const n=this,s={};let r;function a(c){return n.manager.itemStart(c),r.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function o(c){if(typeof c=="string"){const u=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return a(d)}else return c.data?{data:hg(c.type,c.data),width:c.width,height:c.height}:null}if(t!==void 0&&t.length>0){const c=new xR(e);r=new Uv(c),r.setCrossOrigin(this.crossOrigin);for(let u=0,d=t.length;u<d;u++){const g=t[u],y=g.url;if(Array.isArray(y)){const _=[];for(let b=0,M=y.length;b<M;b++){const S=y[b],E=o(S);E!==null&&(E instanceof HTMLImageElement?_.push(E):_.push(new iu(E.data,E.width,E.height)))}s[g.uuid]=new xf(_)}else{const _=o(g.url);s[g.uuid]=new xf(_)}}}return s}async parseImagesAsync(t){const e=this,n={};let s;async function r(a){if(typeof a=="string"){const o=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:e.resourcePath+o;return await s.loadAsync(c)}else return a.data?{data:hg(a.type,a.data),width:a.width,height:a.height}:null}if(t!==void 0&&t.length>0){s=new Uv(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,o=t.length;a<o;a++){const c=t[a],u=c.url;if(Array.isArray(u)){const d=[];for(let g=0,y=u.length;g<y;g++){const _=u[g],b=await r(_);b!==null&&(b instanceof HTMLImageElement?d.push(b):d.push(new iu(b.data,b.width,b.height)))}n[c.uuid]=new xf(d)}else{const d=await r(c.url);n[c.uuid]=new xf(d)}}}return n}parseTextures(t,e){function n(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}const s={};if(t!==void 0)for(let r=0,a=t.length;r<a;r++){const o=t[r];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),e[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const c=e[o.image],u=c.data;let d;Array.isArray(u)?(d=new o_,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new iu:d=new ms,u&&(d.needsUpdate=!0)),d.source=c,d.uuid=o.uuid,o.name!==void 0&&(d.name=o.name),o.mapping!==void 0&&(d.mapping=n(o.mapping,pK)),o.channel!==void 0&&(d.channel=o.channel),o.offset!==void 0&&d.offset.fromArray(o.offset),o.repeat!==void 0&&d.repeat.fromArray(o.repeat),o.center!==void 0&&d.center.fromArray(o.center),o.rotation!==void 0&&(d.rotation=o.rotation),o.wrap!==void 0&&(d.wrapS=n(o.wrap[0],DN),d.wrapT=n(o.wrap[1],DN)),o.format!==void 0&&(d.format=o.format),o.internalFormat!==void 0&&(d.internalFormat=o.internalFormat),o.type!==void 0&&(d.type=o.type),o.colorSpace!==void 0&&(d.colorSpace=o.colorSpace),o.minFilter!==void 0&&(d.minFilter=n(o.minFilter,IN)),o.magFilter!==void 0&&(d.magFilter=n(o.magFilter,IN)),o.anisotropy!==void 0&&(d.anisotropy=o.anisotropy),o.flipY!==void 0&&(d.flipY=o.flipY),o.generateMipmaps!==void 0&&(d.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(d.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(d.compareFunction=o.compareFunction),o.userData!==void 0&&(d.userData=o.userData),s[o.uuid]=d}return s}parseObject(t,e,n,s,r){let a;function o(y){return e[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),e[y]}function c(y){if(y!==void 0){if(Array.isArray(y)){const _=[];for(let b=0,M=y.length;b<M;b++){const S=y[b];n[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),_.push(n[S])}return _}return n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),n[y]}}function u(y){return s[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),s[y]}let d,g;switch(t.type){case"Scene":a=new sR,t.background!==void 0&&(Number.isInteger(t.background)?a.background=new Pe(t.background):a.background=u(t.background)),t.environment!==void 0&&(a.environment=u(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?a.fog=new TE(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(a.fog=new EE(t.fog.color,t.fog.density)),t.fog.name!==""&&(a.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(a.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(a.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&a.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":a=new Is(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(a.focus=t.focus),t.zoom!==void 0&&(a.zoom=t.zoom),t.filmGauge!==void 0&&(a.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(a.filmOffset=t.filmOffset),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new Rf(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(a.zoom=t.zoom),t.view!==void 0&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new sB(t.color,t.intensity);break;case"DirectionalLight":a=new iB(t.color,t.intensity),a.target=t.target||"";break;case"PointLight":a=new nB(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new rB(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new eB(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),a.target=t.target||"";break;case"HemisphereLight":a=new tB(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=new oB().fromJSON(t);break;case"SkinnedMesh":d=o(t.geometry),g=c(t.material),a=new Sk(d,g),t.bindMode!==void 0&&(a.bindMode=t.bindMode),t.bindMatrix!==void 0&&a.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(a.skeleton=t.skeleton);break;case"Mesh":d=o(t.geometry),g=c(t.material),a=new ps(d,g);break;case"InstancedMesh":d=o(t.geometry),g=c(t.material);const y=t.count,_=t.instanceMatrix,b=t.instanceColor;a=new Ek(d,g,y),a.instanceMatrix=new _p(new Float32Array(_.array),16),b!==void 0&&(a.instanceColor=new _p(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":d=o(t.geometry),g=c(t.material),a=new Tk(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,g),a.geometry=d,a.perObjectFrustumCulled=t.perObjectFrustumCulled,a.sortObjects=t.sortObjects,a._drawRanges=t.drawRanges,a._reservedRanges=t.reservedRanges,a._geometryInfo=t.geometryInfo.map(M=>{let S=null,E=null;return M.boundingBox!==void 0&&(S=new _r().fromJSON(M.boundingBox)),M.boundingSphere!==void 0&&(E=new xr().fromJSON(M.boundingSphere)),{...M,boundingBox:S,boundingSphere:E}}),a._instanceInfo=t.instanceInfo,a._availableInstanceIds=t._availableInstanceIds,a._availableGeometryIds=t._availableGeometryIds,a._nextIndexStart=t.nextIndexStart,a._nextVertexStart=t.nextVertexStart,a._geometryCount=t.geometryCount,a._maxInstanceCount=t.maxInstanceCount,a._maxVertexCount=t.maxVertexCount,a._maxIndexCount=t.maxIndexCount,a._geometryInitialized=t.geometryInitialized,a._matricesTexture=u(t.matricesTexture.uuid),a._indirectTexture=u(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(a._colorsTexture=u(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(a.boundingSphere=new xr().fromJSON(t.boundingSphere)),t.boundingBox!==void 0&&(a.boundingBox=new _r().fromJSON(t.boundingBox));break;case"LOD":a=new bk;break;case"Line":a=new zf(o(t.geometry),c(t.material));break;case"LineLoop":a=new Mk(o(t.geometry),c(t.material));break;case"LineSegments":a=new du(o(t.geometry),c(t.material));break;case"PointCloud":case"Points":a=new Ak(o(t.geometry),c(t.material));break;case"Sprite":a=new xk(c(t.material));break;case"Group":a=new fg;break;case"Bone":a=new aR;break;default:a=new si}if(a.uuid=t.uuid,t.name!==void 0&&(a.name=t.name),t.matrix!==void 0?(a.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(t.position!==void 0&&a.position.fromArray(t.position),t.rotation!==void 0&&a.rotation.fromArray(t.rotation),t.quaternion!==void 0&&a.quaternion.fromArray(t.quaternion),t.scale!==void 0&&a.scale.fromArray(t.scale)),t.up!==void 0&&a.up.fromArray(t.up),t.castShadow!==void 0&&(a.castShadow=t.castShadow),t.receiveShadow!==void 0&&(a.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(a.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(a.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(a.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(a.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(a.visible=t.visible),t.frustumCulled!==void 0&&(a.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(a.renderOrder=t.renderOrder),t.userData!==void 0&&(a.userData=t.userData),t.layers!==void 0&&(a.layers.mask=t.layers),t.children!==void 0){const y=t.children;for(let _=0;_<y.length;_++)a.add(this.parseObject(y[_],e,n,s,r))}if(t.animations!==void 0){const y=t.animations;for(let _=0;_<y.length;_++){const b=y[_];a.animations.push(r[b])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(a.autoUpdate=t.autoUpdate);const y=t.levels;for(let _=0;_<y.length;_++){const b=y[_],M=a.getObjectByProperty("uuid",b.object);M!==void 0&&a.addLevel(M,b.distance,b.hysteresis)}}return a}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=e[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,s=t.getObjectByProperty("uuid",n);s!==void 0?e.target=s:e.target=new si}})}}const pK={UVMapping:fE,CubeReflectionMapping:hh,CubeRefractionMapping:kf,EquirectangularReflectionMapping:_v,EquirectangularRefractionMapping:xv,CubeUVReflectionMapping:Zg},DN={RepeatWrapping:bv,ClampToEdgeWrapping:pl,MirroredRepeatWrapping:Sv},IN={NearestFilter:Ur,NearestMipmapNearestFilter:H2,NearestMipmapLinearFilter:ug,LinearFilter:Ns,LinearMipmapNearestFilter:Xy,LinearMipmapLinearFilter:Yc},FM=new WeakMap;class mK extends vo{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(t){return this.options=t,this}load(t,e,n,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=Kc.get(`image-bitmap:${t}`);if(a!==void 0){if(r.manager.itemStart(t),a.then){a.then(u=>{if(FM.has(a)===!0)s&&s(FM.get(a)),r.manager.itemError(t),r.manager.itemEnd(t);else return e&&e(u),r.manager.itemEnd(t),u});return}return setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(t,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(u){return Kc.add(`image-bitmap:${t}`,u),e&&e(u),r.manager.itemEnd(t),u}).catch(function(u){s&&s(u),FM.set(c,u),Kc.remove(`image-bitmap:${t}`),r.manager.itemError(t),r.manager.itemEnd(t)});Kc.add(`image-bitmap:${t}`,c),r.manager.itemStart(t)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let _b;class ER{static getContext(){return _b===void 0&&(_b=new(window.AudioContext||window.webkitAudioContext)),_b}static setContext(t){_b=t}}class gK extends vo{constructor(t){super(t)}load(t,e,n,s){const r=this,a=new dh(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(c){try{const u=c.slice(0);ER.getContext().decodeAudioData(u,function(g){e(g)}).catch(o)}catch(u){o(u)}},n,s);function o(c){s?s(c):console.error(c),r.manager.itemError(t)}}}const NN=new ln,ON=new ln,Od=new ln;class yK{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Is,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Is,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Od.copy(t.projectionMatrix);const s=e.eyeSep/2,r=s*e.near/e.focus,a=e.near*Math.tan(op*e.fov*.5)/e.zoom;let o,c;ON.elements[12]=-s,NN.elements[12]=s,o=-a*e.aspect+r,c=a*e.aspect+r,Od.elements[0]=2*e.near/(c-o),Od.elements[8]=(c+o)/(c-o),this.cameraL.projectionMatrix.copy(Od),o=-a*e.aspect-r,c=a*e.aspect-r,Od.elements[0]=2*e.near/(c-o),Od.elements[8]=(c+o)/(c-o),this.cameraR.projectionMatrix.copy(Od)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(ON),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(NN)}}class cB extends Is{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}class TR{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=performance.now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}const Pd=new ot,VM=new ca,vK=new ot,Ud=new ot,Ld=new ot;class _K extends si{constructor(){super(),this.type="AudioListener",this.context=ER.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new TR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Pd,VM,vK),Ud.set(0,0,-1).applyQuaternion(VM),Ld.set(0,1,0).applyQuaternion(VM),e.positionX){const n=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Pd.x,n),e.positionY.linearRampToValueAtTime(Pd.y,n),e.positionZ.linearRampToValueAtTime(Pd.z,n),e.forwardX.linearRampToValueAtTime(Ud.x,n),e.forwardY.linearRampToValueAtTime(Ud.y,n),e.forwardZ.linearRampToValueAtTime(Ud.z,n),e.upX.linearRampToValueAtTime(Ld.x,n),e.upY.linearRampToValueAtTime(Ld.y,n),e.upZ.linearRampToValueAtTime(Ld.z,n)}else e.setPosition(Pd.x,Pd.y,Pd.z),e.setOrientation(Ud.x,Ud.y,Ud.z,Ld.x,Ld.y,Ld.z)}}class uB extends si{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const kd=new ot,PN=new ca,xK=new ot,Bd=new ot;class bK extends uB{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(kd,PN,xK),Bd.set(0,0,1).applyQuaternion(PN);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(kd.x,n),e.positionY.linearRampToValueAtTime(kd.y,n),e.positionZ.linearRampToValueAtTime(kd.z,n),e.orientationX.linearRampToValueAtTime(Bd.x,n),e.orientationY.linearRampToValueAtTime(Bd.y,n),e.orientationZ.linearRampToValueAtTime(Bd.z,n)}else e.setPosition(kd.x,kd.y,kd.z),e.setOrientation(Bd.x,Bd.y,Bd.z)}}class SK{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class hB{constructor(t,e,n){this.binding=t,this.valueSize=n;let s,r,a;switch(e){case"quaternion":s=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,s=this.valueSize,r=t*s+s;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==s;++o)n[r+o]=n[o];a=e}else{a+=e;const o=e/a;this._mixBufferRegion(n,r,0,o,s)}this.cumulativeWeight=a}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,s,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,s=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const c=e*this._origIndex;this._mixBufferRegion(n,s,c,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*e,1,e);for(let c=e,u=e+e;c!==u;++c)if(n[c]!==n[c+e]){o.setValue(n,s);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,s=n*this._origIndex;t.getValue(e,s);for(let r=n,a=s;r!==a;++r)e[r]=e[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,s,r){if(s>=.5)for(let a=0;a!==r;++a)t[e+a]=t[n+a]}_slerp(t,e,n,s){ca.slerpFlat(t,e,t,e,t,n,s)}_slerpAdditive(t,e,n,s,r){const a=this._workIndex*r;ca.multiplyQuaternionsFlat(t,a,t,e,t,n),ca.slerpFlat(t,e,t,e,t,a,s)}_lerp(t,e,n,s,r){const a=1-s;for(let o=0;o!==r;++o){const c=e+o;t[c]=t[c]*a+t[n+o]*s}}_lerpAdditive(t,e,n,s,r){for(let a=0;a!==r;++a){const o=e+a;t[o]=t[o]+t[n+a]*s}}}const MR="\\[\\]\\.:\\/",EK=new RegExp("["+MR+"]","g"),AR="[^"+MR+"]",TK="[^"+MR.replace("\\.","")+"]",MK=/((?:WC+[\/:])*)/.source.replace("WC",AR),AK=/(WCOD+)?/.source.replace("WCOD",TK),wK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",AR),RK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",AR),CK=new RegExp("^"+MK+AK+wK+RK+"$"),DK=["material","materials","bones","map"];class IK{constructor(t,e,n){const s=n||ni.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,s)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class ni{constructor(t,e,n){this.path=e,this.parsedPath=n||ni.parseTrackName(e),this.node=ni.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new ni.Composite(t,e,n):new ni(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(EK,"")}static parseTrackName(t){const e=CK.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);DK.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(r){for(let a=0;a<r.length;a++){const o=r[a];if(o.name===e||o.uuid===e)return o;const c=n(o.children);if(c)return c}return null},s=n(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)t[e++]=n[s]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,s=e.propertyName;let r=e.propertyIndex;if(t||(t=ni.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}const a=t[s];if(a===void 0){const u=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",t);return}let o=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?o=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ni.Composite=IK;ni.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ni.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ni.prototype.GetterByBindingType=[ni.prototype._getValue_direct,ni.prototype._getValue_array,ni.prototype._getValue_arrayElement,ni.prototype._getValue_toArray];ni.prototype.SetterByBindingTypeAndVersioning=[[ni.prototype._setValue_direct,ni.prototype._setValue_direct_setNeedsUpdate,ni.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_array,ni.prototype._setValue_array_setNeedsUpdate,ni.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_arrayElement,ni.prototype._setValue_arrayElement_setNeedsUpdate,ni.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_fromArray,ni.prototype._setValue_fromArray_setNeedsUpdate,ni.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class NK{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Go(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,s=arguments.length;n!==s;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,a=r.length;let o,c=t.length,u=this.nCachedObjects_;for(let d=0,g=arguments.length;d!==g;++d){const y=arguments[d],_=y.uuid;let b=e[_];if(b===void 0){b=c++,e[_]=b,t.push(y);for(let M=0,S=a;M!==S;++M)r[M].push(new ni(y,n[M],s[M]))}else if(b<u){o=t[b];const M=--u,S=t[M];e[S.uuid]=b,t[b]=S,e[_]=M,t[M]=y;for(let E=0,R=a;E!==R;++E){const N=r[E],P=N[M];let k=N[b];N[b]=P,k===void 0&&(k=new ni(y,n[E],s[E])),N[M]=k}}else t[b]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const c=arguments[a],u=c.uuid,d=e[u];if(d!==void 0&&d>=r){const g=r++,y=t[g];e[y.uuid]=d,t[d]=y,e[u]=g,t[g]=c;for(let _=0,b=s;_!==b;++_){const M=n[_],S=M[g],E=M[d];M[d]=S,M[g]=E}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,a=t.length;for(let o=0,c=arguments.length;o!==c;++o){const u=arguments[o],d=u.uuid,g=e[d];if(g!==void 0)if(delete e[d],g<r){const y=--r,_=t[y],b=--a,M=t[b];e[_.uuid]=g,t[g]=_,e[M.uuid]=y,t[y]=M,t.pop();for(let S=0,E=s;S!==E;++S){const R=n[S],N=R[y],P=R[b];R[g]=N,R[y]=P,R.pop()}}else{const y=--a,_=t[y];y>0&&(e[_.uuid]=g),t[g]=_,t.pop();for(let b=0,M=s;b!==M;++b){const S=n[b];S[g]=S[y],S.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let s=n[t];const r=this._bindings;if(s!==void 0)return r[s];const a=this._paths,o=this._parsedPaths,c=this._objects,u=c.length,d=this.nCachedObjects_,g=new Array(u);s=r.length,n[t]=s,a.push(t),o.push(e),r.push(g);for(let y=d,_=c.length;y!==_;++y){const b=c[y];g[y]=new ni(b,t,e)}return g}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const s=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,c=a[o],u=t[o];e[u]=n,a[n]=c,a.pop(),r[n]=r[o],r.pop(),s[n]=s[o],s.pop()}}}class fB{constructor(t,e,n=null,s=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=s;const r=e.tracks,a=r.length,o=new Array(a),c={endingStart:ep,endingEnd:ep};for(let u=0;u!==a;++u){const d=r[u].createInterpolant(null);o[u]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ek,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const s=this._clip.duration,r=t._clip.duration,a=r/s,o=s/r;t.warp(1,a,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const s=this._mixer,r=s.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=s._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,u=o.sampleValues;return c[0]=r,c[1]=r+n,u[0]=t/a,u[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,s){if(!this.enabled){this._updateWeight(t);return}const r=this._startTime;if(r!==null){const c=(t-r)*n;c<0||n===0?e=0:(this._startTime=null,e=n*c)}e*=this._updateTimeScale(t);const a=this._updateTime(e),o=this._updateWeight(t);if(o>0){const c=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Z2:for(let d=0,g=c.length;d!==g;++d)c[d].evaluate(a),u[d].accumulateAdditive(o);break;case _E:default:for(let d=0,g=c.length;d!==g;++d)c[d].evaluate(a),u[d].accumulate(s,o)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(t)[0];e*=s,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let s=this.time+t,r=this._loopCount;const a=n===nk;if(t===0)return r===-1?s:a&&(r&1)===1?e-s:s;if(n===tk){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(s>=e)s=e;else if(s<0)s=0;else{this.time=s;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(r===-1&&(t>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=e||s<0){const o=Math.floor(s/e);s-=e*o,r+=Math.abs(o);const c=this.repetitions-r;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?e:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(c===1){const u=t<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=s;if(a&&(r&1)===1)return e-s}return s}_setEndings(t,e,n){const s=this._interpolantSettings;n?(s.endingStart=np,s.endingEnd=np):(t?s.endingStart=this.zeroSlopeAtStart?np:ep:s.endingStart=Tv,e?s.endingEnd=this.zeroSlopeAtEnd?np:ep:s.endingEnd=Tv)}_scheduleFading(t,e,n){const s=this._mixer,r=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,c=a.sampleValues;return o[0]=r,c[0]=e,o[1]=r+t,c[1]=n,this}}const OK=new Float32Array(1);class PK extends fu{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,s=t._clip.tracks,r=s.length,a=t._propertyBindings,o=t._interpolants,c=n.uuid,u=this._bindingsByRootAndName;let d=u[c];d===void 0&&(d={},u[c]=d);for(let g=0;g!==r;++g){const y=s[g],_=y.name;let b=d[_];if(b!==void 0)++b.referenceCount,a[g]=b;else{if(b=a[g],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,c,_));continue}const M=e&&e._propertyBindings[g].binding.parsedPath;b=new hB(ni.create(n,_,M),y.ValueTypeName,y.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,c,_),a[g]=b}o[g].resultBuffer=b.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,s=t._clip.uuid,r=this._actionsByClip[s];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,s,n)}const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const s=this._actions,r=this._actionsByClip;let a=r[e];if(a===void 0)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{const o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=s.length,s.push(t),a.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],s=t._cacheIndex;n._cacheIndex=s,e[s]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,a=this._actionsByClip,o=a[r],c=o.knownActions,u=c[c.length-1],d=t._byClipCacheIndex;u._byClipCacheIndex=d,c[d]=u,c.pop(),t._byClipCacheIndex=null;const g=o.actionByRoot,y=(t._localRoot||this._root).uuid;delete g[y],c.length===0&&delete a[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,s=e.length;n!==s;++n){const r=e[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,s=this._nActiveActions++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,s=--this._nActiveActions,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const s=this._bindingsByRootAndName,r=this._bindings;let a=s[e];a===void 0&&(a={},s[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,s=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[s],c=e[e.length-1],u=t._cacheIndex;c._cacheIndex=u,e[u]=c,e.pop(),delete o[r],Object.keys(o).length===0&&delete a[s]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,s=this._nActiveBindings++,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,s=--this._nActiveBindings,r=e[s];t._cacheIndex=s,e[s]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new vR(new Float32Array(2),new Float32Array(2),1,OK),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,s=--this._nActiveControlInterpolants,r=e[s];t.__cacheIndex=s,e[s]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const s=e||this._root,r=s.uuid;let a=typeof t=="string"?Pv.findByName(s,t):t;const o=a!==null?a.uuid:t,c=this._actionsByClip[o];let u=null;if(n===void 0&&(a!==null?n=a.blendMode:n=_E),c!==void 0){const g=c.actionByRoot[r];if(g!==void 0&&g.blendMode===n)return g;u=c.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const d=new fB(this,a,e,n);return this._bindAction(d,u),this._addInactiveAction(d,o,r),d}existingAction(t,e){const n=e||this._root,s=n.uuid,r=typeof t=="string"?Pv.findByName(n,t):t,a=r?r.uuid:t,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[s]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,s=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1;for(let u=0;u!==n;++u)e[u]._update(s,t,r,a);const o=this._bindings,c=this._nActiveBindings;for(let u=0;u!==c;++u)o[u].apply(a);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const a=r.knownActions;for(let o=0,c=a.length;o!==c;++o){const u=a[o];this._deactivateAction(u);const d=u._cacheIndex,g=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,g._cacheIndex=d,e[d]=g,e.pop(),this._removeInactiveBindingsForAction(u)}delete s[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,c=o[e];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName,r=s[e];if(r!==void 0)for(const a in r){const o=r[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class UK extends tR{constructor(t=1,e=1,n=1,s={}){super(t,e,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new bE(null,t,e,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class wR{constructor(t){this.value=t}clone(){return new wR(this.value.clone===void 0?this.value:this.value.clone())}}let LK=0;class kK extends fu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:LK++}),this.name="",this.usage=Av,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,s=e.length;n<s;n++){const r=Array.isArray(e[n])?e[n]:[e[n]];for(let a=0;a<r.length;a++)this.uniforms.push(r[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class BK extends ME{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class zK{constructor(t,e,n,s,r,a=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=s,this.count=r,this.normalized=a,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const UN=new ln;class dB{constructor(t,e,n=0,s=1/0){this.ray=new Np(t,e),this.near=n,this.far=s,this.camera=null,this.layers=new Pg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return UN.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(UN),this}intersectObject(t,e=!0,n=[]){return yw(t,this,n,e),n.sort(LN),n}intersectObjects(t,e=!0,n=[]){for(let s=0,r=t.length;s<r;s++)yw(t[s],this,n,e);return n.sort(LN),n}}function LN(i,t){return i.distance-t.distance}function yw(i,t,e,n){let s=!0;if(i.layers.test(t.layers)&&i.raycast(t,e)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let a=0,o=r.length;a<o;a++)yw(r[a],t,e,!0)}}class FK{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(t){this._document=t,t.hidden!==void 0&&(this._pageVisibilityHandler=VK.bind(this),t.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(t){return this._timescale=t,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(t){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(t!==void 0?t:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function VK(){this._document.hidden===!1&&this.reset()}class vw{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=rn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(rn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class HK{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class RR{constructor(t,e,n,s){RR.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,s){const r=this.elements;return r[0]=t,r[2]=e,r[1]=n,r[3]=s,this}}const kN=new ce;class GK{constructor(t=new ce(1/0,1/0),e=new ce(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=kN.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,kN).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const BN=new ot,xb=new ot,Km=new ot,Zm=new ot,HM=new ot,jK=new ot,WK=new ot;class qK{constructor(t=new ot,e=new ot){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){BN.subVectors(t,this.start),xb.subVectors(this.end,this.start);const n=xb.dot(xb);let r=xb.dot(BN)/n;return e&&(r=rn(r,0,1)),r}closestPointToPoint(t,e,n){const s=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(s).add(this.start)}distanceSqToLine3(t,e=jK,n=WK){const s=10000000000000001e-32;let r,a;const o=this.start,c=t.start,u=this.end,d=t.end;Km.subVectors(u,o),Zm.subVectors(d,c),HM.subVectors(o,c);const g=Km.dot(Km),y=Zm.dot(Zm),_=Zm.dot(HM);if(g<=s&&y<=s)return e.copy(o),n.copy(c),e.sub(n),e.dot(e);if(g<=s)r=0,a=_/y,a=rn(a,0,1);else{const b=Km.dot(HM);if(y<=s)a=0,r=rn(-b/g,0,1);else{const M=Km.dot(Zm),S=g*y-M*M;S!==0?r=rn((M*_-b*y)/S,0,1):r=0,a=(M*r+_)/y,a<0?(a=0,r=rn(-b/g,0,1)):a>1&&(a=1,r=rn((M-b)/g,0,1))}}return e.copy(o).add(Km.multiplyScalar(r)),n.copy(c).add(Zm.multiplyScalar(a)),e.sub(n),e.dot(e)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const zN=new ot;class XK extends si{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new wn,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,c=32;a<c;a++,o++){const u=a/c*Math.PI*2,d=o/c*Math.PI*2;s.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new Ve(s,3));const r=new ka({fog:!1,toneMapped:!1});this.cone=new du(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),zN.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(zN),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const hf=new ot,bb=new ln,GM=new ln;class YK extends du{constructor(t){const e=pB(t),n=new wn,s=[],r=[];for(let u=0;u<e.length;u++){const d=e[u];d.parent&&d.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(0,0,0),r.push(0,0,0))}n.setAttribute("position",new Ve(s,3)),n.setAttribute("color",new Ve(r,3));const a=new ka({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,a),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;const o=new Pe(255),c=new Pe(65280);this.setColors(o,c)}updateMatrixWorld(t){const e=this.bones,n=this.geometry,s=n.getAttribute("position");GM.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<e.length;r++){const o=e[r];o.parent&&o.parent.isBone&&(bb.multiplyMatrices(GM,o.matrixWorld),hf.setFromMatrixPosition(bb),s.setXYZ(a,hf.x,hf.y,hf.z),bb.multiplyMatrices(GM,o.parent.matrixWorld),hf.setFromMatrixPosition(bb),s.setXYZ(a+1,hf.x,hf.y,hf.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}setColors(t,e){const s=this.geometry.getAttribute("color");for(let r=0;r<s.count;r+=2)s.setXYZ(r,t.r,t.g,t.b),s.setXYZ(r+1,e.r,e.g,e.b);return s.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function pB(i){const t=[];i.isBone===!0&&t.push(i);for(let e=0;e<i.children.length;e++)t.push(...pB(i.children[e]));return t}class KK extends ps{constructor(t,e,n){const s=new h_(e,4,2),r=new mh({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const ZK=new ot,FN=new Pe,VN=new Pe;class QK extends si{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new u_(e);s.rotateY(Math.PI*.5),this.material=new mh({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),a=new Float32Array(r.count*3);s.setAttribute("color",new Pi(a,3)),this.add(new ps(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");FN.copy(this.light.color),VN.copy(this.light.groundColor);for(let n=0,s=e.count;n<s;n++){const r=n<s/2?FN:VN;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(ZK.setFromMatrixPosition(this.light.matrixWorld).negate())}}class JK extends du{constructor(t=10,e=10,n=4473924,s=8947848){n=new Pe(n),s=new Pe(s);const r=e/2,a=t/e,o=t/2,c=[],u=[];for(let y=0,_=0,b=-o;y<=e;y++,b+=a){c.push(-o,0,b,o,0,b),c.push(b,0,-o,b,0,o);const M=y===r?n:s;M.toArray(u,_),_+=3,M.toArray(u,_),_+=3,M.toArray(u,_),_+=3,M.toArray(u,_),_+=3}const d=new wn;d.setAttribute("position",new Ve(c,3)),d.setAttribute("color",new Ve(u,3));const g=new ka({vertexColors:!0,toneMapped:!1});super(d,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class $K extends du{constructor(t=10,e=16,n=8,s=64,r=4473924,a=8947848){r=new Pe(r),a=new Pe(a);const o=[],c=[];if(e>1)for(let g=0;g<e;g++){const y=g/e*(Math.PI*2),_=Math.sin(y)*t,b=Math.cos(y)*t;o.push(0,0,0),o.push(_,0,b);const M=g&1?r:a;c.push(M.r,M.g,M.b),c.push(M.r,M.g,M.b)}for(let g=0;g<n;g++){const y=g&1?r:a,_=t-t/n*g;for(let b=0;b<s;b++){let M=b/s*(Math.PI*2),S=Math.sin(M)*_,E=Math.cos(M)*_;o.push(S,0,E),c.push(y.r,y.g,y.b),M=(b+1)/s*(Math.PI*2),S=Math.sin(M)*_,E=Math.cos(M)*_,o.push(S,0,E),c.push(y.r,y.g,y.b)}}const u=new wn;u.setAttribute("position",new Ve(o,3)),u.setAttribute("color",new Ve(c,3));const d=new ka({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const HN=new ot,Sb=new ot,GN=new ot;class tZ extends si{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let s=new wn;s.setAttribute("position",new Ve([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new ka({fog:!1,toneMapped:!1});this.lightPlane=new zf(s,r),this.add(this.lightPlane),s=new wn,s.setAttribute("position",new Ve([0,0,0,0,0,1],3)),this.targetLine=new zf(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),HN.setFromMatrixPosition(this.light.matrixWorld),Sb.setFromMatrixPosition(this.light.target.matrixWorld),GN.subVectors(Sb,HN),this.lightPlane.lookAt(Sb),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Sb),this.targetLine.scale.z=GN.length()}}const Eb=new ot,bs=new SE;class eZ extends du{constructor(t){const e=new wn,n=new ka({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(b,M){c(b),c(M)}function c(b){s.push(0,0,0),r.push(0,0,0),a[b]===void 0&&(a[b]=[]),a[b].push(s.length/3-1)}e.setAttribute("position",new Ve(s,3)),e.setAttribute("color",new Ve(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new Pe(16755200),d=new Pe(16711680),g=new Pe(43775),y=new Pe(16777215),_=new Pe(3355443);this.setColors(u,d,g,y,_)}setColors(t,e,n,s,r){const o=this.geometry.getAttribute("color");return o.setXYZ(0,t.r,t.g,t.b),o.setXYZ(1,t.r,t.g,t.b),o.setXYZ(2,t.r,t.g,t.b),o.setXYZ(3,t.r,t.g,t.b),o.setXYZ(4,t.r,t.g,t.b),o.setXYZ(5,t.r,t.g,t.b),o.setXYZ(6,t.r,t.g,t.b),o.setXYZ(7,t.r,t.g,t.b),o.setXYZ(8,t.r,t.g,t.b),o.setXYZ(9,t.r,t.g,t.b),o.setXYZ(10,t.r,t.g,t.b),o.setXYZ(11,t.r,t.g,t.b),o.setXYZ(12,t.r,t.g,t.b),o.setXYZ(13,t.r,t.g,t.b),o.setXYZ(14,t.r,t.g,t.b),o.setXYZ(15,t.r,t.g,t.b),o.setXYZ(16,t.r,t.g,t.b),o.setXYZ(17,t.r,t.g,t.b),o.setXYZ(18,t.r,t.g,t.b),o.setXYZ(19,t.r,t.g,t.b),o.setXYZ(20,t.r,t.g,t.b),o.setXYZ(21,t.r,t.g,t.b),o.setXYZ(22,t.r,t.g,t.b),o.setXYZ(23,t.r,t.g,t.b),o.setXYZ(24,e.r,e.g,e.b),o.setXYZ(25,e.r,e.g,e.b),o.setXYZ(26,e.r,e.g,e.b),o.setXYZ(27,e.r,e.g,e.b),o.setXYZ(28,e.r,e.g,e.b),o.setXYZ(29,e.r,e.g,e.b),o.setXYZ(30,e.r,e.g,e.b),o.setXYZ(31,e.r,e.g,e.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,s.r,s.g,s.b),o.setXYZ(39,s.r,s.g,s.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0,this}update(){const t=this.geometry,e=this.pointMap,n=1,s=1;let r,a;if(bs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)r=1,a=0;else if(this.camera.coordinateSystem===Vo)r=-1,a=1;else if(this.camera.coordinateSystem===Ng)r=0,a=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Cs("c",e,t,bs,0,0,r),Cs("t",e,t,bs,0,0,a),Cs("n1",e,t,bs,-n,-s,r),Cs("n2",e,t,bs,n,-s,r),Cs("n3",e,t,bs,-n,s,r),Cs("n4",e,t,bs,n,s,r),Cs("f1",e,t,bs,-n,-s,a),Cs("f2",e,t,bs,n,-s,a),Cs("f3",e,t,bs,-n,s,a),Cs("f4",e,t,bs,n,s,a),Cs("u1",e,t,bs,n*.7,s*1.1,r),Cs("u2",e,t,bs,-n*.7,s*1.1,r),Cs("u3",e,t,bs,0,s*2,r),Cs("cf1",e,t,bs,-n,0,a),Cs("cf2",e,t,bs,n,0,a),Cs("cf3",e,t,bs,0,-s,a),Cs("cf4",e,t,bs,0,s,a),Cs("cn1",e,t,bs,-n,0,r),Cs("cn2",e,t,bs,n,0,r),Cs("cn3",e,t,bs,0,-s,r),Cs("cn4",e,t,bs,0,s,r),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Cs(i,t,e,n,s,r,a){Eb.set(s,r,a).unproject(n);const o=t[i];if(o!==void 0){const c=e.getAttribute("position");for(let u=0,d=o.length;u<d;u++)c.setXYZ(o[u],Eb.x,Eb.y,Eb.z)}}const Tb=new _r;class nZ extends du{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(24),r=new wn;r.setIndex(new Pi(n,1)),r.setAttribute("position",new Pi(s,3)),super(r,new ka({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Tb.setFromObject(this.object),Tb.isEmpty())return;const t=Tb.min,e=Tb.max,n=this.geometry.attributes.position,s=n.array;s[0]=e.x,s[1]=e.y,s[2]=e.z,s[3]=t.x,s[4]=e.y,s[5]=e.z,s[6]=t.x,s[7]=t.y,s[8]=e.z,s[9]=e.x,s[10]=t.y,s[11]=e.z,s[12]=e.x,s[13]=e.y,s[14]=t.z,s[15]=t.x,s[16]=e.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=e.x,s[22]=t.y,s[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class iZ extends du{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new wn;r.setIndex(new Pi(n,1)),r.setAttribute("position",new Ve(s,3)),super(r,new ka({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class sZ extends zf{constructor(t,e=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new wn;a.setAttribute("position",new Ve(r,3)),a.computeBoundingSphere(),super(a,new ka({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new wn;c.setAttribute("position",new Ve(o,3)),c.computeBoundingSphere(),this.add(new ps(c,new mh({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const jN=new ot;let Mb,jM;class rZ extends si{constructor(t=new ot(0,0,1),e=new ot(0,0,0),n=1,s=16776960,r=n*.2,a=r*.2){super(),this.type="ArrowHelper",Mb===void 0&&(Mb=new wn,Mb.setAttribute("position",new Ve([0,0,0,0,1,0],3)),jM=new c_(.5,1,5,1),jM.translate(0,-.5,0)),this.position.copy(e),this.line=new zf(Mb,new ka({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ps(jM,new mh({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{jN.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(jN,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class aZ extends du{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new wn;s.setAttribute("position",new Ve(e,3)),s.setAttribute("color",new Ve(n,3));const r=new ka({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(t,e,n){const s=new Pe,r=this.geometry.attributes.color.array;return s.set(t),s.toArray(r,0),s.toArray(r,3),s.set(e),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oZ{constructor(){this.type="ShapePath",this.color=new Pe,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new R1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,s){return this.currentPath.quadraticCurveTo(t,e,n,s),this}bezierCurveTo(t,e,n,s,r,a){return this.currentPath.bezierCurveTo(t,e,n,s,r,a),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(E){const R=[];for(let N=0,P=E.length;N<P;N++){const k=E[N],z=new lp;z.curves=k.curves,R.push(z)}return R}function n(E,R){const N=R.length;let P=!1;for(let k=N-1,z=0;z<N;k=z++){let L=R[k],U=R[z],D=U.x-L.x,O=U.y-L.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(L=R[z],D=-D,U=R[k],O=-O),E.y<L.y||E.y>U.y)continue;if(E.y===L.y){if(E.x===L.x)return!0}else{const F=O*(E.x-L.x)-D*(E.y-L.y);if(F===0)return!0;if(F<0)continue;P=!P}}else{if(E.y!==L.y)continue;if(U.x<=E.x&&E.x<=L.x||L.x<=E.x&&E.x<=U.x)return!0}}return P}const s=tc.isClockWise,r=this.subPaths;if(r.length===0)return[];let a,o,c;const u=[];if(r.length===1)return o=r[0],c=new lp,c.curves=o.curves,u.push(c),u;let d=!s(r[0].getPoints());d=t?!d:d;const g=[],y=[];let _=[],b=0,M;y[b]=void 0,_[b]=[];for(let E=0,R=r.length;E<R;E++)o=r[E],M=o.getPoints(),a=s(M),a=t?!a:a,a?(!d&&y[b]&&b++,y[b]={s:new lp,p:M},y[b].s.curves=o.curves,d&&b++,_[b]=[]):_[b].push({h:o,p:M[0]});if(!y[0])return e(r);if(y.length>1){let E=!1,R=0;for(let N=0,P=y.length;N<P;N++)g[N]=[];for(let N=0,P=y.length;N<P;N++){const k=_[N];for(let z=0;z<k.length;z++){const L=k[z];let U=!0;for(let D=0;D<y.length;D++)n(L.p,y[D].p)&&(N!==D&&R++,U?(U=!1,g[D].push(L)):E=!0);U&&g[N].push(L)}}R>0&&E===!1&&(_=g)}let S;for(let E=0,R=y.length;E<R;E++){c=y[E].s,u.push(c),S=_[E];for(let N=0,P=S.length;N<P;N++)c.holes.push(S[N].h)}return u}}class lZ extends fu{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function cZ(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function uZ(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function hZ(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function _w(i,t,e,n){const s=fZ(n);switch(e){case X2:return i*t;case gE:return i*t/s.components*s.byteLength;case a_:return i*t/s.components*s.byteLength;case K2:return i*t*2/s.components*s.byteLength;case yE:return i*t*2/s.components*s.byteLength;case Y2:return i*t*3/s.components*s.byteLength;case aa:return i*t*4/s.components*s.byteLength;case vE:return i*t*4/s.components*s.byteLength;case Yy:case Ky:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case Zy:case Qy:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case QS:case $S:return Math.max(i,16)*Math.max(t,8)/4;case ZS:case JS:return Math.max(i,8)*Math.max(t,8)/2;case t1:case e1:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case n1:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case i1:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case s1:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case r1:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case a1:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case o1:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case l1:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case c1:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case u1:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case h1:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case f1:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case d1:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case p1:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case m1:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case g1:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case y1:case v1:case _1:return Math.ceil(i/4)*Math.ceil(t/4)*16;case x1:case b1:return Math.ceil(i/4)*Math.ceil(t/4)*8;case S1:case E1:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function fZ(i){switch(i){case yl:case G2:return{byteLength:1,components:1};case Rg:case j2:case Qg:return{byteLength:2,components:1};case pE:case mE:return{byteLength:2,components:4};case fh:case dE:case mo:return{byteLength:4,components:1};case W2:case q2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class dZ{static contain(t,e){return cZ(t,e)}static cover(t,e){return uZ(t,e)}static fill(t){return hZ(t)}static getByteLength(t,e,n,s){return _w(t,e,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:uE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=uE);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function mB(){let i=null,t=!1,e=null,n=null;function s(r,a){e(r,a),n=i.requestAnimationFrame(s)}return{start:function(){t!==!0&&e!==null&&(n=i.requestAnimationFrame(s),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){i=r}}}function pZ(i){const t=new WeakMap;function e(o,c){const u=o.array,d=o.usage,g=u.byteLength,y=i.createBuffer();i.bindBuffer(c,y),i.bufferData(c,u,d),o.onUploadCallback();let _;if(u instanceof Float32Array)_=i.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)_=i.HALF_FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?_=i.HALF_FLOAT:_=i.UNSIGNED_SHORT;else if(u instanceof Int16Array)_=i.SHORT;else if(u instanceof Uint32Array)_=i.UNSIGNED_INT;else if(u instanceof Int32Array)_=i.INT;else if(u instanceof Int8Array)_=i.BYTE;else if(u instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:y,type:_,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:g}}function n(o,c,u){const d=c.array,g=c.updateRanges;if(i.bindBuffer(u,o),g.length===0)i.bufferSubData(u,0,d);else{g.sort((_,b)=>_.start-b.start);let y=0;for(let _=1;_<g.length;_++){const b=g[y],M=g[_];M.start<=b.start+b.count+1?b.count=Math.max(b.count,M.start+M.count-b.start):(++y,g[y]=M)}g.length=y+1;for(let _=0,b=g.length;_<b;_++){const M=g[_];i.bufferSubData(u,M.start*d.BYTES_PER_ELEMENT,d,M.start,M.count)}c.clearUpdateRanges()}c.onUploadCallback()}function s(o){return o.isInterleavedBufferAttribute&&(o=o.data),t.get(o)}function r(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=t.get(o);c&&(i.deleteBuffer(c.buffer),t.delete(o))}function a(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const d=t.get(o);(!d||d.version<o.version)&&t.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=t.get(o);if(u===void 0)t.set(o,e(o,c));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,o,c),u.version=o.version}}return{get:s,remove:r,update:a}}var mZ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,gZ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,yZ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,vZ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_Z=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,xZ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,bZ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,SZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,EZ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,TZ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,MZ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,AZ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,wZ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,RZ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,CZ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,DZ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,IZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,NZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,OZ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,PZ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,UZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,LZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,kZ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,BZ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,zZ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,FZ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,VZ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,HZ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,GZ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,jZ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,WZ="gl_FragColor = linearToOutputTexel( gl_FragColor );",qZ=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,XZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,YZ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,KZ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ZZ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,QZ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,JZ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,$Z=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,tQ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,eQ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,nQ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,iQ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,sQ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rQ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,aQ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,oQ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,cQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,uQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,fQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,dQ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,pQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,mQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,gQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,yQ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,vQ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_Q=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xQ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,bQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,SQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,EQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,TQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,MQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,AQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,wQ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,RQ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,CQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,DQ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,IQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,NQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,OQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,PQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,UQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,LQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kQ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,BQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,zQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,FQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,VQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,HQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,GQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,jQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,WQ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,qQ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,XQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,YQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,KQ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ZQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,QQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,JQ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,$Q=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,tJ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,eJ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,nJ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,iJ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sJ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rJ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,aJ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,oJ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,lJ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,cJ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,dJ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const pJ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,mJ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_J=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,bJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,SJ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,EJ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,TJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,MJ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,AJ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,RJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,CJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,OJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,UJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,LJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BJ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,zJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VJ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,GJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jJ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qJ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,XJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mn={alphahash_fragment:mZ,alphahash_pars_fragment:gZ,alphamap_fragment:yZ,alphamap_pars_fragment:vZ,alphatest_fragment:_Z,alphatest_pars_fragment:xZ,aomap_fragment:bZ,aomap_pars_fragment:SZ,batching_pars_vertex:EZ,batching_vertex:TZ,begin_vertex:MZ,beginnormal_vertex:AZ,bsdfs:wZ,iridescence_fragment:RZ,bumpmap_pars_fragment:CZ,clipping_planes_fragment:DZ,clipping_planes_pars_fragment:IZ,clipping_planes_pars_vertex:NZ,clipping_planes_vertex:OZ,color_fragment:PZ,color_pars_fragment:UZ,color_pars_vertex:LZ,color_vertex:kZ,common:BZ,cube_uv_reflection_fragment:zZ,defaultnormal_vertex:FZ,displacementmap_pars_vertex:VZ,displacementmap_vertex:HZ,emissivemap_fragment:GZ,emissivemap_pars_fragment:jZ,colorspace_fragment:WZ,colorspace_pars_fragment:qZ,envmap_fragment:XZ,envmap_common_pars_fragment:YZ,envmap_pars_fragment:KZ,envmap_pars_vertex:ZZ,envmap_physical_pars_fragment:oQ,envmap_vertex:QZ,fog_vertex:JZ,fog_pars_vertex:$Z,fog_fragment:tQ,fog_pars_fragment:eQ,gradientmap_pars_fragment:nQ,lightmap_pars_fragment:iQ,lights_lambert_fragment:sQ,lights_lambert_pars_fragment:rQ,lights_pars_begin:aQ,lights_toon_fragment:lQ,lights_toon_pars_fragment:cQ,lights_phong_fragment:uQ,lights_phong_pars_fragment:hQ,lights_physical_fragment:fQ,lights_physical_pars_fragment:dQ,lights_fragment_begin:pQ,lights_fragment_maps:mQ,lights_fragment_end:gQ,logdepthbuf_fragment:yQ,logdepthbuf_pars_fragment:vQ,logdepthbuf_pars_vertex:_Q,logdepthbuf_vertex:xQ,map_fragment:bQ,map_pars_fragment:SQ,map_particle_fragment:EQ,map_particle_pars_fragment:TQ,metalnessmap_fragment:MQ,metalnessmap_pars_fragment:AQ,morphinstance_vertex:wQ,morphcolor_vertex:RQ,morphnormal_vertex:CQ,morphtarget_pars_vertex:DQ,morphtarget_vertex:IQ,normal_fragment_begin:NQ,normal_fragment_maps:OQ,normal_pars_fragment:PQ,normal_pars_vertex:UQ,normal_vertex:LQ,normalmap_pars_fragment:kQ,clearcoat_normal_fragment_begin:BQ,clearcoat_normal_fragment_maps:zQ,clearcoat_pars_fragment:FQ,iridescence_pars_fragment:VQ,opaque_fragment:HQ,packing:GQ,premultiplied_alpha_fragment:jQ,project_vertex:WQ,dithering_fragment:qQ,dithering_pars_fragment:XQ,roughnessmap_fragment:YQ,roughnessmap_pars_fragment:KQ,shadowmap_pars_fragment:ZQ,shadowmap_pars_vertex:QQ,shadowmap_vertex:JQ,shadowmask_pars_fragment:$Q,skinbase_vertex:tJ,skinning_pars_vertex:eJ,skinning_vertex:nJ,skinnormal_vertex:iJ,specularmap_fragment:sJ,specularmap_pars_fragment:rJ,tonemapping_fragment:aJ,tonemapping_pars_fragment:oJ,transmission_fragment:lJ,transmission_pars_fragment:cJ,uv_pars_fragment:uJ,uv_pars_vertex:hJ,uv_vertex:fJ,worldpos_vertex:dJ,background_vert:pJ,background_frag:mJ,backgroundCube_vert:gJ,backgroundCube_frag:yJ,cube_vert:vJ,cube_frag:_J,depth_vert:xJ,depth_frag:bJ,distanceRGBA_vert:SJ,distanceRGBA_frag:EJ,equirect_vert:TJ,equirect_frag:MJ,linedashed_vert:AJ,linedashed_frag:wJ,meshbasic_vert:RJ,meshbasic_frag:CJ,meshlambert_vert:DJ,meshlambert_frag:IJ,meshmatcap_vert:NJ,meshmatcap_frag:OJ,meshnormal_vert:PJ,meshnormal_frag:UJ,meshphong_vert:LJ,meshphong_frag:kJ,meshphysical_vert:BJ,meshphysical_frag:zJ,meshtoon_vert:FJ,meshtoon_frag:VJ,points_vert:HJ,points_frag:GJ,shadow_vert:jJ,shadow_frag:WJ,sprite_vert:qJ,sprite_frag:XJ},Oe={common:{diffuse:{value:new Pe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new _n}},envmap:{envMap:{value:null},envMapRotation:{value:new _n},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new _n}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new _n}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new _n},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new _n},normalScale:{value:new ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new _n},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new _n}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new _n}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new _n}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0},uvTransform:{value:new _n}},sprite:{diffuse:{value:new Pe(16777215)},opacity:{value:1},center:{value:new ce(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}}},Kl={basic:{uniforms:Pa([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.fog]),vertexShader:Mn.meshbasic_vert,fragmentShader:Mn.meshbasic_frag},lambert:{uniforms:Pa([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Pe(0)}}]),vertexShader:Mn.meshlambert_vert,fragmentShader:Mn.meshlambert_frag},phong:{uniforms:Pa([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Pe(0)},specular:{value:new Pe(1118481)},shininess:{value:30}}]),vertexShader:Mn.meshphong_vert,fragmentShader:Mn.meshphong_frag},standard:{uniforms:Pa([Oe.common,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.roughnessmap,Oe.metalnessmap,Oe.fog,Oe.lights,{emissive:{value:new Pe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag},toon:{uniforms:Pa([Oe.common,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.gradientmap,Oe.fog,Oe.lights,{emissive:{value:new Pe(0)}}]),vertexShader:Mn.meshtoon_vert,fragmentShader:Mn.meshtoon_frag},matcap:{uniforms:Pa([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,{matcap:{value:null}}]),vertexShader:Mn.meshmatcap_vert,fragmentShader:Mn.meshmatcap_frag},points:{uniforms:Pa([Oe.points,Oe.fog]),vertexShader:Mn.points_vert,fragmentShader:Mn.points_frag},dashed:{uniforms:Pa([Oe.common,Oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mn.linedashed_vert,fragmentShader:Mn.linedashed_frag},depth:{uniforms:Pa([Oe.common,Oe.displacementmap]),vertexShader:Mn.depth_vert,fragmentShader:Mn.depth_frag},normal:{uniforms:Pa([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,{opacity:{value:1}}]),vertexShader:Mn.meshnormal_vert,fragmentShader:Mn.meshnormal_frag},sprite:{uniforms:Pa([Oe.sprite,Oe.fog]),vertexShader:Mn.sprite_vert,fragmentShader:Mn.sprite_frag},background:{uniforms:{uvTransform:{value:new _n},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mn.background_vert,fragmentShader:Mn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new _n}},vertexShader:Mn.backgroundCube_vert,fragmentShader:Mn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mn.cube_vert,fragmentShader:Mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mn.equirect_vert,fragmentShader:Mn.equirect_frag},distanceRGBA:{uniforms:Pa([Oe.common,Oe.displacementmap,{referencePosition:{value:new ot},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mn.distanceRGBA_vert,fragmentShader:Mn.distanceRGBA_frag},shadow:{uniforms:Pa([Oe.lights,Oe.fog,{color:{value:new Pe(0)},opacity:{value:1}}]),vertexShader:Mn.shadow_vert,fragmentShader:Mn.shadow_frag}};Kl.physical={uniforms:Pa([Kl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new _n},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new _n},clearcoatNormalScale:{value:new ce(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new _n},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new _n},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new _n},sheen:{value:0},sheenColor:{value:new Pe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new _n},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new _n},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new _n},transmissionSamplerSize:{value:new ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new _n},attenuationDistance:{value:0},attenuationColor:{value:new Pe(0)},specularColor:{value:new Pe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new _n},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new _n},anisotropyVector:{value:new ce},anisotropyMap:{value:null},anisotropyMapTransform:{value:new _n}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag};const Ab={r:0,b:0,g:0},zd=new jo,YJ=new ln;function KJ(i,t,e,n,s,r,a){const o=new Pe(0);let c=r===!0?0:1,u,d,g=null,y=0,_=null;function b(N){let P=N.isScene===!0?N.background:null;return P&&P.isTexture&&(P=(N.backgroundBlurriness>0?e:t).get(P)),P}function M(N){let P=!1;const k=b(N);k===null?E(o,c):k&&k.isColor&&(E(k,1),P=!0);const z=i.xr.getEnvironmentBlendMode();z==="additive"?n.buffers.color.setClear(0,0,0,1,a):z==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||P)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function S(N,P){const k=b(P);k&&(k.isCubeTexture||k.mapping===Zg)?(d===void 0&&(d=new ps(new Op(1,1,1),new sc({name:"BackgroundCubeMaterial",uniforms:Ug(Kl.backgroundCube.uniforms),vertexShader:Kl.backgroundCube.vertexShader,fragmentShader:Kl.backgroundCube.fragmentShader,side:La,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(z,L,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(d)),zd.copy(P.backgroundRotation),zd.x*=-1,zd.y*=-1,zd.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(zd.y*=-1,zd.z*=-1),d.material.uniforms.envMap.value=k,d.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=P.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(YJ.makeRotationFromEuler(zd)),d.material.toneMapped=Xn.getTransfer(k.colorSpace)!==Mi,(g!==k||y!==k.version||_!==i.toneMapping)&&(d.material.needsUpdate=!0,g=k,y=k.version,_=i.toneMapping),d.layers.enableAll(),N.unshift(d,d.geometry,d.material,0,0,null)):k&&k.isTexture&&(u===void 0&&(u=new ps(new gh(2,2),new sc({name:"BackgroundMaterial",uniforms:Ug(Kl.background.uniforms),vertexShader:Kl.background.vertexShader,fragmentShader:Kl.background.fragmentShader,side:uh,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(u)),u.material.uniforms.t2D.value=k,u.material.uniforms.backgroundIntensity.value=P.backgroundIntensity,u.material.toneMapped=Xn.getTransfer(k.colorSpace)!==Mi,k.matrixAutoUpdate===!0&&k.updateMatrix(),u.material.uniforms.uvTransform.value.copy(k.matrix),(g!==k||y!==k.version||_!==i.toneMapping)&&(u.material.needsUpdate=!0,g=k,y=k.version,_=i.toneMapping),u.layers.enableAll(),N.unshift(u,u.geometry,u.material,0,0,null))}function E(N,P){N.getRGB(Ab,gk(i)),n.buffers.color.setClear(Ab.r,Ab.g,Ab.b,P,a)}function R(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(N,P=1){o.set(N),c=P,E(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(N){c=N,E(o,c)},render:M,addToRenderList:S,dispose:R}}function ZJ(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=y(null);let r=s,a=!1;function o(O,F,H,G,it){let lt=!1;const j=g(G,H,F);r!==j&&(r=j,u(r.object)),lt=_(O,G,H,it),lt&&b(O,G,H,it),it!==null&&t.update(it,i.ELEMENT_ARRAY_BUFFER),(lt||a)&&(a=!1,P(O,F,H,G),it!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(it).buffer))}function c(){return i.createVertexArray()}function u(O){return i.bindVertexArray(O)}function d(O){return i.deleteVertexArray(O)}function g(O,F,H){const G=H.wireframe===!0;let it=n[O.id];it===void 0&&(it={},n[O.id]=it);let lt=it[F.id];lt===void 0&&(lt={},it[F.id]=lt);let j=lt[G];return j===void 0&&(j=y(c()),lt[G]=j),j}function y(O){const F=[],H=[],G=[];for(let it=0;it<e;it++)F[it]=0,H[it]=0,G[it]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:H,attributeDivisors:G,object:O,attributes:{},index:null}}function _(O,F,H,G){const it=r.attributes,lt=F.attributes;let j=0;const J=H.getAttributes();for(const $ in J)if(J[$].location>=0){const Y=it[$];let Z=lt[$];if(Z===void 0&&($==="instanceMatrix"&&O.instanceMatrix&&(Z=O.instanceMatrix),$==="instanceColor"&&O.instanceColor&&(Z=O.instanceColor)),Y===void 0||Y.attribute!==Z||Z&&Y.data!==Z.data)return!0;j++}return r.attributesNum!==j||r.index!==G}function b(O,F,H,G){const it={},lt=F.attributes;let j=0;const J=H.getAttributes();for(const $ in J)if(J[$].location>=0){let Y=lt[$];Y===void 0&&($==="instanceMatrix"&&O.instanceMatrix&&(Y=O.instanceMatrix),$==="instanceColor"&&O.instanceColor&&(Y=O.instanceColor));const Z={};Z.attribute=Y,Y&&Y.data&&(Z.data=Y.data),it[$]=Z,j++}r.attributes=it,r.attributesNum=j,r.index=G}function M(){const O=r.newAttributes;for(let F=0,H=O.length;F<H;F++)O[F]=0}function S(O){E(O,0)}function E(O,F){const H=r.newAttributes,G=r.enabledAttributes,it=r.attributeDivisors;H[O]=1,G[O]===0&&(i.enableVertexAttribArray(O),G[O]=1),it[O]!==F&&(i.vertexAttribDivisor(O,F),it[O]=F)}function R(){const O=r.newAttributes,F=r.enabledAttributes;for(let H=0,G=F.length;H<G;H++)F[H]!==O[H]&&(i.disableVertexAttribArray(H),F[H]=0)}function N(O,F,H,G,it,lt,j){j===!0?i.vertexAttribIPointer(O,F,H,it,lt):i.vertexAttribPointer(O,F,H,G,it,lt)}function P(O,F,H,G){M();const it=G.attributes,lt=H.getAttributes(),j=F.defaultAttributeValues;for(const J in lt){const $=lt[J];if($.location>=0){let at=it[J];if(at===void 0&&(J==="instanceMatrix"&&O.instanceMatrix&&(at=O.instanceMatrix),J==="instanceColor"&&O.instanceColor&&(at=O.instanceColor)),at!==void 0){const Y=at.normalized,Z=at.itemSize,rt=t.get(at);if(rt===void 0)continue;const ft=rt.buffer,dt=rt.type,_t=rt.bytesPerElement,ut=dt===i.INT||dt===i.UNSIGNED_INT||at.gpuType===dE;if(at.isInterleavedBufferAttribute){const gt=at.data,Tt=gt.stride,$t=at.offset;if(gt.isInstancedInterleavedBuffer){for(let ae=0;ae<$.locationSize;ae++)E($.location+ae,gt.meshPerAttribute);O.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=gt.meshPerAttribute*gt.count)}else for(let ae=0;ae<$.locationSize;ae++)S($.location+ae);i.bindBuffer(i.ARRAY_BUFFER,ft);for(let ae=0;ae<$.locationSize;ae++)N($.location+ae,Z/$.locationSize,dt,Y,Tt*_t,($t+Z/$.locationSize*ae)*_t,ut)}else{if(at.isInstancedBufferAttribute){for(let gt=0;gt<$.locationSize;gt++)E($.location+gt,at.meshPerAttribute);O.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=at.meshPerAttribute*at.count)}else for(let gt=0;gt<$.locationSize;gt++)S($.location+gt);i.bindBuffer(i.ARRAY_BUFFER,ft);for(let gt=0;gt<$.locationSize;gt++)N($.location+gt,Z/$.locationSize,dt,Y,Z*_t,Z/$.locationSize*gt*_t,ut)}}else if(j!==void 0){const Y=j[J];if(Y!==void 0)switch(Y.length){case 2:i.vertexAttrib2fv($.location,Y);break;case 3:i.vertexAttrib3fv($.location,Y);break;case 4:i.vertexAttrib4fv($.location,Y);break;default:i.vertexAttrib1fv($.location,Y)}}}}R()}function k(){U();for(const O in n){const F=n[O];for(const H in F){const G=F[H];for(const it in G)d(G[it].object),delete G[it];delete F[H]}delete n[O]}}function z(O){if(n[O.id]===void 0)return;const F=n[O.id];for(const H in F){const G=F[H];for(const it in G)d(G[it].object),delete G[it];delete F[H]}delete n[O.id]}function L(O){for(const F in n){const H=n[F];if(H[O.id]===void 0)continue;const G=H[O.id];for(const it in G)d(G[it].object),delete G[it];delete H[O.id]}}function U(){D(),a=!0,r!==s&&(r=s,u(r.object))}function D(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:o,reset:U,resetDefaultState:D,dispose:k,releaseStatesOfGeometry:z,releaseStatesOfProgram:L,initAttributes:M,enableAttribute:S,disableUnusedAttributes:R}}function QJ(i,t,e){let n;function s(u){n=u}function r(u,d){i.drawArrays(n,u,d),e.update(d,n,1)}function a(u,d,g){g!==0&&(i.drawArraysInstanced(n,u,d,g),e.update(d,n,g))}function o(u,d,g){if(g===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,d,0,g);let _=0;for(let b=0;b<g;b++)_+=d[b];e.update(_,n,1)}function c(u,d,g,y){if(g===0)return;const _=t.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<u.length;b++)a(u[b],d[b],y[b]);else{_.multiDrawArraysInstancedWEBGL(n,u,0,d,0,y,0,g);let b=0;for(let M=0;M<g;M++)b+=d[M]*y[M];e.update(b,n,1)}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function JJ(i,t,e,n){let s;function r(){if(s!==void 0)return s;if(t.has("EXT_texture_filter_anisotropic")===!0){const L=t.get("EXT_texture_filter_anisotropic");s=i.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(L){return!(L!==aa&&n.convert(L)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(L){const U=L===Qg&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(L!==yl&&n.convert(L)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&L!==mo&&!U)}function c(L){if(L==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=e.precision!==void 0?e.precision:"highp";const d=c(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const g=e.logarithmicDepthBuffer===!0,y=e.reversedDepthBuffer===!0&&t.has("EXT_clip_control"),_=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),b=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=i.getParameter(i.MAX_TEXTURE_SIZE),S=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),E=i.getParameter(i.MAX_VERTEX_ATTRIBS),R=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),N=i.getParameter(i.MAX_VARYING_VECTORS),P=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),k=b>0,z=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:g,reversedDepthBuffer:y,maxTextures:_,maxVertexTextures:b,maxTextureSize:M,maxCubemapSize:S,maxAttributes:E,maxVertexUniforms:R,maxVaryings:N,maxFragmentUniforms:P,vertexTextures:k,maxSamples:z}}function $J(i){const t=this;let e=null,n=0,s=!1,r=!1;const a=new Xu,o=new _n,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,y){const _=g.length!==0||y||n!==0||s;return s=y,n=g.length,_},this.beginShadows=function(){r=!0,d(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(g,y){e=d(g,y,0)},this.setState=function(g,y,_){const b=g.clippingPlanes,M=g.clipIntersection,S=g.clipShadows,E=i.get(g);if(!s||b===null||b.length===0||r&&!S)r?d(null):u();else{const R=r?0:n,N=R*4;let P=E.clippingState||null;c.value=P,P=d(b,y,N,_);for(let k=0;k!==N;++k)P[k]=e[k];E.clippingState=P,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=R}};function u(){c.value!==e&&(c.value=e,c.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function d(g,y,_,b){const M=g!==null?g.length:0;let S=null;if(M!==0){if(S=c.value,b!==!0||S===null){const E=_+M*4,R=y.matrixWorldInverse;o.getNormalMatrix(R),(S===null||S.length<E)&&(S=new Float32Array(E));for(let N=0,P=_;N!==M;++N,P+=4)a.copy(g[N]).applyMatrix4(R,o),a.normal.toArray(S,P),S[P+3]=a.constant}c.value=S,c.needsUpdate=!0}return t.numPlanes=M,t.numIntersection=0,S}}function t$(i){let t=new WeakMap;function e(a,o){return o===_v?a.mapping=hh:o===xv&&(a.mapping=kf),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===_v||o===xv)if(t.has(a)){const c=t.get(a).texture;return e(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const u=new vk(c.height);return u.fromEquirectangularTexture(i,a),t.set(a,u),a.addEventListener("dispose",s),e(u.texture,a.mapping)}else return null}}return a}function s(a){const o=a.target;o.removeEventListener("dispose",s);const c=t.get(o);c!==void 0&&(t.delete(o),c.dispose())}function r(){t=new WeakMap}return{get:n,dispose:r}}const dg=4,WN=[.125,.215,.35,.446,.526,.582],Jd=20,WM=new Rf,qN=new Pe;let qM=null,XM=0,YM=0,KM=!1;const Kd=(1+Math.sqrt(5))/2,Qm=1/Kd,XN=[new ot(-Kd,Qm,0),new ot(Kd,Qm,0),new ot(-Qm,0,Kd),new ot(Qm,0,Kd),new ot(0,Kd,-Qm),new ot(0,Kd,Qm),new ot(-1,1,-1),new ot(1,1,-1),new ot(-1,1,1),new ot(1,1,1)],e$=new ot;class xw{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,s=100,r={}){const{size:a=256,position:o=e$}=r;qM=this._renderer.getRenderTarget(),XM=this._renderer.getActiveCubeFace(),YM=this._renderer.getActiveMipmapLevel(),KM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(t,n,s,c,o),e>0&&this._blur(c,0,0,e),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ZN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=KN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(qM,XM,YM),this._renderer.xr.enabled=KM,t.scissorTest=!1,wb(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===hh||t.mapping===kf?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),qM=this._renderer.getRenderTarget(),XM=this._renderer.getActiveCubeFace(),YM=this._renderer.getActiveMipmapLevel(),KM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Ns,minFilter:Ns,generateMipmaps:!1,type:Qg,format:aa,colorSpace:Bf,depthBuffer:!1},s=YN(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=YN(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=n$(r)),this._blurMaterial=i$(r,t,e)}return s}_compileMaterial(t){const e=new ps(this._lodPlanes[0],t);this._renderer.compile(e,WM)}_sceneToCubeUV(t,e,n,s,r){const c=new Is(90,1,e,n),u=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],g=this._renderer,y=g.autoClear,_=g.toneMapping;g.getClearColor(qN),g.toneMapping=nu,g.autoClear=!1,g.state.buffers.depth.getReversed()&&(g.setRenderTarget(s),g.clearDepth(),g.setRenderTarget(null));const M=new mh({name:"PMREM.Background",side:La,depthWrite:!1,depthTest:!1}),S=new ps(new Op,M);let E=!1;const R=t.background;R?R.isColor&&(M.color.copy(R),t.background=null,E=!0):(M.color.copy(qN),E=!0);for(let N=0;N<6;N++){const P=N%3;P===0?(c.up.set(0,u[N],0),c.position.set(r.x,r.y,r.z),c.lookAt(r.x+d[N],r.y,r.z)):P===1?(c.up.set(0,0,u[N]),c.position.set(r.x,r.y,r.z),c.lookAt(r.x,r.y+d[N],r.z)):(c.up.set(0,u[N],0),c.position.set(r.x,r.y,r.z),c.lookAt(r.x,r.y,r.z+d[N]));const k=this._cubeSize;wb(s,P*k,N>2?k:0,k,k),g.setRenderTarget(s),E&&g.render(S,c),g.render(t,c)}S.geometry.dispose(),S.material.dispose(),g.toneMapping=_,g.autoClear=y,t.background=R}_textureToCubeUV(t,e){const n=this._renderer,s=t.mapping===hh||t.mapping===kf;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=ZN()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=KN());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new ps(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=t;const c=this._cubeSize;wb(e,0,0,3*c,2*c),n.setRenderTarget(e),n.render(a,WM)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=XN[(s-r-1)%XN.length];this._blur(t,r-1,r,a,o)}e.autoClear=n}_blur(t,e,n,s,r){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,s,"latitudinal",r),this._halfBlur(a,t,n,n,s,"longitudinal",r)}_halfBlur(t,e,n,s,r,a,o){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,g=new ps(this._lodPlanes[s],u),y=u.uniforms,_=this._sizeLods[n]-1,b=isFinite(r)?Math.PI/(2*_):2*Math.PI/(2*Jd-1),M=r/b,S=isFinite(r)?1+Math.floor(d*M):Jd;S>Jd&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Jd}`);const E=[];let R=0;for(let L=0;L<Jd;++L){const U=L/M,D=Math.exp(-U*U/2);E.push(D),L===0?R+=D:L<S&&(R+=2*D)}for(let L=0;L<E.length;L++)E[L]=E[L]/R;y.envMap.value=t.texture,y.samples.value=S,y.weights.value=E,y.latitudinal.value=a==="latitudinal",o&&(y.poleAxis.value=o);const{_lodMax:N}=this;y.dTheta.value=b,y.mipInt.value=N-n;const P=this._sizeLods[s],k=3*P*(s>N-dg?s-N+dg:0),z=4*(this._cubeSize-P);wb(e,k,z,3*P,2*P),c.setRenderTarget(e),c.render(g,WM)}}function n$(i){const t=[],e=[],n=[];let s=i;const r=i-dg+1+WN.length;for(let a=0;a<r;a++){const o=Math.pow(2,s);e.push(o);let c=1/o;a>i-dg?c=WN[a-i+dg-1]:a===0&&(c=0),n.push(c);const u=1/(o-2),d=-u,g=1+u,y=[d,d,g,d,g,g,d,d,g,g,d,g],_=6,b=6,M=3,S=2,E=1,R=new Float32Array(M*b*_),N=new Float32Array(S*b*_),P=new Float32Array(E*b*_);for(let z=0;z<_;z++){const L=z%3*2/3-1,U=z>2?0:-1,D=[L,U,0,L+2/3,U,0,L+2/3,U+1,0,L,U,0,L+2/3,U+1,0,L,U+1,0];R.set(D,M*b*z),N.set(y,S*b*z);const O=[z,z,z,z,z,z];P.set(O,E*b*z)}const k=new wn;k.setAttribute("position",new Pi(R,M)),k.setAttribute("uv",new Pi(N,S)),k.setAttribute("faceIndex",new Pi(P,E)),t.push(k),s>dg&&s--}return{lodPlanes:t,sizeLods:e,sigmas:n}}function YN(i,t,e){const n=new lu(i,t,e);return n.texture.mapping=Zg,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function wb(i,t,e,n,s){i.viewport.set(t,e,n,s),i.scissor.set(t,e,n,s)}function i$(i,t,e){const n=new Float32Array(Jd),s=new ot(0,1,0);return new sc({name:"SphericalGaussianBlur",defines:{n:Jd,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:CR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ih,depthTest:!1,depthWrite:!1})}function KN(){return new sc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:CR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ih,depthTest:!1,depthWrite:!1})}function ZN(){return new sc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:CR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ih,depthTest:!1,depthWrite:!1})}function CR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function s$(i){let t=new WeakMap,e=null;function n(o){if(o&&o.isTexture){const c=o.mapping,u=c===_v||c===xv,d=c===hh||c===kf;if(u||d){let g=t.get(o);const y=g!==void 0?g.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==y)return e===null&&(e=new xw(i)),g=u?e.fromEquirectangular(o,g):e.fromCubemap(o,g),g.texture.pmremVersion=o.pmremVersion,t.set(o,g),g.texture;if(g!==void 0)return g.texture;{const _=o.image;return u&&_&&_.height>0||d&&_&&s(_)?(e===null&&(e=new xw(i)),g=u?e.fromEquirectangular(o):e.fromCubemap(o),g.texture.pmremVersion=o.pmremVersion,t.set(o,g),o.addEventListener("dispose",r),g.texture):null}}}return o}function s(o){let c=0;const u=6;for(let d=0;d<u;d++)o[d]!==void 0&&c++;return c===u}function r(o){const c=o.target;c.removeEventListener("dispose",r);const u=t.get(c);u!==void 0&&(t.delete(c),u.dispose())}function a(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:a}}function r$(i){const t={};function e(n){if(t[n]!==void 0)return t[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return t[n]=s,s}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const s=e(n);return s===null&&Rv("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function a$(i,t,e,n){const s={},r=new WeakMap;function a(g){const y=g.target;y.index!==null&&t.remove(y.index);for(const b in y.attributes)t.remove(y.attributes[b]);y.removeEventListener("dispose",a),delete s[y.id];const _=r.get(y);_&&(t.remove(_),r.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,e.memory.geometries--}function o(g,y){return s[y.id]===!0||(y.addEventListener("dispose",a),s[y.id]=!0,e.memory.geometries++),y}function c(g){const y=g.attributes;for(const _ in y)t.update(y[_],i.ARRAY_BUFFER)}function u(g){const y=[],_=g.index,b=g.attributes.position;let M=0;if(_!==null){const R=_.array;M=_.version;for(let N=0,P=R.length;N<P;N+=3){const k=R[N+0],z=R[N+1],L=R[N+2];y.push(k,z,z,L,L,k)}}else if(b!==void 0){const R=b.array;M=b.version;for(let N=0,P=R.length/3-1;N<P;N+=3){const k=N+0,z=N+1,L=N+2;y.push(k,z,z,L,L,k)}}else return;const S=new(fk(y)?nR:eR)(y,1);S.version=M;const E=r.get(g);E&&t.remove(E),r.set(g,S)}function d(g){const y=r.get(g);if(y){const _=g.index;_!==null&&y.version<_.version&&u(g)}else u(g);return r.get(g)}return{get:o,update:c,getWireframeAttribute:d}}function o$(i,t,e){let n;function s(y){n=y}let r,a;function o(y){r=y.type,a=y.bytesPerElement}function c(y,_){i.drawElements(n,_,r,y*a),e.update(_,n,1)}function u(y,_,b){b!==0&&(i.drawElementsInstanced(n,_,r,y*a,b),e.update(_,n,b))}function d(y,_,b){if(b===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,r,y,0,b);let S=0;for(let E=0;E<b;E++)S+=_[E];e.update(S,n,1)}function g(y,_,b,M){if(b===0)return;const S=t.get("WEBGL_multi_draw");if(S===null)for(let E=0;E<y.length;E++)u(y[E]/a,_[E],M[E]);else{S.multiDrawElementsInstancedWEBGL(n,_,0,r,y,0,M,0,b);let E=0;for(let R=0;R<b;R++)E+=_[R]*M[R];e.update(E,n,1)}}this.setMode=s,this.setIndex=o,this.render=c,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=g}function l$(i){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,o){switch(e.calls++,a){case i.TRIANGLES:e.triangles+=o*(r/3);break;case i.LINES:e.lines+=o*(r/2);break;case i.LINE_STRIP:e.lines+=o*(r-1);break;case i.LINE_LOOP:e.lines+=o*r;break;case i.POINTS:e.points+=o*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:s,update:n}}function c$(i,t,e){const n=new WeakMap,s=new Yn;function r(a,o,c){const u=a.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,g=d!==void 0?d.length:0;let y=n.get(o);if(y===void 0||y.count!==g){let O=function(){U.dispose(),n.delete(o),o.removeEventListener("dispose",O)};var _=O;y!==void 0&&y.texture.dispose();const b=o.morphAttributes.position!==void 0,M=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,E=o.morphAttributes.position||[],R=o.morphAttributes.normal||[],N=o.morphAttributes.color||[];let P=0;b===!0&&(P=1),M===!0&&(P=2),S===!0&&(P=3);let k=o.attributes.position.count*P,z=1;k>t.maxTextureSize&&(z=Math.ceil(k/t.maxTextureSize),k=t.maxTextureSize);const L=new Float32Array(k*z*4*g),U=new xE(L,k,z,g);U.type=mo,U.needsUpdate=!0;const D=P*4;for(let F=0;F<g;F++){const H=E[F],G=R[F],it=N[F],lt=k*z*4*F;for(let j=0;j<H.count;j++){const J=j*D;b===!0&&(s.fromBufferAttribute(H,j),L[lt+J+0]=s.x,L[lt+J+1]=s.y,L[lt+J+2]=s.z,L[lt+J+3]=0),M===!0&&(s.fromBufferAttribute(G,j),L[lt+J+4]=s.x,L[lt+J+5]=s.y,L[lt+J+6]=s.z,L[lt+J+7]=0),S===!0&&(s.fromBufferAttribute(it,j),L[lt+J+8]=s.x,L[lt+J+9]=s.y,L[lt+J+10]=s.z,L[lt+J+11]=it.itemSize===4?s.w:1)}}y={count:g,texture:U,size:new ce(k,z)},n.set(o,y),o.addEventListener("dispose",O)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(i,"morphTexture",a.morphTexture,e);else{let b=0;for(let S=0;S<u.length;S++)b+=u[S];const M=o.morphTargetsRelative?1:1-b;c.getUniforms().setValue(i,"morphTargetBaseInfluence",M),c.getUniforms().setValue(i,"morphTargetInfluences",u)}c.getUniforms().setValue(i,"morphTargetsTexture",y.texture,e),c.getUniforms().setValue(i,"morphTargetsTextureSize",y.size)}return{update:r}}function u$(i,t,e,n){let s=new WeakMap;function r(c){const u=n.render.frame,d=c.geometry,g=t.get(c,d);if(s.get(g)!==u&&(t.update(g),s.set(g,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),s.get(c)!==u&&(e.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&e.update(c.instanceColor,i.ARRAY_BUFFER),s.set(c,u))),c.isSkinnedMesh){const y=c.skeleton;s.get(y)!==u&&(y.update(),s.set(y,u))}return g}function a(){s=new WeakMap}function o(c){const u=c.target;u.removeEventListener("dispose",o),e.remove(u.instanceMatrix),u.instanceColor!==null&&e.remove(u.instanceColor)}return{update:r,dispose:a}}const gB=new ms,QN=new lR(1,1),yB=new xE,vB=new bE,_B=new o_,JN=[],$N=[],t3=new Float32Array(16),e3=new Float32Array(9),n3=new Float32Array(4);function $g(i,t,e){const n=i[0];if(n<=0||n>0)return i;const s=t*e;let r=JN[s];if(r===void 0&&(r=new Float32Array(s),JN[s]=r),t!==0){n.toArray(r,0);for(let a=1,o=0;a!==t;++a)o+=e,i[a].toArray(r,o)}return r}function rr(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function ar(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function WE(i,t){let e=$N[t];e===void 0&&(e=new Int32Array(t),$N[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function h$(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function f$(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(rr(e,t))return;i.uniform2fv(this.addr,t),ar(e,t)}}function d$(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(rr(e,t))return;i.uniform3fv(this.addr,t),ar(e,t)}}function p$(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(rr(e,t))return;i.uniform4fv(this.addr,t),ar(e,t)}}function m$(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(rr(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),ar(e,t)}else{if(rr(e,n))return;n3.set(n),i.uniformMatrix2fv(this.addr,!1,n3),ar(e,n)}}function g$(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(rr(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),ar(e,t)}else{if(rr(e,n))return;e3.set(n),i.uniformMatrix3fv(this.addr,!1,e3),ar(e,n)}}function y$(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(rr(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),ar(e,t)}else{if(rr(e,n))return;t3.set(n),i.uniformMatrix4fv(this.addr,!1,t3),ar(e,n)}}function v$(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function _$(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(rr(e,t))return;i.uniform2iv(this.addr,t),ar(e,t)}}function x$(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(rr(e,t))return;i.uniform3iv(this.addr,t),ar(e,t)}}function b$(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(rr(e,t))return;i.uniform4iv(this.addr,t),ar(e,t)}}function S$(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function E$(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(rr(e,t))return;i.uniform2uiv(this.addr,t),ar(e,t)}}function T$(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(rr(e,t))return;i.uniform3uiv(this.addr,t),ar(e,t)}}function M$(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(rr(e,t))return;i.uniform4uiv(this.addr,t),ar(e,t)}}function A$(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(QN.compareFunction=J2,r=QN):r=gB,e.setTexture2D(t||r,s)}function w$(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture3D(t||vB,s)}function R$(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTextureCube(t||_B,s)}function C$(i,t,e){const n=this.cache,s=e.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),e.setTexture2DArray(t||yB,s)}function D$(i){switch(i){case 5126:return h$;case 35664:return f$;case 35665:return d$;case 35666:return p$;case 35674:return m$;case 35675:return g$;case 35676:return y$;case 5124:case 35670:return v$;case 35667:case 35671:return _$;case 35668:case 35672:return x$;case 35669:case 35673:return b$;case 5125:return S$;case 36294:return E$;case 36295:return T$;case 36296:return M$;case 35678:case 36198:case 36298:case 36306:case 35682:return A$;case 35679:case 36299:case 36307:return w$;case 35680:case 36300:case 36308:case 36293:return R$;case 36289:case 36303:case 36311:case 36292:return C$}}function I$(i,t){i.uniform1fv(this.addr,t)}function N$(i,t){const e=$g(t,this.size,2);i.uniform2fv(this.addr,e)}function O$(i,t){const e=$g(t,this.size,3);i.uniform3fv(this.addr,e)}function P$(i,t){const e=$g(t,this.size,4);i.uniform4fv(this.addr,e)}function U$(i,t){const e=$g(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function L$(i,t){const e=$g(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function k$(i,t){const e=$g(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function B$(i,t){i.uniform1iv(this.addr,t)}function z$(i,t){i.uniform2iv(this.addr,t)}function F$(i,t){i.uniform3iv(this.addr,t)}function V$(i,t){i.uniform4iv(this.addr,t)}function H$(i,t){i.uniform1uiv(this.addr,t)}function G$(i,t){i.uniform2uiv(this.addr,t)}function j$(i,t){i.uniform3uiv(this.addr,t)}function W$(i,t){i.uniform4uiv(this.addr,t)}function q$(i,t,e){const n=this.cache,s=t.length,r=WE(e,s);rr(n,r)||(i.uniform1iv(this.addr,r),ar(n,r));for(let a=0;a!==s;++a)e.setTexture2D(t[a]||gB,r[a])}function X$(i,t,e){const n=this.cache,s=t.length,r=WE(e,s);rr(n,r)||(i.uniform1iv(this.addr,r),ar(n,r));for(let a=0;a!==s;++a)e.setTexture3D(t[a]||vB,r[a])}function Y$(i,t,e){const n=this.cache,s=t.length,r=WE(e,s);rr(n,r)||(i.uniform1iv(this.addr,r),ar(n,r));for(let a=0;a!==s;++a)e.setTextureCube(t[a]||_B,r[a])}function K$(i,t,e){const n=this.cache,s=t.length,r=WE(e,s);rr(n,r)||(i.uniform1iv(this.addr,r),ar(n,r));for(let a=0;a!==s;++a)e.setTexture2DArray(t[a]||yB,r[a])}function Z$(i){switch(i){case 5126:return I$;case 35664:return N$;case 35665:return O$;case 35666:return P$;case 35674:return U$;case 35675:return L$;case 35676:return k$;case 5124:case 35670:return B$;case 35667:case 35671:return z$;case 35668:case 35672:return F$;case 35669:case 35673:return V$;case 5125:return H$;case 36294:return G$;case 36295:return j$;case 36296:return W$;case 35678:case 36198:case 36298:case 36306:case 35682:return q$;case 35679:case 36299:case 36307:return X$;case 35680:case 36300:case 36308:case 36293:return Y$;case 36289:case 36303:case 36311:case 36292:return K$}}class Q${constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=D$(e.type)}}class J${constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=Z$(e.type)}}class $${constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const o=s[r];o.setValue(t,e[o.id],n)}}}const ZM=/(\w+)(\])?(\[|\.)?/g;function i3(i,t){i.seq.push(t),i.map[t.id]=t}function ttt(i,t,e){const n=i.name,s=n.length;for(ZM.lastIndex=0;;){const r=ZM.exec(n),a=ZM.lastIndex;let o=r[1];const c=r[2]==="]",u=r[3];if(c&&(o=o|0),u===void 0||u==="["&&a+2===s){i3(e,u===void 0?new Q$(o,i,t):new J$(o,i,t));break}else{let g=e.map[o];g===void 0&&(g=new $$(o),i3(e,g)),e=g}}}class uS{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=t.getActiveUniform(e,s),a=t.getUniformLocation(e,r.name);ttt(r,a,this)}}setValue(t,e,n,s){const r=this.map[e];r!==void 0&&r.setValue(t,n,s)}setOptional(t,e,n){const s=e[n];s!==void 0&&this.setValue(t,n,s)}static upload(t,e,n,s){for(let r=0,a=e.length;r!==a;++r){const o=e[r],c=n[o.id];c.needsUpdate!==!1&&o.setValue(t,c.value,s)}}static seqWithValue(t,e){const n=[];for(let s=0,r=t.length;s!==r;++s){const a=t[s];a.id in e&&n.push(a)}return n}}function s3(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const ett=37297;let ntt=0;function itt(i,t){const e=i.split(`
`),n=[],s=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let a=s;a<r;a++){const o=a+1;n.push(`${o===t?">":" "} ${o}: ${e[a]}`)}return n.join(`
`)}const r3=new _n;function stt(i){Xn._getMatrix(r3,Xn.workingColorSpace,i);const t=`mat3( ${r3.elements.map(e=>e.toFixed(4))} )`;switch(Xn.getTransfer(i)){case Mv:return[t,"LinearTransferOETF"];case Mi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}function a3(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),r=(i.getShaderInfoLog(t)||"").trim();if(n&&r==="")return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const o=parseInt(a[1]);return e.toUpperCase()+`

`+r+`

`+itt(i.getShaderSource(t),o)}else return r}function rtt(i,t){const e=stt(t);return[`vec4 ${i}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function att(i,t){let e;switch(t){case X4:e="Linear";break;case Y4:e="Reinhard";break;case K4:e="Cineon";break;case V2:e="ACESFilmic";break;case Q4:e="AgX";break;case J4:e="Neutral";break;case Z4:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const Rb=new ot;function ott(){Xn.getLuminanceCoefficients(Rb);const i=Rb.x.toFixed(4),t=Rb.y.toFixed(4),e=Rb.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function ltt(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Oy).join(`
`)}function ctt(i){const t=[];for(const e in i){const n=i[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function utt(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(t,s),a=r.name;let o=1;r.type===i.FLOAT_MAT2&&(o=2),r.type===i.FLOAT_MAT3&&(o=3),r.type===i.FLOAT_MAT4&&(o=4),e[a]={type:r.type,location:i.getAttribLocation(t,a),locationSize:o}}return e}function Oy(i){return i!==""}function o3(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function l3(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const htt=/^[ \t]*#include +<([\w\d./]+)>/gm;function bw(i){return i.replace(htt,dtt)}const ftt=new Map;function dtt(i,t){let e=Mn[t];if(e===void 0){const n=ftt.get(t);if(n!==void 0)e=Mn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return bw(e)}const ptt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function c3(i){return i.replace(ptt,mtt)}function mtt(i,t,e,n){let s="";for(let r=parseInt(t);r<parseInt(e);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function u3(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function gtt(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===hE?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===qy?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Xl&&(t="SHADOWMAP_TYPE_VSM"),t}function ytt(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case hh:case kf:t="ENVMAP_TYPE_CUBE";break;case Zg:t="ENVMAP_TYPE_CUBE_UV";break}return t}function vtt(i){let t="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case kf:t="ENVMAP_MODE_REFRACTION";break}return t}function _tt(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case r_:t="ENVMAP_BLENDING_MULTIPLY";break;case W4:t="ENVMAP_BLENDING_MIX";break;case q4:t="ENVMAP_BLENDING_ADD";break}return t}function xtt(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}function btt(i,t,e,n){const s=i.getContext(),r=e.defines;let a=e.vertexShader,o=e.fragmentShader;const c=gtt(e),u=ytt(e),d=vtt(e),g=_tt(e),y=xtt(e),_=ltt(e),b=ctt(r),M=s.createProgram();let S,E,R=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(S=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(Oy).join(`
`),S.length>0&&(S+=`
`),E=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(Oy).join(`
`),E.length>0&&(E+=`
`)):(S=[u3(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Oy).join(`
`),E=[u3(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.envMap?"#define "+d:"",e.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==nu?"#define TONE_MAPPING":"",e.toneMapping!==nu?Mn.tonemapping_pars_fragment:"",e.toneMapping!==nu?att("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Mn.colorspace_pars_fragment,rtt("linearToOutputTexel",e.outputColorSpace),ott(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(Oy).join(`
`)),a=bw(a),a=o3(a,e),a=l3(a,e),o=bw(o),o=o3(o,e),o=l3(o,e),a=c3(a),o=c3(o),e.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,S=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,E=["#define varying in",e.glslVersion===hw?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===hw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const N=R+S+a,P=R+E+o,k=s3(s,s.VERTEX_SHADER,N),z=s3(s,s.FRAGMENT_SHADER,P);s.attachShader(M,k),s.attachShader(M,z),e.index0AttributeName!==void 0?s.bindAttribLocation(M,0,e.index0AttributeName):e.morphTargets===!0&&s.bindAttribLocation(M,0,"position"),s.linkProgram(M);function L(F){if(i.debug.checkShaderErrors){const H=s.getProgramInfoLog(M)||"",G=s.getShaderInfoLog(k)||"",it=s.getShaderInfoLog(z)||"",lt=H.trim(),j=G.trim(),J=it.trim();let $=!0,at=!0;if(s.getProgramParameter(M,s.LINK_STATUS)===!1)if($=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,M,k,z);else{const Y=a3(s,k,"vertex"),Z=a3(s,z,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(M,s.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+lt+`
`+Y+`
`+Z)}else lt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",lt):(j===""||J==="")&&(at=!1);at&&(F.diagnostics={runnable:$,programLog:lt,vertexShader:{log:j,prefix:S},fragmentShader:{log:J,prefix:E}})}s.deleteShader(k),s.deleteShader(z),U=new uS(s,M),D=utt(s,M)}let U;this.getUniforms=function(){return U===void 0&&L(this),U};let D;this.getAttributes=function(){return D===void 0&&L(this),D};let O=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=s.getProgramParameter(M,ett)),O},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(M),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=ntt++,this.cacheKey=t,this.usedTimes=1,this.program=M,this.vertexShader=k,this.fragmentShader=z,this}let Stt=0;class Ett{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,s=this._getShaderStage(e),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(t);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new Ttt(t),e.set(t,n)),n}}class Ttt{constructor(t){this.id=Stt++,this.code=t,this.usedTimes=0}}function Mtt(i,t,e,n,s,r,a){const o=new Pg,c=new Ett,u=new Set,d=[],g=s.logarithmicDepthBuffer,y=s.vertexTextures;let _=s.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(D){return u.add(D),D===0?"uv":`uv${D}`}function S(D,O,F,H,G){const it=H.fog,lt=G.geometry,j=D.isMeshStandardMaterial?H.environment:null,J=(D.isMeshStandardMaterial?e:t).get(D.envMap||j),$=J&&J.mapping===Zg?J.image.height:null,at=b[D.type];D.precision!==null&&(_=s.getMaxPrecision(D.precision),_!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",_,"instead."));const Y=lt.morphAttributes.position||lt.morphAttributes.normal||lt.morphAttributes.color,Z=Y!==void 0?Y.length:0;let rt=0;lt.morphAttributes.position!==void 0&&(rt=1),lt.morphAttributes.normal!==void 0&&(rt=2),lt.morphAttributes.color!==void 0&&(rt=3);let ft,dt,_t,ut;if(at){const Ie=Kl[at];ft=Ie.vertexShader,dt=Ie.fragmentShader}else ft=D.vertexShader,dt=D.fragmentShader,c.update(D),_t=c.getVertexShaderID(D),ut=c.getFragmentShaderID(D);const gt=i.getRenderTarget(),Tt=i.state.buffers.depth.getReversed(),$t=G.isInstancedMesh===!0,ae=G.isBatchedMesh===!0,ne=!!D.map,ee=!!D.matcap,ct=!!J,Gt=!!D.aoMap,zt=!!D.lightMap,Pt=!!D.bumpMap,Ct=!!D.normalMap,Bt=!!D.displacementMap,Dt=!!D.emissiveMap,Ut=!!D.metalnessMap,Nt=!!D.roughnessMap,ge=D.anisotropy>0,Q=D.clearcoat>0,K=D.dispersion>0,mt=D.iridescence>0,Lt=D.sheen>0,Rt=D.transmission>0,At=ge&&!!D.anisotropyMap,oe=Q&&!!D.clearcoatMap,le=Q&&!!D.clearcoatNormalMap,ve=Q&&!!D.clearcoatRoughnessMap,be=mt&&!!D.iridescenceMap,Xt=mt&&!!D.iridescenceThicknessMap,te=Lt&&!!D.sheenColorMap,re=Lt&&!!D.sheenRoughnessMap,ht=!!D.specularMap,wt=!!D.specularColorMap,de=!!D.specularIntensityMap,pt=Rt&&!!D.transmissionMap,Ft=Rt&&!!D.thicknessMap,ie=!!D.gradientMap,ye=!!D.alphaMap,se=D.alphaTest>0,jt=!!D.alphaHash,xe=!!D.extensions;let we=nu;D.toneMapped&&(gt===null||gt.isXRRenderTarget===!0)&&(we=i.toneMapping);const Ce={shaderID:at,shaderType:D.type,shaderName:D.name,vertexShader:ft,fragmentShader:dt,defines:D.defines,customVertexShaderID:_t,customFragmentShaderID:ut,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:_,batching:ae,batchingColor:ae&&G._colorsTexture!==null,instancing:$t,instancingColor:$t&&G.instanceColor!==null,instancingMorph:$t&&G.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:gt===null?i.outputColorSpace:gt.isXRRenderTarget===!0?gt.texture.colorSpace:Bf,alphaToCoverage:!!D.alphaToCoverage,map:ne,matcap:ee,envMap:ct,envMapMode:ct&&J.mapping,envMapCubeUVHeight:$,aoMap:Gt,lightMap:zt,bumpMap:Pt,normalMap:Ct,displacementMap:y&&Bt,emissiveMap:Dt,normalMapObjectSpace:Ct&&D.normalMapType===sk,normalMapTangentSpace:Ct&&D.normalMapType===Gf,metalnessMap:Ut,roughnessMap:Nt,anisotropy:ge,anisotropyMap:At,clearcoat:Q,clearcoatMap:oe,clearcoatNormalMap:le,clearcoatRoughnessMap:ve,dispersion:K,iridescence:mt,iridescenceMap:be,iridescenceThicknessMap:Xt,sheen:Lt,sheenColorMap:te,sheenRoughnessMap:re,specularMap:ht,specularColorMap:wt,specularIntensityMap:de,transmission:Rt,transmissionMap:pt,thicknessMap:Ft,gradientMap:ie,opaque:D.transparent===!1&&D.blending===ap&&D.alphaToCoverage===!1,alphaMap:ye,alphaTest:se,alphaHash:jt,combine:D.combine,mapUv:ne&&M(D.map.channel),aoMapUv:Gt&&M(D.aoMap.channel),lightMapUv:zt&&M(D.lightMap.channel),bumpMapUv:Pt&&M(D.bumpMap.channel),normalMapUv:Ct&&M(D.normalMap.channel),displacementMapUv:Bt&&M(D.displacementMap.channel),emissiveMapUv:Dt&&M(D.emissiveMap.channel),metalnessMapUv:Ut&&M(D.metalnessMap.channel),roughnessMapUv:Nt&&M(D.roughnessMap.channel),anisotropyMapUv:At&&M(D.anisotropyMap.channel),clearcoatMapUv:oe&&M(D.clearcoatMap.channel),clearcoatNormalMapUv:le&&M(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ve&&M(D.clearcoatRoughnessMap.channel),iridescenceMapUv:be&&M(D.iridescenceMap.channel),iridescenceThicknessMapUv:Xt&&M(D.iridescenceThicknessMap.channel),sheenColorMapUv:te&&M(D.sheenColorMap.channel),sheenRoughnessMapUv:re&&M(D.sheenRoughnessMap.channel),specularMapUv:ht&&M(D.specularMap.channel),specularColorMapUv:wt&&M(D.specularColorMap.channel),specularIntensityMapUv:de&&M(D.specularIntensityMap.channel),transmissionMapUv:pt&&M(D.transmissionMap.channel),thicknessMapUv:Ft&&M(D.thicknessMap.channel),alphaMapUv:ye&&M(D.alphaMap.channel),vertexTangents:!!lt.attributes.tangent&&(Ct||ge),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!lt.attributes.color&&lt.attributes.color.itemSize===4,pointsUvs:G.isPoints===!0&&!!lt.attributes.uv&&(ne||ye),fog:!!it,useFog:D.fog===!0,fogExp2:!!it&&it.isFogExp2,flatShading:D.flatShading===!0&&D.wireframe===!1,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:g,reversedDepthBuffer:Tt,skinning:G.isSkinnedMesh===!0,morphTargets:lt.morphAttributes.position!==void 0,morphNormals:lt.morphAttributes.normal!==void 0,morphColors:lt.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:rt,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:D.dithering,shadowMapEnabled:i.shadowMap.enabled&&F.length>0,shadowMapType:i.shadowMap.type,toneMapping:we,decodeVideoTexture:ne&&D.map.isVideoTexture===!0&&Xn.getTransfer(D.map.colorSpace)===Mi,decodeVideoTextureEmissive:Dt&&D.emissiveMap.isVideoTexture===!0&&Xn.getTransfer(D.emissiveMap.colorSpace)===Mi,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===Zl,flipSided:D.side===La,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:xe&&D.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(xe&&D.extensions.multiDraw===!0||ae)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return Ce.vertexUv1s=u.has(1),Ce.vertexUv2s=u.has(2),Ce.vertexUv3s=u.has(3),u.clear(),Ce}function E(D){const O=[];if(D.shaderID?O.push(D.shaderID):(O.push(D.customVertexShaderID),O.push(D.customFragmentShaderID)),D.defines!==void 0)for(const F in D.defines)O.push(F),O.push(D.defines[F]);return D.isRawShaderMaterial===!1&&(R(O,D),N(O,D),O.push(i.outputColorSpace)),O.push(D.customProgramCacheKey),O.join()}function R(D,O){D.push(O.precision),D.push(O.outputColorSpace),D.push(O.envMapMode),D.push(O.envMapCubeUVHeight),D.push(O.mapUv),D.push(O.alphaMapUv),D.push(O.lightMapUv),D.push(O.aoMapUv),D.push(O.bumpMapUv),D.push(O.normalMapUv),D.push(O.displacementMapUv),D.push(O.emissiveMapUv),D.push(O.metalnessMapUv),D.push(O.roughnessMapUv),D.push(O.anisotropyMapUv),D.push(O.clearcoatMapUv),D.push(O.clearcoatNormalMapUv),D.push(O.clearcoatRoughnessMapUv),D.push(O.iridescenceMapUv),D.push(O.iridescenceThicknessMapUv),D.push(O.sheenColorMapUv),D.push(O.sheenRoughnessMapUv),D.push(O.specularMapUv),D.push(O.specularColorMapUv),D.push(O.specularIntensityMapUv),D.push(O.transmissionMapUv),D.push(O.thicknessMapUv),D.push(O.combine),D.push(O.fogExp2),D.push(O.sizeAttenuation),D.push(O.morphTargetsCount),D.push(O.morphAttributeCount),D.push(O.numDirLights),D.push(O.numPointLights),D.push(O.numSpotLights),D.push(O.numSpotLightMaps),D.push(O.numHemiLights),D.push(O.numRectAreaLights),D.push(O.numDirLightShadows),D.push(O.numPointLightShadows),D.push(O.numSpotLightShadows),D.push(O.numSpotLightShadowsWithMaps),D.push(O.numLightProbes),D.push(O.shadowMapType),D.push(O.toneMapping),D.push(O.numClippingPlanes),D.push(O.numClipIntersection),D.push(O.depthPacking)}function N(D,O){o.disableAll(),O.supportsVertexTextures&&o.enable(0),O.instancing&&o.enable(1),O.instancingColor&&o.enable(2),O.instancingMorph&&o.enable(3),O.matcap&&o.enable(4),O.envMap&&o.enable(5),O.normalMapObjectSpace&&o.enable(6),O.normalMapTangentSpace&&o.enable(7),O.clearcoat&&o.enable(8),O.iridescence&&o.enable(9),O.alphaTest&&o.enable(10),O.vertexColors&&o.enable(11),O.vertexAlphas&&o.enable(12),O.vertexUv1s&&o.enable(13),O.vertexUv2s&&o.enable(14),O.vertexUv3s&&o.enable(15),O.vertexTangents&&o.enable(16),O.anisotropy&&o.enable(17),O.alphaHash&&o.enable(18),O.batching&&o.enable(19),O.dispersion&&o.enable(20),O.batchingColor&&o.enable(21),O.gradientMap&&o.enable(22),D.push(o.mask),o.disableAll(),O.fog&&o.enable(0),O.useFog&&o.enable(1),O.flatShading&&o.enable(2),O.logarithmicDepthBuffer&&o.enable(3),O.reversedDepthBuffer&&o.enable(4),O.skinning&&o.enable(5),O.morphTargets&&o.enable(6),O.morphNormals&&o.enable(7),O.morphColors&&o.enable(8),O.premultipliedAlpha&&o.enable(9),O.shadowMapEnabled&&o.enable(10),O.doubleSided&&o.enable(11),O.flipSided&&o.enable(12),O.useDepthPacking&&o.enable(13),O.dithering&&o.enable(14),O.transmission&&o.enable(15),O.sheen&&o.enable(16),O.opaque&&o.enable(17),O.pointsUvs&&o.enable(18),O.decodeVideoTexture&&o.enable(19),O.decodeVideoTextureEmissive&&o.enable(20),O.alphaToCoverage&&o.enable(21),D.push(o.mask)}function P(D){const O=b[D.type];let F;if(O){const H=Kl[O];F=iR.clone(H.uniforms)}else F=D.uniforms;return F}function k(D,O){let F;for(let H=0,G=d.length;H<G;H++){const it=d[H];if(it.cacheKey===O){F=it,++F.usedTimes;break}}return F===void 0&&(F=new btt(i,O,D,r),d.push(F)),F}function z(D){if(--D.usedTimes===0){const O=d.indexOf(D);d[O]=d[d.length-1],d.pop(),D.destroy()}}function L(D){c.remove(D)}function U(){c.dispose()}return{getParameters:S,getProgramCacheKey:E,getUniforms:P,acquireProgram:k,releaseProgram:z,releaseShaderCache:L,programs:d,dispose:U}}function Att(){let i=new WeakMap;function t(a){return i.has(a)}function e(a){let o=i.get(a);return o===void 0&&(o={},i.set(a,o)),o}function n(a){i.delete(a)}function s(a,o,c){i.get(a)[o]=c}function r(){i=new WeakMap}return{has:t,get:e,remove:n,update:s,dispose:r}}function wtt(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function h3(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function f3(){const i=[];let t=0;const e=[],n=[],s=[];function r(){t=0,e.length=0,n.length=0,s.length=0}function a(g,y,_,b,M,S){let E=i[t];return E===void 0?(E={id:g.id,object:g,geometry:y,material:_,groupOrder:b,renderOrder:g.renderOrder,z:M,group:S},i[t]=E):(E.id=g.id,E.object=g,E.geometry=y,E.material=_,E.groupOrder=b,E.renderOrder=g.renderOrder,E.z=M,E.group=S),t++,E}function o(g,y,_,b,M,S){const E=a(g,y,_,b,M,S);_.transmission>0?n.push(E):_.transparent===!0?s.push(E):e.push(E)}function c(g,y,_,b,M,S){const E=a(g,y,_,b,M,S);_.transmission>0?n.unshift(E):_.transparent===!0?s.unshift(E):e.unshift(E)}function u(g,y){e.length>1&&e.sort(g||wtt),n.length>1&&n.sort(y||h3),s.length>1&&s.sort(y||h3)}function d(){for(let g=t,y=i.length;g<y;g++){const _=i[g];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:e,transmissive:n,transparent:s,init:r,push:o,unshift:c,finish:d,sort:u}}function Rtt(){let i=new WeakMap;function t(n,s){const r=i.get(n);let a;return r===void 0?(a=new f3,i.set(n,[a])):s>=r.length?(a=new f3,r.push(a)):a=r[s],a}function e(){i=new WeakMap}return{get:t,dispose:e}}function Ctt(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new ot,color:new Pe};break;case"SpotLight":e={position:new ot,direction:new ot,color:new Pe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new ot,color:new Pe,distance:0,decay:0};break;case"HemisphereLight":e={direction:new ot,skyColor:new Pe,groundColor:new Pe};break;case"RectAreaLight":e={color:new Pe,position:new ot,halfWidth:new ot,halfHeight:new ot};break}return i[t.id]=e,e}}}function Dtt(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ce};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ce};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ce,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=e,e}}}let Itt=0;function Ntt(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function Ott(i){const t=new Ctt,e=Dtt(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new ot);const s=new ot,r=new ln,a=new ln;function o(u){let d=0,g=0,y=0;for(let D=0;D<9;D++)n.probe[D].set(0,0,0);let _=0,b=0,M=0,S=0,E=0,R=0,N=0,P=0,k=0,z=0,L=0;u.sort(Ntt);for(let D=0,O=u.length;D<O;D++){const F=u[D],H=F.color,G=F.intensity,it=F.distance,lt=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)d+=H.r*G,g+=H.g*G,y+=H.b*G;else if(F.isLightProbe){for(let j=0;j<9;j++)n.probe[j].addScaledVector(F.sh.coefficients[j],G);L++}else if(F.isDirectionalLight){const j=t.get(F);if(j.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const J=F.shadow,$=e.get(F);$.shadowIntensity=J.intensity,$.shadowBias=J.bias,$.shadowNormalBias=J.normalBias,$.shadowRadius=J.radius,$.shadowMapSize=J.mapSize,n.directionalShadow[_]=$,n.directionalShadowMap[_]=lt,n.directionalShadowMatrix[_]=F.shadow.matrix,R++}n.directional[_]=j,_++}else if(F.isSpotLight){const j=t.get(F);j.position.setFromMatrixPosition(F.matrixWorld),j.color.copy(H).multiplyScalar(G),j.distance=it,j.coneCos=Math.cos(F.angle),j.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),j.decay=F.decay,n.spot[M]=j;const J=F.shadow;if(F.map&&(n.spotLightMap[k]=F.map,k++,J.updateMatrices(F),F.castShadow&&z++),n.spotLightMatrix[M]=J.matrix,F.castShadow){const $=e.get(F);$.shadowIntensity=J.intensity,$.shadowBias=J.bias,$.shadowNormalBias=J.normalBias,$.shadowRadius=J.radius,$.shadowMapSize=J.mapSize,n.spotShadow[M]=$,n.spotShadowMap[M]=lt,P++}M++}else if(F.isRectAreaLight){const j=t.get(F);j.color.copy(H).multiplyScalar(G),j.halfWidth.set(F.width*.5,0,0),j.halfHeight.set(0,F.height*.5,0),n.rectArea[S]=j,S++}else if(F.isPointLight){const j=t.get(F);if(j.color.copy(F.color).multiplyScalar(F.intensity),j.distance=F.distance,j.decay=F.decay,F.castShadow){const J=F.shadow,$=e.get(F);$.shadowIntensity=J.intensity,$.shadowBias=J.bias,$.shadowNormalBias=J.normalBias,$.shadowRadius=J.radius,$.shadowMapSize=J.mapSize,$.shadowCameraNear=J.camera.near,$.shadowCameraFar=J.camera.far,n.pointShadow[b]=$,n.pointShadowMap[b]=lt,n.pointShadowMatrix[b]=F.shadow.matrix,N++}n.point[b]=j,b++}else if(F.isHemisphereLight){const j=t.get(F);j.skyColor.copy(F.color).multiplyScalar(G),j.groundColor.copy(F.groundColor).multiplyScalar(G),n.hemi[E]=j,E++}}S>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Oe.LTC_FLOAT_1,n.rectAreaLTC2=Oe.LTC_FLOAT_2):(n.rectAreaLTC1=Oe.LTC_HALF_1,n.rectAreaLTC2=Oe.LTC_HALF_2)),n.ambient[0]=d,n.ambient[1]=g,n.ambient[2]=y;const U=n.hash;(U.directionalLength!==_||U.pointLength!==b||U.spotLength!==M||U.rectAreaLength!==S||U.hemiLength!==E||U.numDirectionalShadows!==R||U.numPointShadows!==N||U.numSpotShadows!==P||U.numSpotMaps!==k||U.numLightProbes!==L)&&(n.directional.length=_,n.spot.length=M,n.rectArea.length=S,n.point.length=b,n.hemi.length=E,n.directionalShadow.length=R,n.directionalShadowMap.length=R,n.pointShadow.length=N,n.pointShadowMap.length=N,n.spotShadow.length=P,n.spotShadowMap.length=P,n.directionalShadowMatrix.length=R,n.pointShadowMatrix.length=N,n.spotLightMatrix.length=P+k-z,n.spotLightMap.length=k,n.numSpotLightShadowsWithMaps=z,n.numLightProbes=L,U.directionalLength=_,U.pointLength=b,U.spotLength=M,U.rectAreaLength=S,U.hemiLength=E,U.numDirectionalShadows=R,U.numPointShadows=N,U.numSpotShadows=P,U.numSpotMaps=k,U.numLightProbes=L,n.version=Itt++)}function c(u,d){let g=0,y=0,_=0,b=0,M=0;const S=d.matrixWorldInverse;for(let E=0,R=u.length;E<R;E++){const N=u[E];if(N.isDirectionalLight){const P=n.directional[g];P.direction.setFromMatrixPosition(N.matrixWorld),s.setFromMatrixPosition(N.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(S),g++}else if(N.isSpotLight){const P=n.spot[_];P.position.setFromMatrixPosition(N.matrixWorld),P.position.applyMatrix4(S),P.direction.setFromMatrixPosition(N.matrixWorld),s.setFromMatrixPosition(N.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(S),_++}else if(N.isRectAreaLight){const P=n.rectArea[b];P.position.setFromMatrixPosition(N.matrixWorld),P.position.applyMatrix4(S),a.identity(),r.copy(N.matrixWorld),r.premultiply(S),a.extractRotation(r),P.halfWidth.set(N.width*.5,0,0),P.halfHeight.set(0,N.height*.5,0),P.halfWidth.applyMatrix4(a),P.halfHeight.applyMatrix4(a),b++}else if(N.isPointLight){const P=n.point[y];P.position.setFromMatrixPosition(N.matrixWorld),P.position.applyMatrix4(S),y++}else if(N.isHemisphereLight){const P=n.hemi[M];P.direction.setFromMatrixPosition(N.matrixWorld),P.direction.transformDirection(S),M++}}}return{setup:o,setupView:c,state:n}}function d3(i){const t=new Ott(i),e=[],n=[];function s(d){u.camera=d,e.length=0,n.length=0}function r(d){e.push(d)}function a(d){n.push(d)}function o(){t.setup(e)}function c(d){t.setupView(e,d)}const u={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:s,state:u,setupLights:o,setupLightsView:c,pushLight:r,pushShadow:a}}function Ptt(i){let t=new WeakMap;function e(s,r=0){const a=t.get(s);let o;return a===void 0?(o=new d3(i),t.set(s,[o])):r>=a.length?(o=new d3(i),a.push(o)):o=a[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}const Utt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Ltt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ktt(i,t,e){let n=new Jg;const s=new ce,r=new ce,a=new Yn,o=new HE({depthPacking:Q2}),c=new GE,u={},d=e.maxTextureSize,g={[uh]:La,[La]:uh,[Zl]:Zl},y=new sc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ce},radius:{value:4}},vertexShader:Utt,fragmentShader:Ltt}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const b=new wn;b.setAttribute("position",new Pi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new ps(b,y),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=hE;let E=this.type;this.render=function(z,L,U){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||z.length===0)return;const D=i.getRenderTarget(),O=i.getActiveCubeFace(),F=i.getActiveMipmapLevel(),H=i.state;H.setBlending(ih),H.buffers.depth.getReversed()===!0?H.buffers.color.setClear(0,0,0,0):H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const G=E!==Xl&&this.type===Xl,it=E===Xl&&this.type!==Xl;for(let lt=0,j=z.length;lt<j;lt++){const J=z[lt],$=J.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;s.copy($.mapSize);const at=$.getFrameExtents();if(s.multiply(at),r.copy($.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(r.x=Math.floor(d/at.x),s.x=r.x*at.x,$.mapSize.x=r.x),s.y>d&&(r.y=Math.floor(d/at.y),s.y=r.y*at.y,$.mapSize.y=r.y)),$.map===null||G===!0||it===!0){const Z=this.type!==Xl?{minFilter:Ur,magFilter:Ur}:{};$.map!==null&&$.map.dispose(),$.map=new lu(s.x,s.y,Z),$.map.texture.name=J.name+".shadowMap",$.camera.updateProjectionMatrix()}i.setRenderTarget($.map),i.clear();const Y=$.getViewportCount();for(let Z=0;Z<Y;Z++){const rt=$.getViewport(Z);a.set(r.x*rt.x,r.y*rt.y,r.x*rt.z,r.y*rt.w),H.viewport(a),$.updateMatrices(J,Z),n=$.getFrustum(),P(L,U,$.camera,J,this.type)}$.isPointLightShadow!==!0&&this.type===Xl&&R($,U),$.needsUpdate=!1}E=this.type,S.needsUpdate=!1,i.setRenderTarget(D,O,F)};function R(z,L){const U=t.update(M);y.defines.VSM_SAMPLES!==z.blurSamples&&(y.defines.VSM_SAMPLES=z.blurSamples,_.defines.VSM_SAMPLES=z.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),z.mapPass===null&&(z.mapPass=new lu(s.x,s.y)),y.uniforms.shadow_pass.value=z.map.texture,y.uniforms.resolution.value=z.mapSize,y.uniforms.radius.value=z.radius,i.setRenderTarget(z.mapPass),i.clear(),i.renderBufferDirect(L,null,U,y,M,null),_.uniforms.shadow_pass.value=z.mapPass.texture,_.uniforms.resolution.value=z.mapSize,_.uniforms.radius.value=z.radius,i.setRenderTarget(z.map),i.clear(),i.renderBufferDirect(L,null,U,_,M,null)}function N(z,L,U,D){let O=null;const F=U.isPointLight===!0?z.customDistanceMaterial:z.customDepthMaterial;if(F!==void 0)O=F;else if(O=U.isPointLight===!0?c:o,i.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0||L.alphaToCoverage===!0){const H=O.uuid,G=L.uuid;let it=u[H];it===void 0&&(it={},u[H]=it);let lt=it[G];lt===void 0&&(lt=O.clone(),it[G]=lt,L.addEventListener("dispose",k)),O=lt}if(O.visible=L.visible,O.wireframe=L.wireframe,D===Xl?O.side=L.shadowSide!==null?L.shadowSide:L.side:O.side=L.shadowSide!==null?L.shadowSide:g[L.side],O.alphaMap=L.alphaMap,O.alphaTest=L.alphaToCoverage===!0?.5:L.alphaTest,O.map=L.map,O.clipShadows=L.clipShadows,O.clippingPlanes=L.clippingPlanes,O.clipIntersection=L.clipIntersection,O.displacementMap=L.displacementMap,O.displacementScale=L.displacementScale,O.displacementBias=L.displacementBias,O.wireframeLinewidth=L.wireframeLinewidth,O.linewidth=L.linewidth,U.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const H=i.properties.get(O);H.light=U}return O}function P(z,L,U,D,O){if(z.visible===!1)return;if(z.layers.test(L.layers)&&(z.isMesh||z.isLine||z.isPoints)&&(z.castShadow||z.receiveShadow&&O===Xl)&&(!z.frustumCulled||n.intersectsObject(z))){z.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,z.matrixWorld);const G=t.update(z),it=z.material;if(Array.isArray(it)){const lt=G.groups;for(let j=0,J=lt.length;j<J;j++){const $=lt[j],at=it[$.materialIndex];if(at&&at.visible){const Y=N(z,at,D,O);z.onBeforeShadow(i,z,L,U,G,Y,$),i.renderBufferDirect(U,null,G,Y,z,$),z.onAfterShadow(i,z,L,U,G,Y,$)}}}else if(it.visible){const lt=N(z,it,D,O);z.onBeforeShadow(i,z,L,U,G,lt,null),i.renderBufferDirect(U,null,G,lt,z,null),z.onAfterShadow(i,z,L,U,G,lt,null)}}const H=z.children;for(let G=0,it=H.length;G<it;G++)P(H[G],L,U,D,O)}function k(z){z.target.removeEventListener("dispose",k);for(const U in u){const D=u[U],O=z.target.uuid;O in D&&(D[O].dispose(),delete D[O])}}}const Btt={[GS]:jS,[WS]:YS,[qS]:KS,[yp]:XS,[jS]:GS,[YS]:WS,[KS]:qS,[XS]:yp};function ztt(i,t){function e(){let pt=!1;const Ft=new Yn;let ie=null;const ye=new Yn(0,0,0,0);return{setMask:function(se){ie!==se&&!pt&&(i.colorMask(se,se,se,se),ie=se)},setLocked:function(se){pt=se},setClear:function(se,jt,xe,we,Ce){Ce===!0&&(se*=we,jt*=we,xe*=we),Ft.set(se,jt,xe,we),ye.equals(Ft)===!1&&(i.clearColor(se,jt,xe,we),ye.copy(Ft))},reset:function(){pt=!1,ie=null,ye.set(-1,0,0,0)}}}function n(){let pt=!1,Ft=!1,ie=null,ye=null,se=null;return{setReversed:function(jt){if(Ft!==jt){const xe=t.get("EXT_clip_control");jt?xe.clipControlEXT(xe.LOWER_LEFT_EXT,xe.ZERO_TO_ONE_EXT):xe.clipControlEXT(xe.LOWER_LEFT_EXT,xe.NEGATIVE_ONE_TO_ONE_EXT),Ft=jt;const we=se;se=null,this.setClear(we)}},getReversed:function(){return Ft},setTest:function(jt){jt?gt(i.DEPTH_TEST):Tt(i.DEPTH_TEST)},setMask:function(jt){ie!==jt&&!pt&&(i.depthMask(jt),ie=jt)},setFunc:function(jt){if(Ft&&(jt=Btt[jt]),ye!==jt){switch(jt){case GS:i.depthFunc(i.NEVER);break;case jS:i.depthFunc(i.ALWAYS);break;case WS:i.depthFunc(i.LESS);break;case yp:i.depthFunc(i.LEQUAL);break;case qS:i.depthFunc(i.EQUAL);break;case XS:i.depthFunc(i.GEQUAL);break;case YS:i.depthFunc(i.GREATER);break;case KS:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ye=jt}},setLocked:function(jt){pt=jt},setClear:function(jt){se!==jt&&(Ft&&(jt=1-jt),i.clearDepth(jt),se=jt)},reset:function(){pt=!1,ie=null,ye=null,se=null,Ft=!1}}}function s(){let pt=!1,Ft=null,ie=null,ye=null,se=null,jt=null,xe=null,we=null,Ce=null;return{setTest:function(Ie){pt||(Ie?gt(i.STENCIL_TEST):Tt(i.STENCIL_TEST))},setMask:function(Ie){Ft!==Ie&&!pt&&(i.stencilMask(Ie),Ft=Ie)},setFunc:function(Ie,Ln,dn){(ie!==Ie||ye!==Ln||se!==dn)&&(i.stencilFunc(Ie,Ln,dn),ie=Ie,ye=Ln,se=dn)},setOp:function(Ie,Ln,dn){(jt!==Ie||xe!==Ln||we!==dn)&&(i.stencilOp(Ie,Ln,dn),jt=Ie,xe=Ln,we=dn)},setLocked:function(Ie){pt=Ie},setClear:function(Ie){Ce!==Ie&&(i.clearStencil(Ie),Ce=Ie)},reset:function(){pt=!1,Ft=null,ie=null,ye=null,se=null,jt=null,xe=null,we=null,Ce=null}}}const r=new e,a=new n,o=new s,c=new WeakMap,u=new WeakMap;let d={},g={},y=new WeakMap,_=[],b=null,M=!1,S=null,E=null,R=null,N=null,P=null,k=null,z=null,L=new Pe(0,0,0),U=0,D=!1,O=null,F=null,H=null,G=null,it=null;const lt=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,J=0;const $=i.getParameter(i.VERSION);$.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec($)[1]),j=J>=1):$.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),j=J>=2);let at=null,Y={};const Z=i.getParameter(i.SCISSOR_BOX),rt=i.getParameter(i.VIEWPORT),ft=new Yn().fromArray(Z),dt=new Yn().fromArray(rt);function _t(pt,Ft,ie,ye){const se=new Uint8Array(4),jt=i.createTexture();i.bindTexture(pt,jt),i.texParameteri(pt,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(pt,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let xe=0;xe<ie;xe++)pt===i.TEXTURE_3D||pt===i.TEXTURE_2D_ARRAY?i.texImage3D(Ft,0,i.RGBA,1,1,ye,0,i.RGBA,i.UNSIGNED_BYTE,se):i.texImage2D(Ft+xe,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,se);return jt}const ut={};ut[i.TEXTURE_2D]=_t(i.TEXTURE_2D,i.TEXTURE_2D,1),ut[i.TEXTURE_CUBE_MAP]=_t(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),ut[i.TEXTURE_2D_ARRAY]=_t(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),ut[i.TEXTURE_3D]=_t(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),gt(i.DEPTH_TEST),a.setFunc(yp),Pt(!1),Ct(rw),gt(i.CULL_FACE),Gt(ih);function gt(pt){d[pt]!==!0&&(i.enable(pt),d[pt]=!0)}function Tt(pt){d[pt]!==!1&&(i.disable(pt),d[pt]=!1)}function $t(pt,Ft){return g[pt]!==Ft?(i.bindFramebuffer(pt,Ft),g[pt]=Ft,pt===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=Ft),pt===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=Ft),!0):!1}function ae(pt,Ft){let ie=_,ye=!1;if(pt){ie=y.get(Ft),ie===void 0&&(ie=[],y.set(Ft,ie));const se=pt.textures;if(ie.length!==se.length||ie[0]!==i.COLOR_ATTACHMENT0){for(let jt=0,xe=se.length;jt<xe;jt++)ie[jt]=i.COLOR_ATTACHMENT0+jt;ie.length=se.length,ye=!0}}else ie[0]!==i.BACK&&(ie[0]=i.BACK,ye=!0);ye&&i.drawBuffers(ie)}function ne(pt){return b!==pt?(i.useProgram(pt),b=pt,!0):!1}const ee={[yf]:i.FUNC_ADD,[R4]:i.FUNC_SUBTRACT,[C4]:i.FUNC_REVERSE_SUBTRACT};ee[D4]=i.MIN,ee[I4]=i.MAX;const ct={[N4]:i.ZERO,[O4]:i.ONE,[P4]:i.SRC_COLOR,[VS]:i.SRC_ALPHA,[F4]:i.SRC_ALPHA_SATURATE,[B4]:i.DST_COLOR,[L4]:i.DST_ALPHA,[U4]:i.ONE_MINUS_SRC_COLOR,[HS]:i.ONE_MINUS_SRC_ALPHA,[z4]:i.ONE_MINUS_DST_COLOR,[k4]:i.ONE_MINUS_DST_ALPHA,[V4]:i.CONSTANT_COLOR,[H4]:i.ONE_MINUS_CONSTANT_COLOR,[G4]:i.CONSTANT_ALPHA,[j4]:i.ONE_MINUS_CONSTANT_ALPHA};function Gt(pt,Ft,ie,ye,se,jt,xe,we,Ce,Ie){if(pt===ih){M===!0&&(Tt(i.BLEND),M=!1);return}if(M===!1&&(gt(i.BLEND),M=!0),pt!==w4){if(pt!==S||Ie!==D){if((E!==yf||P!==yf)&&(i.blendEquation(i.FUNC_ADD),E=yf,P=yf),Ie)switch(pt){case ap:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case aw:i.blendFunc(i.ONE,i.ONE);break;case ow:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case lw:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",pt);break}else switch(pt){case ap:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case aw:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case ow:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case lw:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",pt);break}R=null,N=null,k=null,z=null,L.set(0,0,0),U=0,S=pt,D=Ie}return}se=se||Ft,jt=jt||ie,xe=xe||ye,(Ft!==E||se!==P)&&(i.blendEquationSeparate(ee[Ft],ee[se]),E=Ft,P=se),(ie!==R||ye!==N||jt!==k||xe!==z)&&(i.blendFuncSeparate(ct[ie],ct[ye],ct[jt],ct[xe]),R=ie,N=ye,k=jt,z=xe),(we.equals(L)===!1||Ce!==U)&&(i.blendColor(we.r,we.g,we.b,Ce),L.copy(we),U=Ce),S=pt,D=!1}function zt(pt,Ft){pt.side===Zl?Tt(i.CULL_FACE):gt(i.CULL_FACE);let ie=pt.side===La;Ft&&(ie=!ie),Pt(ie),pt.blending===ap&&pt.transparent===!1?Gt(ih):Gt(pt.blending,pt.blendEquation,pt.blendSrc,pt.blendDst,pt.blendEquationAlpha,pt.blendSrcAlpha,pt.blendDstAlpha,pt.blendColor,pt.blendAlpha,pt.premultipliedAlpha),a.setFunc(pt.depthFunc),a.setTest(pt.depthTest),a.setMask(pt.depthWrite),r.setMask(pt.colorWrite);const ye=pt.stencilWrite;o.setTest(ye),ye&&(o.setMask(pt.stencilWriteMask),o.setFunc(pt.stencilFunc,pt.stencilRef,pt.stencilFuncMask),o.setOp(pt.stencilFail,pt.stencilZFail,pt.stencilZPass)),Dt(pt.polygonOffset,pt.polygonOffsetFactor,pt.polygonOffsetUnits),pt.alphaToCoverage===!0?gt(i.SAMPLE_ALPHA_TO_COVERAGE):Tt(i.SAMPLE_ALPHA_TO_COVERAGE)}function Pt(pt){O!==pt&&(pt?i.frontFace(i.CW):i.frontFace(i.CCW),O=pt)}function Ct(pt){pt!==T4?(gt(i.CULL_FACE),pt!==F&&(pt===rw?i.cullFace(i.BACK):pt===M4?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Tt(i.CULL_FACE),F=pt}function Bt(pt){pt!==H&&(j&&i.lineWidth(pt),H=pt)}function Dt(pt,Ft,ie){pt?(gt(i.POLYGON_OFFSET_FILL),(G!==Ft||it!==ie)&&(i.polygonOffset(Ft,ie),G=Ft,it=ie)):Tt(i.POLYGON_OFFSET_FILL)}function Ut(pt){pt?gt(i.SCISSOR_TEST):Tt(i.SCISSOR_TEST)}function Nt(pt){pt===void 0&&(pt=i.TEXTURE0+lt-1),at!==pt&&(i.activeTexture(pt),at=pt)}function ge(pt,Ft,ie){ie===void 0&&(at===null?ie=i.TEXTURE0+lt-1:ie=at);let ye=Y[ie];ye===void 0&&(ye={type:void 0,texture:void 0},Y[ie]=ye),(ye.type!==pt||ye.texture!==Ft)&&(at!==ie&&(i.activeTexture(ie),at=ie),i.bindTexture(pt,Ft||ut[pt]),ye.type=pt,ye.texture=Ft)}function Q(){const pt=Y[at];pt!==void 0&&pt.type!==void 0&&(i.bindTexture(pt.type,null),pt.type=void 0,pt.texture=void 0)}function K(){try{i.compressedTexImage2D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function mt(){try{i.compressedTexImage3D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function Lt(){try{i.texSubImage2D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function Rt(){try{i.texSubImage3D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function At(){try{i.compressedTexSubImage2D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function oe(){try{i.compressedTexSubImage3D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function le(){try{i.texStorage2D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function ve(){try{i.texStorage3D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function be(){try{i.texImage2D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function Xt(){try{i.texImage3D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function te(pt){ft.equals(pt)===!1&&(i.scissor(pt.x,pt.y,pt.z,pt.w),ft.copy(pt))}function re(pt){dt.equals(pt)===!1&&(i.viewport(pt.x,pt.y,pt.z,pt.w),dt.copy(pt))}function ht(pt,Ft){let ie=u.get(Ft);ie===void 0&&(ie=new WeakMap,u.set(Ft,ie));let ye=ie.get(pt);ye===void 0&&(ye=i.getUniformBlockIndex(Ft,pt.name),ie.set(pt,ye))}function wt(pt,Ft){const ye=u.get(Ft).get(pt);c.get(Ft)!==ye&&(i.uniformBlockBinding(Ft,ye,pt.__bindingPointIndex),c.set(Ft,ye))}function de(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},at=null,Y={},g={},y=new WeakMap,_=[],b=null,M=!1,S=null,E=null,R=null,N=null,P=null,k=null,z=null,L=new Pe(0,0,0),U=0,D=!1,O=null,F=null,H=null,G=null,it=null,ft.set(0,0,i.canvas.width,i.canvas.height),dt.set(0,0,i.canvas.width,i.canvas.height),r.reset(),a.reset(),o.reset()}return{buffers:{color:r,depth:a,stencil:o},enable:gt,disable:Tt,bindFramebuffer:$t,drawBuffers:ae,useProgram:ne,setBlending:Gt,setMaterial:zt,setFlipSided:Pt,setCullFace:Ct,setLineWidth:Bt,setPolygonOffset:Dt,setScissorTest:Ut,activeTexture:Nt,bindTexture:ge,unbindTexture:Q,compressedTexImage2D:K,compressedTexImage3D:mt,texImage2D:be,texImage3D:Xt,updateUBOMapping:ht,uniformBlockBinding:wt,texStorage2D:le,texStorage3D:ve,texSubImage2D:Lt,texSubImage3D:Rt,compressedTexSubImage2D:At,compressedTexSubImage3D:oe,scissor:te,viewport:re,reset:de}}function Ftt(i,t,e,n,s,r,a){const o=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new ce,d=new WeakMap;let g;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(Q,K){return _?new OffscreenCanvas(Q,K):wv("canvas")}function M(Q,K,mt){let Lt=1;const Rt=ge(Q);if((Rt.width>mt||Rt.height>mt)&&(Lt=mt/Math.max(Rt.width,Rt.height)),Lt<1)if(typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Q instanceof ImageBitmap||typeof VideoFrame<"u"&&Q instanceof VideoFrame){const At=Math.floor(Lt*Rt.width),oe=Math.floor(Lt*Rt.height);g===void 0&&(g=b(At,oe));const le=K?b(At,oe):g;return le.width=At,le.height=oe,le.getContext("2d").drawImage(Q,0,0,At,oe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Rt.width+"x"+Rt.height+") to ("+At+"x"+oe+")."),le}else return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Rt.width+"x"+Rt.height+")."),Q;return Q}function S(Q){return Q.generateMipmaps}function E(Q){i.generateMipmap(Q)}function R(Q){return Q.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:Q.isWebGL3DRenderTarget?i.TEXTURE_3D:Q.isWebGLArrayRenderTarget||Q.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function N(Q,K,mt,Lt,Rt=!1){if(Q!==null){if(i[Q]!==void 0)return i[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let At=K;if(K===i.RED&&(mt===i.FLOAT&&(At=i.R32F),mt===i.HALF_FLOAT&&(At=i.R16F),mt===i.UNSIGNED_BYTE&&(At=i.R8)),K===i.RED_INTEGER&&(mt===i.UNSIGNED_BYTE&&(At=i.R8UI),mt===i.UNSIGNED_SHORT&&(At=i.R16UI),mt===i.UNSIGNED_INT&&(At=i.R32UI),mt===i.BYTE&&(At=i.R8I),mt===i.SHORT&&(At=i.R16I),mt===i.INT&&(At=i.R32I)),K===i.RG&&(mt===i.FLOAT&&(At=i.RG32F),mt===i.HALF_FLOAT&&(At=i.RG16F),mt===i.UNSIGNED_BYTE&&(At=i.RG8)),K===i.RG_INTEGER&&(mt===i.UNSIGNED_BYTE&&(At=i.RG8UI),mt===i.UNSIGNED_SHORT&&(At=i.RG16UI),mt===i.UNSIGNED_INT&&(At=i.RG32UI),mt===i.BYTE&&(At=i.RG8I),mt===i.SHORT&&(At=i.RG16I),mt===i.INT&&(At=i.RG32I)),K===i.RGB_INTEGER&&(mt===i.UNSIGNED_BYTE&&(At=i.RGB8UI),mt===i.UNSIGNED_SHORT&&(At=i.RGB16UI),mt===i.UNSIGNED_INT&&(At=i.RGB32UI),mt===i.BYTE&&(At=i.RGB8I),mt===i.SHORT&&(At=i.RGB16I),mt===i.INT&&(At=i.RGB32I)),K===i.RGBA_INTEGER&&(mt===i.UNSIGNED_BYTE&&(At=i.RGBA8UI),mt===i.UNSIGNED_SHORT&&(At=i.RGBA16UI),mt===i.UNSIGNED_INT&&(At=i.RGBA32UI),mt===i.BYTE&&(At=i.RGBA8I),mt===i.SHORT&&(At=i.RGBA16I),mt===i.INT&&(At=i.RGBA32I)),K===i.RGB&&(mt===i.UNSIGNED_INT_5_9_9_9_REV&&(At=i.RGB9_E5),mt===i.UNSIGNED_INT_10F_11F_11F_REV&&(At=i.R11F_G11F_B10F)),K===i.RGBA){const oe=Rt?Mv:Xn.getTransfer(Lt);mt===i.FLOAT&&(At=i.RGBA32F),mt===i.HALF_FLOAT&&(At=i.RGBA16F),mt===i.UNSIGNED_BYTE&&(At=oe===Mi?i.SRGB8_ALPHA8:i.RGBA8),mt===i.UNSIGNED_SHORT_4_4_4_4&&(At=i.RGBA4),mt===i.UNSIGNED_SHORT_5_5_5_1&&(At=i.RGB5_A1)}return(At===i.R16F||At===i.R32F||At===i.RG16F||At===i.RG32F||At===i.RGBA16F||At===i.RGBA32F)&&t.get("EXT_color_buffer_float"),At}function P(Q,K){let mt;return Q?K===null||K===fh||K===Cg?mt=i.DEPTH24_STENCIL8:K===mo?mt=i.DEPTH32F_STENCIL8:K===Rg&&(mt=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):K===null||K===fh||K===Cg?mt=i.DEPTH_COMPONENT24:K===mo?mt=i.DEPTH_COMPONENT32F:K===Rg&&(mt=i.DEPTH_COMPONENT16),mt}function k(Q,K){return S(Q)===!0||Q.isFramebufferTexture&&Q.minFilter!==Ur&&Q.minFilter!==Ns?Math.log2(Math.max(K.width,K.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?K.mipmaps.length:1}function z(Q){const K=Q.target;K.removeEventListener("dispose",z),U(K),K.isVideoTexture&&d.delete(K)}function L(Q){const K=Q.target;K.removeEventListener("dispose",L),O(K)}function U(Q){const K=n.get(Q);if(K.__webglInit===void 0)return;const mt=Q.source,Lt=y.get(mt);if(Lt){const Rt=Lt[K.__cacheKey];Rt.usedTimes--,Rt.usedTimes===0&&D(Q),Object.keys(Lt).length===0&&y.delete(mt)}n.remove(Q)}function D(Q){const K=n.get(Q);i.deleteTexture(K.__webglTexture);const mt=Q.source,Lt=y.get(mt);delete Lt[K.__cacheKey],a.memory.textures--}function O(Q){const K=n.get(Q);if(Q.depthTexture&&(Q.depthTexture.dispose(),n.remove(Q.depthTexture)),Q.isWebGLCubeRenderTarget)for(let Lt=0;Lt<6;Lt++){if(Array.isArray(K.__webglFramebuffer[Lt]))for(let Rt=0;Rt<K.__webglFramebuffer[Lt].length;Rt++)i.deleteFramebuffer(K.__webglFramebuffer[Lt][Rt]);else i.deleteFramebuffer(K.__webglFramebuffer[Lt]);K.__webglDepthbuffer&&i.deleteRenderbuffer(K.__webglDepthbuffer[Lt])}else{if(Array.isArray(K.__webglFramebuffer))for(let Lt=0;Lt<K.__webglFramebuffer.length;Lt++)i.deleteFramebuffer(K.__webglFramebuffer[Lt]);else i.deleteFramebuffer(K.__webglFramebuffer);if(K.__webglDepthbuffer&&i.deleteRenderbuffer(K.__webglDepthbuffer),K.__webglMultisampledFramebuffer&&i.deleteFramebuffer(K.__webglMultisampledFramebuffer),K.__webglColorRenderbuffer)for(let Lt=0;Lt<K.__webglColorRenderbuffer.length;Lt++)K.__webglColorRenderbuffer[Lt]&&i.deleteRenderbuffer(K.__webglColorRenderbuffer[Lt]);K.__webglDepthRenderbuffer&&i.deleteRenderbuffer(K.__webglDepthRenderbuffer)}const mt=Q.textures;for(let Lt=0,Rt=mt.length;Lt<Rt;Lt++){const At=n.get(mt[Lt]);At.__webglTexture&&(i.deleteTexture(At.__webglTexture),a.memory.textures--),n.remove(mt[Lt])}n.remove(Q)}let F=0;function H(){F=0}function G(){const Q=F;return Q>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+s.maxTextures),F+=1,Q}function it(Q){const K=[];return K.push(Q.wrapS),K.push(Q.wrapT),K.push(Q.wrapR||0),K.push(Q.magFilter),K.push(Q.minFilter),K.push(Q.anisotropy),K.push(Q.internalFormat),K.push(Q.format),K.push(Q.type),K.push(Q.generateMipmaps),K.push(Q.premultiplyAlpha),K.push(Q.flipY),K.push(Q.unpackAlignment),K.push(Q.colorSpace),K.join()}function lt(Q,K){const mt=n.get(Q);if(Q.isVideoTexture&&Ut(Q),Q.isRenderTargetTexture===!1&&Q.isExternalTexture!==!0&&Q.version>0&&mt.__version!==Q.version){const Lt=Q.image;if(Lt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Lt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ut(mt,Q,K);return}}else Q.isExternalTexture&&(mt.__webglTexture=Q.sourceTexture?Q.sourceTexture:null);e.bindTexture(i.TEXTURE_2D,mt.__webglTexture,i.TEXTURE0+K)}function j(Q,K){const mt=n.get(Q);if(Q.isRenderTargetTexture===!1&&Q.version>0&&mt.__version!==Q.version){ut(mt,Q,K);return}e.bindTexture(i.TEXTURE_2D_ARRAY,mt.__webglTexture,i.TEXTURE0+K)}function J(Q,K){const mt=n.get(Q);if(Q.isRenderTargetTexture===!1&&Q.version>0&&mt.__version!==Q.version){ut(mt,Q,K);return}e.bindTexture(i.TEXTURE_3D,mt.__webglTexture,i.TEXTURE0+K)}function $(Q,K){const mt=n.get(Q);if(Q.version>0&&mt.__version!==Q.version){gt(mt,Q,K);return}e.bindTexture(i.TEXTURE_CUBE_MAP,mt.__webglTexture,i.TEXTURE0+K)}const at={[bv]:i.REPEAT,[pl]:i.CLAMP_TO_EDGE,[Sv]:i.MIRRORED_REPEAT},Y={[Ur]:i.NEAREST,[H2]:i.NEAREST_MIPMAP_NEAREST,[ug]:i.NEAREST_MIPMAP_LINEAR,[Ns]:i.LINEAR,[Xy]:i.LINEAR_MIPMAP_NEAREST,[Yc]:i.LINEAR_MIPMAP_LINEAR},Z={[rk]:i.NEVER,[hk]:i.ALWAYS,[ak]:i.LESS,[J2]:i.LEQUAL,[ok]:i.EQUAL,[uk]:i.GEQUAL,[lk]:i.GREATER,[ck]:i.NOTEQUAL};function rt(Q,K){if(K.type===mo&&t.has("OES_texture_float_linear")===!1&&(K.magFilter===Ns||K.magFilter===Xy||K.magFilter===ug||K.magFilter===Yc||K.minFilter===Ns||K.minFilter===Xy||K.minFilter===ug||K.minFilter===Yc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(Q,i.TEXTURE_WRAP_S,at[K.wrapS]),i.texParameteri(Q,i.TEXTURE_WRAP_T,at[K.wrapT]),(Q===i.TEXTURE_3D||Q===i.TEXTURE_2D_ARRAY)&&i.texParameteri(Q,i.TEXTURE_WRAP_R,at[K.wrapR]),i.texParameteri(Q,i.TEXTURE_MAG_FILTER,Y[K.magFilter]),i.texParameteri(Q,i.TEXTURE_MIN_FILTER,Y[K.minFilter]),K.compareFunction&&(i.texParameteri(Q,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(Q,i.TEXTURE_COMPARE_FUNC,Z[K.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(K.magFilter===Ur||K.minFilter!==ug&&K.minFilter!==Yc||K.type===mo&&t.has("OES_texture_float_linear")===!1)return;if(K.anisotropy>1||n.get(K).__currentAnisotropy){const mt=t.get("EXT_texture_filter_anisotropic");i.texParameterf(Q,mt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(K.anisotropy,s.getMaxAnisotropy())),n.get(K).__currentAnisotropy=K.anisotropy}}}function ft(Q,K){let mt=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,K.addEventListener("dispose",z));const Lt=K.source;let Rt=y.get(Lt);Rt===void 0&&(Rt={},y.set(Lt,Rt));const At=it(K);if(At!==Q.__cacheKey){Rt[At]===void 0&&(Rt[At]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,mt=!0),Rt[At].usedTimes++;const oe=Rt[Q.__cacheKey];oe!==void 0&&(Rt[Q.__cacheKey].usedTimes--,oe.usedTimes===0&&D(K)),Q.__cacheKey=At,Q.__webglTexture=Rt[At].texture}return mt}function dt(Q,K,mt){return Math.floor(Math.floor(Q/mt)/K)}function _t(Q,K,mt,Lt){const At=Q.updateRanges;if(At.length===0)e.texSubImage2D(i.TEXTURE_2D,0,0,0,K.width,K.height,mt,Lt,K.data);else{At.sort((Xt,te)=>Xt.start-te.start);let oe=0;for(let Xt=1;Xt<At.length;Xt++){const te=At[oe],re=At[Xt],ht=te.start+te.count,wt=dt(re.start,K.width,4),de=dt(te.start,K.width,4);re.start<=ht+1&&wt===de&&dt(re.start+re.count-1,K.width,4)===wt?te.count=Math.max(te.count,re.start+re.count-te.start):(++oe,At[oe]=re)}At.length=oe+1;const le=i.getParameter(i.UNPACK_ROW_LENGTH),ve=i.getParameter(i.UNPACK_SKIP_PIXELS),be=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,K.width);for(let Xt=0,te=At.length;Xt<te;Xt++){const re=At[Xt],ht=Math.floor(re.start/4),wt=Math.ceil(re.count/4),de=ht%K.width,pt=Math.floor(ht/K.width),Ft=wt,ie=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,de),i.pixelStorei(i.UNPACK_SKIP_ROWS,pt),e.texSubImage2D(i.TEXTURE_2D,0,de,pt,Ft,ie,mt,Lt,K.data)}Q.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,le),i.pixelStorei(i.UNPACK_SKIP_PIXELS,ve),i.pixelStorei(i.UNPACK_SKIP_ROWS,be)}}function ut(Q,K,mt){let Lt=i.TEXTURE_2D;(K.isDataArrayTexture||K.isCompressedArrayTexture)&&(Lt=i.TEXTURE_2D_ARRAY),K.isData3DTexture&&(Lt=i.TEXTURE_3D);const Rt=ft(Q,K),At=K.source;e.bindTexture(Lt,Q.__webglTexture,i.TEXTURE0+mt);const oe=n.get(At);if(At.version!==oe.__version||Rt===!0){e.activeTexture(i.TEXTURE0+mt);const le=Xn.getPrimaries(Xn.workingColorSpace),ve=K.colorSpace===Ku?null:Xn.getPrimaries(K.colorSpace),be=K.colorSpace===Ku||le===ve?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,K.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,K.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,be);let Xt=M(K.image,!1,s.maxTextureSize);Xt=Nt(K,Xt);const te=r.convert(K.format,K.colorSpace),re=r.convert(K.type);let ht=N(K.internalFormat,te,re,K.colorSpace,K.isVideoTexture);rt(Lt,K);let wt;const de=K.mipmaps,pt=K.isVideoTexture!==!0,Ft=oe.__version===void 0||Rt===!0,ie=At.dataReady,ye=k(K,Xt);if(K.isDepthTexture)ht=P(K.format===Ig,K.type),Ft&&(pt?e.texStorage2D(i.TEXTURE_2D,1,ht,Xt.width,Xt.height):e.texImage2D(i.TEXTURE_2D,0,ht,Xt.width,Xt.height,0,te,re,null));else if(K.isDataTexture)if(de.length>0){pt&&Ft&&e.texStorage2D(i.TEXTURE_2D,ye,ht,de[0].width,de[0].height);for(let se=0,jt=de.length;se<jt;se++)wt=de[se],pt?ie&&e.texSubImage2D(i.TEXTURE_2D,se,0,0,wt.width,wt.height,te,re,wt.data):e.texImage2D(i.TEXTURE_2D,se,ht,wt.width,wt.height,0,te,re,wt.data);K.generateMipmaps=!1}else pt?(Ft&&e.texStorage2D(i.TEXTURE_2D,ye,ht,Xt.width,Xt.height),ie&&_t(K,Xt,te,re)):e.texImage2D(i.TEXTURE_2D,0,ht,Xt.width,Xt.height,0,te,re,Xt.data);else if(K.isCompressedTexture)if(K.isCompressedArrayTexture){pt&&Ft&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ye,ht,de[0].width,de[0].height,Xt.depth);for(let se=0,jt=de.length;se<jt;se++)if(wt=de[se],K.format!==aa)if(te!==null)if(pt){if(ie)if(K.layerUpdates.size>0){const xe=_w(wt.width,wt.height,K.format,K.type);for(const we of K.layerUpdates){const Ce=wt.data.subarray(we*xe/wt.data.BYTES_PER_ELEMENT,(we+1)*xe/wt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,se,0,0,we,wt.width,wt.height,1,te,Ce)}K.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,se,0,0,0,wt.width,wt.height,Xt.depth,te,wt.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,se,ht,wt.width,wt.height,Xt.depth,0,wt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else pt?ie&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,se,0,0,0,wt.width,wt.height,Xt.depth,te,re,wt.data):e.texImage3D(i.TEXTURE_2D_ARRAY,se,ht,wt.width,wt.height,Xt.depth,0,te,re,wt.data)}else{pt&&Ft&&e.texStorage2D(i.TEXTURE_2D,ye,ht,de[0].width,de[0].height);for(let se=0,jt=de.length;se<jt;se++)wt=de[se],K.format!==aa?te!==null?pt?ie&&e.compressedTexSubImage2D(i.TEXTURE_2D,se,0,0,wt.width,wt.height,te,wt.data):e.compressedTexImage2D(i.TEXTURE_2D,se,ht,wt.width,wt.height,0,wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?ie&&e.texSubImage2D(i.TEXTURE_2D,se,0,0,wt.width,wt.height,te,re,wt.data):e.texImage2D(i.TEXTURE_2D,se,ht,wt.width,wt.height,0,te,re,wt.data)}else if(K.isDataArrayTexture)if(pt){if(Ft&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ye,ht,Xt.width,Xt.height,Xt.depth),ie)if(K.layerUpdates.size>0){const se=_w(Xt.width,Xt.height,K.format,K.type);for(const jt of K.layerUpdates){const xe=Xt.data.subarray(jt*se/Xt.data.BYTES_PER_ELEMENT,(jt+1)*se/Xt.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,jt,Xt.width,Xt.height,1,te,re,xe)}K.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Xt.width,Xt.height,Xt.depth,te,re,Xt.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,ht,Xt.width,Xt.height,Xt.depth,0,te,re,Xt.data);else if(K.isData3DTexture)pt?(Ft&&e.texStorage3D(i.TEXTURE_3D,ye,ht,Xt.width,Xt.height,Xt.depth),ie&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Xt.width,Xt.height,Xt.depth,te,re,Xt.data)):e.texImage3D(i.TEXTURE_3D,0,ht,Xt.width,Xt.height,Xt.depth,0,te,re,Xt.data);else if(K.isFramebufferTexture){if(Ft)if(pt)e.texStorage2D(i.TEXTURE_2D,ye,ht,Xt.width,Xt.height);else{let se=Xt.width,jt=Xt.height;for(let xe=0;xe<ye;xe++)e.texImage2D(i.TEXTURE_2D,xe,ht,se,jt,0,te,re,null),se>>=1,jt>>=1}}else if(de.length>0){if(pt&&Ft){const se=ge(de[0]);e.texStorage2D(i.TEXTURE_2D,ye,ht,se.width,se.height)}for(let se=0,jt=de.length;se<jt;se++)wt=de[se],pt?ie&&e.texSubImage2D(i.TEXTURE_2D,se,0,0,te,re,wt):e.texImage2D(i.TEXTURE_2D,se,ht,te,re,wt);K.generateMipmaps=!1}else if(pt){if(Ft){const se=ge(Xt);e.texStorage2D(i.TEXTURE_2D,ye,ht,se.width,se.height)}ie&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,te,re,Xt)}else e.texImage2D(i.TEXTURE_2D,0,ht,te,re,Xt);S(K)&&E(Lt),oe.__version=At.version,K.onUpdate&&K.onUpdate(K)}Q.__version=K.version}function gt(Q,K,mt){if(K.image.length!==6)return;const Lt=ft(Q,K),Rt=K.source;e.bindTexture(i.TEXTURE_CUBE_MAP,Q.__webglTexture,i.TEXTURE0+mt);const At=n.get(Rt);if(Rt.version!==At.__version||Lt===!0){e.activeTexture(i.TEXTURE0+mt);const oe=Xn.getPrimaries(Xn.workingColorSpace),le=K.colorSpace===Ku?null:Xn.getPrimaries(K.colorSpace),ve=K.colorSpace===Ku||oe===le?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,K.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,K.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ve);const be=K.isCompressedTexture||K.image[0].isCompressedTexture,Xt=K.image[0]&&K.image[0].isDataTexture,te=[];for(let jt=0;jt<6;jt++)!be&&!Xt?te[jt]=M(K.image[jt],!0,s.maxCubemapSize):te[jt]=Xt?K.image[jt].image:K.image[jt],te[jt]=Nt(K,te[jt]);const re=te[0],ht=r.convert(K.format,K.colorSpace),wt=r.convert(K.type),de=N(K.internalFormat,ht,wt,K.colorSpace),pt=K.isVideoTexture!==!0,Ft=At.__version===void 0||Lt===!0,ie=Rt.dataReady;let ye=k(K,re);rt(i.TEXTURE_CUBE_MAP,K);let se;if(be){pt&&Ft&&e.texStorage2D(i.TEXTURE_CUBE_MAP,ye,de,re.width,re.height);for(let jt=0;jt<6;jt++){se=te[jt].mipmaps;for(let xe=0;xe<se.length;xe++){const we=se[xe];K.format!==aa?ht!==null?pt?ie&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,xe,0,0,we.width,we.height,ht,we.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,xe,de,we.width,we.height,0,we.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pt?ie&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,xe,0,0,we.width,we.height,ht,wt,we.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,xe,de,we.width,we.height,0,ht,wt,we.data)}}}else{if(se=K.mipmaps,pt&&Ft){se.length>0&&ye++;const jt=ge(te[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,ye,de,jt.width,jt.height)}for(let jt=0;jt<6;jt++)if(Xt){pt?ie&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,0,0,te[jt].width,te[jt].height,ht,wt,te[jt].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,de,te[jt].width,te[jt].height,0,ht,wt,te[jt].data);for(let xe=0;xe<se.length;xe++){const Ce=se[xe].image[jt].image;pt?ie&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,xe+1,0,0,Ce.width,Ce.height,ht,wt,Ce.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,xe+1,de,Ce.width,Ce.height,0,ht,wt,Ce.data)}}else{pt?ie&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,0,0,ht,wt,te[jt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,de,ht,wt,te[jt]);for(let xe=0;xe<se.length;xe++){const we=se[xe];pt?ie&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,xe+1,0,0,ht,wt,we.image[jt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,xe+1,de,ht,wt,we.image[jt])}}}S(K)&&E(i.TEXTURE_CUBE_MAP),At.__version=Rt.version,K.onUpdate&&K.onUpdate(K)}Q.__version=K.version}function Tt(Q,K,mt,Lt,Rt,At){const oe=r.convert(mt.format,mt.colorSpace),le=r.convert(mt.type),ve=N(mt.internalFormat,oe,le,mt.colorSpace),be=n.get(K),Xt=n.get(mt);if(Xt.__renderTarget=K,!be.__hasExternalTextures){const te=Math.max(1,K.width>>At),re=Math.max(1,K.height>>At);Rt===i.TEXTURE_3D||Rt===i.TEXTURE_2D_ARRAY?e.texImage3D(Rt,At,ve,te,re,K.depth,0,oe,le,null):e.texImage2D(Rt,At,ve,te,re,0,oe,le,null)}e.bindFramebuffer(i.FRAMEBUFFER,Q),Dt(K)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Lt,Rt,Xt.__webglTexture,0,Bt(K)):(Rt===i.TEXTURE_2D||Rt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Rt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Lt,Rt,Xt.__webglTexture,At),e.bindFramebuffer(i.FRAMEBUFFER,null)}function $t(Q,K,mt){if(i.bindRenderbuffer(i.RENDERBUFFER,Q),K.depthBuffer){const Lt=K.depthTexture,Rt=Lt&&Lt.isDepthTexture?Lt.type:null,At=P(K.stencilBuffer,Rt),oe=K.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,le=Bt(K);Dt(K)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,le,At,K.width,K.height):mt?i.renderbufferStorageMultisample(i.RENDERBUFFER,le,At,K.width,K.height):i.renderbufferStorage(i.RENDERBUFFER,At,K.width,K.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,oe,i.RENDERBUFFER,Q)}else{const Lt=K.textures;for(let Rt=0;Rt<Lt.length;Rt++){const At=Lt[Rt],oe=r.convert(At.format,At.colorSpace),le=r.convert(At.type),ve=N(At.internalFormat,oe,le,At.colorSpace),be=Bt(K);mt&&Dt(K)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,be,ve,K.width,K.height):Dt(K)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,be,ve,K.width,K.height):i.renderbufferStorage(i.RENDERBUFFER,ve,K.width,K.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ae(Q,K){if(K&&K.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,Q),!(K.depthTexture&&K.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Lt=n.get(K.depthTexture);Lt.__renderTarget=K,(!Lt.__webglTexture||K.depthTexture.image.width!==K.width||K.depthTexture.image.height!==K.height)&&(K.depthTexture.image.width=K.width,K.depthTexture.image.height=K.height,K.depthTexture.needsUpdate=!0),lt(K.depthTexture,0);const Rt=Lt.__webglTexture,At=Bt(K);if(K.depthTexture.format===Dg)Dt(K)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Rt,0,At):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Rt,0);else if(K.depthTexture.format===Ig)Dt(K)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Rt,0,At):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Rt,0);else throw new Error("Unknown depthTexture format")}function ne(Q){const K=n.get(Q),mt=Q.isWebGLCubeRenderTarget===!0;if(K.__boundDepthTexture!==Q.depthTexture){const Lt=Q.depthTexture;if(K.__depthDisposeCallback&&K.__depthDisposeCallback(),Lt){const Rt=()=>{delete K.__boundDepthTexture,delete K.__depthDisposeCallback,Lt.removeEventListener("dispose",Rt)};Lt.addEventListener("dispose",Rt),K.__depthDisposeCallback=Rt}K.__boundDepthTexture=Lt}if(Q.depthTexture&&!K.__autoAllocateDepthBuffer){if(mt)throw new Error("target.depthTexture not supported in Cube render targets");const Lt=Q.texture.mipmaps;Lt&&Lt.length>0?ae(K.__webglFramebuffer[0],Q):ae(K.__webglFramebuffer,Q)}else if(mt){K.__webglDepthbuffer=[];for(let Lt=0;Lt<6;Lt++)if(e.bindFramebuffer(i.FRAMEBUFFER,K.__webglFramebuffer[Lt]),K.__webglDepthbuffer[Lt]===void 0)K.__webglDepthbuffer[Lt]=i.createRenderbuffer(),$t(K.__webglDepthbuffer[Lt],Q,!1);else{const Rt=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,At=K.__webglDepthbuffer[Lt];i.bindRenderbuffer(i.RENDERBUFFER,At),i.framebufferRenderbuffer(i.FRAMEBUFFER,Rt,i.RENDERBUFFER,At)}}else{const Lt=Q.texture.mipmaps;if(Lt&&Lt.length>0?e.bindFramebuffer(i.FRAMEBUFFER,K.__webglFramebuffer[0]):e.bindFramebuffer(i.FRAMEBUFFER,K.__webglFramebuffer),K.__webglDepthbuffer===void 0)K.__webglDepthbuffer=i.createRenderbuffer(),$t(K.__webglDepthbuffer,Q,!1);else{const Rt=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,At=K.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,At),i.framebufferRenderbuffer(i.FRAMEBUFFER,Rt,i.RENDERBUFFER,At)}}e.bindFramebuffer(i.FRAMEBUFFER,null)}function ee(Q,K,mt){const Lt=n.get(Q);K!==void 0&&Tt(Lt.__webglFramebuffer,Q,Q.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),mt!==void 0&&ne(Q)}function ct(Q){const K=Q.texture,mt=n.get(Q),Lt=n.get(K);Q.addEventListener("dispose",L);const Rt=Q.textures,At=Q.isWebGLCubeRenderTarget===!0,oe=Rt.length>1;if(oe||(Lt.__webglTexture===void 0&&(Lt.__webglTexture=i.createTexture()),Lt.__version=K.version,a.memory.textures++),At){mt.__webglFramebuffer=[];for(let le=0;le<6;le++)if(K.mipmaps&&K.mipmaps.length>0){mt.__webglFramebuffer[le]=[];for(let ve=0;ve<K.mipmaps.length;ve++)mt.__webglFramebuffer[le][ve]=i.createFramebuffer()}else mt.__webglFramebuffer[le]=i.createFramebuffer()}else{if(K.mipmaps&&K.mipmaps.length>0){mt.__webglFramebuffer=[];for(let le=0;le<K.mipmaps.length;le++)mt.__webglFramebuffer[le]=i.createFramebuffer()}else mt.__webglFramebuffer=i.createFramebuffer();if(oe)for(let le=0,ve=Rt.length;le<ve;le++){const be=n.get(Rt[le]);be.__webglTexture===void 0&&(be.__webglTexture=i.createTexture(),a.memory.textures++)}if(Q.samples>0&&Dt(Q)===!1){mt.__webglMultisampledFramebuffer=i.createFramebuffer(),mt.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,mt.__webglMultisampledFramebuffer);for(let le=0;le<Rt.length;le++){const ve=Rt[le];mt.__webglColorRenderbuffer[le]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,mt.__webglColorRenderbuffer[le]);const be=r.convert(ve.format,ve.colorSpace),Xt=r.convert(ve.type),te=N(ve.internalFormat,be,Xt,ve.colorSpace,Q.isXRRenderTarget===!0),re=Bt(Q);i.renderbufferStorageMultisample(i.RENDERBUFFER,re,te,Q.width,Q.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+le,i.RENDERBUFFER,mt.__webglColorRenderbuffer[le])}i.bindRenderbuffer(i.RENDERBUFFER,null),Q.depthBuffer&&(mt.__webglDepthRenderbuffer=i.createRenderbuffer(),$t(mt.__webglDepthRenderbuffer,Q,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(At){e.bindTexture(i.TEXTURE_CUBE_MAP,Lt.__webglTexture),rt(i.TEXTURE_CUBE_MAP,K);for(let le=0;le<6;le++)if(K.mipmaps&&K.mipmaps.length>0)for(let ve=0;ve<K.mipmaps.length;ve++)Tt(mt.__webglFramebuffer[le][ve],Q,K,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+le,ve);else Tt(mt.__webglFramebuffer[le],Q,K,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+le,0);S(K)&&E(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(oe){for(let le=0,ve=Rt.length;le<ve;le++){const be=Rt[le],Xt=n.get(be);let te=i.TEXTURE_2D;(Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(te=Q.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(te,Xt.__webglTexture),rt(te,be),Tt(mt.__webglFramebuffer,Q,be,i.COLOR_ATTACHMENT0+le,te,0),S(be)&&E(te)}e.unbindTexture()}else{let le=i.TEXTURE_2D;if((Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(le=Q.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(le,Lt.__webglTexture),rt(le,K),K.mipmaps&&K.mipmaps.length>0)for(let ve=0;ve<K.mipmaps.length;ve++)Tt(mt.__webglFramebuffer[ve],Q,K,i.COLOR_ATTACHMENT0,le,ve);else Tt(mt.__webglFramebuffer,Q,K,i.COLOR_ATTACHMENT0,le,0);S(K)&&E(le),e.unbindTexture()}Q.depthBuffer&&ne(Q)}function Gt(Q){const K=Q.textures;for(let mt=0,Lt=K.length;mt<Lt;mt++){const Rt=K[mt];if(S(Rt)){const At=R(Q),oe=n.get(Rt).__webglTexture;e.bindTexture(At,oe),E(At),e.unbindTexture()}}}const zt=[],Pt=[];function Ct(Q){if(Q.samples>0){if(Dt(Q)===!1){const K=Q.textures,mt=Q.width,Lt=Q.height;let Rt=i.COLOR_BUFFER_BIT;const At=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,oe=n.get(Q),le=K.length>1;if(le)for(let be=0;be<K.length;be++)e.bindFramebuffer(i.FRAMEBUFFER,oe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+be,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,oe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+be,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,oe.__webglMultisampledFramebuffer);const ve=Q.texture.mipmaps;ve&&ve.length>0?e.bindFramebuffer(i.DRAW_FRAMEBUFFER,oe.__webglFramebuffer[0]):e.bindFramebuffer(i.DRAW_FRAMEBUFFER,oe.__webglFramebuffer);for(let be=0;be<K.length;be++){if(Q.resolveDepthBuffer&&(Q.depthBuffer&&(Rt|=i.DEPTH_BUFFER_BIT),Q.stencilBuffer&&Q.resolveStencilBuffer&&(Rt|=i.STENCIL_BUFFER_BIT)),le){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,oe.__webglColorRenderbuffer[be]);const Xt=n.get(K[be]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Xt,0)}i.blitFramebuffer(0,0,mt,Lt,0,0,mt,Lt,Rt,i.NEAREST),c===!0&&(zt.length=0,Pt.length=0,zt.push(i.COLOR_ATTACHMENT0+be),Q.depthBuffer&&Q.resolveDepthBuffer===!1&&(zt.push(At),Pt.push(At),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Pt)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,zt))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),le)for(let be=0;be<K.length;be++){e.bindFramebuffer(i.FRAMEBUFFER,oe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+be,i.RENDERBUFFER,oe.__webglColorRenderbuffer[be]);const Xt=n.get(K[be]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,oe.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+be,i.TEXTURE_2D,Xt,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,oe.__webglMultisampledFramebuffer)}else if(Q.depthBuffer&&Q.resolveDepthBuffer===!1&&c){const K=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[K])}}}function Bt(Q){return Math.min(s.maxSamples,Q.samples)}function Dt(Q){const K=n.get(Q);return Q.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&K.__useRenderToTexture!==!1}function Ut(Q){const K=a.render.frame;d.get(Q)!==K&&(d.set(Q,K),Q.update())}function Nt(Q,K){const mt=Q.colorSpace,Lt=Q.format,Rt=Q.type;return Q.isCompressedTexture===!0||Q.isVideoTexture===!0||mt!==Bf&&mt!==Ku&&(Xn.getTransfer(mt)===Mi?(Lt!==aa||Rt!==yl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",mt)),K}function ge(Q){return typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?(u.width=Q.naturalWidth||Q.width,u.height=Q.naturalHeight||Q.height):typeof VideoFrame<"u"&&Q instanceof VideoFrame?(u.width=Q.displayWidth,u.height=Q.displayHeight):(u.width=Q.width,u.height=Q.height),u}this.allocateTextureUnit=G,this.resetTextureUnits=H,this.setTexture2D=lt,this.setTexture2DArray=j,this.setTexture3D=J,this.setTextureCube=$,this.rebindTextures=ee,this.setupRenderTarget=ct,this.updateRenderTargetMipmap=Gt,this.updateMultisampleRenderTarget=Ct,this.setupDepthRenderbuffer=ne,this.setupFrameBufferTexture=Tt,this.useMultisampledRTT=Dt}function xB(i,t){function e(n,s=Ku){let r;const a=Xn.getTransfer(s);if(n===yl)return i.UNSIGNED_BYTE;if(n===pE)return i.UNSIGNED_SHORT_4_4_4_4;if(n===mE)return i.UNSIGNED_SHORT_5_5_5_1;if(n===W2)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===q2)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===G2)return i.BYTE;if(n===j2)return i.SHORT;if(n===Rg)return i.UNSIGNED_SHORT;if(n===dE)return i.INT;if(n===fh)return i.UNSIGNED_INT;if(n===mo)return i.FLOAT;if(n===Qg)return i.HALF_FLOAT;if(n===X2)return i.ALPHA;if(n===Y2)return i.RGB;if(n===aa)return i.RGBA;if(n===Dg)return i.DEPTH_COMPONENT;if(n===Ig)return i.DEPTH_STENCIL;if(n===gE)return i.RED;if(n===a_)return i.RED_INTEGER;if(n===K2)return i.RG;if(n===yE)return i.RG_INTEGER;if(n===vE)return i.RGBA_INTEGER;if(n===Yy||n===Ky||n===Zy||n===Qy)if(a===Mi)if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===Yy)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ky)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Zy)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Qy)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===Yy)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ky)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Zy)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Qy)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===ZS||n===QS||n===JS||n===$S)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===ZS)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===QS)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===JS)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===$S)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===t1||n===e1||n===n1)if(r=t.get("WEBGL_compressed_texture_etc"),r!==null){if(n===t1||n===e1)return a===Mi?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===n1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===i1||n===s1||n===r1||n===a1||n===o1||n===l1||n===c1||n===u1||n===h1||n===f1||n===d1||n===p1||n===m1||n===g1)if(r=t.get("WEBGL_compressed_texture_astc"),r!==null){if(n===i1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===s1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===r1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===a1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===o1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===l1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===c1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===u1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===h1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===f1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===d1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===p1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===m1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===g1)return a===Mi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===y1||n===v1||n===_1)if(r=t.get("EXT_texture_compression_bptc"),r!==null){if(n===y1)return a===Mi?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===v1)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===_1)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===x1||n===b1||n===S1||n===E1)if(r=t.get("EXT_texture_compression_rgtc"),r!==null){if(n===x1)return r.COMPRESSED_RED_RGTC1_EXT;if(n===b1)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===S1)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===E1)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Cg?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:e}}const Vtt=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Htt=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Gtt{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e){if(this.texture===null){const n=new cR(t.texture);(t.depthNear!==e.depthNear||t.depthFar!==e.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new sc({vertexShader:Vtt,fragmentShader:Htt,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new ps(new gh(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class jtt extends fu{constructor(t,e){super();const n=this;let s=null,r=1,a=null,o="local-floor",c=1,u=null,d=null,g=null,y=null,_=null,b=null;const M=typeof XRWebGLBinding<"u",S=new Gtt,E={},R=e.getContextAttributes();let N=null,P=null;const k=[],z=[],L=new ce;let U=null;const D=new Is;D.viewport=new Yn;const O=new Is;O.viewport=new Yn;const F=[D,O],H=new cB;let G=null,it=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ut){let gt=k[ut];return gt===void 0&&(gt=new cS,k[ut]=gt),gt.getTargetRaySpace()},this.getControllerGrip=function(ut){let gt=k[ut];return gt===void 0&&(gt=new cS,k[ut]=gt),gt.getGripSpace()},this.getHand=function(ut){let gt=k[ut];return gt===void 0&&(gt=new cS,k[ut]=gt),gt.getHandSpace()};function lt(ut){const gt=z.indexOf(ut.inputSource);if(gt===-1)return;const Tt=k[gt];Tt!==void 0&&(Tt.update(ut.inputSource,ut.frame,u||a),Tt.dispatchEvent({type:ut.type,data:ut.inputSource}))}function j(){s.removeEventListener("select",lt),s.removeEventListener("selectstart",lt),s.removeEventListener("selectend",lt),s.removeEventListener("squeeze",lt),s.removeEventListener("squeezestart",lt),s.removeEventListener("squeezeend",lt),s.removeEventListener("end",j),s.removeEventListener("inputsourceschange",J);for(let ut=0;ut<k.length;ut++){const gt=z[ut];gt!==null&&(z[ut]=null,k[ut].disconnect(gt))}G=null,it=null,S.reset();for(const ut in E)delete E[ut];t.setRenderTarget(N),_=null,y=null,g=null,s=null,P=null,_t.stop(),n.isPresenting=!1,t.setPixelRatio(U),t.setSize(L.width,L.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ut){r=ut,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ut){o=ut,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(ut){u=ut},this.getBaseLayer=function(){return y!==null?y:_},this.getBinding=function(){return g===null&&M&&(g=new XRWebGLBinding(s,e)),g},this.getFrame=function(){return b},this.getSession=function(){return s},this.setSession=async function(ut){if(s=ut,s!==null){if(N=t.getRenderTarget(),s.addEventListener("select",lt),s.addEventListener("selectstart",lt),s.addEventListener("selectend",lt),s.addEventListener("squeeze",lt),s.addEventListener("squeezestart",lt),s.addEventListener("squeezeend",lt),s.addEventListener("end",j),s.addEventListener("inputsourceschange",J),R.xrCompatible!==!0&&await e.makeXRCompatible(),U=t.getPixelRatio(),t.getSize(L),M&&"createProjectionLayer"in XRWebGLBinding.prototype){let Tt=null,$t=null,ae=null;R.depth&&(ae=R.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Tt=R.stencil?Ig:Dg,$t=R.stencil?Cg:fh);const ne={colorFormat:e.RGBA8,depthFormat:ae,scaleFactor:r};g=this.getBinding(),y=g.createProjectionLayer(ne),s.updateRenderState({layers:[y]}),t.setPixelRatio(1),t.setSize(y.textureWidth,y.textureHeight,!1),P=new lu(y.textureWidth,y.textureHeight,{format:aa,type:yl,depthTexture:new lR(y.textureWidth,y.textureHeight,$t,void 0,void 0,void 0,void 0,void 0,void 0,Tt),stencilBuffer:R.stencil,colorSpace:t.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const Tt={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:r};_=new XRWebGLLayer(s,e,Tt),s.updateRenderState({baseLayer:_}),t.setPixelRatio(1),t.setSize(_.framebufferWidth,_.framebufferHeight,!1),P=new lu(_.framebufferWidth,_.framebufferHeight,{format:aa,type:yl,colorSpace:t.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}P.isXRRenderTarget=!0,this.setFoveation(c),u=null,a=await s.requestReferenceSpace(o),_t.setContext(s),_t.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function J(ut){for(let gt=0;gt<ut.removed.length;gt++){const Tt=ut.removed[gt],$t=z.indexOf(Tt);$t>=0&&(z[$t]=null,k[$t].disconnect(Tt))}for(let gt=0;gt<ut.added.length;gt++){const Tt=ut.added[gt];let $t=z.indexOf(Tt);if($t===-1){for(let ne=0;ne<k.length;ne++)if(ne>=z.length){z.push(Tt),$t=ne;break}else if(z[ne]===null){z[ne]=Tt,$t=ne;break}if($t===-1)break}const ae=k[$t];ae&&ae.connect(Tt)}}const $=new ot,at=new ot;function Y(ut,gt,Tt){$.setFromMatrixPosition(gt.matrixWorld),at.setFromMatrixPosition(Tt.matrixWorld);const $t=$.distanceTo(at),ae=gt.projectionMatrix.elements,ne=Tt.projectionMatrix.elements,ee=ae[14]/(ae[10]-1),ct=ae[14]/(ae[10]+1),Gt=(ae[9]+1)/ae[5],zt=(ae[9]-1)/ae[5],Pt=(ae[8]-1)/ae[0],Ct=(ne[8]+1)/ne[0],Bt=ee*Pt,Dt=ee*Ct,Ut=$t/(-Pt+Ct),Nt=Ut*-Pt;if(gt.matrixWorld.decompose(ut.position,ut.quaternion,ut.scale),ut.translateX(Nt),ut.translateZ(Ut),ut.matrixWorld.compose(ut.position,ut.quaternion,ut.scale),ut.matrixWorldInverse.copy(ut.matrixWorld).invert(),ae[10]===-1)ut.projectionMatrix.copy(gt.projectionMatrix),ut.projectionMatrixInverse.copy(gt.projectionMatrixInverse);else{const ge=ee+Ut,Q=ct+Ut,K=Bt-Nt,mt=Dt+($t-Nt),Lt=Gt*ct/Q*ge,Rt=zt*ct/Q*ge;ut.projectionMatrix.makePerspective(K,mt,Lt,Rt,ge,Q),ut.projectionMatrixInverse.copy(ut.projectionMatrix).invert()}}function Z(ut,gt){gt===null?ut.matrixWorld.copy(ut.matrix):ut.matrixWorld.multiplyMatrices(gt.matrixWorld,ut.matrix),ut.matrixWorldInverse.copy(ut.matrixWorld).invert()}this.updateCamera=function(ut){if(s===null)return;let gt=ut.near,Tt=ut.far;S.texture!==null&&(S.depthNear>0&&(gt=S.depthNear),S.depthFar>0&&(Tt=S.depthFar)),H.near=O.near=D.near=gt,H.far=O.far=D.far=Tt,(G!==H.near||it!==H.far)&&(s.updateRenderState({depthNear:H.near,depthFar:H.far}),G=H.near,it=H.far),H.layers.mask=ut.layers.mask|6,D.layers.mask=H.layers.mask&3,O.layers.mask=H.layers.mask&5;const $t=ut.parent,ae=H.cameras;Z(H,$t);for(let ne=0;ne<ae.length;ne++)Z(ae[ne],$t);ae.length===2?Y(H,D,O):H.projectionMatrix.copy(D.projectionMatrix),rt(ut,H,$t)};function rt(ut,gt,Tt){Tt===null?ut.matrix.copy(gt.matrixWorld):(ut.matrix.copy(Tt.matrixWorld),ut.matrix.invert(),ut.matrix.multiply(gt.matrixWorld)),ut.matrix.decompose(ut.position,ut.quaternion,ut.scale),ut.updateMatrixWorld(!0),ut.projectionMatrix.copy(gt.projectionMatrix),ut.projectionMatrixInverse.copy(gt.projectionMatrixInverse),ut.isPerspectiveCamera&&(ut.fov=Og*2*Math.atan(1/ut.projectionMatrix.elements[5]),ut.zoom=1)}this.getCamera=function(){return H},this.getFoveation=function(){if(!(y===null&&_===null))return c},this.setFoveation=function(ut){c=ut,y!==null&&(y.fixedFoveation=ut),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=ut)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(H)},this.getCameraTexture=function(ut){return E[ut]};let ft=null;function dt(ut,gt){if(d=gt.getViewerPose(u||a),b=gt,d!==null){const Tt=d.views;_!==null&&(t.setRenderTargetFramebuffer(P,_.framebuffer),t.setRenderTarget(P));let $t=!1;Tt.length!==H.cameras.length&&(H.cameras.length=0,$t=!0);for(let ct=0;ct<Tt.length;ct++){const Gt=Tt[ct];let zt=null;if(_!==null)zt=_.getViewport(Gt);else{const Ct=g.getViewSubImage(y,Gt);zt=Ct.viewport,ct===0&&(t.setRenderTargetTextures(P,Ct.colorTexture,Ct.depthStencilTexture),t.setRenderTarget(P))}let Pt=F[ct];Pt===void 0&&(Pt=new Is,Pt.layers.enable(ct),Pt.viewport=new Yn,F[ct]=Pt),Pt.matrix.fromArray(Gt.transform.matrix),Pt.matrix.decompose(Pt.position,Pt.quaternion,Pt.scale),Pt.projectionMatrix.fromArray(Gt.projectionMatrix),Pt.projectionMatrixInverse.copy(Pt.projectionMatrix).invert(),Pt.viewport.set(zt.x,zt.y,zt.width,zt.height),ct===0&&(H.matrix.copy(Pt.matrix),H.matrix.decompose(H.position,H.quaternion,H.scale)),$t===!0&&H.cameras.push(Pt)}const ae=s.enabledFeatures;if(ae&&ae.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&M){g=n.getBinding();const ct=g.getDepthInformation(Tt[0]);ct&&ct.isValid&&ct.texture&&S.init(ct,s.renderState)}if(ae&&ae.includes("camera-access")&&M){t.state.unbindTexture(),g=n.getBinding();for(let ct=0;ct<Tt.length;ct++){const Gt=Tt[ct].camera;if(Gt){let zt=E[Gt];zt||(zt=new cR,E[Gt]=zt);const Pt=g.getCameraImage(Gt);zt.sourceTexture=Pt}}}}for(let Tt=0;Tt<k.length;Tt++){const $t=z[Tt],ae=k[Tt];$t!==null&&ae!==void 0&&ae.update($t,gt,u||a)}ft&&ft(ut,gt),gt.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:gt}),b=null}const _t=new mB;_t.setAnimationLoop(dt),this.setAnimationLoop=function(ut){ft=ut},this.dispose=function(){}}}const Fd=new jo,Wtt=new ln;function qtt(i,t){function e(S,E){S.matrixAutoUpdate===!0&&S.updateMatrix(),E.value.copy(S.matrix)}function n(S,E){E.color.getRGB(S.fogColor.value,gk(i)),E.isFog?(S.fogNear.value=E.near,S.fogFar.value=E.far):E.isFogExp2&&(S.fogDensity.value=E.density)}function s(S,E,R,N,P){E.isMeshBasicMaterial||E.isMeshLambertMaterial?r(S,E):E.isMeshToonMaterial?(r(S,E),g(S,E)):E.isMeshPhongMaterial?(r(S,E),d(S,E)):E.isMeshStandardMaterial?(r(S,E),y(S,E),E.isMeshPhysicalMaterial&&_(S,E,P)):E.isMeshMatcapMaterial?(r(S,E),b(S,E)):E.isMeshDepthMaterial?r(S,E):E.isMeshDistanceMaterial?(r(S,E),M(S,E)):E.isMeshNormalMaterial?r(S,E):E.isLineBasicMaterial?(a(S,E),E.isLineDashedMaterial&&o(S,E)):E.isPointsMaterial?c(S,E,R,N):E.isSpriteMaterial?u(S,E):E.isShadowMaterial?(S.color.value.copy(E.color),S.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function r(S,E){S.opacity.value=E.opacity,E.color&&S.diffuse.value.copy(E.color),E.emissive&&S.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(S.map.value=E.map,e(E.map,S.mapTransform)),E.alphaMap&&(S.alphaMap.value=E.alphaMap,e(E.alphaMap,S.alphaMapTransform)),E.bumpMap&&(S.bumpMap.value=E.bumpMap,e(E.bumpMap,S.bumpMapTransform),S.bumpScale.value=E.bumpScale,E.side===La&&(S.bumpScale.value*=-1)),E.normalMap&&(S.normalMap.value=E.normalMap,e(E.normalMap,S.normalMapTransform),S.normalScale.value.copy(E.normalScale),E.side===La&&S.normalScale.value.negate()),E.displacementMap&&(S.displacementMap.value=E.displacementMap,e(E.displacementMap,S.displacementMapTransform),S.displacementScale.value=E.displacementScale,S.displacementBias.value=E.displacementBias),E.emissiveMap&&(S.emissiveMap.value=E.emissiveMap,e(E.emissiveMap,S.emissiveMapTransform)),E.specularMap&&(S.specularMap.value=E.specularMap,e(E.specularMap,S.specularMapTransform)),E.alphaTest>0&&(S.alphaTest.value=E.alphaTest);const R=t.get(E),N=R.envMap,P=R.envMapRotation;N&&(S.envMap.value=N,Fd.copy(P),Fd.x*=-1,Fd.y*=-1,Fd.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Fd.y*=-1,Fd.z*=-1),S.envMapRotation.value.setFromMatrix4(Wtt.makeRotationFromEuler(Fd)),S.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=E.reflectivity,S.ior.value=E.ior,S.refractionRatio.value=E.refractionRatio),E.lightMap&&(S.lightMap.value=E.lightMap,S.lightMapIntensity.value=E.lightMapIntensity,e(E.lightMap,S.lightMapTransform)),E.aoMap&&(S.aoMap.value=E.aoMap,S.aoMapIntensity.value=E.aoMapIntensity,e(E.aoMap,S.aoMapTransform))}function a(S,E){S.diffuse.value.copy(E.color),S.opacity.value=E.opacity,E.map&&(S.map.value=E.map,e(E.map,S.mapTransform))}function o(S,E){S.dashSize.value=E.dashSize,S.totalSize.value=E.dashSize+E.gapSize,S.scale.value=E.scale}function c(S,E,R,N){S.diffuse.value.copy(E.color),S.opacity.value=E.opacity,S.size.value=E.size*R,S.scale.value=N*.5,E.map&&(S.map.value=E.map,e(E.map,S.uvTransform)),E.alphaMap&&(S.alphaMap.value=E.alphaMap,e(E.alphaMap,S.alphaMapTransform)),E.alphaTest>0&&(S.alphaTest.value=E.alphaTest)}function u(S,E){S.diffuse.value.copy(E.color),S.opacity.value=E.opacity,S.rotation.value=E.rotation,E.map&&(S.map.value=E.map,e(E.map,S.mapTransform)),E.alphaMap&&(S.alphaMap.value=E.alphaMap,e(E.alphaMap,S.alphaMapTransform)),E.alphaTest>0&&(S.alphaTest.value=E.alphaTest)}function d(S,E){S.specular.value.copy(E.specular),S.shininess.value=Math.max(E.shininess,1e-4)}function g(S,E){E.gradientMap&&(S.gradientMap.value=E.gradientMap)}function y(S,E){S.metalness.value=E.metalness,E.metalnessMap&&(S.metalnessMap.value=E.metalnessMap,e(E.metalnessMap,S.metalnessMapTransform)),S.roughness.value=E.roughness,E.roughnessMap&&(S.roughnessMap.value=E.roughnessMap,e(E.roughnessMap,S.roughnessMapTransform)),E.envMap&&(S.envMapIntensity.value=E.envMapIntensity)}function _(S,E,R){S.ior.value=E.ior,E.sheen>0&&(S.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),S.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(S.sheenColorMap.value=E.sheenColorMap,e(E.sheenColorMap,S.sheenColorMapTransform)),E.sheenRoughnessMap&&(S.sheenRoughnessMap.value=E.sheenRoughnessMap,e(E.sheenRoughnessMap,S.sheenRoughnessMapTransform))),E.clearcoat>0&&(S.clearcoat.value=E.clearcoat,S.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(S.clearcoatMap.value=E.clearcoatMap,e(E.clearcoatMap,S.clearcoatMapTransform)),E.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap,e(E.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),E.clearcoatNormalMap&&(S.clearcoatNormalMap.value=E.clearcoatNormalMap,e(E.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),E.side===La&&S.clearcoatNormalScale.value.negate())),E.dispersion>0&&(S.dispersion.value=E.dispersion),E.iridescence>0&&(S.iridescence.value=E.iridescence,S.iridescenceIOR.value=E.iridescenceIOR,S.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(S.iridescenceMap.value=E.iridescenceMap,e(E.iridescenceMap,S.iridescenceMapTransform)),E.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=E.iridescenceThicknessMap,e(E.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),E.transmission>0&&(S.transmission.value=E.transmission,S.transmissionSamplerMap.value=R.texture,S.transmissionSamplerSize.value.set(R.width,R.height),E.transmissionMap&&(S.transmissionMap.value=E.transmissionMap,e(E.transmissionMap,S.transmissionMapTransform)),S.thickness.value=E.thickness,E.thicknessMap&&(S.thicknessMap.value=E.thicknessMap,e(E.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=E.attenuationDistance,S.attenuationColor.value.copy(E.attenuationColor)),E.anisotropy>0&&(S.anisotropyVector.value.set(E.anisotropy*Math.cos(E.anisotropyRotation),E.anisotropy*Math.sin(E.anisotropyRotation)),E.anisotropyMap&&(S.anisotropyMap.value=E.anisotropyMap,e(E.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=E.specularIntensity,S.specularColor.value.copy(E.specularColor),E.specularColorMap&&(S.specularColorMap.value=E.specularColorMap,e(E.specularColorMap,S.specularColorMapTransform)),E.specularIntensityMap&&(S.specularIntensityMap.value=E.specularIntensityMap,e(E.specularIntensityMap,S.specularIntensityMapTransform))}function b(S,E){E.matcap&&(S.matcap.value=E.matcap)}function M(S,E){const R=t.get(E).light;S.referencePosition.value.setFromMatrixPosition(R.matrixWorld),S.nearDistance.value=R.shadow.camera.near,S.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function Xtt(i,t,e,n){let s={},r={},a=[];const o=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function c(R,N){const P=N.program;n.uniformBlockBinding(R,P)}function u(R,N){let P=s[R.id];P===void 0&&(b(R),P=d(R),s[R.id]=P,R.addEventListener("dispose",S));const k=N.program;n.updateUBOMapping(R,k);const z=t.render.frame;r[R.id]!==z&&(y(R),r[R.id]=z)}function d(R){const N=g();R.__bindingPointIndex=N;const P=i.createBuffer(),k=R.__size,z=R.usage;return i.bindBuffer(i.UNIFORM_BUFFER,P),i.bufferData(i.UNIFORM_BUFFER,k,z),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,N,P),P}function g(){for(let R=0;R<o;R++)if(a.indexOf(R)===-1)return a.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(R){const N=s[R.id],P=R.uniforms,k=R.__cache;i.bindBuffer(i.UNIFORM_BUFFER,N);for(let z=0,L=P.length;z<L;z++){const U=Array.isArray(P[z])?P[z]:[P[z]];for(let D=0,O=U.length;D<O;D++){const F=U[D];if(_(F,z,D,k)===!0){const H=F.__offset,G=Array.isArray(F.value)?F.value:[F.value];let it=0;for(let lt=0;lt<G.length;lt++){const j=G[lt],J=M(j);typeof j=="number"||typeof j=="boolean"?(F.__data[0]=j,i.bufferSubData(i.UNIFORM_BUFFER,H+it,F.__data)):j.isMatrix3?(F.__data[0]=j.elements[0],F.__data[1]=j.elements[1],F.__data[2]=j.elements[2],F.__data[3]=0,F.__data[4]=j.elements[3],F.__data[5]=j.elements[4],F.__data[6]=j.elements[5],F.__data[7]=0,F.__data[8]=j.elements[6],F.__data[9]=j.elements[7],F.__data[10]=j.elements[8],F.__data[11]=0):(j.toArray(F.__data,it),it+=J.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,H,F.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function _(R,N,P,k){const z=R.value,L=N+"_"+P;if(k[L]===void 0)return typeof z=="number"||typeof z=="boolean"?k[L]=z:k[L]=z.clone(),!0;{const U=k[L];if(typeof z=="number"||typeof z=="boolean"){if(U!==z)return k[L]=z,!0}else if(U.equals(z)===!1)return U.copy(z),!0}return!1}function b(R){const N=R.uniforms;let P=0;const k=16;for(let L=0,U=N.length;L<U;L++){const D=Array.isArray(N[L])?N[L]:[N[L]];for(let O=0,F=D.length;O<F;O++){const H=D[O],G=Array.isArray(H.value)?H.value:[H.value];for(let it=0,lt=G.length;it<lt;it++){const j=G[it],J=M(j),$=P%k,at=$%J.boundary,Y=$+at;P+=at,Y!==0&&k-Y<J.storage&&(P+=k-Y),H.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=P,P+=J.storage}}}const z=P%k;return z>0&&(P+=k-z),R.__size=P,R.__cache={},this}function M(R){const N={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(N.boundary=4,N.storage=4):R.isVector2?(N.boundary=8,N.storage=8):R.isVector3||R.isColor?(N.boundary=16,N.storage=12):R.isVector4?(N.boundary=16,N.storage=16):R.isMatrix3?(N.boundary=48,N.storage=48):R.isMatrix4?(N.boundary=64,N.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),N}function S(R){const N=R.target;N.removeEventListener("dispose",S);const P=a.indexOf(N.__bindingPointIndex);a.splice(P,1),i.deleteBuffer(s[N.id]),delete s[N.id],delete r[N.id]}function E(){for(const R in s)i.deleteBuffer(s[R]);a=[],s={},r={}}return{bind:c,update:u,dispose:E}}class bB{constructor(t={}){const{canvas:e=dk(),context:n=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:g=!1,reversedDepthBuffer:y=!1}=t;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=a;const b=new Uint32Array(4),M=new Int32Array(4);let S=null,E=null;const R=[],N=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=nu,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const P=this;let k=!1;this._outputColorSpace=sa;let z=0,L=0,U=null,D=-1,O=null;const F=new Yn,H=new Yn;let G=null;const it=new Pe(0);let lt=0,j=e.width,J=e.height,$=1,at=null,Y=null;const Z=new Yn(0,0,j,J),rt=new Yn(0,0,j,J);let ft=!1;const dt=new Jg;let _t=!1,ut=!1;const gt=new ln,Tt=new ot,$t=new Yn,ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ne=!1;function ee(){return U===null?$:1}let ct=n;function Gt(et,St){return e.getContext(et,St)}try{const et={alpha:!0,depth:s,stencil:r,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:g};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${uE}`),e.addEventListener("webglcontextlost",ie,!1),e.addEventListener("webglcontextrestored",ye,!1),e.addEventListener("webglcontextcreationerror",se,!1),ct===null){const St="webgl2";if(ct=Gt(St,et),ct===null)throw Gt(St)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(et){throw console.error("THREE.WebGLRenderer: "+et.message),et}let zt,Pt,Ct,Bt,Dt,Ut,Nt,ge,Q,K,mt,Lt,Rt,At,oe,le,ve,be,Xt,te,re,ht,wt,de;function pt(){zt=new r$(ct),zt.init(),ht=new xB(ct,zt),Pt=new JJ(ct,zt,t,ht),Ct=new ztt(ct,zt),Pt.reversedDepthBuffer&&y&&Ct.buffers.depth.setReversed(!0),Bt=new l$(ct),Dt=new Att,Ut=new Ftt(ct,zt,Ct,Dt,Pt,ht,Bt),Nt=new t$(P),ge=new s$(P),Q=new pZ(ct),wt=new ZJ(ct,Q),K=new a$(ct,Q,Bt,wt),mt=new u$(ct,K,Q,Bt),Xt=new c$(ct,Pt,Ut),le=new $J(Dt),Lt=new Mtt(P,Nt,ge,zt,Pt,wt,le),Rt=new qtt(P,Dt),At=new Rtt,oe=new Ptt(zt),be=new KJ(P,Nt,ge,Ct,mt,_,c),ve=new ktt(P,mt,Pt),de=new Xtt(ct,Bt,Pt,Ct),te=new QJ(ct,zt,Bt),re=new o$(ct,zt,Bt),Bt.programs=Lt.programs,P.capabilities=Pt,P.extensions=zt,P.properties=Dt,P.renderLists=At,P.shadowMap=ve,P.state=Ct,P.info=Bt}pt();const Ft=new jtt(P,ct);this.xr=Ft,this.getContext=function(){return ct},this.getContextAttributes=function(){return ct.getContextAttributes()},this.forceContextLoss=function(){const et=zt.get("WEBGL_lose_context");et&&et.loseContext()},this.forceContextRestore=function(){const et=zt.get("WEBGL_lose_context");et&&et.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(et){et!==void 0&&($=et,this.setSize(j,J,!1))},this.getSize=function(et){return et.set(j,J)},this.setSize=function(et,St,kt=!0){if(Ft.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=et,J=St,e.width=Math.floor(et*$),e.height=Math.floor(St*$),kt===!0&&(e.style.width=et+"px",e.style.height=St+"px"),this.setViewport(0,0,et,St)},this.getDrawingBufferSize=function(et){return et.set(j*$,J*$).floor()},this.setDrawingBufferSize=function(et,St,kt){j=et,J=St,$=kt,e.width=Math.floor(et*kt),e.height=Math.floor(St*kt),this.setViewport(0,0,et,St)},this.getCurrentViewport=function(et){return et.copy(F)},this.getViewport=function(et){return et.copy(Z)},this.setViewport=function(et,St,kt,qt){et.isVector4?Z.set(et.x,et.y,et.z,et.w):Z.set(et,St,kt,qt),Ct.viewport(F.copy(Z).multiplyScalar($).round())},this.getScissor=function(et){return et.copy(rt)},this.setScissor=function(et,St,kt,qt){et.isVector4?rt.set(et.x,et.y,et.z,et.w):rt.set(et,St,kt,qt),Ct.scissor(H.copy(rt).multiplyScalar($).round())},this.getScissorTest=function(){return ft},this.setScissorTest=function(et){Ct.setScissorTest(ft=et)},this.setOpaqueSort=function(et){at=et},this.setTransparentSort=function(et){Y=et},this.getClearColor=function(et){return et.copy(be.getClearColor())},this.setClearColor=function(){be.setClearColor(...arguments)},this.getClearAlpha=function(){return be.getClearAlpha()},this.setClearAlpha=function(){be.setClearAlpha(...arguments)},this.clear=function(et=!0,St=!0,kt=!0){let qt=0;if(et){let yt=!1;if(U!==null){const _e=U.texture.format;yt=_e===vE||_e===yE||_e===a_}if(yt){const _e=U.texture.type,Me=_e===yl||_e===fh||_e===Rg||_e===Cg||_e===pE||_e===mE,De=be.getClearColor(),Re=be.getClearAlpha(),ze=De.r,He=De.g,Le=De.b;Me?(b[0]=ze,b[1]=He,b[2]=Le,b[3]=Re,ct.clearBufferuiv(ct.COLOR,0,b)):(M[0]=ze,M[1]=He,M[2]=Le,M[3]=Re,ct.clearBufferiv(ct.COLOR,0,M))}else qt|=ct.COLOR_BUFFER_BIT}St&&(qt|=ct.DEPTH_BUFFER_BIT),kt&&(qt|=ct.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ct.clear(qt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ie,!1),e.removeEventListener("webglcontextrestored",ye,!1),e.removeEventListener("webglcontextcreationerror",se,!1),be.dispose(),At.dispose(),oe.dispose(),Dt.dispose(),Nt.dispose(),ge.dispose(),mt.dispose(),wt.dispose(),de.dispose(),Lt.dispose(),Ft.dispose(),Ft.removeEventListener("sessionstart",dn),Ft.removeEventListener("sessionend",fn),Rn.stop()};function ie(et){et.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const et=Bt.autoReset,St=ve.enabled,kt=ve.autoUpdate,qt=ve.needsUpdate,yt=ve.type;pt(),Bt.autoReset=et,ve.enabled=St,ve.autoUpdate=kt,ve.needsUpdate=qt,ve.type=yt}function se(et){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",et.statusMessage)}function jt(et){const St=et.target;St.removeEventListener("dispose",jt),xe(St)}function xe(et){we(et),Dt.remove(et)}function we(et){const St=Dt.get(et).programs;St!==void 0&&(St.forEach(function(kt){Lt.releaseProgram(kt)}),et.isShaderMaterial&&Lt.releaseShaderCache(et))}this.renderBufferDirect=function(et,St,kt,qt,yt,_e){St===null&&(St=ae);const Me=yt.isMesh&&yt.matrixWorld.determinant()<0,De=Us(et,St,kt,qt,yt);Ct.setMaterial(qt,Me);let Re=kt.index,ze=1;if(qt.wireframe===!0){if(Re=K.getWireframeAttribute(kt),Re===void 0)return;ze=2}const He=kt.drawRange,Le=kt.attributes.position;let $e=He.start*ze,Cn=(He.start+He.count)*ze;_e!==null&&($e=Math.max($e,_e.start*ze),Cn=Math.min(Cn,(_e.start+_e.count)*ze)),Re!==null?($e=Math.max($e,0),Cn=Math.min(Cn,Re.count)):Le!=null&&($e=Math.max($e,0),Cn=Math.min(Cn,Le.count));const Qn=Cn-$e;if(Qn<0||Qn===1/0)return;wt.setup(yt,qt,De,kt,Re);let bn,Ge=te;if(Re!==null&&(bn=Q.get(Re),Ge=re,Ge.setIndex(bn)),yt.isMesh)qt.wireframe===!0?(Ct.setLineWidth(qt.wireframeLinewidth*ee()),Ge.setMode(ct.LINES)):Ge.setMode(ct.TRIANGLES);else if(yt.isLine){let Be=qt.linewidth;Be===void 0&&(Be=1),Ct.setLineWidth(Be*ee()),yt.isLineSegments?Ge.setMode(ct.LINES):yt.isLineLoop?Ge.setMode(ct.LINE_LOOP):Ge.setMode(ct.LINE_STRIP)}else yt.isPoints?Ge.setMode(ct.POINTS):yt.isSprite&&Ge.setMode(ct.TRIANGLES);if(yt.isBatchedMesh)if(yt._multiDrawInstances!==null)Rv("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ge.renderMultiDrawInstances(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount,yt._multiDrawInstances);else if(zt.get("WEBGL_multi_draw"))Ge.renderMultiDraw(yt._multiDrawStarts,yt._multiDrawCounts,yt._multiDrawCount);else{const Be=yt._multiDrawStarts,On=yt._multiDrawCounts,cn=yt._multiDrawCount,Ke=Re?Q.get(Re).bytesPerElement:1,ns=Dt.get(qt).currentProgram.getUniforms();for(let _i=0;_i<cn;_i++)ns.setValue(ct,"_gl_DrawID",_i),Ge.render(Be[_i]/Ke,On[_i])}else if(yt.isInstancedMesh)Ge.renderInstances($e,Qn,yt.count);else if(kt.isInstancedBufferGeometry){const Be=kt._maxInstanceCount!==void 0?kt._maxInstanceCount:1/0,On=Math.min(kt.instanceCount,Be);Ge.renderInstances($e,Qn,On)}else Ge.render($e,Qn)};function Ce(et,St,kt){et.transparent===!0&&et.side===Zl&&et.forceSinglePass===!1?(et.side=La,et.needsUpdate=!0,Zn(et,St,kt),et.side=uh,et.needsUpdate=!0,Zn(et,St,kt),et.side=Zl):Zn(et,St,kt)}this.compile=function(et,St,kt=null){kt===null&&(kt=et),E=oe.get(kt),E.init(St),N.push(E),kt.traverseVisible(function(yt){yt.isLight&&yt.layers.test(St.layers)&&(E.pushLight(yt),yt.castShadow&&E.pushShadow(yt))}),et!==kt&&et.traverseVisible(function(yt){yt.isLight&&yt.layers.test(St.layers)&&(E.pushLight(yt),yt.castShadow&&E.pushShadow(yt))}),E.setupLights();const qt=new Set;return et.traverse(function(yt){if(!(yt.isMesh||yt.isPoints||yt.isLine||yt.isSprite))return;const _e=yt.material;if(_e)if(Array.isArray(_e))for(let Me=0;Me<_e.length;Me++){const De=_e[Me];Ce(De,kt,yt),qt.add(De)}else Ce(_e,kt,yt),qt.add(_e)}),E=N.pop(),qt},this.compileAsync=function(et,St,kt=null){const qt=this.compile(et,St,kt);return new Promise(yt=>{function _e(){if(qt.forEach(function(Me){Dt.get(Me).currentProgram.isReady()&&qt.delete(Me)}),qt.size===0){yt(et);return}setTimeout(_e,10)}zt.get("KHR_parallel_shader_compile")!==null?_e():setTimeout(_e,10)})};let Ie=null;function Ln(et){Ie&&Ie(et)}function dn(){Rn.stop()}function fn(){Rn.start()}const Rn=new mB;Rn.setAnimationLoop(Ln),typeof self<"u"&&Rn.setContext(self),this.setAnimationLoop=function(et){Ie=et,Ft.setAnimationLoop(et),et===null?Rn.stop():Rn.start()},Ft.addEventListener("sessionstart",dn),Ft.addEventListener("sessionend",fn),this.render=function(et,St){if(St!==void 0&&St.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;if(et.matrixWorldAutoUpdate===!0&&et.updateMatrixWorld(),St.parent===null&&St.matrixWorldAutoUpdate===!0&&St.updateMatrixWorld(),Ft.enabled===!0&&Ft.isPresenting===!0&&(Ft.cameraAutoUpdate===!0&&Ft.updateCamera(St),St=Ft.getCamera()),et.isScene===!0&&et.onBeforeRender(P,et,St,U),E=oe.get(et,N.length),E.init(St),N.push(E),gt.multiplyMatrices(St.projectionMatrix,St.matrixWorldInverse),dt.setFromProjectionMatrix(gt,Vo,St.reversedDepth),ut=this.localClippingEnabled,_t=le.init(this.clippingPlanes,ut),S=At.get(et,R.length),S.init(),R.push(S),Ft.enabled===!0&&Ft.isPresenting===!0){const _e=P.xr.getDepthSensingMesh();_e!==null&&Fi(_e,St,-1/0,P.sortObjects)}Fi(et,St,0,P.sortObjects),S.finish(),P.sortObjects===!0&&S.sort(at,Y),ne=Ft.enabled===!1||Ft.isPresenting===!1||Ft.hasDepthSensing()===!1,ne&&be.addToRenderList(S,et),this.info.render.frame++,_t===!0&&le.beginShadows();const kt=E.state.shadowsArray;ve.render(kt,et,St),_t===!0&&le.endShadows(),this.info.autoReset===!0&&this.info.reset();const qt=S.opaque,yt=S.transmissive;if(E.setupLights(),St.isArrayCamera){const _e=St.cameras;if(yt.length>0)for(let Me=0,De=_e.length;Me<De;Me++){const Re=_e[Me];ys(qt,yt,et,Re)}ne&&be.render(et);for(let Me=0,De=_e.length;Me<De;Me++){const Re=_e[Me];vi(S,et,Re,Re.viewport)}}else yt.length>0&&ys(qt,yt,et,St),ne&&be.render(et),vi(S,et,St);U!==null&&L===0&&(Ut.updateMultisampleRenderTarget(U),Ut.updateRenderTargetMipmap(U)),et.isScene===!0&&et.onAfterRender(P,et,St),wt.resetDefaultState(),D=-1,O=null,N.pop(),N.length>0?(E=N[N.length-1],_t===!0&&le.setGlobalState(P.clippingPlanes,E.state.camera)):E=null,R.pop(),R.length>0?S=R[R.length-1]:S=null};function Fi(et,St,kt,qt){if(et.visible===!1)return;if(et.layers.test(St.layers)){if(et.isGroup)kt=et.renderOrder;else if(et.isLOD)et.autoUpdate===!0&&et.update(St);else if(et.isLight)E.pushLight(et),et.castShadow&&E.pushShadow(et);else if(et.isSprite){if(!et.frustumCulled||dt.intersectsSprite(et)){qt&&$t.setFromMatrixPosition(et.matrixWorld).applyMatrix4(gt);const Me=mt.update(et),De=et.material;De.visible&&S.push(et,Me,De,kt,$t.z,null)}}else if((et.isMesh||et.isLine||et.isPoints)&&(!et.frustumCulled||dt.intersectsObject(et))){const Me=mt.update(et),De=et.material;if(qt&&(et.boundingSphere!==void 0?(et.boundingSphere===null&&et.computeBoundingSphere(),$t.copy(et.boundingSphere.center)):(Me.boundingSphere===null&&Me.computeBoundingSphere(),$t.copy(Me.boundingSphere.center)),$t.applyMatrix4(et.matrixWorld).applyMatrix4(gt)),Array.isArray(De)){const Re=Me.groups;for(let ze=0,He=Re.length;ze<He;ze++){const Le=Re[ze],$e=De[Le.materialIndex];$e&&$e.visible&&S.push(et,Me,$e,kt,$t.z,Le)}}else De.visible&&S.push(et,Me,De,kt,$t.z,null)}}const _e=et.children;for(let Me=0,De=_e.length;Me<De;Me++)Fi(_e[Me],St,kt,qt)}function vi(et,St,kt,qt){const yt=et.opaque,_e=et.transmissive,Me=et.transparent;E.setupLightsView(kt),_t===!0&&le.setGlobalState(P.clippingPlanes,kt),qt&&Ct.viewport(F.copy(qt)),yt.length>0&&ji(yt,St,kt),_e.length>0&&ji(_e,St,kt),Me.length>0&&ji(Me,St,kt),Ct.buffers.depth.setTest(!0),Ct.buffers.depth.setMask(!0),Ct.buffers.color.setMask(!0),Ct.setPolygonOffset(!1)}function ys(et,St,kt,qt){if((kt.isScene===!0?kt.overrideMaterial:null)!==null)return;E.state.transmissionRenderTarget[qt.id]===void 0&&(E.state.transmissionRenderTarget[qt.id]=new lu(1,1,{generateMipmaps:!0,type:zt.has("EXT_color_buffer_half_float")||zt.has("EXT_color_buffer_float")?Qg:yl,minFilter:Yc,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Xn.workingColorSpace}));const _e=E.state.transmissionRenderTarget[qt.id],Me=qt.viewport||F;_e.setSize(Me.z*P.transmissionResolutionScale,Me.w*P.transmissionResolutionScale);const De=P.getRenderTarget(),Re=P.getActiveCubeFace(),ze=P.getActiveMipmapLevel();P.setRenderTarget(_e),P.getClearColor(it),lt=P.getClearAlpha(),lt<1&&P.setClearColor(16777215,.5),P.clear(),ne&&be.render(kt);const He=P.toneMapping;P.toneMapping=nu;const Le=qt.viewport;if(qt.viewport!==void 0&&(qt.viewport=void 0),E.setupLightsView(qt),_t===!0&&le.setGlobalState(P.clippingPlanes,qt),ji(et,kt,qt),Ut.updateMultisampleRenderTarget(_e),Ut.updateRenderTargetMipmap(_e),zt.has("WEBGL_multisampled_render_to_texture")===!1){let $e=!1;for(let Cn=0,Qn=St.length;Cn<Qn;Cn++){const bn=St[Cn],Ge=bn.object,Be=bn.geometry,On=bn.material,cn=bn.group;if(On.side===Zl&&Ge.layers.test(qt.layers)){const Ke=On.side;On.side=La,On.needsUpdate=!0,Kn(Ge,kt,qt,Be,On,cn),On.side=Ke,On.needsUpdate=!0,$e=!0}}$e===!0&&(Ut.updateMultisampleRenderTarget(_e),Ut.updateRenderTargetMipmap(_e))}P.setRenderTarget(De,Re,ze),P.setClearColor(it,lt),Le!==void 0&&(qt.viewport=Le),P.toneMapping=He}function ji(et,St,kt){const qt=St.isScene===!0?St.overrideMaterial:null;for(let yt=0,_e=et.length;yt<_e;yt++){const Me=et[yt],De=Me.object,Re=Me.geometry,ze=Me.group;let He=Me.material;He.allowOverride===!0&&qt!==null&&(He=qt),De.layers.test(kt.layers)&&Kn(De,St,kt,Re,He,ze)}}function Kn(et,St,kt,qt,yt,_e){et.onBeforeRender(P,St,kt,qt,yt,_e),et.modelViewMatrix.multiplyMatrices(kt.matrixWorldInverse,et.matrixWorld),et.normalMatrix.getNormalMatrix(et.modelViewMatrix),yt.onBeforeRender(P,St,kt,qt,et,_e),yt.transparent===!0&&yt.side===Zl&&yt.forceSinglePass===!1?(yt.side=La,yt.needsUpdate=!0,P.renderBufferDirect(kt,St,qt,yt,et,_e),yt.side=uh,yt.needsUpdate=!0,P.renderBufferDirect(kt,St,qt,yt,et,_e),yt.side=Zl):P.renderBufferDirect(kt,St,qt,yt,et,_e),et.onAfterRender(P,St,kt,qt,yt,_e)}function Zn(et,St,kt){St.isScene!==!0&&(St=ae);const qt=Dt.get(et),yt=E.state.lights,_e=E.state.shadowsArray,Me=yt.state.version,De=Lt.getParameters(et,yt.state,_e,St,kt),Re=Lt.getProgramCacheKey(De);let ze=qt.programs;qt.environment=et.isMeshStandardMaterial?St.environment:null,qt.fog=St.fog,qt.envMap=(et.isMeshStandardMaterial?ge:Nt).get(et.envMap||qt.environment),qt.envMapRotation=qt.environment!==null&&et.envMap===null?St.environmentRotation:et.envMapRotation,ze===void 0&&(et.addEventListener("dispose",jt),ze=new Map,qt.programs=ze);let He=ze.get(Re);if(He!==void 0){if(qt.currentProgram===He&&qt.lightsStateVersion===Me)return Ps(et,De),He}else De.uniforms=Lt.getUniforms(et),et.onBeforeCompile(De,P),He=Lt.acquireProgram(De,Re),ze.set(Re,He),qt.uniforms=De.uniforms;const Le=qt.uniforms;return(!et.isShaderMaterial&&!et.isRawShaderMaterial||et.clipping===!0)&&(Le.clippingPlanes=le.uniform),Ps(et,De),qt.needsLights=Br(et),qt.lightsStateVersion=Me,qt.needsLights&&(Le.ambientLightColor.value=yt.state.ambient,Le.lightProbe.value=yt.state.probe,Le.directionalLights.value=yt.state.directional,Le.directionalLightShadows.value=yt.state.directionalShadow,Le.spotLights.value=yt.state.spot,Le.spotLightShadows.value=yt.state.spotShadow,Le.rectAreaLights.value=yt.state.rectArea,Le.ltc_1.value=yt.state.rectAreaLTC1,Le.ltc_2.value=yt.state.rectAreaLTC2,Le.pointLights.value=yt.state.point,Le.pointLightShadows.value=yt.state.pointShadow,Le.hemisphereLights.value=yt.state.hemi,Le.directionalShadowMap.value=yt.state.directionalShadowMap,Le.directionalShadowMatrix.value=yt.state.directionalShadowMatrix,Le.spotShadowMap.value=yt.state.spotShadowMap,Le.spotLightMatrix.value=yt.state.spotLightMatrix,Le.spotLightMap.value=yt.state.spotLightMap,Le.pointShadowMap.value=yt.state.pointShadowMap,Le.pointShadowMatrix.value=yt.state.pointShadowMatrix),qt.currentProgram=He,qt.uniformsList=null,He}function Nn(et){if(et.uniformsList===null){const St=et.currentProgram.getUniforms();et.uniformsList=uS.seqWithValue(St.seq,et.uniforms)}return et.uniformsList}function Ps(et,St){const kt=Dt.get(et);kt.outputColorSpace=St.outputColorSpace,kt.batching=St.batching,kt.batchingColor=St.batchingColor,kt.instancing=St.instancing,kt.instancingColor=St.instancingColor,kt.instancingMorph=St.instancingMorph,kt.skinning=St.skinning,kt.morphTargets=St.morphTargets,kt.morphNormals=St.morphNormals,kt.morphColors=St.morphColors,kt.morphTargetsCount=St.morphTargetsCount,kt.numClippingPlanes=St.numClippingPlanes,kt.numIntersection=St.numClipIntersection,kt.vertexAlphas=St.vertexAlphas,kt.vertexTangents=St.vertexTangents,kt.toneMapping=St.toneMapping}function Us(et,St,kt,qt,yt){St.isScene!==!0&&(St=ae),Ut.resetTextureUnits();const _e=St.fog,Me=qt.isMeshStandardMaterial?St.environment:null,De=U===null?P.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:Bf,Re=(qt.isMeshStandardMaterial?ge:Nt).get(qt.envMap||Me),ze=qt.vertexColors===!0&&!!kt.attributes.color&&kt.attributes.color.itemSize===4,He=!!kt.attributes.tangent&&(!!qt.normalMap||qt.anisotropy>0),Le=!!kt.morphAttributes.position,$e=!!kt.morphAttributes.normal,Cn=!!kt.morphAttributes.color;let Qn=nu;qt.toneMapped&&(U===null||U.isXRRenderTarget===!0)&&(Qn=P.toneMapping);const bn=kt.morphAttributes.position||kt.morphAttributes.normal||kt.morphAttributes.color,Ge=bn!==void 0?bn.length:0,Be=Dt.get(qt),On=E.state.lights;if(_t===!0&&(ut===!0||et!==O)){const ei=et===O&&qt.id===D;le.setState(qt,et,ei)}let cn=!1;qt.version===Be.__version?(Be.needsLights&&Be.lightsStateVersion!==On.state.version||Be.outputColorSpace!==De||yt.isBatchedMesh&&Be.batching===!1||!yt.isBatchedMesh&&Be.batching===!0||yt.isBatchedMesh&&Be.batchingColor===!0&&yt.colorTexture===null||yt.isBatchedMesh&&Be.batchingColor===!1&&yt.colorTexture!==null||yt.isInstancedMesh&&Be.instancing===!1||!yt.isInstancedMesh&&Be.instancing===!0||yt.isSkinnedMesh&&Be.skinning===!1||!yt.isSkinnedMesh&&Be.skinning===!0||yt.isInstancedMesh&&Be.instancingColor===!0&&yt.instanceColor===null||yt.isInstancedMesh&&Be.instancingColor===!1&&yt.instanceColor!==null||yt.isInstancedMesh&&Be.instancingMorph===!0&&yt.morphTexture===null||yt.isInstancedMesh&&Be.instancingMorph===!1&&yt.morphTexture!==null||Be.envMap!==Re||qt.fog===!0&&Be.fog!==_e||Be.numClippingPlanes!==void 0&&(Be.numClippingPlanes!==le.numPlanes||Be.numIntersection!==le.numIntersection)||Be.vertexAlphas!==ze||Be.vertexTangents!==He||Be.morphTargets!==Le||Be.morphNormals!==$e||Be.morphColors!==Cn||Be.toneMapping!==Qn||Be.morphTargetsCount!==Ge)&&(cn=!0):(cn=!0,Be.__version=qt.version);let Ke=Be.currentProgram;cn===!0&&(Ke=Zn(qt,St,yt));let ns=!1,_i=!1,hi=!1;const Sn=Ke.getUniforms(),is=Be.uniforms;if(Ct.useProgram(Ke.program)&&(ns=!0,_i=!0,hi=!0),qt.id!==D&&(D=qt.id,_i=!0),ns||O!==et){Ct.buffers.depth.getReversed()&&et.reversedDepth!==!0&&(et._reversedDepth=!0,et.updateProjectionMatrix()),Sn.setValue(ct,"projectionMatrix",et.projectionMatrix),Sn.setValue(ct,"viewMatrix",et.matrixWorldInverse);const Zi=Sn.map.cameraPosition;Zi!==void 0&&Zi.setValue(ct,Tt.setFromMatrixPosition(et.matrixWorld)),Pt.logarithmicDepthBuffer&&Sn.setValue(ct,"logDepthBufFC",2/(Math.log(et.far+1)/Math.LN2)),(qt.isMeshPhongMaterial||qt.isMeshToonMaterial||qt.isMeshLambertMaterial||qt.isMeshBasicMaterial||qt.isMeshStandardMaterial||qt.isShaderMaterial)&&Sn.setValue(ct,"isOrthographic",et.isOrthographicCamera===!0),O!==et&&(O=et,_i=!0,hi=!0)}if(yt.isSkinnedMesh){Sn.setOptional(ct,yt,"bindMatrix"),Sn.setOptional(ct,yt,"bindMatrixInverse");const ei=yt.skeleton;ei&&(ei.boneTexture===null&&ei.computeBoneTexture(),Sn.setValue(ct,"boneTexture",ei.boneTexture,Ut))}yt.isBatchedMesh&&(Sn.setOptional(ct,yt,"batchingTexture"),Sn.setValue(ct,"batchingTexture",yt._matricesTexture,Ut),Sn.setOptional(ct,yt,"batchingIdTexture"),Sn.setValue(ct,"batchingIdTexture",yt._indirectTexture,Ut),Sn.setOptional(ct,yt,"batchingColorTexture"),yt._colorsTexture!==null&&Sn.setValue(ct,"batchingColorTexture",yt._colorsTexture,Ut));const Vi=kt.morphAttributes;if((Vi.position!==void 0||Vi.normal!==void 0||Vi.color!==void 0)&&Xt.update(yt,kt,Ke),(_i||Be.receiveShadow!==yt.receiveShadow)&&(Be.receiveShadow=yt.receiveShadow,Sn.setValue(ct,"receiveShadow",yt.receiveShadow)),qt.isMeshGouraudMaterial&&qt.envMap!==null&&(is.envMap.value=Re,is.flipEnvMap.value=Re.isCubeTexture&&Re.isRenderTargetTexture===!1?-1:1),qt.isMeshStandardMaterial&&qt.envMap===null&&St.environment!==null&&(is.envMapIntensity.value=St.environmentIntensity),_i&&(Sn.setValue(ct,"toneMappingExposure",P.toneMappingExposure),Be.needsLights&&fa(is,hi),_e&&qt.fog===!0&&Rt.refreshFogUniforms(is,_e),Rt.refreshMaterialUniforms(is,qt,$,J,E.state.transmissionRenderTarget[et.id]),uS.upload(ct,Nn(Be),is,Ut)),qt.isShaderMaterial&&qt.uniformsNeedUpdate===!0&&(uS.upload(ct,Nn(Be),is,Ut),qt.uniformsNeedUpdate=!1),qt.isSpriteMaterial&&Sn.setValue(ct,"center",yt.center),Sn.setValue(ct,"modelViewMatrix",yt.modelViewMatrix),Sn.setValue(ct,"normalMatrix",yt.normalMatrix),Sn.setValue(ct,"modelMatrix",yt.matrixWorld),qt.isShaderMaterial||qt.isRawShaderMaterial){const ei=qt.uniformsGroups;for(let Zi=0,zr=ei.length;Zi<zr;Zi++){const ri=ei[Zi];de.update(ri,Ke),de.bind(ri,Ke)}}return Ke}function fa(et,St){et.ambientLightColor.needsUpdate=St,et.lightProbe.needsUpdate=St,et.directionalLights.needsUpdate=St,et.directionalLightShadows.needsUpdate=St,et.pointLights.needsUpdate=St,et.pointLightShadows.needsUpdate=St,et.spotLights.needsUpdate=St,et.spotLightShadows.needsUpdate=St,et.rectAreaLights.needsUpdate=St,et.hemisphereLights.needsUpdate=St}function Br(et){return et.isMeshLambertMaterial||et.isMeshToonMaterial||et.isMeshPhongMaterial||et.isMeshStandardMaterial||et.isShadowMaterial||et.isShaderMaterial&&et.lights===!0}this.getActiveCubeFace=function(){return z},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(et,St,kt){const qt=Dt.get(et);qt.__autoAllocateDepthBuffer=et.resolveDepthBuffer===!1,qt.__autoAllocateDepthBuffer===!1&&(qt.__useRenderToTexture=!1),Dt.get(et.texture).__webglTexture=St,Dt.get(et.depthTexture).__webglTexture=qt.__autoAllocateDepthBuffer?void 0:kt,qt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(et,St){const kt=Dt.get(et);kt.__webglFramebuffer=St,kt.__useDefaultFramebuffer=St===void 0};const di=ct.createFramebuffer();this.setRenderTarget=function(et,St=0,kt=0){U=et,z=St,L=kt;let qt=!0,yt=null,_e=!1,Me=!1;if(et){const Re=Dt.get(et);if(Re.__useDefaultFramebuffer!==void 0)Ct.bindFramebuffer(ct.FRAMEBUFFER,null),qt=!1;else if(Re.__webglFramebuffer===void 0)Ut.setupRenderTarget(et);else if(Re.__hasExternalTextures)Ut.rebindTextures(et,Dt.get(et.texture).__webglTexture,Dt.get(et.depthTexture).__webglTexture);else if(et.depthBuffer){const Le=et.depthTexture;if(Re.__boundDepthTexture!==Le){if(Le!==null&&Dt.has(Le)&&(et.width!==Le.image.width||et.height!==Le.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ut.setupDepthRenderbuffer(et)}}const ze=et.texture;(ze.isData3DTexture||ze.isDataArrayTexture||ze.isCompressedArrayTexture)&&(Me=!0);const He=Dt.get(et).__webglFramebuffer;et.isWebGLCubeRenderTarget?(Array.isArray(He[St])?yt=He[St][kt]:yt=He[St],_e=!0):et.samples>0&&Ut.useMultisampledRTT(et)===!1?yt=Dt.get(et).__webglMultisampledFramebuffer:Array.isArray(He)?yt=He[kt]:yt=He,F.copy(et.viewport),H.copy(et.scissor),G=et.scissorTest}else F.copy(Z).multiplyScalar($).floor(),H.copy(rt).multiplyScalar($).floor(),G=ft;if(kt!==0&&(yt=di),Ct.bindFramebuffer(ct.FRAMEBUFFER,yt)&&qt&&Ct.drawBuffers(et,yt),Ct.viewport(F),Ct.scissor(H),Ct.setScissorTest(G),_e){const Re=Dt.get(et.texture);ct.framebufferTexture2D(ct.FRAMEBUFFER,ct.COLOR_ATTACHMENT0,ct.TEXTURE_CUBE_MAP_POSITIVE_X+St,Re.__webglTexture,kt)}else if(Me){const Re=St;for(let ze=0;ze<et.textures.length;ze++){const He=Dt.get(et.textures[ze]);ct.framebufferTextureLayer(ct.FRAMEBUFFER,ct.COLOR_ATTACHMENT0+ze,He.__webglTexture,kt,Re)}}else if(et!==null&&kt!==0){const Re=Dt.get(et.texture);ct.framebufferTexture2D(ct.FRAMEBUFFER,ct.COLOR_ATTACHMENT0,ct.TEXTURE_2D,Re.__webglTexture,kt)}D=-1},this.readRenderTargetPixels=function(et,St,kt,qt,yt,_e,Me,De=0){if(!(et&&et.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Re=Dt.get(et).__webglFramebuffer;if(et.isWebGLCubeRenderTarget&&Me!==void 0&&(Re=Re[Me]),Re){Ct.bindFramebuffer(ct.FRAMEBUFFER,Re);try{const ze=et.textures[De],He=ze.format,Le=ze.type;if(!Pt.textureFormatReadable(He)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pt.textureTypeReadable(Le)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}St>=0&&St<=et.width-qt&&kt>=0&&kt<=et.height-yt&&(et.textures.length>1&&ct.readBuffer(ct.COLOR_ATTACHMENT0+De),ct.readPixels(St,kt,qt,yt,ht.convert(He),ht.convert(Le),_e))}finally{const ze=U!==null?Dt.get(U).__webglFramebuffer:null;Ct.bindFramebuffer(ct.FRAMEBUFFER,ze)}}},this.readRenderTargetPixelsAsync=async function(et,St,kt,qt,yt,_e,Me,De=0){if(!(et&&et.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Re=Dt.get(et).__webglFramebuffer;if(et.isWebGLCubeRenderTarget&&Me!==void 0&&(Re=Re[Me]),Re)if(St>=0&&St<=et.width-qt&&kt>=0&&kt<=et.height-yt){Ct.bindFramebuffer(ct.FRAMEBUFFER,Re);const ze=et.textures[De],He=ze.format,Le=ze.type;if(!Pt.textureFormatReadable(He))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pt.textureTypeReadable(Le))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const $e=ct.createBuffer();ct.bindBuffer(ct.PIXEL_PACK_BUFFER,$e),ct.bufferData(ct.PIXEL_PACK_BUFFER,_e.byteLength,ct.STREAM_READ),et.textures.length>1&&ct.readBuffer(ct.COLOR_ATTACHMENT0+De),ct.readPixels(St,kt,qt,yt,ht.convert(He),ht.convert(Le),0);const Cn=U!==null?Dt.get(U).__webglFramebuffer:null;Ct.bindFramebuffer(ct.FRAMEBUFFER,Cn);const Qn=ct.fenceSync(ct.SYNC_GPU_COMMANDS_COMPLETE,0);return ct.flush(),await NX(ct,Qn,4),ct.bindBuffer(ct.PIXEL_PACK_BUFFER,$e),ct.getBufferSubData(ct.PIXEL_PACK_BUFFER,0,_e),ct.deleteBuffer($e),ct.deleteSync(Qn),_e}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(et,St=null,kt=0){const qt=Math.pow(2,-kt),yt=Math.floor(et.image.width*qt),_e=Math.floor(et.image.height*qt),Me=St!==null?St.x:0,De=St!==null?St.y:0;Ut.setTexture2D(et,0),ct.copyTexSubImage2D(ct.TEXTURE_2D,kt,0,0,Me,De,yt,_e),Ct.unbindTexture()};const Ba=ct.createFramebuffer(),da=ct.createFramebuffer();this.copyTextureToTexture=function(et,St,kt=null,qt=null,yt=0,_e=null){_e===null&&(yt!==0?(Rv("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),_e=yt,yt=0):_e=0);let Me,De,Re,ze,He,Le,$e,Cn,Qn;const bn=et.isCompressedTexture?et.mipmaps[_e]:et.image;if(kt!==null)Me=kt.max.x-kt.min.x,De=kt.max.y-kt.min.y,Re=kt.isBox3?kt.max.z-kt.min.z:1,ze=kt.min.x,He=kt.min.y,Le=kt.isBox3?kt.min.z:0;else{const Vi=Math.pow(2,-yt);Me=Math.floor(bn.width*Vi),De=Math.floor(bn.height*Vi),et.isDataArrayTexture?Re=bn.depth:et.isData3DTexture?Re=Math.floor(bn.depth*Vi):Re=1,ze=0,He=0,Le=0}qt!==null?($e=qt.x,Cn=qt.y,Qn=qt.z):($e=0,Cn=0,Qn=0);const Ge=ht.convert(St.format),Be=ht.convert(St.type);let On;St.isData3DTexture?(Ut.setTexture3D(St,0),On=ct.TEXTURE_3D):St.isDataArrayTexture||St.isCompressedArrayTexture?(Ut.setTexture2DArray(St,0),On=ct.TEXTURE_2D_ARRAY):(Ut.setTexture2D(St,0),On=ct.TEXTURE_2D),ct.pixelStorei(ct.UNPACK_FLIP_Y_WEBGL,St.flipY),ct.pixelStorei(ct.UNPACK_PREMULTIPLY_ALPHA_WEBGL,St.premultiplyAlpha),ct.pixelStorei(ct.UNPACK_ALIGNMENT,St.unpackAlignment);const cn=ct.getParameter(ct.UNPACK_ROW_LENGTH),Ke=ct.getParameter(ct.UNPACK_IMAGE_HEIGHT),ns=ct.getParameter(ct.UNPACK_SKIP_PIXELS),_i=ct.getParameter(ct.UNPACK_SKIP_ROWS),hi=ct.getParameter(ct.UNPACK_SKIP_IMAGES);ct.pixelStorei(ct.UNPACK_ROW_LENGTH,bn.width),ct.pixelStorei(ct.UNPACK_IMAGE_HEIGHT,bn.height),ct.pixelStorei(ct.UNPACK_SKIP_PIXELS,ze),ct.pixelStorei(ct.UNPACK_SKIP_ROWS,He),ct.pixelStorei(ct.UNPACK_SKIP_IMAGES,Le);const Sn=et.isDataArrayTexture||et.isData3DTexture,is=St.isDataArrayTexture||St.isData3DTexture;if(et.isDepthTexture){const Vi=Dt.get(et),ei=Dt.get(St),Zi=Dt.get(Vi.__renderTarget),zr=Dt.get(ei.__renderTarget);Ct.bindFramebuffer(ct.READ_FRAMEBUFFER,Zi.__webglFramebuffer),Ct.bindFramebuffer(ct.DRAW_FRAMEBUFFER,zr.__webglFramebuffer);for(let ri=0;ri<Re;ri++)Sn&&(ct.framebufferTextureLayer(ct.READ_FRAMEBUFFER,ct.COLOR_ATTACHMENT0,Dt.get(et).__webglTexture,yt,Le+ri),ct.framebufferTextureLayer(ct.DRAW_FRAMEBUFFER,ct.COLOR_ATTACHMENT0,Dt.get(St).__webglTexture,_e,Qn+ri)),ct.blitFramebuffer(ze,He,Me,De,$e,Cn,Me,De,ct.DEPTH_BUFFER_BIT,ct.NEAREST);Ct.bindFramebuffer(ct.READ_FRAMEBUFFER,null),Ct.bindFramebuffer(ct.DRAW_FRAMEBUFFER,null)}else if(yt!==0||et.isRenderTargetTexture||Dt.has(et)){const Vi=Dt.get(et),ei=Dt.get(St);Ct.bindFramebuffer(ct.READ_FRAMEBUFFER,Ba),Ct.bindFramebuffer(ct.DRAW_FRAMEBUFFER,da);for(let Zi=0;Zi<Re;Zi++)Sn?ct.framebufferTextureLayer(ct.READ_FRAMEBUFFER,ct.COLOR_ATTACHMENT0,Vi.__webglTexture,yt,Le+Zi):ct.framebufferTexture2D(ct.READ_FRAMEBUFFER,ct.COLOR_ATTACHMENT0,ct.TEXTURE_2D,Vi.__webglTexture,yt),is?ct.framebufferTextureLayer(ct.DRAW_FRAMEBUFFER,ct.COLOR_ATTACHMENT0,ei.__webglTexture,_e,Qn+Zi):ct.framebufferTexture2D(ct.DRAW_FRAMEBUFFER,ct.COLOR_ATTACHMENT0,ct.TEXTURE_2D,ei.__webglTexture,_e),yt!==0?ct.blitFramebuffer(ze,He,Me,De,$e,Cn,Me,De,ct.COLOR_BUFFER_BIT,ct.NEAREST):is?ct.copyTexSubImage3D(On,_e,$e,Cn,Qn+Zi,ze,He,Me,De):ct.copyTexSubImage2D(On,_e,$e,Cn,ze,He,Me,De);Ct.bindFramebuffer(ct.READ_FRAMEBUFFER,null),Ct.bindFramebuffer(ct.DRAW_FRAMEBUFFER,null)}else is?et.isDataTexture||et.isData3DTexture?ct.texSubImage3D(On,_e,$e,Cn,Qn,Me,De,Re,Ge,Be,bn.data):St.isCompressedArrayTexture?ct.compressedTexSubImage3D(On,_e,$e,Cn,Qn,Me,De,Re,Ge,bn.data):ct.texSubImage3D(On,_e,$e,Cn,Qn,Me,De,Re,Ge,Be,bn):et.isDataTexture?ct.texSubImage2D(ct.TEXTURE_2D,_e,$e,Cn,Me,De,Ge,Be,bn.data):et.isCompressedTexture?ct.compressedTexSubImage2D(ct.TEXTURE_2D,_e,$e,Cn,bn.width,bn.height,Ge,bn.data):ct.texSubImage2D(ct.TEXTURE_2D,_e,$e,Cn,Me,De,Ge,Be,bn);ct.pixelStorei(ct.UNPACK_ROW_LENGTH,cn),ct.pixelStorei(ct.UNPACK_IMAGE_HEIGHT,Ke),ct.pixelStorei(ct.UNPACK_SKIP_PIXELS,ns),ct.pixelStorei(ct.UNPACK_SKIP_ROWS,_i),ct.pixelStorei(ct.UNPACK_SKIP_IMAGES,hi),_e===0&&St.generateMipmaps&&ct.generateMipmap(On),Ct.unbindTexture()},this.initRenderTarget=function(et){Dt.get(et).__webglFramebuffer===void 0&&Ut.setupRenderTarget(et)},this.initTexture=function(et){et.isCubeTexture?Ut.setTextureCube(et,0):et.isData3DTexture?Ut.setTexture3D(et,0):et.isDataArrayTexture||et.isCompressedArrayTexture?Ut.setTexture2DArray(et,0):Ut.setTexture2D(et,0),Ct.unbindTexture()},this.resetState=function(){z=0,L=0,U=null,Ct.reset(),wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Vo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Xn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Xn._getUnpackColorSpace()}}const Ytt=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:V2,AddEquation:yf,AddOperation:q4,AdditiveAnimationBlendMode:Z2,AdditiveBlending:aw,AgXToneMapping:Q4,AlphaFormat:X2,AlwaysCompare:hk,AlwaysDepth:jS,AlwaysStencilFunc:uw,AmbientLight:sB,AnimationAction:fB,AnimationClip:Pv,AnimationLoader:rK,AnimationMixer:PK,AnimationObjectGroup:NK,AnimationUtils:eK,ArcCurve:Ck,ArrayCamera:cB,ArrowHelper:rZ,AttachedBindMode:cw,Audio:uB,AudioAnalyser:SK,AudioContext:ER,AudioListener:_K,AudioLoader:gK,AxesHelper:aZ,BackSide:La,BasicDepthPacking:ik,BasicShadowMap:A4,BatchedMesh:Tk,Bone:aR,BooleanKeyframeTrack:Pp,Box2:GK,Box3:_r,Box3Helper:iZ,BoxGeometry:Op,BoxHelper:nZ,BufferAttribute:Pi,BufferGeometry:wn,BufferGeometryLoader:lB,ByteType:G2,Cache:Kc,Camera:SE,CameraHelper:eZ,CanvasTexture:TY,CapsuleGeometry:CE,CatmullRomCurve3:Dk,CineonToneMapping:K4,CircleGeometry:DE,ClampToEdgeWrapping:pl,Clock:TR,Color:Pe,ColorKeyframeTrack:_R,ColorManagement:Xn,CompressedArrayTexture:SY,CompressedCubeTexture:EY,CompressedTexture:RE,CompressedTextureLoader:aK,ConeGeometry:c_,ConstantAlphaFactor:G4,ConstantColorFactor:V4,Controls:lZ,CubeCamera:yk,CubeReflectionMapping:hh,CubeRefractionMapping:kf,CubeTexture:o_,CubeTextureLoader:oK,CubeUVReflectionMapping:Zg,CubicBezierCurve:hR,CubicBezierCurve3:Ik,CubicInterpolant:Zk,CullFaceBack:rw,CullFaceFront:M4,CullFaceFrontBack:Iq,CullFaceNone:T4,Curve:ac,CurvePath:Ok,CustomBlending:w4,CustomToneMapping:Z4,CylinderGeometry:l_,Cylindrical:HK,Data3DTexture:bE,DataArrayTexture:xE,DataTexture:iu,DataTextureLoader:lK,DataUtils:XX,DecrementStencilOp:Wq,DecrementWrapStencilOp:Xq,DefaultLoadingManager:$k,DepthFormat:Dg,DepthStencilFormat:Ig,DepthTexture:lR,DetachedBindMode:$4,DirectionalLight:iB,DirectionalLightHelper:tZ,DiscreteInterpolant:Qk,DodecahedronGeometry:IE,DoubleSide:Zl,DstAlphaFactor:L4,DstColorFactor:B4,DynamicCopyUsage:lX,DynamicDrawUsage:nX,DynamicReadUsage:rX,EdgesGeometry:Rk,EllipseCurve:NE,EqualCompare:ok,EqualDepth:qS,EqualStencilFunc:Qq,EquirectangularReflectionMapping:_v,EquirectangularRefractionMapping:xv,Euler:jo,EventDispatcher:fu,ExternalTexture:cR,ExtrudeGeometry:OE,FileLoader:dh,Float16BufferAttribute:tY,Float32BufferAttribute:Ve,FloatType:mo,Fog:TE,FogExp2:EE,FramebufferTexture:bY,FrontSide:uh,Frustum:Jg,FrustumArray:wE,GLBufferAttribute:zK,GLSL1:uX,GLSL3:hw,GreaterCompare:lk,GreaterDepth:YS,GreaterEqualCompare:uk,GreaterEqualDepth:XS,GreaterEqualStencilFunc:eX,GreaterStencilFunc:$q,GridHelper:JK,Group:fg,HalfFloatType:Qg,HemisphereLight:tB,HemisphereLightHelper:QK,IcosahedronGeometry:PE,ImageBitmapLoader:mK,ImageLoader:Uv,ImageUtils:pk,IncrementStencilOp:jq,IncrementWrapStencilOp:qq,InstancedBufferAttribute:_p,InstancedBufferGeometry:SR,InstancedInterleavedBuffer:BK,InstancedMesh:Ek,Int16BufferAttribute:JX,Int32BufferAttribute:$X,Int8BufferAttribute:KX,IntType:dE,InterleavedBuffer:ME,InterleavedBufferAttribute:vp,Interpolant:f_,InterpolateDiscrete:Ev,InterpolateLinear:T1,InterpolateSmooth:lS,InterpolationSamplingMode:dX,InterpolationSamplingType:fX,InvertStencilOp:Yq,KeepStencilOp:Yd,KeyframeTrack:bl,LOD:bk,LatheGeometry:UE,Layers:Pg,LessCompare:ak,LessDepth:WS,LessEqualCompare:J2,LessEqualDepth:yp,LessEqualStencilFunc:Jq,LessStencilFunc:Zq,Light:Wf,LightProbe:oB,Line:zf,Line3:qK,LineBasicMaterial:ka,LineCurve:fR,LineCurve3:Nk,LineDashedMaterial:Xk,LineLoop:Mk,LineSegments:du,LinearFilter:Ns,LinearInterpolant:vR,LinearMipMapLinearFilter:Uq,LinearMipMapNearestFilter:Pq,LinearMipmapLinearFilter:Yc,LinearMipmapNearestFilter:Xy,LinearSRGBColorSpace:Bf,LinearToneMapping:X4,LinearTransfer:Mv,Loader:vo,LoaderUtils:gw,LoadingManager:xR,LoopOnce:tk,LoopPingPong:nk,LoopRepeat:ek,MOUSE:qd,Material:ha,MaterialLoader:jE,MathUtils:DX,Matrix2:RR,Matrix3:_n,Matrix4:ln,MaxEquation:I4,Mesh:ps,MeshBasicMaterial:mh,MeshDepthMaterial:HE,MeshDistanceMaterial:GE,MeshLambertMaterial:Wk,MeshMatcapMaterial:qk,MeshNormalMaterial:jk,MeshPhongMaterial:Hk,MeshPhysicalMaterial:Vk,MeshStandardMaterial:gR,MeshToonMaterial:Gk,MinEquation:D4,MirroredRepeatWrapping:Sv,MixOperation:W4,MultiplyBlending:lw,MultiplyOperation:r_,NearestFilter:Ur,NearestMipMapLinearFilter:Oq,NearestMipMapNearestFilter:Nq,NearestMipmapLinearFilter:ug,NearestMipmapNearestFilter:H2,NeutralToneMapping:J4,NeverCompare:rk,NeverDepth:GS,NeverStencilFunc:Kq,NoBlending:ih,NoColorSpace:Ku,NoToneMapping:nu,NormalAnimationBlendMode:_E,NormalBlending:ap,NotEqualCompare:ck,NotEqualDepth:KS,NotEqualStencilFunc:tX,NumberKeyframeTrack:Nv,Object3D:si,ObjectLoader:dK,ObjectSpaceNormalMap:sk,OctahedronGeometry:u_,OneFactor:O4,OneMinusConstantAlphaFactor:j4,OneMinusConstantColorFactor:H4,OneMinusDstAlphaFactor:k4,OneMinusDstColorFactor:z4,OneMinusSrcAlphaFactor:HS,OneMinusSrcColorFactor:U4,OrthographicCamera:Rf,PCFShadowMap:hE,PCFSoftShadowMap:qy,PMREMGenerator:xw,Path:R1,PerspectiveCamera:Is,Plane:Xu,PlaneGeometry:gh,PlaneHelper:sZ,PointLight:nB,PointLightHelper:KK,Points:Ak,PointsMaterial:oR,PolarGridHelper:$K,PolyhedronGeometry:jf,PositionalAudio:bK,PropertyBinding:ni,PropertyMixer:hB,QuadraticBezierCurve:dR,QuadraticBezierCurve3:pR,Quaternion:ca,QuaternionKeyframeTrack:d_,QuaternionLinearInterpolant:Jk,RED_GREEN_RGTC2_Format:S1,RED_RGTC1_Format:x1,REVISION:uE,RGBADepthPacking:Q2,RGBAFormat:aa,RGBAIntegerFormat:vE,RGBA_ASTC_10x10_Format:p1,RGBA_ASTC_10x5_Format:h1,RGBA_ASTC_10x6_Format:f1,RGBA_ASTC_10x8_Format:d1,RGBA_ASTC_12x10_Format:m1,RGBA_ASTC_12x12_Format:g1,RGBA_ASTC_4x4_Format:i1,RGBA_ASTC_5x4_Format:s1,RGBA_ASTC_5x5_Format:r1,RGBA_ASTC_6x5_Format:a1,RGBA_ASTC_6x6_Format:o1,RGBA_ASTC_8x5_Format:l1,RGBA_ASTC_8x6_Format:c1,RGBA_ASTC_8x8_Format:u1,RGBA_BPTC_Format:y1,RGBA_ETC2_EAC_Format:n1,RGBA_PVRTC_2BPPV1_Format:$S,RGBA_PVRTC_4BPPV1_Format:JS,RGBA_S3TC_DXT1_Format:Ky,RGBA_S3TC_DXT3_Format:Zy,RGBA_S3TC_DXT5_Format:Qy,RGBDepthPacking:Fq,RGBFormat:Y2,RGBIntegerFormat:Lq,RGB_BPTC_SIGNED_Format:v1,RGB_BPTC_UNSIGNED_Format:_1,RGB_ETC1_Format:t1,RGB_ETC2_Format:e1,RGB_PVRTC_2BPPV1_Format:QS,RGB_PVRTC_4BPPV1_Format:ZS,RGB_S3TC_DXT1_Format:Yy,RGDepthPacking:Vq,RGFormat:K2,RGIntegerFormat:yE,RawShaderMaterial:Fk,Ray:Np,Raycaster:dB,RectAreaLight:rB,RedFormat:gE,RedIntegerFormat:a_,ReinhardToneMapping:Y4,RenderTarget:tR,RenderTarget3D:UK,RepeatWrapping:bv,ReplaceStencilOp:Gq,ReverseSubtractEquation:C4,RingGeometry:LE,SIGNED_RED_GREEN_RGTC2_Format:E1,SIGNED_RED_RGTC1_Format:b1,SRGBColorSpace:sa,SRGBTransfer:Mi,Scene:sR,ShaderChunk:Mn,ShaderLib:Kl,ShaderMaterial:sc,ShadowMaterial:zk,Shape:lp,ShapeGeometry:kE,ShapePath:oZ,ShapeUtils:tc,ShortType:j2,Skeleton:AE,SkeletonHelper:YK,SkinnedMesh:Sk,Source:xf,Sphere:xr,SphereGeometry:h_,Spherical:vw,SphericalHarmonics3:aB,SplineCurve:mR,SpotLight:eB,SpotLightHelper:XK,Sprite:xk,SpriteMaterial:rR,SrcAlphaFactor:VS,SrcAlphaSaturateFactor:F4,SrcColorFactor:P4,StaticCopyUsage:oX,StaticDrawUsage:Av,StaticReadUsage:sX,StereoCamera:yK,StreamCopyUsage:cX,StreamDrawUsage:iX,StreamReadUsage:aX,StringKeyframeTrack:Up,SubtractEquation:R4,SubtractiveBlending:ow,TOUCH:Xd,TangentSpaceNormalMap:Gf,TetrahedronGeometry:BE,Texture:ms,TextureLoader:cK,TextureUtils:dZ,Timer:FK,TimestampQuery:hX,TorusGeometry:zE,TorusKnotGeometry:FE,Triangle:fo,TriangleFanDrawMode:zq,TriangleStripDrawMode:Bq,TrianglesDrawMode:kq,TubeGeometry:VE,UVMapping:fE,Uint16BufferAttribute:eR,Uint32BufferAttribute:nR,Uint8BufferAttribute:ZX,Uint8ClampedBufferAttribute:QX,Uniform:wR,UniformsGroup:kK,UniformsLib:Oe,UniformsUtils:iR,UnsignedByteType:yl,UnsignedInt101111Type:q2,UnsignedInt248Type:Cg,UnsignedInt5999Type:W2,UnsignedIntType:fh,UnsignedShort4444Type:pE,UnsignedShort5551Type:mE,UnsignedShortType:Rg,VSMShadowMap:Xl,Vector2:ce,Vector3:ot,Vector4:Yn,VectorKeyframeTrack:Ov,VideoFrameTexture:xY,VideoTexture:wk,WebGL3DRenderTarget:kX,WebGLArrayRenderTarget:LX,WebGLCoordinateSystem:Vo,WebGLCubeRenderTarget:vk,WebGLRenderTarget:lu,WebGLRenderer:bB,WebGLUtils:xB,WebGPUCoordinateSystem:Ng,WebXRController:cS,WireframeGeometry:Bk,WrapAroundEnding:Tv,ZeroCurvatureEnding:ep,ZeroFactor:N4,ZeroSlopeEnding:np,ZeroStencilOp:Hq,createCanvasElement:dk},Symbol.toStringTag,{value:"Module"}));var QM={exports:{}},JM={},$M={exports:{}},tA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p3;function Ktt(){if(p3)return tA;p3=1;var i=Fg();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var e=typeof Object.is=="function"?Object.is:t,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,a=i.useDebugValue;function o(g,y){var _=y(),b=n({inst:{value:_,getSnapshot:y}}),M=b[0].inst,S=b[1];return r(function(){M.value=_,M.getSnapshot=y,c(M)&&S({inst:M})},[g,_,y]),s(function(){return c(M)&&S({inst:M}),g(function(){c(M)&&S({inst:M})})},[g]),a(_),_}function c(g){var y=g.getSnapshot;g=g.value;try{var _=y();return!e(g,_)}catch{return!0}}function u(g,y){return y()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return tA.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:d,tA}var m3;function Ztt(){return m3||(m3=1,$M.exports=Ktt()),$M.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g3;function Qtt(){if(g3)return JM;g3=1;var i=Fg(),t=Ztt();function e(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:e,s=t.useSyncExternalStore,r=i.useRef,a=i.useEffect,o=i.useMemo,c=i.useDebugValue;return JM.useSyncExternalStoreWithSelector=function(u,d,g,y,_){var b=r(null);if(b.current===null){var M={hasValue:!1,value:null};b.current=M}else M=b.current;b=o(function(){function E(z){if(!R){if(R=!0,N=z,z=y(z),_!==void 0&&M.hasValue){var L=M.value;if(_(L,z))return P=L}return P=z}if(L=P,n(N,z))return L;var U=y(z);return _!==void 0&&_(L,U)?(N=z,L):(N=z,P=U)}var R=!1,N,P,k=g===void 0?null:g;return[function(){return E(d())},k===null?void 0:function(){return E(k())}]},[d,g,y,_]);var S=s(u,b[0],b[1]);return a(function(){M.hasValue=!0,M.value=S},[S]),c(S),S},JM}var y3;function Jtt(){return y3||(y3=1,QM.exports=Qtt()),QM.exports}var $tt=Jtt();const tet=zw($tt),v3=i=>{let t;const e=new Set,n=(u,d)=>{const g=typeof u=="function"?u(t):u;if(!Object.is(g,t)){const y=t;t=d??(typeof g!="object"||g===null)?g:Object.assign({},t,g),e.forEach(_=>_(t,y))}},s=()=>t,o={setState:n,getState:s,getInitialState:()=>c,subscribe:u=>(e.add(u),()=>e.delete(u))},c=t=i(n,s,o);return o},eet=(i=>i?v3(i):v3),{useSyncExternalStoreWithSelector:net}=tet,iet=i=>i;function set(i,t=iet,e){const n=net(i.subscribe,i.getState,i.getInitialState,t,e);return Fw.useDebugValue(n),n}const _3=(i,t)=>{const e=eet(i),n=(s,r=t)=>set(e,s,r);return Object.assign(n,e),n},ret=((i,t)=>i?_3(i,t):_3),aet=i=>typeof i=="object"&&typeof i.then=="function",Cb=[];function oet(i,t,e=(n,s)=>n===s){if(i===t)return!0;if(!i||!t)return!1;const n=i.length;if(t.length!==n)return!1;for(let s=0;s<n;s++)if(!e(i[s],t[s]))return!1;return!0}function cet(i,t=null,e=!1,n={}){t===null&&(t=[i]);for(const r of Cb)if(oet(t,r.keys,r.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!e)throw r.promise}const s={keys:t,equal:n.equal,remove:()=>{const r=Cb.indexOf(s);r!==-1&&Cb.splice(r,1)},promise:(aet(i)?i:i(...t)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(Cb.push(s),!e)throw s.promise}const uet=(i,t,e)=>cet(i,t,!1,e);var eA={exports:{}},nA={exports:{}},iA={exports:{}},sA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x3;function het(){return x3||(x3=1,(function(i){function t(j,J){var $=j.length;j.push(J);t:for(;0<$;){var at=$-1>>>1,Y=j[at];if(0<s(Y,J))j[at]=J,j[$]=Y,$=at;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var J=j[0],$=j.pop();if($!==J){j[0]=$;t:for(var at=0,Y=j.length,Z=Y>>>1;at<Z;){var rt=2*(at+1)-1,ft=j[rt],dt=rt+1,_t=j[dt];if(0>s(ft,$))dt<Y&&0>s(_t,ft)?(j[at]=_t,j[dt]=$,at=dt):(j[at]=ft,j[rt]=$,at=rt);else if(dt<Y&&0>s(_t,$))j[at]=_t,j[dt]=$,at=dt;else break t}}return J}function s(j,J){var $=j.sortIndex-J.sortIndex;return $!==0?$:j.id-J.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,g=null,y=3,_=!1,b=!1,M=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N(j){for(var J=e(u);J!==null;){if(J.callback===null)n(u);else if(J.startTime<=j)n(u),J.sortIndex=J.expirationTime,t(c,J);else break;J=e(u)}}function P(j){if(M=!1,N(j),!b)if(e(c)!==null)b=!0,it();else{var J=e(u);J!==null&&lt(P,J.startTime-j)}}var k=!1,z=-1,L=5,U=-1;function D(){return!(i.unstable_now()-U<L)}function O(){if(k){var j=i.unstable_now();U=j;var J=!0;try{t:{b=!1,M&&(M=!1,E(z),z=-1),_=!0;var $=y;try{e:{for(N(j),g=e(c);g!==null&&!(g.expirationTime>j&&D());){var at=g.callback;if(typeof at=="function"){g.callback=null,y=g.priorityLevel;var Y=at(g.expirationTime<=j);if(j=i.unstable_now(),typeof Y=="function"){g.callback=Y,N(j),J=!0;break e}g===e(c)&&n(c),N(j)}else n(c);g=e(c)}if(g!==null)J=!0;else{var Z=e(u);Z!==null&&lt(P,Z.startTime-j),J=!1}}break t}finally{g=null,y=$,_=!1}J=void 0}}finally{J?F():k=!1}}}var F;if(typeof R=="function")F=function(){R(O)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=O,F=function(){G.postMessage(null)}}else F=function(){S(O,0)};function it(){k||(k=!0,F())}function lt(j,J){z=S(function(){j(i.unstable_now())},J)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){b||_||(b=!0,it())},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return e(c)},i.unstable_next=function(j){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var $=y;y=J;try{return j()}finally{y=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,J){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=y;y=j;try{return J()}finally{y=$}},i.unstable_scheduleCallback=function(j,J,$){var at=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?at+$:at):$=at,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=$+Y,j={id:d++,callback:J,priorityLevel:j,startTime:$,expirationTime:Y,sortIndex:-1},$>at?(j.sortIndex=$,t(u,j),e(c)===null&&j===e(u)&&(M?(E(z),z=-1):M=!0,lt(P,$-at))):(j.sortIndex=Y,t(c,j),b||_||(b=!0,it())),j},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(j){var J=y;return function(){var $=y;y=J;try{return j.apply(this,arguments)}finally{y=$}}}})(sA)),sA}var b3;function fet(){return b3||(b3=1,iA.exports=het()),iA.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S3;function det(){return S3||(S3=1,(function(i){i.exports=function(t){function e(f,p,x,w){return new _0(f,p,x,w)}function n(){}function s(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(f){return f===null||typeof f!="object"?null:(f=Nl&&f[Nl]||f["@@iterator"],typeof f=="function"?f:null)}function a(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===E0?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case Ec:return"Fragment";case Qa:return"Portal";case $p:return"Profiler";case cd:return"StrictMode";case tm:return"Suspense";case Ih:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case wo:return(f.displayName||"Context")+".Provider";case b0:return(f._context.displayName||"Context")+".Consumer";case hd:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case em:return p=f.displayName||null,p!==null?p:a(f.type)||"Memo";case Ja:p=f._payload,f=f._init;try{return a(f(p))}catch{}}return null}function o(f){if(Zo===void 0)try{throw Error()}catch(x){var p=x.stack.trim().match(/\n( *(at )?)/);Zo=p&&p[1]||"",Ol=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zo+f+Ol}function c(f,p){if(!f||yu)return"";yu=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(p){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(mn){var Ue=mn}Reflect.construct(f,[],Ne)}else{try{Ne.call()}catch(mn){Ue=mn}f.call(Ne.prototype)}}else{try{throw Error()}catch(mn){Ue=mn}(Ne=f())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(mn){if(mn&&Ue&&typeof mn.stack=="string")return[mn.stack,Ue.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=w.DetermineComponentFrameRoot(),nt=V[0],xt=V[1];if(nt&&xt){var Ot=nt.split(`
`),ue=xt.split(`
`);for(I=w=0;w<Ot.length&&!Ot[w].includes("DetermineComponentFrameRoot");)w++;for(;I<ue.length&&!ue[I].includes("DetermineComponentFrameRoot");)I++;if(w===Ot.length||I===ue.length)for(w=Ot.length-1,I=ue.length-1;1<=w&&0<=I&&Ot[w]!==ue[I];)I--;for(;1<=w&&0<=I;w--,I--)if(Ot[w]!==ue[I]){if(w!==1||I!==1)do if(w--,I--,0>I||Ot[w]!==ue[I]){var Ae=`
`+Ot[w].replace(" at new "," at ");return f.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",f.displayName)),Ae}while(1<=w&&0<=I);break}}}finally{yu=!1,Error.prepareStackTrace=x}return(x=f?f.displayName||f.name:"")?o(x):""}function u(f){switch(f.tag){case 26:case 27:case 5:return o(f.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return f=c(f.type,!1),f;case 11:return f=c(f.type.render,!1),f;case 1:return f=c(f.type,!0),f;default:return""}}function d(f){try{var p="";do p+=u(f),f=f.return;while(f);return p}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function g(f){var p=f,x=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(x=p.return),f=p.return;while(f)}return p.tag===3?x:null}function y(f){if(g(f)!==f)throw Error(s(188))}function _(f){var p=f.alternate;if(!p){if(p=g(f),p===null)throw Error(s(188));return p!==f?null:f}for(var x=f,w=p;;){var I=x.return;if(I===null)break;var V=I.alternate;if(V===null){if(w=I.return,w!==null){x=w;continue}break}if(I.child===V.child){for(V=I.child;V;){if(V===x)return y(I),f;if(V===w)return y(I),p;V=V.sibling}throw Error(s(188))}if(x.return!==w.return)x=I,w=V;else{for(var nt=!1,xt=I.child;xt;){if(xt===x){nt=!0,x=I,w=V;break}if(xt===w){nt=!0,w=I,x=V;break}xt=xt.sibling}if(!nt){for(xt=V.child;xt;){if(xt===x){nt=!0,x=V,w=I;break}if(xt===w){nt=!0,w=V,x=I;break}xt=xt.sibling}if(!nt)throw Error(s(189))}}if(x.alternate!==w)throw Error(s(190))}if(x.tag!==3)throw Error(s(188));return x.stateNode.current===x?f:p}function b(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=b(f),p!==null)return p;f=f.sibling}return null}function M(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(f.tag!==4&&(p=M(f),p!==null))return p;f=f.sibling}return null}function S(f){return{current:f}}function E(f){0>kl||(f.current=ls[kl],ls[kl]=null,kl--)}function R(f,p){kl++,ls[kl]=f.current,f.current=p}function N(f){return f>>>=0,f===0?32:31-(ax(f)/ox|0)|0}function P(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function k(f,p){var x=f.pendingLanes;if(x===0)return 0;var w=0,I=f.suspendedLanes,V=f.pingedLanes,nt=f.warmLanes;f=f.finishedLanes!==0;var xt=x&134217727;return xt!==0?(x=xt&~I,x!==0?w=P(x):(V&=xt,V!==0?w=P(V):f||(nt=xt&~nt,nt!==0&&(w=P(nt))))):(xt=x&~I,xt!==0?w=P(xt):V!==0?w=P(V):f||(nt=x&~nt,nt!==0&&(w=P(nt)))),w===0?0:p!==0&&p!==w&&(p&I)===0&&(I=w&-w,nt=p&-p,I>=nt||I===32&&(nt&4194176)!==0)?p:w}function z(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function L(f,p){switch(f){case 1:case 2:case 4:case 8:return p+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var f=Jo;return Jo<<=1,(Jo&4194176)===0&&(Jo=128),f}function D(){var f=xu;return xu<<=1,(xu&62914560)===0&&(xu=4194304),f}function O(f){for(var p=[],x=0;31>x;x++)p.push(f);return p}function F(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function H(f,p,x,w,I,V){var nt=f.pendingLanes;f.pendingLanes=x,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=x,f.entangledLanes&=x,f.errorRecoveryDisabledLanes&=x,f.shellSuspendCounter=0;var xt=f.entanglements,Ot=f.expirationTimes,ue=f.hiddenUpdates;for(x=nt&~x;0<x;){var Ae=31-Rr(x),Ne=1<<Ae;xt[Ae]=0,Ot[Ae]=-1;var Ue=ue[Ae];if(Ue!==null)for(ue[Ae]=null,Ae=0;Ae<Ue.length;Ae++){var mn=Ue[Ae];mn!==null&&(mn.lane&=-536870913)}x&=~Ne}w!==0&&G(f,w,0),V!==0&&I===0&&f.tag!==0&&(f.suspendedLanes|=V&~(nt&~p))}function G(f,p,x){f.pendingLanes|=p,f.suspendedLanes&=~p;var w=31-Rr(p);f.entangledLanes|=p,f.entanglements[w]=f.entanglements[w]|1073741824|x&4194218}function it(f,p){var x=f.entangledLanes|=p;for(f=f.entanglements;x;){var w=31-Rr(x),I=1<<w;I&p|f[w]&p&&(f[w]|=p),x&=~I}}function lt(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function j(f){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(cs,f,void 0,(f.current.flags&128)===128)}catch{}}function J(f){if(typeof ux=="function"&&Fs(f),Kr&&typeof Kr.setStrictMode=="function")try{Kr.setStrictMode(cs,f)}catch{}}function $(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}function at(f,p){if(typeof f=="object"&&f!==null){var x=H0.get(f);return x!==void 0?x:(p={value:f,source:p,stack:d(p)},H0.set(f,p),p)}return{value:f,source:p,stack:d(p)}}function Y(f,p){bu[Su++]=Fh,bu[Su++]=Eu,Eu=f,Fh=p}function Z(f,p,x){Sa[Ea++]=Do,Sa[Ea++]=Io,Sa[Ea++]=Dc,Dc=f;var w=Do;f=Io;var I=32-Rr(w)-1;w&=~(1<<I),x+=1;var V=32-Rr(p)+I;if(30<V){var nt=I-I%5;V=(w&(1<<nt)-1).toString(32),w>>=nt,I-=nt,Do=1<<32-Rr(p)+I|x<<I|w,Io=V+f}else Do=1<<V|x<<I|w,Io=f}function rt(f){f.return!==null&&(Y(f,1),Z(f,1,0))}function ft(f){for(;f===Eu;)Eu=bu[--Su],bu[Su]=null,Fh=bu[--Su],bu[Su]=null;for(;f===Dc;)Dc=Sa[--Ea],Sa[Ea]=null,Io=Sa[--Ea],Sa[Ea]=null,Do=Sa[--Ea],Sa[Ea]=null}function dt(f,p){R($o,p),R(Vh,f),R(As,null),f=M_(p),E(As),R(As,f)}function _t(){E(As),E(Vh),E($o)}function ut(f){f.memoizedState!==null&&R(Tu,f);var p=As.current,x=Uh(p,f.type);p!==x&&(R(Vh,f),R(As,x))}function gt(f){Vh.current===f&&(E(As),E(Vh)),Tu.current===f&&(E(Tu),Ar?Ro._currentValue=Mc:Ro._currentValue2=Mc)}function Tt(f){var p=Error(s(418,""));throw ct(at(p,f)),xd}function $t(f,p){if(!Js)throw Error(s(175));Z_(f.stateNode,f.type,f.memoizedProps,p,f)||Tt(f)}function ae(f){for($s=f.return;$s;)switch($s.tag){case 3:case 27:Vs=!0;return;case 5:case 13:Vs=!1;return;default:$s=$s.return}}function ne(f){if(!Js||f!==$s)return!1;if(!Fn)return ae(f),Fn=!0,!1;var p=!1;if(bi?f.tag!==3&&f.tag!==27&&(f.tag!==5||um(f.type)&&!vn(f.type,f.memoizedProps))&&(p=!0):f.tag!==3&&(f.tag!==5||um(f.type)&&!vn(f.type,f.memoizedProps))&&(p=!0),p&&tr&&Tt(f),ae(f),f.tag===13){if(!Js)throw Error(s(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));tr=J_(f)}else tr=$s?B0(f.stateNode):null;return!0}function ee(){Js&&(tr=$s=null,Fn=!1)}function ct(f){eo===null?eo=[f]:eo.push(f)}function Gt(){for(var f=Mu,p=No=Mu=0;p<f;){var x=no[p];no[p++]=null;var w=no[p];no[p++]=null;var I=no[p];no[p++]=null;var V=no[p];if(no[p++]=null,w!==null&&I!==null){var nt=w.pending;nt===null?I.next=I:(I.next=nt.next,nt.next=I),w.pending=I}V!==0&&Bt(x,I,V)}}function zt(f,p,x,w){no[Mu++]=f,no[Mu++]=p,no[Mu++]=x,no[Mu++]=w,No|=w,f.lanes|=w,f=f.alternate,f!==null&&(f.lanes|=w)}function Pt(f,p,x,w){return zt(f,p,x,w),Dt(f)}function Ct(f,p){return zt(f,null,null,p),Dt(f)}function Bt(f,p,x){f.lanes|=x;var w=f.alternate;w!==null&&(w.lanes|=x);for(var I=!1,V=f.return;V!==null;)V.childLanes|=x,w=V.alternate,w!==null&&(w.childLanes|=x),V.tag===22&&(f=V.stateNode,f===null||f._visibility&1||(I=!0)),f=V,V=V.return;I&&p!==null&&f.tag===3&&(V=f.stateNode,I=31-Rr(x),V=V.hiddenUpdates,f=V[I],f===null?V[I]=[p]:f.push(p),p.lane=x|536870912)}function Dt(f){if(50<Zh)throw Zh=0,Mm=null,Error(s(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}function Ut(f){f!==Bl&&f.next===null&&(Bl===null?bd=Bl=f:Bl=Bl.next=f),Ci=!0,Au||(Au=!0,Lt(ge))}function Nt(f,p){if(!G0&&Ci){G0=!0;do for(var x=!1,w=bd;w!==null;){if(f!==0){var I=w.pendingLanes;if(I===0)var V=0;else{var nt=w.suspendedLanes,xt=w.pingedLanes;V=(1<<31-Rr(42|f)+1)-1,V&=I&~(nt&~xt),V=V&201326677?V&201326677|1:V?V|2:0}V!==0&&(x=!0,mt(w,V))}else V=kn,V=k(w,w===ci?V:0),(V&3)===0||z(w,V)||(x=!0,mt(w,V));w=w.next}while(x);G0=!1}}function ge(){Ci=Au=!1;var f=0;Hh!==0&&(C_()&&(f=Hh),Hh=0);for(var p=to(),x=null,w=bd;w!==null;){var I=w.next,V=Q(w,p);V===0?(w.next=null,x===null?bd=I:x.next=I,I===null&&(Bl=x)):(x=w,(f!==0||(V&3)!==0)&&(Ci=!0)),w=I}Nt(f)}function Q(f,p){for(var x=f.suspendedLanes,w=f.pingedLanes,I=f.expirationTimes,V=f.pendingLanes&-62914561;0<V;){var nt=31-Rr(V),xt=1<<nt,Ot=I[nt];Ot===-1?((xt&x)===0||(xt&w)!==0)&&(I[nt]=L(xt,p)):Ot<=p&&(f.expiredLanes|=xt),V&=~xt}if(p=ci,x=kn,x=k(f,f===p?x:0),w=f.callbackNode,x===0||f===p&&mi===2||f.cancelPendingCommit!==null)return w!==null&&w!==null&&pm(w),f.callbackNode=null,f.callbackPriority=0;if((x&3)===0||z(f,x)){if(p=x&-x,p===f.callbackPriority)return p;switch(w!==null&&pm(w),lt(x)){case 2:case 8:x=cx;break;case 32:x=ym;break;case 268435456:x=lT;break;default:x=ym}return w=K.bind(null,f),x=_d(x,w),f.callbackPriority=p,f.callbackNode=x,p}return w!==null&&w!==null&&pm(w),f.callbackPriority=2,f.callbackNode=null,2}function K(f,p){var x=f.callbackNode;if(Ao()&&f.callbackNode!==x)return null;var w=kn;return w=k(f,f===ci?w:0),w===0?null:(vc(f,w,p),Q(f,to()),f.callbackNode!=null&&f.callbackNode===x?K.bind(null,f):null)}function mt(f,p){if(Ao())return null;vc(f,p,!0)}function Lt(f){R0?Ll(function(){(qn&6)!==0?_d(gm,f):f()}):_d(gm,f)}function Rt(){return Hh===0&&(Hh=U()),Hh}function At(f,p){if(Gh===null){var x=Gh=[];wu=0,Ta=Rt(),Ru={status:"pending",value:void 0,then:function(w){x.push(w)}}}return wu++,p.then(oe,oe),p}function oe(){if(--wu===0&&Gh!==null){Ru!==null&&(Ru.status="fulfilled");var f=Gh;Gh=null,Ta=0,Ru=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function le(f,p){var x=[],w={status:"pending",value:null,reason:null,then:function(I){x.push(I)}};return f.then(function(){w.status="fulfilled",w.value=p;for(var I=0;I<x.length;I++)(0,x[I])(p)},function(I){for(w.status="rejected",w.reason=I,I=0;I<x.length;I++)(0,x[I])(void 0)}),w}function ve(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function be(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function Xt(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function te(f,p,x){var w=f.updateQueue;if(w===null)return null;if(w=w.shared,(qn&2)!==0){var I=w.pending;return I===null?p.next=p:(p.next=I.next,I.next=p),w.pending=p,p=Dt(f),Bt(f,null,x),p}return zt(f,w,p,x),Dt(f)}function re(f,p,x){if(p=p.updateQueue,p!==null&&(p=p.shared,(x&4194176)!==0)){var w=p.lanes;w&=f.pendingLanes,x|=w,p.lanes=x,it(f,x)}}function ht(f,p){var x=f.updateQueue,w=f.alternate;if(w!==null&&(w=w.updateQueue,x===w)){var I=null,V=null;if(x=x.firstBaseUpdate,x!==null){do{var nt={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};V===null?I=V=nt:V=V.next=nt,x=x.next}while(x!==null);V===null?I=V=p:V=V.next=p}else I=V=p;x={baseState:w.baseState,firstBaseUpdate:I,lastBaseUpdate:V,shared:w.shared,callbacks:w.callbacks},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=p:f.next=p,x.lastBaseUpdate=p}function wt(){if(Cu){var f=Ru;if(f!==null)throw f}}function de(f,p,x,w){Cu=!1;var I=f.updateQueue;zl=!1;var V=I.firstBaseUpdate,nt=I.lastBaseUpdate,xt=I.shared.pending;if(xt!==null){I.shared.pending=null;var Ot=xt,ue=Ot.next;Ot.next=null,nt===null?V=ue:nt.next=ue,nt=Ot;var Ae=f.alternate;Ae!==null&&(Ae=Ae.updateQueue,xt=Ae.lastBaseUpdate,xt!==nt&&(xt===null?Ae.firstBaseUpdate=ue:xt.next=ue,Ae.lastBaseUpdate=Ot))}if(V!==null){var Ne=I.baseState;nt=0,Ae=ue=Ot=null,xt=V;do{var Ue=xt.lane&-536870913,mn=Ue!==xt.lane;if(mn?(kn&Ue)===Ue:(w&Ue)===Ue){Ue!==0&&Ue===Ta&&(Cu=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:xt.tag,payload:xt.payload,callback:null,next:null});t:{var Na=f,zc=xt;Ue=p;var Fc=x;switch(zc.tag){case 1:if(Na=zc.payload,typeof Na=="function"){Ne=Na.call(Fc,Ne,Ue);break t}Ne=Na;break t;case 3:Na.flags=Na.flags&-65537|128;case 0:if(Na=zc.payload,Ue=typeof Na=="function"?Na.call(Fc,Ne,Ue):Na,Ue==null)break t;Ne=Jp({},Ne,Ue);break t;case 2:zl=!0}}Ue=xt.callback,Ue!==null&&(f.flags|=64,mn&&(f.flags|=8192),mn=I.callbacks,mn===null?I.callbacks=[Ue]:mn.push(Ue))}else mn={lane:Ue,tag:xt.tag,payload:xt.payload,callback:xt.callback,next:null},Ae===null?(ue=Ae=mn,Ot=Ne):Ae=Ae.next=mn,nt|=Ue;if(xt=xt.next,xt===null){if(xt=I.shared.pending,xt===null)break;mn=xt,xt=mn.next,mn.next=null,I.lastBaseUpdate=mn,I.shared.pending=null}}while(!0);Ae===null&&(Ot=Ne),I.baseState=Ot,I.firstBaseUpdate=ue,I.lastBaseUpdate=Ae,V===null&&(I.shared.lanes=0),Da|=nt,f.lanes=nt,f.memoizedState=Ne}}function pt(f,p){if(typeof f!="function")throw Error(s(191,f));f.call(p)}function Ft(f,p){var x=f.callbacks;if(x!==null)for(f.callbacks=null,f=0;f<x.length;f++)pt(x[f],p)}function ie(f,p){if(Zr(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var x=Object.keys(f),w=Object.keys(p);if(x.length!==w.length)return!1;for(w=0;w<x.length;w++){var I=x[w];if(!tl.call(p,I)||!Zr(f[I],p[I]))return!1}return!0}function ye(f){return f=f.status,f==="fulfilled"||f==="rejected"}function se(){}function jt(f,p,x){switch(x=f[x],x===void 0?f.push(p):x!==p&&(p.then(se,se),p=x),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,f===jh?Error(s(483)):f;default:if(typeof p.status=="string")p.then(se,se);else{if(f=ci,f!==null&&100<f.shellSuspendCounter)throw Error(s(482));f=p,f.status="pending",f.then(function(w){if(p.status==="pending"){var I=p;I.status="fulfilled",I.value=w}},function(w){if(p.status==="pending"){var I=p;I.status="rejected",I.reason=w}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,f===jh?Error(s(483)):f}throw Ic=p,jh}}function xe(){if(Ic===null)throw Error(s(459));var f=Ic;return Ic=null,f}function we(f){var p=Oc;return Oc+=1,Nc===null&&(Nc=[]),jt(Nc,f,p)}function Ce(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function Ie(f,p){throw p.$$typeof===eT?Error(s(525)):(f=Object.prototype.toString.call(p),Error(s(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function Ln(f){var p=f._init;return p(f._payload)}function dn(f){function p(Yt,Et){if(f){var Jt=Yt.deletions;Jt===null?(Yt.deletions=[Et],Yt.flags|=16):Jt.push(Et)}}function x(Yt,Et){if(!f)return null;for(;Et!==null;)p(Yt,Et),Et=Et.sibling;return null}function w(Yt){for(var Et=new Map;Yt!==null;)Yt.key!==null?Et.set(Yt.key,Yt):Et.set(Yt.index,Yt),Yt=Yt.sibling;return Et}function I(Yt,Et){return Yt=Za(Yt,Et),Yt.index=0,Yt.sibling=null,Yt}function V(Yt,Et,Jt){return Yt.index=Jt,f?(Jt=Yt.alternate,Jt!==null?(Jt=Jt.index,Jt<Et?(Yt.flags|=33554434,Et):Jt):(Yt.flags|=33554434,Et)):(Yt.flags|=1048576,Et)}function nt(Yt){return f&&Yt.alternate===null&&(Yt.flags|=33554434),Yt}function xt(Yt,Et,Jt,Ee){return Et===null||Et.tag!==6?(Et=Zp(Jt,Yt.mode,Ee),Et.return=Yt,Et):(Et=I(Et,Jt),Et.return=Yt,Et)}function Ot(Yt,Et,Jt,Ee){var je=Jt.type;return je===Ec?Ae(Yt,Et,Jt.props.children,Ee,Jt.key):Et!==null&&(Et.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===Ja&&Ln(je)===Et.type)?(Et=I(Et,Jt.props),Ce(Et,Jt),Et.return=Yt,Et):(Et=Ko(Jt.type,Jt.key,Jt.props,null,Yt.mode,Ee),Ce(Et,Jt),Et.return=Yt,Et)}function ue(Yt,Et,Jt,Ee){return Et===null||Et.tag!==4||Et.stateNode.containerInfo!==Jt.containerInfo||Et.stateNode.implementation!==Jt.implementation?(Et=x0(Jt,Yt.mode,Ee),Et.return=Yt,Et):(Et=I(Et,Jt.children||[]),Et.return=Yt,Et)}function Ae(Yt,Et,Jt,Ee,je){return Et===null||Et.tag!==7?(Et=Qi(Jt,Yt.mode,Ee,je),Et.return=Yt,Et):(Et=I(Et,Jt),Et.return=Yt,Et)}function Ne(Yt,Et,Jt){if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return Et=Zp(""+Et,Yt.mode,Jt),Et.return=Yt,Et;if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case ld:return Jt=Ko(Et.type,Et.key,Et.props,null,Yt.mode,Jt),Ce(Jt,Et),Jt.return=Yt,Jt;case Qa:return Et=x0(Et,Yt.mode,Jt),Et.return=Yt,Et;case Ja:var Ee=Et._init;return Et=Ee(Et._payload),Ne(Yt,Et,Jt)}if(Nh(Et)||r(Et))return Et=Qi(Et,Yt.mode,Jt,null),Et.return=Yt,Et;if(typeof Et.then=="function")return Ne(Yt,we(Et),Jt);if(Et.$$typeof===wo)return Ne(Yt,Hr(Yt,Et),Jt);Ie(Yt,Et)}return null}function Ue(Yt,Et,Jt,Ee){var je=Et!==null?Et.key:null;if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number"||typeof Jt=="bigint")return je!==null?null:xt(Yt,Et,""+Jt,Ee);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case ld:return Jt.key===je?Ot(Yt,Et,Jt,Ee):null;case Qa:return Jt.key===je?ue(Yt,Et,Jt,Ee):null;case Ja:return je=Jt._init,Jt=je(Jt._payload),Ue(Yt,Et,Jt,Ee)}if(Nh(Jt)||r(Jt))return je!==null?null:Ae(Yt,Et,Jt,Ee,null);if(typeof Jt.then=="function")return Ue(Yt,Et,we(Jt),Ee);if(Jt.$$typeof===wo)return Ue(Yt,Et,Hr(Yt,Jt),Ee);Ie(Yt,Jt)}return null}function mn(Yt,Et,Jt,Ee,je){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Yt=Yt.get(Jt)||null,xt(Et,Yt,""+Ee,je);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case ld:return Yt=Yt.get(Ee.key===null?Jt:Ee.key)||null,Ot(Et,Yt,Ee,je);case Qa:return Yt=Yt.get(Ee.key===null?Jt:Ee.key)||null,ue(Et,Yt,Ee,je);case Ja:var zi=Ee._init;return Ee=zi(Ee._payload),mn(Yt,Et,Jt,Ee,je)}if(Nh(Ee)||r(Ee))return Yt=Yt.get(Jt)||null,Ae(Et,Yt,Ee,je,null);if(typeof Ee.then=="function")return mn(Yt,Et,Jt,we(Ee),je);if(Ee.$$typeof===wo)return mn(Yt,Et,Jt,Hr(Et,Ee),je);Ie(Et,Ee)}return null}function Na(Yt,Et,Jt,Ee){for(var je=null,zi=null,sn=Et,$n=Et=0,us=null;sn!==null&&$n<Jt.length;$n++){sn.index>$n?(us=sn,sn=null):us=sn.sibling;var Pn=Ue(Yt,sn,Jt[$n],Ee);if(Pn===null){sn===null&&(sn=us);break}f&&sn&&Pn.alternate===null&&p(Yt,sn),Et=V(Pn,Et,$n),zi===null?je=Pn:zi.sibling=Pn,zi=Pn,sn=us}if($n===Jt.length)return x(Yt,sn),Fn&&Y(Yt,$n),je;if(sn===null){for(;$n<Jt.length;$n++)sn=Ne(Yt,Jt[$n],Ee),sn!==null&&(Et=V(sn,Et,$n),zi===null?je=sn:zi.sibling=sn,zi=sn);return Fn&&Y(Yt,$n),je}for(sn=w(sn);$n<Jt.length;$n++)us=mn(sn,Yt,$n,Jt[$n],Ee),us!==null&&(f&&us.alternate!==null&&sn.delete(us.key===null?$n:us.key),Et=V(us,Et,$n),zi===null?je=us:zi.sibling=us,zi=us);return f&&sn.forEach(function(ll){return p(Yt,ll)}),Fn&&Y(Yt,$n),je}function zc(Yt,Et,Jt,Ee){if(Jt==null)throw Error(s(151));for(var je=null,zi=null,sn=Et,$n=Et=0,us=null,Pn=Jt.next();sn!==null&&!Pn.done;$n++,Pn=Jt.next()){sn.index>$n?(us=sn,sn=null):us=sn.sibling;var ll=Ue(Yt,sn,Pn.value,Ee);if(ll===null){sn===null&&(sn=us);break}f&&sn&&ll.alternate===null&&p(Yt,sn),Et=V(ll,Et,$n),zi===null?je=ll:zi.sibling=ll,zi=ll,sn=us}if(Pn.done)return x(Yt,sn),Fn&&Y(Yt,$n),je;if(sn===null){for(;!Pn.done;$n++,Pn=Jt.next())Pn=Ne(Yt,Pn.value,Ee),Pn!==null&&(Et=V(Pn,Et,$n),zi===null?je=Pn:zi.sibling=Pn,zi=Pn);return Fn&&Y(Yt,$n),je}for(sn=w(sn);!Pn.done;$n++,Pn=Jt.next())Pn=mn(sn,Yt,$n,Pn.value,Ee),Pn!==null&&(f&&Pn.alternate!==null&&sn.delete(Pn.key===null?$n:Pn.key),Et=V(Pn,Et,$n),zi===null?je=Pn:zi.sibling=Pn,zi=Pn);return f&&sn.forEach(function(Am){return p(Yt,Am)}),Fn&&Y(Yt,$n),je}function Fc(Yt,Et,Jt,Ee){if(typeof Jt=="object"&&Jt!==null&&Jt.type===Ec&&Jt.key===null&&(Jt=Jt.props.children),typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case ld:t:{for(var je=Jt.key;Et!==null;){if(Et.key===je){if(je=Jt.type,je===Ec){if(Et.tag===7){x(Yt,Et.sibling),Ee=I(Et,Jt.props.children),Ee.return=Yt,Yt=Ee;break t}}else if(Et.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===Ja&&Ln(je)===Et.type){x(Yt,Et.sibling),Ee=I(Et,Jt.props),Ce(Ee,Jt),Ee.return=Yt,Yt=Ee;break t}x(Yt,Et);break}else p(Yt,Et);Et=Et.sibling}Jt.type===Ec?(Ee=Qi(Jt.props.children,Yt.mode,Ee,Jt.key),Ee.return=Yt,Yt=Ee):(Ee=Ko(Jt.type,Jt.key,Jt.props,null,Yt.mode,Ee),Ce(Ee,Jt),Ee.return=Yt,Yt=Ee)}return nt(Yt);case Qa:t:{for(je=Jt.key;Et!==null;){if(Et.key===je)if(Et.tag===4&&Et.stateNode.containerInfo===Jt.containerInfo&&Et.stateNode.implementation===Jt.implementation){x(Yt,Et.sibling),Ee=I(Et,Jt.children||[]),Ee.return=Yt,Yt=Ee;break t}else{x(Yt,Et);break}else p(Yt,Et);Et=Et.sibling}Ee=x0(Jt,Yt.mode,Ee),Ee.return=Yt,Yt=Ee}return nt(Yt);case Ja:return je=Jt._init,Jt=je(Jt._payload),Fc(Yt,Et,Jt,Ee)}if(Nh(Jt))return Na(Yt,Et,Jt,Ee);if(r(Jt)){if(je=r(Jt),typeof je!="function")throw Error(s(150));return Jt=je.call(Jt),zc(Yt,Et,Jt,Ee)}if(typeof Jt.then=="function")return Fc(Yt,Et,we(Jt),Ee);if(Jt.$$typeof===wo)return Fc(Yt,Et,Hr(Yt,Jt),Ee);Ie(Yt,Jt)}return typeof Jt=="string"&&Jt!==""||typeof Jt=="number"||typeof Jt=="bigint"?(Jt=""+Jt,Et!==null&&Et.tag===6?(x(Yt,Et.sibling),Ee=I(Et,Jt),Ee.return=Yt,Yt=Ee):(x(Yt,Et),Ee=Zp(Jt,Yt.mode,Ee),Ee.return=Yt,Yt=Ee),nt(Yt)):x(Yt,Et)}return function(Yt,Et,Jt,Ee){try{Oc=0;var je=Fc(Yt,Et,Jt,Ee);return Nc=null,je}catch(sn){if(sn===jh)throw sn;var zi=e(29,sn,null,Yt.mode);return zi.lanes=Ee,zi.return=Yt,zi}finally{}}}function fn(f,p){f=pr,R(Wh,f),R(Di,p),pr=f|p.baseLanes}function Rn(){R(Wh,pr),R(Di,Di.current)}function Fi(){pr=Wh.current,E(Di),E(Wh)}function vi(f){var p=f.alternate;R(ws,ws.current&1),R(Ma,f),Si===null&&(p===null||Di.current!==null||p.memoizedState!==null)&&(Si=f)}function ys(f){if(f.tag===22){if(R(ws,ws.current),R(Ma,f),Si===null){var p=f.alternate;p!==null&&p.memoizedState!==null&&(Si=f)}}else ji()}function ji(){R(ws,ws.current),R(Ma,Ma.current)}function Kn(f){E(Ma),Si===f&&(Si=null),E(ws)}function Zn(f){for(var p=f;p!==null;){if(p.tag===13){var x=p.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||om(x)||lm(x)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function Nn(){throw Error(s(321))}function Ps(f,p){if(p===null)return!1;for(var x=0;x<p.length&&x<f.length;x++)if(!Zr(f[x],p[x]))return!1;return!0}function Us(f,p,x,w,I,V){return Fl=V,Tn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,nn.H=f===null||f.memoizedState===null?Lc:Cr,Uc=!1,V=x(w,I),Uc=!1,Du&&(V=Br(p,x,w,I)),fa(f),V}function fa(f){nn.H=Ji;var p=Ye!==null&&Ye.next!==null;if(Fl=0,Wn=Ye=Tn=null,io=!1,Iu=0,Hs=null,p)throw Error(s(300));f===null||Ei||(f=f.dependencies,f!==null&&Hi(f)&&(Ei=!0))}function Br(f,p,x,w){Tn=f;var I=0;do{if(Du&&(Hs=null),Iu=0,Du=!1,25<=I)throw Error(s(301));if(I+=1,Wn=Ye=null,f.updateQueue!=null){var V=f.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}nn.H=Aa,V=p(x,w)}while(Du);return V}function di(){var f=nn.H,p=f.useState()[0];return p=typeof p.then=="function"?qt(p):p,f=f.useState()[0],(Ye!==null?Ye.memoizedState:null)!==f&&(Tn.flags|=1024),p}function Ba(){var f=vm!==0;return vm=0,f}function da(f,p,x){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~x}function et(f){if(io){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}io=!1}Fl=0,Wn=Ye=Tn=null,Du=!1,Iu=vm=0,Hs=null}function St(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?Tn.memoizedState=Wn=f:Wn=Wn.next=f,Wn}function kt(){if(Ye===null){var f=Tn.alternate;f=f!==null?f.memoizedState:null}else f=Ye.next;var p=Wn===null?Tn.memoizedState:Wn.next;if(p!==null)Wn=p,Ye=f;else{if(f===null)throw Tn.alternate===null?Error(s(467)):Error(s(310));Ye=f,f={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},Wn===null?Tn.memoizedState=Wn=f:Wn=Wn.next=f}return Wn}function qt(f){var p=Iu;return Iu+=1,Hs===null&&(Hs=[]),f=jt(Hs,f,p),p=Tn,(Wn===null?p.memoizedState:Wn.next)===null&&(p=p.alternate,nn.H=p===null||p.memoizedState===null?Lc:Cr),f}function yt(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return qt(f);if(f.$$typeof===wo)return ki(f)}throw Error(s(438,String(f)))}function _e(f){var p=null,x=Tn.updateQueue;if(x!==null&&(p=x.memoCache),p==null){var w=Tn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(p={data:w.data.map(function(I){return I.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),x===null&&(x=_m(),Tn.updateQueue=x),x.memoCache=p,x=p.data[p.index],x===void 0)for(x=p.data[p.index]=Array(f),w=0;w<f;w++)x[w]=T_;return p.index++,x}function Me(f,p){return typeof p=="function"?p(f):p}function De(f){var p=kt();return Re(p,Ye,f)}function Re(f,p,x){var w=f.queue;if(w===null)throw Error(s(311));w.lastRenderedReducer=x;var I=f.baseQueue,V=w.pending;if(V!==null){if(I!==null){var nt=I.next;I.next=V.next,V.next=nt}p.baseQueue=I=V,w.pending=null}if(V=f.baseState,I===null)f.memoizedState=V;else{p=I.next;var xt=nt=null,Ot=null,ue=p,Ae=!1;do{var Ne=ue.lane&-536870913;if(Ne!==ue.lane?(kn&Ne)===Ne:(Fl&Ne)===Ne){var Ue=ue.revertLane;if(Ue===0)Ot!==null&&(Ot=Ot.next={lane:0,revertLane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Ne===Ta&&(Ae=!0);else if((Fl&Ue)===Ue){ue=ue.next,Ue===Ta&&(Ae=!0);continue}else Ne={lane:0,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Ot===null?(xt=Ot=Ne,nt=V):Ot=Ot.next=Ne,Tn.lanes|=Ue,Da|=Ue;Ne=ue.action,Uc&&x(V,Ne),V=ue.hasEagerState?ue.eagerState:x(V,Ne)}else Ue={lane:Ne,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Ot===null?(xt=Ot=Ue,nt=V):Ot=Ot.next=Ue,Tn.lanes|=Ne,Da|=Ne;ue=ue.next}while(ue!==null&&ue!==p);if(Ot===null?nt=V:Ot.next=xt,!Zr(V,f.memoizedState)&&(Ei=!0,Ae&&(x=Ru,x!==null)))throw x;f.memoizedState=V,f.baseState=nt,f.baseQueue=Ot,w.lastRenderedState=V}return I===null&&(w.lanes=0),[f.memoizedState,w.dispatch]}function ze(f){var p=kt(),x=p.queue;if(x===null)throw Error(s(311));x.lastRenderedReducer=f;var w=x.dispatch,I=x.pending,V=p.memoizedState;if(I!==null){x.pending=null;var nt=I=I.next;do V=f(V,nt.action),nt=nt.next;while(nt!==I);Zr(V,p.memoizedState)||(Ei=!0),p.memoizedState=V,p.baseQueue===null&&(p.baseState=V),x.lastRenderedState=V}return[V,w]}function He(f,p,x){var w=Tn,I=kt(),V=Fn;if(V){if(x===void 0)throw Error(s(407));x=x()}else x=p();var nt=!Zr((Ye||I).memoizedState,x);if(nt&&(I.memoizedState=x,Ei=!0),I=I.queue,za(Cn.bind(null,w,I,f),[f]),I.getSnapshot!==p||nt||Wn!==null&&Wn.memoizedState.tag&1){if(w.flags|=2048,ri(9,$e.bind(null,w,I,x,p),{destroy:void 0},null),ci===null)throw Error(s(349));V||(Fl&60)!==0||Le(w,p,x)}return x}function Le(f,p,x){f.flags|=16384,f={getSnapshot:p,value:x},p=Tn.updateQueue,p===null?(p=_m(),Tn.updateQueue=p,p.stores=[f]):(x=p.stores,x===null?p.stores=[f]:x.push(f))}function $e(f,p,x,w){p.value=x,p.getSnapshot=w,Qn(p)&&bn(f)}function Cn(f,p,x){return x(function(){Qn(p)&&bn(f)})}function Qn(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!Zr(f,x)}catch{return!0}}function bn(f){var p=Ct(f,2);p!==null&&zs(p,f,2)}function Ge(f){var p=St();if(typeof f=="function"){var x=f;if(f=x(),Uc){J(!0);try{x()}finally{J(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:f},p}function Be(f,p,x,w){return f.baseState=x,Re(f,Ye,typeof w=="function"?w:Me)}function On(f,p,x,w,I){if(Eo(f))throw Error(s(485));if(f=p.action,f!==null){var V={payload:I,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(nt){V.listeners.push(nt)}};nn.T!==null?x(!0):V.isTransition=!1,w(V),x=p.pending,x===null?(V.next=p.pending=V,cn(p,V)):(V.next=x.next,p.pending=x.next=V)}}function cn(f,p){var x=p.action,w=p.payload,I=f.state;if(p.isTransition){var V=nn.T,nt={};nn.T=nt;try{var xt=x(I,w),Ot=nn.S;Ot!==null&&Ot(nt,xt),Ke(f,p,xt)}catch(ue){_i(f,p,ue)}finally{nn.T=V}}else try{V=x(I,w),Ke(f,p,V)}catch(ue){_i(f,p,ue)}}function Ke(f,p,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(w){ns(f,p,w)},function(w){return _i(f,p,w)}):ns(f,p,x)}function ns(f,p,x){p.status="fulfilled",p.value=x,hi(p),f.state=x,p=f.pending,p!==null&&(x=p.next,x===p?f.pending=null:(x=x.next,p.next=x,cn(f,x)))}function _i(f,p,x){var w=f.pending;if(f.pending=null,w!==null){w=w.next;do p.status="rejected",p.reason=x,hi(p),p=p.next;while(p!==w)}f.action=null}function hi(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function Sn(f,p){return p}function is(f,p){if(Fn){var x=ci.formState;if(x!==null){t:{var w=Tn;if(Fn){if(tr){var I=k0(tr,Vs);if(I){tr=B0(I),w=q_(I);break t}}Tt(w)}w=!1}w&&(p=x[0])}}x=St(),x.memoizedState=x.baseState=p,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:p},x.queue=w,x=lc.bind(null,Tn,w),w.dispatch=x,w=Ge(!1);var V=Ga.bind(null,Tn,!1,w.queue);return w=St(),I={state:p,dispatch:null,action:f,pending:null},w.queue=I,x=On.bind(null,Tn,I,V,x),I.dispatch=x,w.memoizedState=f,[p,x,!1]}function Vi(f){var p=kt();return ei(p,Ye,f)}function ei(f,p,x){p=Re(f,p,Sn)[0],f=De(Me)[0],p=typeof p=="object"&&p!==null&&typeof p.then=="function"?qt(p):p;var w=kt(),I=w.queue,V=I.dispatch;return x!==w.memoizedState&&(Tn.flags|=2048,ri(9,Zi.bind(null,I,x),{destroy:void 0},null)),[p,V,f]}function Zi(f,p){f.action=p}function zr(f){var p=kt(),x=Ye;if(x!==null)return ei(p,x,f);kt(),p=p.memoizedState,x=kt();var w=x.queue.dispatch;return x.memoizedState=f,[p,w,!1]}function ri(f,p,x,w){return f={tag:f,create:p,inst:x,deps:w,next:null},p=Tn.updateQueue,p===null&&(p=_m(),Tn.updateQueue=p),x=p.lastEffect,x===null?p.lastEffect=f.next=f:(w=x.next,x.next=f,f.next=w,p.lastEffect=f),f}function Fr(){return kt().memoizedState}function _o(f,p,x,w){var I=St();Tn.flags|=f,I.memoizedState=ri(1|p,x,{destroy:void 0},w===void 0?null:w)}function xo(f,p,x,w){var I=kt();w=w===void 0?null:w;var V=I.memoizedState.inst;Ye!==null&&w!==null&&Ps(w,Ye.memoizedState.deps)?I.memoizedState=ri(p,x,V,w):(Tn.flags|=f,I.memoizedState=ri(1|p,x,V,w))}function bo(f,p){_o(8390656,8,f,p)}function za(f,p){xo(2048,8,f,p)}function oc(f,p){return xo(4,2,f,p)}function qs(f,p){return xo(4,4,f,p)}function pa(f,p){if(typeof p=="function"){f=f();var x=p(f);return function(){typeof x=="function"?x():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function ma(f,p,x){x=x!=null?x.concat([f]):null,xo(4,4,pa.bind(null,p,f),x)}function or(){}function Es(f,p){var x=kt();p=p===void 0?null:p;var w=x.memoizedState;return p!==null&&Ps(p,w[1])?w[0]:(x.memoizedState=[f,p],f)}function So(f,p){var x=kt();p=p===void 0?null:p;var w=x.memoizedState;if(p!==null&&Ps(p,w[1]))return w[0];if(w=f(),Uc){J(!0);try{f()}finally{J(!1)}}return x.memoizedState=[w,p],w}function ga(f,p,x){return x===void 0||(Fl&1073741824)!==0?f.memoizedState=p:(f.memoizedState=x,f=p0(),Tn.lanes|=f,Da|=f,x)}function Fa(f,p,x,w){return Zr(x,p)?x:Di.current!==null?(f=ga(f,x,w),Zr(f,p)||(Ei=!0),f):(Fl&42)===0?(Ei=!0,f.memoizedState=x):(f=p0(),Tn.lanes|=f,Da|=f,p)}function Va(f,p,x,w,I){var V=Ul();fr(V!==0&&8>V?V:8);var nt=nn.T,xt={};nn.T=xt,Ga(f,!1,p,x);try{var Ot=I(),ue=nn.S;if(ue!==null&&ue(xt,Ot),Ot!==null&&typeof Ot=="object"&&typeof Ot.then=="function"){var Ae=le(Ot,w);Sr(f,p,Ae,as(f))}else Sr(f,p,w,as(f))}catch(Ne){Sr(f,p,{then:function(){},status:"rejected",reason:Ne},as())}finally{fr(V),nn.T=nt}}function ss(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:Mc,baseState:Mc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:Mc},next:null};var x={};return p.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:x},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function br(){return ki(Ro)}function Ha(){return kt().memoizedState}function Ui(){return kt().memoizedState}function ai(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var x=as();f=Xt(x);var w=te(p,f,x);w!==null&&(zs(w,p,x),re(w,p,x)),p={cache:ya()},f.payload=p;return}p=p.return}}function Sl(f,p,x){var w=as();x={lane:w,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Eo(f)?Ri(p,x):(x=Pt(f,p,x,w),x!==null&&(zs(x,f,w),Wi(x,p,w)))}function lc(f,p,x){var w=as();Sr(f,p,x,w)}function Sr(f,p,x,w){var I={lane:w,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Eo(f))Ri(p,I);else{var V=f.alternate;if(f.lanes===0&&(V===null||V.lanes===0)&&(V=p.lastRenderedReducer,V!==null))try{var nt=p.lastRenderedState,xt=V(nt,x);if(I.hasEagerState=!0,I.eagerState=xt,Zr(xt,nt))return zt(f,p,I,0),ci===null&&Gt(),!1}catch{}finally{}if(x=Pt(f,p,I,w),x!==null)return zs(x,f,w),Wi(x,p,w),!0}return!1}function Ga(f,p,x,w){if(w={lane:2,revertLane:Rt(),action:w,hasEagerState:!1,eagerState:null,next:null},Eo(f)){if(p)throw Error(s(479))}else p=Pt(f,x,w,2),p!==null&&zs(p,f,2)}function Eo(f){var p=f.alternate;return f===Tn||p!==null&&p===Tn}function Ri(f,p){Du=io=!0;var x=f.pending;x===null?p.next=p:(p.next=x.next,x.next=p),f.pending=p}function Wi(f,p,x){if((x&4194176)!==0){var w=p.lanes;w&=f.pendingLanes,x|=w,p.lanes=x,it(f,x)}}function Ls(f,p,x,w){p=f.memoizedState,x=x(w,p),x=x==null?p:Jp({},p,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}function To(f,p,x,w,I,V,nt){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(w,V,nt):p.prototype&&p.prototype.isPureReactComponent?!ie(x,w)||!ie(I,V):!0}function ja(f,p,x,w){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(x,w),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(x,w),p.state!==f&&nl.enqueueReplaceState(p,p.state,null)}function lr(f,p){var x=p;if("ref"in p){x={};for(var w in p)w!=="ref"&&(x[w]=p[w])}if(f=f.defaultProps){x===p&&(x=Jp({},x));for(var I in f)x[I]===void 0&&(x[I]=f[I])}return x}function cr(f,p){try{var x=f.onUncaughtError;x(p.value,{componentStack:p.stack})}catch(w){setTimeout(function(){throw w})}}function Vr(f,p,x){try{var w=f.onCaughtError;w(x.value,{componentStack:x.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function Er(f,p,x){return x=Xt(x),x.tag=3,x.payload={element:null},x.callback=function(){cr(f,p)},x}function Wa(f){return f=Xt(f),f.tag=3,f}function ks(f,p,x,w){var I=x.type.getDerivedStateFromError;if(typeof I=="function"){var V=w.value;f.payload=function(){return I(V)},f.callback=function(){Vr(p,x,w)}}var nt=x.stateNode;nt!==null&&typeof nt.componentDidCatch=="function"&&(f.callback=function(){Vr(p,x,w),typeof I!="function"&&(kc===null?kc=new Set([this]):kc.add(this));var xt=w.stack;this.componentDidCatch(w.value,{componentStack:xt!==null?xt:""})})}function vh(f,p,x,w,I){if(x.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(p=x.alternate,p!==null&&jn(p,x,I,!0),x=Ma.current,x!==null){switch(x.tag){case 13:return Si===null?Cl():x.alternate===null&&Ti===0&&(Ti=3),x.flags&=-257,x.flags|=65536,x.lanes=I,w===Ed?x.flags|=16384:(p=x.updateQueue,p===null?x.updateQueue=new Set([w]):p.add(w),gu(f,w,I)),!1;case 22:return x.flags|=65536,w===Ed?x.flags|=16384:(p=x.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([w])},x.updateQueue=p):(x=p.retryQueue,x===null?p.retryQueue=new Set([w]):x.add(w)),gu(f,w,I)),!1}throw Error(s(435,x.tag))}return gu(f,w,I),Cl(),!1}if(Fn)return p=Ma.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=I,w!==xd&&(f=Error(s(422),{cause:w}),ct(at(f,x)))):(w!==xd&&(p=Error(s(423),{cause:w}),ct(at(p,x))),f=f.current.alternate,f.flags|=65536,I&=-I,f.lanes|=I,w=at(w,x),I=Er(f.stateNode,w,I),ht(f,I),Ti!==4&&(Ti=2)),!1;var V=Error(s(520),{cause:w});if(V=at(V,x),Ou===null?Ou=[V]:Ou.push(V),Ti!==4&&(Ti=2),p===null)return!0;w=at(w,x),x=p;do{switch(x.tag){case 3:return x.flags|=65536,f=I&-I,x.lanes|=f,f=Er(x.stateNode,w,f),ht(x,f),!1;case 1:if(p=x.type,V=x.stateNode,(x.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(kc===null||!kc.has(V))))return x.flags|=65536,I&=-I,x.lanes|=I,I=Wa(I),ks(I,f,x,w),ht(x,I),!1}x=x.return}while(x!==null);return!1}function pi(f,p,x,w){p.child=f===null?el(p,null,x,w):Pc(p,f.child,x,w)}function qa(f,p,x,w,I){x=x.render;var V=p.ref;if("ref"in w){var nt={};for(var xt in w)xt!=="ref"&&(nt[xt]=w[xt])}else nt=w;return Ts(p),w=Us(f,p,x,nt,V,I),xt=Ba(),f!==null&&!Ei?(da(f,p,I),B(f,p,I)):(Fn&&xt&&rt(p),p.flags|=1,pi(f,p,w,I),p.child)}function cc(f,p,x,w,I){if(f===null){var V=x.type;return typeof V=="function"&&!sd(V)&&V.defaultProps===void 0&&x.compare===null?(p.tag=15,p.type=V,uc(f,p,V,w,I)):(f=Ko(x.type,null,w,p,p.mode,I),f.ref=p.ref,f.return=p,p.child=f)}if(V=f.child,!q(f,I)){var nt=V.memoizedProps;if(x=x.compare,x=x!==null?x:ie,x(nt,w)&&f.ref===p.ref)return B(f,p,I)}return p.flags|=1,f=Za(V,w),f.ref=p.ref,f.return=p,p.child=f}function uc(f,p,x,w,I){if(f!==null){var V=f.memoizedProps;if(ie(V,w)&&f.ref===p.ref)if(Ei=!1,p.pendingProps=w=V,q(f,I))(f.flags&131072)!==0&&(Ei=!0);else return p.lanes=f.lanes,B(f,p,I)}return ur(f,p,x,w,I)}function rs(f,p,x){var w=p.pendingProps,I=w.children,V=(p.stateNode._pendingVisibility&2)!==0,nt=f!==null?f.memoizedState:null;if(Li(f,p),w.mode==="hidden"||V){if((p.flags&128)!==0){if(w=nt!==null?nt.baseLanes|x:x,f!==null){for(I=p.child=f.child,V=0;I!==null;)V=V|I.lanes|I.childLanes,I=I.sibling;p.childLanes=V&~w}else p.childLanes=0,p.child=null;return Xs(f,p,w,x)}if((x&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&kp(p,nt!==null?nt.cachePool:null),nt!==null?fn(p,nt):Rn(),ys(p);else return p.lanes=p.childLanes=536870912,Xs(f,p,nt!==null?nt.baseLanes|x:x,x)}else nt!==null?(kp(p,nt.cachePool),fn(p,nt),ji(),p.memoizedState=null):(f!==null&&kp(p,null),Rn(),ji());return pi(f,p,I,x),p.child}function Xs(f,p,x,w){var I=i0();return I=I===null?null:{parent:Ar?Ii._currentValue:Ii._currentValue2,pool:I},p.memoizedState={baseLanes:x,cachePool:I},f!==null&&kp(p,null),Rn(),ys(p),f!==null&&jn(f,p,w,!0),null}function Li(f,p){var x=p.ref;if(x===null)f!==null&&f.ref!==null&&(p.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(s(284));(f===null||f.ref!==x)&&(p.flags|=2097664)}}function ur(f,p,x,w,I){return Ts(p),x=Us(f,p,x,w,void 0,I),w=Ba(),f!==null&&!Ei?(da(f,p,I),B(f,p,I)):(Fn&&w&&rt(p),p.flags|=1,pi(f,p,x,I),p.child)}function hc(f,p,x,w,I,V){return Ts(p),p.updateQueue=null,x=Br(p,w,x,I),fa(f),w=Ba(),f!==null&&!Ei?(da(f,p,V),B(f,p,V)):(Fn&&w&&rt(p),p.flags|=1,pi(f,p,x,V),p.child)}function Wo(f,p,x,w,I){if(Ts(p),p.stateNode===null){var V=Cc,nt=x.contextType;typeof nt=="object"&&nt!==null&&(V=ki(nt)),V=new x(w,V),p.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=nl,p.stateNode=V,V._reactInternals=p,V=p.stateNode,V.props=w,V.state=p.memoizedState,V.refs={},ve(p),nt=x.contextType,V.context=typeof nt=="object"&&nt!==null?ki(nt):Cc,V.state=p.memoizedState,nt=x.getDerivedStateFromProps,typeof nt=="function"&&(Ls(p,x,nt,w),V.state=p.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(nt=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),nt!==V.state&&nl.enqueueReplaceState(V,V.state,null),de(p,w,V,I),wt(),V.state=p.memoizedState),typeof V.componentDidMount=="function"&&(p.flags|=4194308),w=!0}else if(f===null){V=p.stateNode;var xt=p.memoizedProps,Ot=lr(x,xt);V.props=Ot;var ue=V.context,Ae=x.contextType;nt=Cc,typeof Ae=="object"&&Ae!==null&&(nt=ki(Ae));var Ne=x.getDerivedStateFromProps;Ae=typeof Ne=="function"||typeof V.getSnapshotBeforeUpdate=="function",xt=p.pendingProps!==xt,Ae||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(xt||ue!==nt)&&ja(p,V,w,nt),zl=!1;var Ue=p.memoizedState;V.state=Ue,de(p,w,V,I),wt(),ue=p.memoizedState,xt||Ue!==ue||zl?(typeof Ne=="function"&&(Ls(p,x,Ne,w),ue=p.memoizedState),(Ot=zl||To(p,x,Ot,w,Ue,ue,nt))?(Ae||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(p.flags|=4194308)):(typeof V.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=w,p.memoizedState=ue),V.props=w,V.state=ue,V.context=nt,w=Ot):(typeof V.componentDidMount=="function"&&(p.flags|=4194308),w=!1)}else{V=p.stateNode,be(f,p),nt=p.memoizedProps,Ae=lr(x,nt),V.props=Ae,Ne=p.pendingProps,Ue=V.context,ue=x.contextType,Ot=Cc,typeof ue=="object"&&ue!==null&&(Ot=ki(ue)),xt=x.getDerivedStateFromProps,(ue=typeof xt=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(nt!==Ne||Ue!==Ot)&&ja(p,V,w,Ot),zl=!1,Ue=p.memoizedState,V.state=Ue,de(p,w,V,I),wt();var mn=p.memoizedState;nt!==Ne||Ue!==mn||zl||f!==null&&f.dependencies!==null&&Hi(f.dependencies)?(typeof xt=="function"&&(Ls(p,x,xt,w),mn=p.memoizedState),(Ae=zl||To(p,x,Ae,w,Ue,mn,Ot)||f!==null&&f.dependencies!==null&&Hi(f.dependencies))?(ue||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(w,mn,Ot),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(w,mn,Ot)),typeof V.componentDidUpdate=="function"&&(p.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof V.componentDidUpdate!="function"||nt===f.memoizedProps&&Ue===f.memoizedState||(p.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||nt===f.memoizedProps&&Ue===f.memoizedState||(p.flags|=1024),p.memoizedProps=w,p.memoizedState=mn),V.props=w,V.state=mn,V.context=Ot,w=Ae):(typeof V.componentDidUpdate!="function"||nt===f.memoizedProps&&Ue===f.memoizedState||(p.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||nt===f.memoizedProps&&Ue===f.memoizedState||(p.flags|=1024),w=!1)}return V=w,Li(f,p),w=(p.flags&128)!==0,V||w?(V=p.stateNode,x=w&&typeof x.getDerivedStateFromError!="function"?null:V.render(),p.flags|=1,f!==null&&w?(p.child=Pc(p,f.child,null,I),p.child=Pc(p,null,x,I)):pi(f,p,x,I),p.memoizedState=V.state,f=p.child):f=B(f,p,I),f}function qf(f,p,x,w){return ee(),p.flags|=256,pi(f,p,x,w),p.child}function _h(f){return{baseLanes:f,cachePool:s0()}}function fc(f,p,x){return f=f!==null?f.childLanes&~x:0,p&&(f|=Ia),f}function Xf(f,p,x){var w=p.pendingProps,I=!1,V=(p.flags&128)!==0,nt;if((nt=V)||(nt=f!==null&&f.memoizedState===null?!1:(ws.current&2)!==0),nt&&(I=!0,p.flags&=-129),nt=(p.flags&32)!==0,p.flags&=-33,f===null){if(Fn){if(I?vi(p):ji(),Fn){var xt=tr,Ot;(Ot=xt)&&(xt=K_(xt,Vs),xt!==null?(p.memoizedState={dehydrated:xt,treeContext:Dc!==null?{id:Do,overflow:Io}:null,retryLane:536870912},Ot=e(18,null,null,0),Ot.stateNode=xt,Ot.return=p,p.child=Ot,$s=p,tr=null,Ot=!0):Ot=!1),Ot||Tt(p)}if(xt=p.memoizedState,xt!==null&&(xt=xt.dehydrated,xt!==null))return lm(xt)?p.lanes=16:p.lanes=536870912,null;Kn(p)}return xt=w.children,w=w.fallback,I?(ji(),I=p.mode,xt=Ys({mode:"hidden",children:xt},I),w=Qi(w,I,x,null),xt.return=p,w.return=p,xt.sibling=w,p.child=xt,I=p.child,I.memoizedState=_h(x),I.childLanes=fc(f,nt,x),p.memoizedState=Sm,w):(vi(p),dc(p,xt))}if(Ot=f.memoizedState,Ot!==null&&(xt=Ot.dehydrated,xt!==null)){if(V)p.flags&256?(vi(p),p.flags&=-257,p=pu(f,p,x)):p.memoizedState!==null?(ji(),p.child=f.child,p.flags|=128,p=null):(ji(),I=w.fallback,xt=p.mode,w=Ys({mode:"visible",children:w.children},xt),I=Qi(I,xt,x,null),I.flags|=2,w.return=p,I.return=p,w.sibling=I,p.child=w,Pc(p,f.child,null,x),w=p.child,w.memoizedState=_h(x),w.childLanes=fc(f,nt,x),p.memoizedState=Sm,p=I);else if(vi(p),lm(xt))nt=j_(xt).digest,w=Error(s(419)),w.stack="",w.digest=nt,ct({value:w,source:null,stack:null}),p=pu(f,p,x);else if(Ei||jn(f,p,x,!1),nt=(x&f.childLanes)!==0,Ei||nt){if(nt=ci,nt!==null){if(w=x&-x,(w&42)!==0)w=1;else switch(w){case 2:w=1;break;case 8:w=4;break;case 32:w=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:w=64;break;case 268435456:w=134217728;break;default:w=0}if(w=(w&(nt.suspendedLanes|x))!==0?0:w,w!==0&&w!==Ot.retryLane)throw Ot.retryLane=w,Ct(f,w),zs(nt,f,w),bm}om(xt)||Cl(),p=pu(f,p,x)}else om(xt)?(p.flags|=128,p.child=f.child,p=Dl.bind(null,f),W_(xt,p),p=null):(f=Ot.treeContext,Js&&(tr=Y_(xt),$s=p,Fn=!0,eo=null,Vs=!1,f!==null&&(Sa[Ea++]=Do,Sa[Ea++]=Io,Sa[Ea++]=Dc,Do=f.id,Io=f.overflow,Dc=p)),p=dc(p,w.children),p.flags|=4096);return p}return I?(ji(),I=w.fallback,xt=p.mode,Ot=f.child,V=Ot.sibling,w=Za(Ot,{mode:"hidden",children:w.children}),w.subtreeFlags=Ot.subtreeFlags&31457280,V!==null?I=Za(V,I):(I=Qi(I,xt,x,null),I.flags|=2),I.return=p,w.return=p,w.sibling=I,p.child=w,w=I,I=p.child,xt=f.child.memoizedState,xt===null?xt=_h(x):(Ot=xt.cachePool,Ot!==null?(V=Ar?Ii._currentValue:Ii._currentValue2,Ot=Ot.parent!==V?{parent:V,pool:V}:Ot):Ot=s0(),xt={baseLanes:xt.baseLanes|x,cachePool:Ot}),I.memoizedState=xt,I.childLanes=fc(f,nt,x),p.memoizedState=Sm,w):(vi(p),x=f.child,f=x.sibling,x=Za(x,{mode:"visible",children:w.children}),x.return=p,x.sibling=null,f!==null&&(nt=p.deletions,nt===null?(p.deletions=[f],p.flags|=16):nt.push(f)),p.child=x,p.memoizedState=null,x)}function dc(f,p){return p=Ys({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function Ys(f,p){return ad(f,p,0,null)}function pu(f,p,x){return Pc(p,f.child,null,x),f=dc(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function Yf(f,p,x){f.lanes|=p;var w=f.alternate;w!==null&&(w.lanes|=p),un(f.return,p,x)}function qo(f,p,x,w,I){var V=f.memoizedState;V===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:w,tail:x,tailMode:I}:(V.isBackwards=p,V.rendering=null,V.renderingStartTime=0,V.last=w,V.tail=x,V.tailMode=I)}function T(f,p,x){var w=p.pendingProps,I=w.revealOrder,V=w.tail;if(pi(f,p,w.children,x),w=ws.current,(w&2)!==0)w=w&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)t:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Yf(f,x,p);else if(f.tag===19)Yf(f,x,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break t;for(;f.sibling===null;){if(f.return===null||f.return===p)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}w&=1}switch(R(ws,w),I){case"forwards":for(x=p.child,I=null;x!==null;)f=x.alternate,f!==null&&Zn(f)===null&&(I=x),x=x.sibling;x=I,x===null?(I=p.child,p.child=null):(I=x.sibling,x.sibling=null),qo(p,!1,I,x,V);break;case"backwards":for(x=null,I=p.child,p.child=null;I!==null;){if(f=I.alternate,f!==null&&Zn(f)===null){p.child=I;break}f=I.sibling,I.sibling=x,x=I,I=f}qo(p,!0,x,null,V);break;case"together":qo(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function B(f,p,x){if(f!==null&&(p.dependencies=f.dependencies),Da|=p.lanes,(x&p.childLanes)===0)if(f!==null){if(jn(f,p,x,!1),(x&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(s(153));if(p.child!==null){for(f=p.child,x=Za(f,f.pendingProps),p.child=x,x.return=p;f.sibling!==null;)f=f.sibling,x=x.sibling=Za(f,f.pendingProps),x.return=p;x.sibling=null}return p.child}function q(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&Hi(f)))}function st(f,p,x){switch(p.tag){case 3:dt(p,p.stateNode.containerInfo),Kt(p,Ii,f.memoizedState.cache),ee();break;case 27:case 5:ut(p);break;case 4:dt(p,p.stateNode.containerInfo);break;case 10:Kt(p,p.type,p.memoizedProps.value);break;case 13:var w=p.memoizedState;if(w!==null)return w.dehydrated!==null?(vi(p),p.flags|=128,null):(x&p.child.childLanes)!==0?Xf(f,p,x):(vi(p),f=B(f,p,x),f!==null?f.sibling:null);vi(p);break;case 19:var I=(f.flags&128)!==0;if(w=(x&p.childLanes)!==0,w||(jn(f,p,x,!1),w=(x&p.childLanes)!==0),I){if(w)return T(f,p,x);p.flags|=128}if(I=p.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),R(ws,ws.current),w)break;return null;case 22:case 23:return p.lanes=0,rs(f,p,x);case 24:Kt(p,Ii,f.memoizedState.cache)}return B(f,p,x)}function Vt(f,p,x){if(f!==null)if(f.memoizedProps!==p.pendingProps)Ei=!0;else{if(!q(f,x)&&(p.flags&128)===0)return Ei=!1,st(f,p,x);Ei=(f.flags&131072)!==0}else Ei=!1,Fn&&(p.flags&1048576)!==0&&Z(p,Fh,p.index);switch(p.lanes=0,p.tag){case 16:t:{f=p.pendingProps;var w=p.elementType,I=w._init;if(w=I(w._payload),p.type=w,typeof w=="function")sd(w)?(f=lr(w,f),p.tag=1,p=Wo(null,p,w,f,x)):(p.tag=0,p=ur(null,p,w,f,x));else{if(w!=null){if(I=w.$$typeof,I===hd){p.tag=11,p=qa(null,p,w,f,x);break t}else if(I===em){p.tag=14,p=cc(null,p,w,f,x);break t}}throw p=a(w)||w,Error(s(306,p,""))}}return p;case 0:return ur(f,p,p.type,p.pendingProps,x);case 1:return w=p.type,I=lr(w,p.pendingProps),Wo(f,p,w,I,x);case 3:t:{if(dt(p,p.stateNode.containerInfo),f===null)throw Error(s(387));var V=p.pendingProps;I=p.memoizedState,w=I.element,be(f,p),de(p,V,null,x);var nt=p.memoizedState;if(V=nt.cache,Kt(p,Ii,V),V!==I.cache&&xi(p,[Ii],x,!0),wt(),V=nt.element,Js&&I.isDehydrated)if(I={element:V,isDehydrated:!1,cache:nt.cache},p.updateQueue.baseState=I,p.memoizedState=I,p.flags&256){p=qf(f,p,V,x);break t}else if(V!==w){w=at(Error(s(424)),p),ct(w),p=qf(f,p,V,x);break t}else for(Js&&(tr=X_(p.stateNode.containerInfo),$s=p,Fn=!0,eo=null,Vs=!0),x=el(p,null,V,x),p.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(ee(),V===w){p=B(f,p,x);break t}pi(f,p,V,x)}p=p.child}return p;case 26:if(ba)return Li(f,p),f===null?(x=V0(p.type,null,p.pendingProps,null))?p.memoizedState=x:Fn||(p.stateNode=dm(p.type,p.pendingProps,$o.current,p)):p.memoizedState=V0(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:if(bi)return ut(p),f===null&&bi&&Fn&&(w=p.stateNode=Co(p.type,p.pendingProps,$o.current,As.current,!1),$s=p,Vs=!0,tr=cm(w)),w=p.pendingProps.children,f!==null||Fn?pi(f,p,w,x):p.child=Pc(p,null,w,x),Li(f,p),p.child;case 5:return f===null&&Fn&&(hm(p.type,p.pendingProps,As.current),(I=w=tr)&&(w=rT(w,p.type,p.pendingProps,Vs),w!==null?(p.stateNode=w,$s=p,tr=cm(w),Vs=!1,I=!0):I=!1),I||Tt(p)),ut(p),I=p.type,V=p.pendingProps,nt=f!==null?f.memoizedProps:null,w=V.children,vn(I,V)?w=null:nt!==null&&vn(I,nt)&&(p.flags|=32),p.memoizedState!==null&&(I=Us(f,p,di,null,null,x),Ar?Ro._currentValue=I:Ro._currentValue2=I),Li(f,p),pi(f,p,w,x),p.child;case 6:return f===null&&Fn&&(tx(p.pendingProps,As.current),(f=x=tr)&&(x=z0(x,p.pendingProps,Vs),x!==null?(p.stateNode=x,$s=p,tr=null,f=!0):f=!1),f||Tt(p)),null;case 13:return Xf(f,p,x);case 4:return dt(p,p.stateNode.containerInfo),w=p.pendingProps,f===null?p.child=Pc(p,null,w,x):pi(f,p,w,x),p.child;case 11:return qa(f,p,p.type,p.pendingProps,x);case 7:return pi(f,p,p.pendingProps,x),p.child;case 8:return pi(f,p,p.pendingProps.children,x),p.child;case 12:return pi(f,p,p.pendingProps.children,x),p.child;case 10:return w=p.pendingProps,Kt(p,p.type,w.value),pi(f,p,w.children,x),p.child;case 9:return I=p.type._context,w=p.pendingProps.children,Ts(p),I=ki(I),w=w(I),p.flags|=1,pi(f,p,w,x),p.child;case 14:return cc(f,p,p.type,p.pendingProps,x);case 15:return uc(f,p,p.type,p.pendingProps,x);case 19:return T(f,p,x);case 22:return rs(f,p,x);case 24:return Ts(p),w=ki(Ii),f===null?(I=i0(),I===null&&(I=ci,V=ya(),I.pooledCache=V,V.refCount++,V!==null&&(I.pooledCacheLanes|=x),I=V),p.memoizedState={parent:w,cache:I},ve(p),Kt(p,Ii,I)):((f.lanes&x)!==0&&(be(f,p),de(p,null,null,x),wt()),I=f.memoizedState,V=p.memoizedState,I.parent!==w?(I={parent:w,cache:w},p.memoizedState=I,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=I),Kt(p,Ii,w)):(w=V.cache,Kt(p,Ii,w),w!==I.cache&&xi(p,[Ii],x,!0))),pi(f,p,p.pendingProps.children,x),p.child;case 29:throw p.pendingProps}throw Error(s(156,p.tag))}function Kt(f,p,x){Ar?(R(Vl,p._currentValue),p._currentValue=x):(R(Vl,p._currentValue2),p._currentValue2=x)}function Te(f){var p=Vl.current;Ar?f._currentValue=p:f._currentValue2=p,E(Vl)}function un(f,p,x){for(;f!==null;){var w=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,w!==null&&(w.childLanes|=p)):w!==null&&(w.childLanes&p)!==p&&(w.childLanes|=p),f===x)break;f=f.return}}function xi(f,p,x,w){var I=f.child;for(I!==null&&(I.return=f);I!==null;){var V=I.dependencies;if(V!==null){var nt=I.child;V=V.firstContext;t:for(;V!==null;){var xt=V;V=I;for(var Ot=0;Ot<p.length;Ot++)if(xt.context===p[Ot]){V.lanes|=x,xt=V.alternate,xt!==null&&(xt.lanes|=x),un(V.return,x,f),w||(nt=null);break t}V=xt.next}}else if(I.tag===18){if(nt=I.return,nt===null)throw Error(s(341));nt.lanes|=x,V=nt.alternate,V!==null&&(V.lanes|=x),un(nt,x,f),nt=null}else nt=I.child;if(nt!==null)nt.return=I;else for(nt=I;nt!==null;){if(nt===f){nt=null;break}if(I=nt.sibling,I!==null){I.return=nt.return,nt=I;break}nt=nt.return}I=nt}}function jn(f,p,x,w){f=null;for(var I=p,V=!1;I!==null;){if(!V){if((I.flags&524288)!==0)V=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var nt=I.alternate;if(nt===null)throw Error(s(387));if(nt=nt.memoizedProps,nt!==null){var xt=I.type;Zr(I.pendingProps.value,nt.value)||(f!==null?f.push(xt):f=[xt])}}else if(I===Tu.current){if(nt=I.alternate,nt===null)throw Error(s(387));nt.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(f!==null?f.push(Ro):f=[Ro])}I=I.return}f!==null&&xi(p,f,x,w),p.flags|=262144}function Hi(f){for(f=f.firstContext;f!==null;){var p=f.context;if(!Zr(Ar?p._currentValue:p._currentValue2,f.memoizedValue))return!0;f=f.next}return!1}function Ts(f){Po=f,wa=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function ki(f){return Xa(Po,f)}function Hr(f,p){return Po===null&&Ts(f),Xa(f,p)}function Xa(f,p){var x=Ar?p._currentValue:p._currentValue2;if(p={context:p,memoizedValue:x,next:null},wa===null){if(f===null)throw Error(s(308));wa=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else wa=wa.next=p;return x}function ya(){return{controller:new qh,data:new Map,refCount:0}}function El(f){f.refCount--,f.refCount===0&&hx(fx,function(){f.controller.abort()})}function i0(){var f=il.current;return f!==null?f:ci.pooledCache}function kp(f,p){p===null?R(il,il.current):R(il,p.pool)}function s0(){var f=i0();return f===null?null:{parent:Ar?Ii._currentValue:Ii._currentValue2,pool:f}}function Gr(f){f.flags|=4}function xh(f,p){if(f!==null&&f.child===p.child)return!1;if((p.flags&16)!==0)return!0;for(f=p.child;f!==null;){if((f.flags&13878)!==0||(f.subtreeFlags&13878)!==0)return!0;f=f.sibling}return!1}function mu(f,p,x,w){if(Ms)for(x=p.child;x!==null;){if(x.tag===5||x.tag===6)dd(f,x.stateNode);else if(!(x.tag===4||bi&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===p)break;for(;x.sibling===null;){if(x.return===null||x.return===p)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if($a)for(var I=p.child;I!==null;){if(I.tag===5){var V=I.stateNode;x&&w&&(V=U0(V,I.type,I.memoizedProps)),dd(f,V)}else if(I.tag===6)V=I.stateNode,x&&w&&(V=L0(V,I.memoizedProps)),dd(f,V);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)V=I.child,V!==null&&(V.return=I),mu(f,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}}function g_(f,p,x,w){if($a)for(var I=p.child;I!==null;){if(I.tag===5){var V=I.stateNode;x&&w&&(V=U0(V,I.type,I.memoizedProps)),P0(f,V)}else if(I.tag===6)V=I.stateNode,x&&w&&(V=L0(V,I.memoizedProps)),P0(f,V);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)V=I.child,V!==null&&(V.return=I),g_(f,I,!(I.memoizedProps!==null&&I.memoizedProps.mode==="manual"),!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}}function Kf(f,p){if($a&&xh(f,p)){f=p.stateNode;var x=f.containerInfo,w=pd();g_(w,p,!1,!1),f.pendingChildren=w,Gr(p),am(x,w)}}function Bp(f,p,x,w){if(Ms)f.memoizedProps!==w&&Gr(p);else if($a){var I=f.stateNode,V=f.memoizedProps;if((f=xh(f,p))||V!==w){var nt=As.current;V=kh(I,x,V,w,!f,null),V===I?p.stateNode=I:(Pl(V,x,w,nt)&&Gr(p),p.stateNode=V,f?mu(V,p,!1,!1):Gr(p))}else p.stateNode=I}}function zp(f,p,x){if(A0(p,x)){if(f.flags|=16777216,!sm(p,x))if(_c())f.flags|=8192;else throw Ic=Ed,Sd}else f.flags&=-16777217}function Fp(f,p){if(ix(p)){if(f.flags|=16777216,!_u(p))if(_c())f.flags|=8192;else throw Ic=Ed,Sd}else f.flags&=-16777217}function bh(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?D():536870912,f.lanes|=p,al|=p)}function Sh(f,p){if(!Fn)switch(f.tailMode){case"hidden":p=f.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var w=null;x!==null;)x.alternate!==null&&(w=x),x=x.sibling;w===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:w.sibling=null}}function Gi(f){var p=f.alternate!==null&&f.alternate.child===f.child,x=0,w=0;if(p)for(var I=f.child;I!==null;)x|=I.lanes|I.childLanes,w|=I.subtreeFlags&31457280,w|=I.flags&31457280,I.return=f,I=I.sibling;else for(I=f.child;I!==null;)x|=I.lanes|I.childLanes,w|=I.subtreeFlags,w|=I.flags,I.return=f,I=I.sibling;return f.subtreeFlags|=w,f.childLanes=x,p}function y_(f,p,x){var w=p.pendingProps;switch(ft(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(p),null;case 1:return Gi(p),null;case 3:return x=p.stateNode,w=null,f!==null&&(w=f.memoizedState.cache),p.memoizedState.cache!==w&&(p.flags|=2048),Te(Ii),_t(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(f===null||f.child===null)&&(ne(p)?Gr(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,eo!==null&&(nd(eo),eo=null))),Kf(f,p),Gi(p),null;case 26:if(ba){x=p.type;var I=p.memoizedState;return f===null?(Gr(p),I!==null?(Gi(p),Fp(p,I)):(Gi(p),zp(p,x,w))):I?I!==f.memoizedState?(Gr(p),Gi(p),Fp(p,I)):(Gi(p),p.flags&=-16777217):(Ms?f.memoizedProps!==w&&Gr(p):Bp(f,p,x,w),Gi(p),zp(p,x,w)),null}case 27:if(bi){if(gt(p),x=$o.current,I=p.type,f!==null&&p.stateNode!=null)Ms?f.memoizedProps!==w&&Gr(p):Bp(f,p,I,w);else{if(!w){if(p.stateNode===null)throw Error(s(166));return Gi(p),null}f=As.current,ne(p)?$t(p,f):(f=Co(I,w,x,f,!0),p.stateNode=f,Gr(p))}return Gi(p),null}case 5:if(gt(p),x=p.type,f!==null&&p.stateNode!=null)Bp(f,p,x,w);else{if(!w){if(p.stateNode===null)throw Error(s(166));return Gi(p),null}f=As.current,ne(p)?$t(p,f):(I=M0(x,w,$o.current,f,p),mu(I,p,!1,!1),p.stateNode=I,Pl(I,x,w,f)&&Gr(p))}return Gi(p),zp(p,p.type,p.pendingProps),null;case 6:if(f&&p.stateNode!=null)x=f.memoizedProps,Ms?x!==w&&Gr(p):$a&&(x!==w?(p.stateNode=fi(w,$o.current,As.current,p),Gr(p)):p.stateNode=f.stateNode);else{if(typeof w!="string"&&p.stateNode===null)throw Error(s(166));if(f=$o.current,x=As.current,ne(p)){if(!Js)throw Error(s(176));if(f=p.stateNode,x=p.memoizedProps,w=null,I=$s,I!==null)switch(I.tag){case 27:case 5:w=I.memoizedProps}F0(f,x,p,w)||Tt(p)}else p.stateNode=fi(w,f,x,p)}return Gi(p),null;case 13:if(w=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(I=ne(p),w!==null&&w.dehydrated!==null){if(f===null){if(!I)throw Error(s(318));if(!Js)throw Error(s(344));if(I=p.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(s(317));Q_(I,p)}else ee(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Gi(p),I=!1}else eo!==null&&(nd(eo),eo=null),I=!0;if(!I)return p.flags&256?(Kn(p),p):(Kn(p),null)}if(Kn(p),(p.flags&128)!==0)return p.lanes=x,p;if(x=w!==null,f=f!==null&&f.memoizedState!==null,x){w=p.child,I=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(I=w.alternate.memoizedState.cachePool.pool);var V=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(V=w.memoizedState.cachePool.pool),V!==I&&(w.flags|=2048)}return x!==f&&x&&(p.child.flags|=8192),bh(p,p.updateQueue),Gi(p),null;case 4:return _t(),Kf(f,p),f===null&&os(p.stateNode.containerInfo),Gi(p),null;case 10:return Te(p.type),Gi(p),null;case 19:if(E(ws),I=p.memoizedState,I===null)return Gi(p),null;if(w=(p.flags&128)!==0,V=I.rendering,V===null)if(w)Sh(I,!1);else{if(Ti!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(V=Zn(f),V!==null){for(p.flags|=128,Sh(I,!1),f=V.updateQueue,p.updateQueue=f,bh(p,f),p.subtreeFlags=0,f=x,x=p.child;x!==null;)rd(x,f),x=x.sibling;return R(ws,ws.current&1|2),p.child}f=f.sibling}I.tail!==null&&to()>Kh&&(p.flags|=128,w=!0,Sh(I,!1),p.lanes=4194304)}else{if(!w)if(f=Zn(V),f!==null){if(p.flags|=128,w=!0,f=f.updateQueue,p.updateQueue=f,bh(p,f),Sh(I,!0),I.tail===null&&I.tailMode==="hidden"&&!V.alternate&&!Fn)return Gi(p),null}else 2*to()-I.renderingStartTime>Kh&&x!==536870912&&(p.flags|=128,w=!0,Sh(I,!1),p.lanes=4194304);I.isBackwards?(V.sibling=p.child,p.child=V):(f=I.last,f!==null?f.sibling=V:p.child=V,I.last=V)}return I.tail!==null?(p=I.tail,I.rendering=p,I.tail=p.sibling,I.renderingStartTime=to(),p.sibling=null,f=ws.current,R(ws,w?f&1|2:f&1),p):(Gi(p),null);case 22:case 23:return Kn(p),Fi(),w=p.memoizedState!==null,f!==null?f.memoizedState!==null!==w&&(p.flags|=8192):w&&(p.flags|=8192),w?(x&536870912)!==0&&(p.flags&128)===0&&(Gi(p),p.subtreeFlags&6&&(p.flags|=8192)):Gi(p),x=p.updateQueue,x!==null&&bh(p,x.retryQueue),x=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==x&&(p.flags|=2048),f!==null&&E(il),null;case 24:return x=null,f!==null&&(x=f.memoizedState.cache),p.memoizedState.cache!==x&&(p.flags|=2048),Te(Ii),Gi(p),null;case 25:return null}throw Error(s(156,p.tag))}function $E(f,p){switch(ft(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return Te(Ii),_t(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return gt(p),null;case 13:if(Kn(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(s(340));ee()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return E(ws),null;case 4:return _t(),null;case 10:return Te(p.type),null;case 22:case 23:return Kn(p),Fi(),f!==null&&E(il),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return Te(Ii),null;case 25:return null;default:return null}}function v_(f,p){switch(ft(p),p.tag){case 3:Te(Ii),_t();break;case 26:case 27:case 5:gt(p);break;case 4:_t();break;case 13:Kn(p);break;case 19:E(ws);break;case 10:Te(p.type);break;case 22:case 23:Kn(p),Fi(),f!==null&&E(il);break;case 24:Te(Ii)}}function Zf(f,p){try{var x=p.updateQueue,w=x!==null?x.lastEffect:null;if(w!==null){var I=w.next;x=I;do{if((x.tag&f)===f){w=void 0;var V=x.create,nt=x.inst;w=V(),nt.destroy=w}x=x.next}while(x!==I)}}catch(xt){oi(p,p.return,xt)}}function pc(f,p,x){try{var w=p.updateQueue,I=w!==null?w.lastEffect:null;if(I!==null){var V=I.next;w=V;do{if((w.tag&f)===f){var nt=w.inst,xt=nt.destroy;if(xt!==void 0){nt.destroy=void 0,I=p;var Ot=x;try{xt()}catch(ue){oi(I,Ot,ue)}}}w=w.next}while(w!==V)}}catch(ue){oi(p,p.return,ue)}}function __(f){var p=f.updateQueue;if(p!==null){var x=f.stateNode;try{Ft(p,x)}catch(w){oi(f,f.return,w)}}}function jr(f,p,x){x.props=lr(f.type,f.memoizedProps),x.state=f.memoizedState;try{x.componentWillUnmount()}catch(w){oi(f,p,w)}}function Mo(f,p){try{var x=f.ref;if(x!==null){var w=f.stateNode;switch(f.tag){case 26:case 27:case 5:var I=Ph(w);break;default:I=w}typeof x=="function"?f.refCleanup=x(I):x.current=I}}catch(V){oi(f,p,V)}}function Wr(f,p){var x=f.ref,w=f.refCleanup;if(x!==null)if(typeof w=="function")try{w()}catch(I){oi(f,p,I)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(I){oi(f,p,I)}else x.current=null}function r0(f){var p=f.type,x=f.memoizedProps,w=f.stateNode;try{iT(w,p,x,f)}catch(I){oi(f,f.return,I)}}function a0(f,p,x){try{L_(f.stateNode,f.type,x,p,f)}catch(w){oi(f,f.return,w)}}function o0(f){return f.tag===5||f.tag===3||(ba?f.tag===26:!1)||(bi?f.tag===27:!1)||f.tag===4}function Qf(f){t:for(;;){for(;f.sibling===null;){if(f.return===null||o0(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&(!bi||f.tag!==27)&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue t;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function l0(f,p,x){var w=f.tag;if(w===5||w===6)f=f.stateNode,p?B_(x,f,p):I0(x,f);else if(!(w===4||bi&&w===27)&&(f=f.child,f!==null))for(l0(f,p,x),f=f.sibling;f!==null;)l0(f,p,x),f=f.sibling}function Tl(f,p,x){var w=f.tag;if(w===5||w===6)f=f.stateNode,p?k_(x,f,p):P_(x,f);else if(!(w===4||bi&&w===27)&&(f=f.child,f!==null))for(Tl(f,p,x),f=f.sibling;f!==null;)Tl(f,p,x),f=f.sibling}function Vp(f,p,x){f=f.containerInfo;try{Bh(f,x)}catch(w){oi(p,p.return,w)}}function Jf(f,p){for(nm(f.containerInfo),pn=p;pn!==null;)if(f=pn,p=f.child,(f.subtreeFlags&1028)!==0&&p!==null)p.return=f,pn=p;else for(;pn!==null;){f=pn;var x=f.alternate;switch(p=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&x!==null){p=void 0;var w=f,I=x.memoizedProps;x=x.memoizedState;var V=w.stateNode;try{var nt=lr(w.type,I,w.elementType===w.type);p=V.getSnapshotBeforeUpdate(nt,x),V.__reactInternalSnapshotBeforeUpdate=p}catch(xt){oi(w,w.return,xt)}}break;case 3:(p&1024)!==0&&Ms&&G_(f.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(s(163))}if(p=f.sibling,p!==null){p.return=f.return,pn=p;break}pn=f.return}return nt=In,In=!1,nt}function Hp(f,p,x){var w=x.flags;switch(x.tag){case 0:case 11:case 15:Al(f,x),w&4&&Zf(5,x);break;case 1:if(Al(f,x),w&4)if(f=x.stateNode,p===null)try{f.componentDidMount()}catch(xt){oi(x,x.return,xt)}else{var I=lr(x.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(I,p,f.__reactInternalSnapshotBeforeUpdate)}catch(xt){oi(x,x.return,xt)}}w&64&&__(x),w&512&&Mo(x,x.return);break;case 3:if(Al(f,x),w&64&&(w=x.updateQueue,w!==null)){if(f=null,x.child!==null)switch(x.child.tag){case 27:case 5:f=Ph(x.child.stateNode);break;case 1:f=x.child.stateNode}try{Ft(w,f)}catch(xt){oi(x,x.return,xt)}}break;case 26:if(ba){Al(f,x),w&512&&Mo(x,x.return);break}case 27:case 5:Al(f,x),p===null&&w&4&&r0(x),w&512&&Mo(x,x.return);break;case 12:Al(f,x);break;case 13:Al(f,x),w&4&&Gp(f,x);break;case 22:if(I=x.memoizedState!==null||sl,!I){p=p!==null&&p.memoizedState!==null||$i;var V=sl,nt=$i;sl=I,($i=p)&&!nt?wl(f,x,(x.subtreeFlags&8772)!==0):Al(f,x),sl=V,$i=nt}w&512&&(x.memoizedProps.mode==="manual"?Mo(x,x.return):Wr(x,x.return));break;default:Al(f,x)}}function c0(f){var p=f.alternate;p!==null&&(f.alternate=null,c0(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&nT(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function Ks(f,p,x){for(x=x.child;x!==null;)mc(f,p,x),x=x.sibling}function mc(f,p,x){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(cs,x)}catch{}switch(x.tag){case 26:if(ba){$i||Wr(x,p),Ks(f,p,x),x.memoizedState?vu(x.memoizedState):x.stateNode&&zh(x.stateNode);break}case 27:if(bi){$i||Wr(x,p);var w=Xe,I=En;Xe=x.stateNode,Ks(f,p,x),Rc(x.stateNode),Xe=w,En=I;break}case 5:$i||Wr(x,p);case 6:if(Ms){if(w=Xe,I=En,Xe=null,Ks(f,p,x),Xe=w,En=I,Xe!==null)if(En)try{z_(Xe,x.stateNode)}catch(V){oi(x,p,V)}else try{N0(Xe,x.stateNode)}catch(V){oi(x,p,V)}}else Ks(f,p,x);break;case 18:Ms&&Xe!==null&&(En?md(Xe,x.stateNode):$_(Xe,x.stateNode));break;case 4:Ms?(w=Xe,I=En,Xe=x.stateNode.containerInfo,En=!0,Ks(f,p,x),Xe=w,En=I):($a&&Vp(x.stateNode,x,pd()),Ks(f,p,x));break;case 0:case 11:case 14:case 15:$i||pc(2,x,p),$i||pc(4,x,p),Ks(f,p,x);break;case 1:$i||(Wr(x,p),w=x.stateNode,typeof w.componentWillUnmount=="function"&&jr(x,p,w)),Ks(f,p,x);break;case 21:Ks(f,p,x);break;case 22:$i||Wr(x,p),$i=(w=$i)||x.memoizedState!==null,Ks(f,p,x),$i=w;break;default:Ks(f,p,x)}}function Gp(f,p){if(Js&&p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{oT(f)}catch(x){oi(p,p.return,x)}}function x_(f){switch(f.tag){case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new li),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new li),p;default:throw Error(s(435,f.tag))}}function Ml(f,p){var x=x_(f);p.forEach(function(w){var I=Sc.bind(null,f,w);x.has(w)||(x.add(w),w.then(I,I))})}function Tr(f,p){var x=p.deletions;if(x!==null)for(var w=0;w<x.length;w++){var I=x[w],V=f,nt=p;if(Ms){var xt=nt;t:for(;xt!==null;){switch(xt.tag){case 27:case 5:Xe=xt.stateNode,En=!1;break t;case 3:Xe=xt.stateNode.containerInfo,En=!0;break t;case 4:Xe=xt.stateNode.containerInfo,En=!0;break t}xt=xt.return}if(Xe===null)throw Error(s(160));mc(V,nt,I),Xe=null,En=!1}else mc(V,nt,I);V=I.alternate,V!==null&&(V.return=null),I.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)u0(p,f),p=p.sibling}function u0(f,p){var x=f.alternate,w=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Tr(p,f),qr(f),w&4&&(pc(3,f,f.return),Zf(3,f),pc(5,f,f.return));break;case 1:Tr(p,f),qr(f),w&512&&($i||x===null||Wr(x,x.return)),w&64&&sl&&(f=f.updateQueue,f!==null&&(w=f.callbacks,w!==null&&(x=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=x===null?w:x.concat(w))));break;case 26:if(ba){var I=Xi;Tr(p,f),qr(f),w&512&&($i||x===null||Wr(x,x.return)),w&4&&(w=x!==null?x.memoizedState:null,p=f.memoizedState,x===null?p===null?f.stateNode===null?f.stateNode=yd(I,f.type,f.memoizedProps,f):vd(I,f.type,f.stateNode):f.stateNode=ex(I,p,f.memoizedProps):w!==p?(w===null?x.stateNode!==null&&zh(x.stateNode):vu(w),p===null?vd(I,f.type,f.stateNode):ex(I,p,f.memoizedProps)):p===null&&f.stateNode!==null&&a0(f,f.memoizedProps,x.memoizedProps));break}case 27:if(bi&&w&4&&f.alternate===null){I=f.stateNode;var V=f.memoizedProps;try{wc(I),rx(f.type,V,I,f)}catch(Ae){oi(f,f.return,Ae)}}case 5:if(Tr(p,f),qr(f),w&512&&($i||x===null||Wr(x,x.return)),Ms){if(f.flags&32){p=f.stateNode;try{O0(p)}catch(Ae){oi(f,f.return,Ae)}}w&4&&f.stateNode!=null&&(p=f.memoizedProps,a0(f,p,x!==null?x.memoizedProps:p)),w&1024&&(W0=!0)}break;case 6:if(Tr(p,f),qr(f),w&4&&Ms){if(f.stateNode===null)throw Error(s(162));w=f.memoizedProps,x=x!==null?x.memoizedProps:w,p=f.stateNode;try{U_(p,x,w)}catch(Ae){oi(f,f.return,Ae)}}break;case 3:if(ba?(nx(),I=Xi,Xi=fm(p.containerInfo),Tr(p,f),Xi=I):Tr(p,f),qr(f),w&4){if(Ms&&Js&&x!==null&&x.memoizedState.isDehydrated)try{aT(p.containerInfo)}catch(Ae){oi(f,f.return,Ae)}if($a){w=p.containerInfo,x=p.pendingChildren;try{Bh(w,x)}catch(Ae){oi(f,f.return,Ae)}}}W0&&(W0=!1,b_(f));break;case 4:ba?(x=Xi,Xi=fm(f.stateNode.containerInfo),Tr(p,f),qr(f),Xi=x):(Tr(p,f),qr(f)),w&4&&$a&&Vp(f.stateNode,f,f.stateNode.pendingChildren);break;case 12:Tr(p,f),qr(f);break;case 13:Tr(p,f),qr(f),f.child.flags&8192&&f.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Dr=to()),w&4&&(w=f.updateQueue,w!==null&&(f.updateQueue=null,Ml(f,w)));break;case 22:w&512&&($i||x===null||Wr(x,x.return)),I=f.memoizedState!==null;var nt=x!==null&&x.memoizedState!==null,xt=sl,Ot=$i;if(sl=xt||I,$i=Ot||nt,Tr(p,f),$i=Ot,sl=xt,qr(f),p=f.stateNode,p._current=f,p._visibility&=-3,p._visibility|=p._pendingVisibility&2,w&8192&&(p._visibility=I?p._visibility&-2:p._visibility|1,I&&(p=sl||$i,x===null||nt||p||Eh(f)),Ms&&(f.memoizedProps===null||f.memoizedProps.mode!=="manual"))){t:if(x=null,Ms)for(p=f;;){if(p.tag===5||ba&&p.tag===26||bi&&p.tag===27){if(x===null){nt=x=p;try{V=nt.stateNode,I?F_(V):H_(nt.stateNode,nt.memoizedProps)}catch(Ae){oi(nt,nt.return,Ae)}}}else if(p.tag===6){if(x===null){nt=p;try{var ue=nt.stateNode;I?V_(ue):sT(ue,nt.memoizedProps)}catch(Ae){oi(nt,nt.return,Ae)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break t;for(;p.sibling===null;){if(p.return===null||p.return===f)break t;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}}w&4&&(w=f.updateQueue,w!==null&&(x=w.retryQueue,x!==null&&(w.retryQueue=null,Ml(f,x))));break;case 19:Tr(p,f),qr(f),w&4&&(w=f.updateQueue,w!==null&&(f.updateQueue=null,Ml(f,w)));break;case 21:break;default:Tr(p,f),qr(f)}}function qr(f){var p=f.flags;if(p&2){try{if(Ms&&(!bi||f.tag!==27)){t:{for(var x=f.return;x!==null;){if(o0(x)){var w=x;break t}x=x.return}throw Error(s(160))}switch(w.tag){case 27:if(bi){var I=w.stateNode,V=Qf(f);Tl(f,V,I);break}case 5:var nt=w.stateNode;w.flags&32&&(O0(nt),w.flags&=-33);var xt=Qf(f);Tl(f,xt,nt);break;case 3:case 4:var Ot=w.stateNode.containerInfo,ue=Qf(f);l0(f,ue,Ot);break;default:throw Error(s(161))}}}catch(Ae){oi(f,f.return,Ae)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function b_(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;b_(p),p.tag===5&&p.flags&1024&&rm(p.stateNode),f=f.sibling}}function Al(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)Hp(f,p.alternate,p),p=p.sibling}function Eh(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:pc(4,p,p.return),Eh(p);break;case 1:Wr(p,p.return);var x=p.stateNode;typeof x.componentWillUnmount=="function"&&jr(p,p.return,x),Eh(p);break;case 26:case 27:case 5:Wr(p,p.return),Eh(p);break;case 22:Wr(p,p.return),p.memoizedState===null&&Eh(p);break;default:Eh(p)}f=f.sibling}}function wl(f,p,x){for(x=x&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var w=p.alternate,I=f,V=p,nt=V.flags;switch(V.tag){case 0:case 11:case 15:wl(I,V,x),Zf(4,V);break;case 1:if(wl(I,V,x),w=V,I=w.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(ue){oi(w,w.return,ue)}if(w=V,I=w.updateQueue,I!==null){var xt=w.stateNode;try{var Ot=I.shared.hiddenCallbacks;if(Ot!==null)for(I.shared.hiddenCallbacks=null,I=0;I<Ot.length;I++)pt(Ot[I],xt)}catch(ue){oi(w,w.return,ue)}}x&&nt&64&&__(V),Mo(V,V.return);break;case 26:case 27:case 5:wl(I,V,x),x&&w===null&&nt&4&&r0(V),Mo(V,V.return);break;case 12:wl(I,V,x);break;case 13:wl(I,V,x),x&&nt&4&&Gp(I,V);break;case 22:V.memoizedState===null&&wl(I,V,x),Mo(V,V.return);break;default:wl(I,V,x)}p=p.sibling}}function jp(f,p){var x=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==x&&(f!=null&&f.refCount++,x!=null&&El(x))}function $f(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&El(f))}function Bs(f,p,x,w){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)h0(f,p,x,w),p=p.sibling}function h0(f,p,x,w){var I=p.flags;switch(p.tag){case 0:case 11:case 15:Bs(f,p,x,w),I&2048&&Zf(9,p);break;case 3:Bs(f,p,x,w),I&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&El(f)));break;case 12:if(I&2048){Bs(f,p,x,w),f=p.stateNode;try{var V=p.memoizedProps,nt=V.id,xt=V.onPostCommit;typeof xt=="function"&&xt(nt,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Ot){oi(p,p.return,Ot)}}else Bs(f,p,x,w);break;case 23:break;case 22:V=p.stateNode,p.memoizedState!==null?V._visibility&4?Bs(f,p,x,w):hr(f,p):V._visibility&4?Bs(f,p,x,w):(V._visibility|=4,Zs(f,p,x,w,(p.subtreeFlags&10256)!==0)),I&2048&&jp(p.alternate,p);break;case 24:Bs(f,p,x,w),I&2048&&$f(p.alternate,p);break;default:Bs(f,p,x,w)}}function Zs(f,p,x,w,I){for(I=I&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var V=f,nt=p,xt=x,Ot=w,ue=nt.flags;switch(nt.tag){case 0:case 11:case 15:Zs(V,nt,xt,Ot,I),Zf(8,nt);break;case 23:break;case 22:var Ae=nt.stateNode;nt.memoizedState!==null?Ae._visibility&4?Zs(V,nt,xt,Ot,I):hr(V,nt):(Ae._visibility|=4,Zs(V,nt,xt,Ot,I)),I&&ue&2048&&jp(nt.alternate,nt);break;case 24:Zs(V,nt,xt,Ot,I),I&&ue&2048&&$f(nt.alternate,nt);break;default:Zs(V,nt,xt,Ot,I)}p=p.sibling}}function hr(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var x=f,w=p,I=w.flags;switch(w.tag){case 22:hr(x,w),I&2048&&jp(w.alternate,w);break;case 24:hr(x,w),I&2048&&$f(w.alternate,w);break;default:hr(x,w)}p=p.sibling}}function Ya(f){if(f.subtreeFlags&Ra)for(f=f.child;f!==null;)Wp(f),f=f.sibling}function Wp(f){switch(f.tag){case 26:Ya(f),f.flags&Ra&&(f.memoizedState!==null?sx(Xi,f.memoizedState,f.memoizedProps):wr(f.type,f.memoizedProps));break;case 5:Ya(f),f.flags&Ra&&wr(f.type,f.memoizedProps);break;case 3:case 4:if(ba){var p=Xi;Xi=fm(f.stateNode.containerInfo),Ya(f),Xi=p}else Ya(f);break;case 22:f.memoizedState===null&&(p=f.alternate,p!==null&&p.memoizedState!==null?(p=Ra,Ra=16777216,Ya(f),Ra=p):Ya(f));break;default:Ya(f)}}function td(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function gc(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var x=0;x<p.length;x++){var w=p[x];pn=w,f0(w,f)}td(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)qp(f),f=f.sibling}function qp(f){switch(f.tag){case 0:case 11:case 15:gc(f),f.flags&2048&&pc(9,f,f.return);break;case 3:gc(f);break;case 12:gc(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&4&&(f.return===null||f.return.tag!==13)?(p._visibility&=-5,Rl(f)):gc(f);break;default:gc(f)}}function Rl(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var x=0;x<p.length;x++){var w=p[x];pn=w,f0(w,f)}td(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:pc(8,p,p.return),Rl(p);break;case 22:x=p.stateNode,x._visibility&4&&(x._visibility&=-5,Rl(p));break;default:Rl(p)}f=f.sibling}}function f0(f,p){for(;pn!==null;){var x=pn;switch(x.tag){case 0:case 11:case 15:pc(8,x,p);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var w=x.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:El(x.memoizedState.cache)}if(w=x.child,w!==null)w.return=x,pn=w;else t:for(x=f;pn!==null;){w=pn;var I=w.sibling,V=w.return;if(c0(w),w===x){pn=null;break t}if(I!==null){I.return=V,pn=I;break t}pn=V}}}function Th(f){var p=w_(f);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(s(364));return p}if(f=C0(f),f===null)throw Error(s(362));return f.stateNode.current}function yc(f,p){var x=f.tag;switch(p.$$typeof){case Yh:if(f.type===p.value)return!0;break;case so:t:{for(p=p.value,f=[f,0],x=0;x<f.length;){var w=f[x++],I=w.tag,V=f[x++],nt=p[V];if(I!==5&&I!==26&&I!==27||!Lh(w)){for(;nt!=null&&yc(w,nt);)V++,nt=p[V];if(V===p.length){p=!0;break t}else for(w=w.child;w!==null;)f.push(w,V),w=w.sibling}}p=!1}return p;case Bi:if((x===5||x===26||x===27)&&I_(f.stateNode,p.value))return!0;break;case rl:if((x===5||x===6||x===26||x===27)&&(f=D_(f),f!==null&&0<=f.indexOf(p.value)))return!0;break;case Uo:if((x===5||x===26||x===27)&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function d0(f){switch(f.$$typeof){case Yh:return"<"+(a(f.value)||"Unknown")+">";case so:return":has("+(d0(f)||"")+")";case Bi:return'[role="'+f.value+'"]';case rl:return'"'+f.value+'"';case Uo:return'[data-testname="'+f.value+'"]';default:throw Error(s(365))}}function Xr(f,p){var x=[];f=[f,0];for(var w=0;w<f.length;){var I=f[w++],V=I.tag,nt=f[w++],xt=p[nt];if(V!==5&&V!==26&&V!==27||!Lh(I)){for(;xt!=null&&yc(I,xt);)nt++,xt=p[nt];if(nt===p.length)x.push(I);else for(I=I.child;I!==null;)f.push(I,nt),I=I.sibling}}return x}function ed(f,p){if(!Ac)throw Error(s(363));f=Th(f),f=Xr(f,p),p=[],f=Array.from(f);for(var x=0;x<f.length;){var w=f[x++],I=w.tag;if(I===5||I===26||I===27)Lh(w)||p.push(w.stateNode);else for(w=w.child;w!==null;)f.push(w),w=w.sibling}return p}function as(){if((qn&2)!==0&&kn!==0)return kn&-kn;if(nn.T!==null){var f=Ta;return f!==0?f:Rt()}return R_()}function p0(){Ia===0&&(Ia=(kn&536870912)===0||Fn?U():536870912);var f=Ma.current;return f!==null&&(f.flags|=32),Ia}function zs(f,p,x){(f===ci&&mi===2||f.cancelPendingCommit!==null)&&(Qs(f,0),Yr(f,kn,Ia,!1)),F(f,x),((qn&2)===0||f!==ci)&&(f===ci&&((qn&2)===0&&(Hl|=x),Ti===4&&Yr(f,kn,Ia,!1)),Ut(f))}function vc(f,p,x){if((qn&6)!==0)throw Error(s(327));var w=!x&&(p&60)===0&&(p&f.expiredLanes)===0||z(f,p),I=w?g0(f,p):Yp(f,p,!0),V=w;do{if(I===0){Ca&&!w&&Yr(f,p,0,!1);break}else if(I===6)Yr(f,p,0,!ao);else{if(x=f.current.alternate,V&&!Mh(x)){I=Yp(f,p,!1),V=!1;continue}if(I===2){if(V=p,f.errorRecoveryDisabledLanes&V)var nt=0;else nt=f.pendingLanes&-536870913,nt=nt!==0?nt:nt&536870912?536870912:0;if(nt!==0){p=nt;t:{var xt=f;I=Ou;var Ot=Js&&xt.current.memoizedState.isDehydrated;if(Ot&&(Qs(xt,nt).flags|=256),nt=Yp(xt,nt,!1),nt!==2){if(Rs&&!Ot){xt.errorRecoveryDisabledLanes|=V,Hl|=V,I=4;break t}V=ts,ts=I,V!==null&&nd(V)}I=nt}if(V=!1,I!==2)continue}}if(I===1){Qs(f,0),Yr(f,p,0,!0);break}t:{switch(w=f,I){case 0:case 1:throw Error(s(345));case 4:if((p&4194176)===p){Yr(w,p,Ia,!ao);break t}break;case 2:ts=null;break;case 3:case 5:break;default:throw Error(s(329))}if(w.finishedWork=x,w.finishedLanes=p,(p&62914560)===p&&(V=Dr+300-to(),10<V)){if(Yr(w,p,Ia,!ao),k(w,0)!==0)break t;w.timeoutHandle=_s(Xp.bind(null,w,x,ts,Md,Em,p,Ia,Hl,al,ao,2,-0,0),V);break t}Xp(w,x,ts,Md,Em,p,Ia,Hl,al,ao,0,-0,0)}}break}while(!0);Ut(f)}function nd(f){ts===null?ts=f:ts.push.apply(ts,f)}function Xp(f,p,x,w,I,V,nt,xt,Ot,ue,Ae,Ne,Ue){var mn=p.subtreeFlags;if((mn&8192||(mn&16785408)===16785408)&&(w0(),Wp(p),p=xs(),p!==null)){f.cancelPendingCommit=p(xc.bind(null,f,x,w,I,nt,xt,Ot,1,Ne,Ue)),Yr(f,V,nt,!ue);return}xc(f,x,w,I,nt,xt,Ot,Ae,Ne,Ue)}function Mh(f){for(var p=f;;){var x=p.tag;if((x===0||x===11||x===15)&&p.flags&16384&&(x=p.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var w=0;w<x.length;w++){var I=x[w],V=I.getSnapshot;I=I.value;try{if(!Zr(V(),I))return!1}catch{return!1}}if(x=p.child,p.subtreeFlags&16384&&x!==null)x.return=p,p=x;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Yr(f,p,x,w){p&=~Td,p&=~Hl,f.suspendedLanes|=p,f.pingedLanes&=~p,w&&(f.warmLanes|=p),w=f.expirationTimes;for(var I=p;0<I;){var V=31-Rr(I),nt=1<<V;w[V]=-1,I&=~nt}x!==0&&G(f,x,p)}function id(){return(qn&6)===0?(Nt(0),!1):!0}function Ah(){if(Ze!==null){if(mi===0)var f=Ze.return;else f=Ze,wa=Po=null,et(f),Nc=null,Oc=0,f=Ze;for(;f!==null;)v_(f.alternate,f),f=f.return;Ze=null}}function Qs(f,p){f.finishedWork=null,f.finishedLanes=0;var x=f.timeoutHandle;x!==Tc&&(f.timeoutHandle=Tc,im(x)),x=f.cancelPendingCommit,x!==null&&(f.cancelPendingCommit=null,x()),Ah(),ci=f,Ze=x=Za(f.current,null),kn=p,mi=0,dr=null,ao=!1,Ca=z(f,p),Rs=!1,al=Ia=Td=Hl=Da=Ti=0,ts=Ou=null,Em=!1,(p&8)!==0&&(p|=p&32);var w=f.entangledLanes;if(w!==0)for(f=f.entanglements,w&=p;0<w;){var I=31-Rr(w),V=1<<I;p|=f[I],w&=~V}return pr=p,Gt(),x}function va(f,p){Tn=null,nn.H=Ji,p===jh?(p=xe(),mi=3):p===Sd?(p=xe(),mi=4):mi=p===bm?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,dr=p,Ze===null&&(Ti=1,cr(f,at(p,f.current)))}function _c(){var f=Ma.current;return f===null?!0:(kn&4194176)===kn?Si===null:(kn&62914560)===kn||(kn&536870912)!==0?f===Si:!1}function Xo(){var f=nn.H;return nn.H=Ji,f===null?Ji:f}function Yo(){var f=nn.A;return nn.A=Xh,f}function Cl(){Ti=4,ao||(kn&4194176)!==kn&&Ma.current!==null||(Ca=!0),(Da&134217727)===0&&(Hl&134217727)===0||ci===null||Yr(ci,kn,Ia,!1)}function Yp(f,p,x){var w=qn;qn|=2;var I=Xo(),V=Yo();(ci!==f||kn!==p)&&(Md=null,Qs(f,p)),p=!1;var nt=Ti;t:do try{if(mi!==0&&Ze!==null){var xt=Ze,Ot=dr;switch(mi){case 8:Ah(),nt=6;break t;case 3:case 2:case 6:Ma.current===null&&(p=!0);var ue=mi;if(mi=0,dr=null,Ka(f,xt,Ot,ue),x&&Ca){nt=0;break t}break;default:ue=mi,mi=0,dr=null,Ka(f,xt,Ot,ue)}}m0(),nt=Ti;break}catch(Ae){va(f,Ae)}while(!0);return p&&f.shellSuspendCounter++,wa=Po=null,qn=w,nn.H=I,nn.A=V,Ze===null&&(ci=null,kn=0,Gt()),nt}function m0(){for(;Ze!==null;)qi(Ze)}function g0(f,p){var x=qn;qn|=2;var w=Xo(),I=Yo();ci!==f||kn!==p?(Md=null,Kh=to()+500,Qs(f,p)):Ca=z(f,p);t:do try{if(mi!==0&&Ze!==null){p=Ze;var V=dr;e:switch(mi){case 1:mi=0,dr=null,Ka(f,p,V,1);break;case 2:if(ye(V)){mi=0,dr=null,Jn(p);break}p=function(){mi===2&&ci===f&&(mi=7),Ut(f)},V.then(p,p);break t;case 3:mi=7;break t;case 4:mi=5;break t;case 7:ye(V)?(mi=0,dr=null,Jn(p)):(mi=0,dr=null,Ka(f,p,V,7));break;case 5:var nt=null;switch(Ze.tag){case 26:nt=Ze.memoizedState;case 5:case 27:var xt=Ze,Ot=xt.type,ue=xt.pendingProps;if(nt?_u(nt):sm(Ot,ue)){mi=0,dr=null;var Ae=xt.sibling;if(Ae!==null)Ze=Ae;else{var Ne=xt.return;Ne!==null?(Ze=Ne,_a(Ne)):Ze=null}break e}}mi=0,dr=null,Ka(f,p,V,5);break;case 6:mi=0,dr=null,Ka(f,p,V,6);break;case 8:Ah(),Ti=6;break t;default:throw Error(s(462))}}Mr();break}catch(Ue){va(f,Ue)}while(!0);return wa=Po=null,nn.H=w,nn.A=I,qn=x,Ze!==null?0:(ci=null,kn=0,Gt(),Ti)}function Mr(){for(;Ze!==null&&!lx();)qi(Ze)}function qi(f){var p=Vt(f.alternate,f,pr);f.memoizedProps=f.pendingProps,p===null?_a(f):Ze=p}function Jn(f){var p=f,x=p.alternate;switch(p.tag){case 15:case 0:p=hc(x,p,p.pendingProps,p.type,void 0,kn);break;case 11:p=hc(x,p,p.pendingProps,p.type.render,p.ref,kn);break;case 5:et(p);default:v_(x,p),p=Ze=rd(p,pr),p=Vt(x,p,pr)}f.memoizedProps=f.pendingProps,p===null?_a(f):Ze=p}function Ka(f,p,x,w){wa=Po=null,et(p),Nc=null,Oc=0;var I=p.return;try{if(vh(f,I,p,x,kn)){Ti=1,cr(f,at(x,f.current)),Ze=null;return}}catch(V){if(I!==null)throw Ze=I,V;Ti=1,cr(f,at(x,f.current)),Ze=null;return}p.flags&32768?(Fn||w===1?f=!0:Ca||(kn&536870912)!==0?f=!1:(ao=f=!0,(w===2||w===3||w===6)&&(w=Ma.current,w!==null&&w.tag===13&&(w.flags|=16384))),Kp(p,f)):_a(p)}function _a(f){var p=f;do{if((p.flags&32768)!==0){Kp(p,ao);return}f=p.return;var x=y_(p.alternate,p,pr);if(x!==null){Ze=x;return}if(p=p.sibling,p!==null){Ze=p;return}Ze=p=f}while(p!==null);Ti===0&&(Ti=5)}function Kp(f,p){do{var x=$E(f.alternate,f);if(x!==null){x.flags&=32767,Ze=x;return}if(x=f.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!p&&(f=f.sibling,f!==null)){Ze=f;return}Ze=f=x}while(f!==null);Ti=6,Ze=null}function xc(f,p,x,w,I,V,nt,xt,Ot,ue){var Ae=nn.T,Ne=Ul();try{fr(2),nn.T=null,S_(f,p,x,w,Ne,I,V,nt,xt,Ot,ue)}finally{nn.T=Ae,fr(Ne)}}function S_(f,p,x,w,I,V,nt,xt){do Ao();while(ol!==null);if((qn&6)!==0)throw Error(s(327));var Ot=f.finishedWork;if(w=f.finishedLanes,Ot===null)return null;if(f.finishedWork=null,f.finishedLanes=0,Ot===f.current)throw Error(s(177));f.callbackNode=null,f.callbackPriority=0,f.cancelPendingCommit=null;var ue=Ot.lanes|Ot.childLanes;if(ue|=No,H(f,w,ue,V,nt,xt),f===ci&&(Ze=ci=null,kn=0),(Ot.subtreeFlags&10256)===0&&(Ot.flags&10256)===0||Lo||(Lo=!0,Bc=ue,Tm=x,Il(ym,function(){return Ao(),null})),x=(Ot.flags&15990)!==0,(Ot.subtreeFlags&15990)!==0||x?(x=nn.T,nn.T=null,V=Ul(),fr(2),nt=qn,qn|=4,Jf(f,Ot),u0(Ot,f),A_(f.containerInfo),f.current=Ot,Hp(f,Ot.alternate,Ot),mm(),qn=nt,fr(V),nn.T=x):f.current=Ot,Lo?(Lo=!1,ol=f,Pu=w):y0(f,ue),ue=f.pendingLanes,ue===0&&(kc=null),j(Ot.stateNode),Ut(f),p!==null)for(I=f.onRecoverableError,Ot=0;Ot<p.length;Ot++)ue=p[Ot],I(ue.value,{componentStack:ue.stack});return(Pu&3)!==0&&Ao(),ue=f.pendingLanes,(w&4194218)!==0&&(ue&42)!==0?f===Mm?Zh++:(Zh=0,Mm=f):Zh=0,Nt(0),null}function y0(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,El(p)))}function Ao(){if(ol!==null){var f=ol,p=Bc;Bc=0;var x=lt(Pu),w=32>x?32:x;x=nn.T;var I=Ul();try{if(fr(w),nn.T=null,ol===null)var V=!1;else{w=Tm,Tm=null;var nt=ol,xt=Pu;if(ol=null,Pu=0,(qn&6)!==0)throw Error(s(331));var Ot=qn;if(qn|=4,qp(nt.current),h0(nt,nt.current,xt,w),qn=Ot,Nt(0,!1),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(cs,nt)}catch{}V=!0}return V}finally{fr(I),nn.T=x,y0(f,p)}}return!1}function wh(f,p,x){p=at(x,p),p=Er(f.stateNode,p,2),f=te(f,p,2),f!==null&&(F(f,2),Ut(f))}function oi(f,p,x){if(f.tag===3)wh(f,f,x);else for(;p!==null;){if(p.tag===3){wh(p,f,x);break}else if(p.tag===1){var w=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(kc===null||!kc.has(w))){f=at(x,f),x=Wa(2),w=te(p,x,2),w!==null&&(ks(x,w,p,f),F(w,2),Ut(w));break}}p=p.return}}function gu(f,p,x){var w=f.pingCache;if(w===null){w=f.pingCache=new ro;var I=new Set;w.set(p,I)}else I=w.get(p),I===void 0&&(I=new Set,w.set(p,I));I.has(x)||(Rs=!0,I.add(x),f=v0.bind(null,f,p,x),p.then(f,f))}function v0(f,p,x){var w=f.pingCache;w!==null&&w.delete(p),f.pingedLanes|=f.suspendedLanes&x,f.warmLanes&=~x,ci===f&&(kn&x)===x&&(Ti===4||Ti===3&&(kn&62914560)===kn&&300>to()-Dr?(qn&2)===0&&Qs(f,0):Td|=x,al===kn&&(al=0)),Ut(f)}function bc(f,p){p===0&&(p=D()),f=Ct(f,p),f!==null&&(F(f,p),Ut(f))}function Dl(f){var p=f.memoizedState,x=0;p!==null&&(x=p.retryLane),bc(f,x)}function Sc(f,p){var x=0;switch(f.tag){case 13:var w=f.stateNode,I=f.memoizedState;I!==null&&(x=I.retryLane);break;case 19:w=f.stateNode;break;case 22:w=f.stateNode._retryCache;break;default:throw Error(s(314))}w!==null&&w.delete(p),bc(f,x)}function Il(f,p){return _d(f,p)}function _0(f,p,x,w){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sd(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Za(f,p){var x=f.alternate;return x===null?(x=e(f.tag,p,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=p,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&31457280,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,p=f.dependencies,x.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x.refCleanup=f.refCleanup,x}function rd(f,p){f.flags&=31457282;var x=f.alternate;return x===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=x.childLanes,f.lanes=x.lanes,f.child=x.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=x.memoizedProps,f.memoizedState=x.memoizedState,f.updateQueue=x.updateQueue,f.type=x.type,p=x.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function Ko(f,p,x,w,I,V){var nt=0;if(w=f,typeof f=="function")sd(f)&&(nt=1);else if(typeof f=="string")nt=ba&&bi?gd(f,x,As.current)?26:Qo(f)?27:5:ba?gd(f,x,As.current)?26:5:bi&&Qo(f)?27:5;else t:switch(f){case Ec:return Qi(x.children,I,V,p);case cd:nt=8,I|=24;break;case $p:return f=e(12,x,p,I|2),f.elementType=$p,f.lanes=V,f;case tm:return f=e(13,x,p,I),f.elementType=tm,f.lanes=V,f;case Ih:return f=e(19,x,p,I),f.elementType=Ih,f.lanes=V,f;case S0:return ad(x,I,V,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case ud:case wo:nt=10;break t;case b0:nt=9;break t;case hd:nt=11;break t;case em:nt=14;break t;case Ja:nt=16,w=null;break t}nt=29,x=Error(s(130,f===null?"null":typeof f,"")),w=null}return p=e(nt,x,p,I),p.elementType=f,p.type=w,p.lanes=V,p}function Qi(f,p,x,w){return f=e(7,f,w,p),f.lanes=x,f}function ad(f,p,x,w){f=e(22,f,w,p),f.elementType=S0,f.lanes=x;var I={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var V=I._current;if(V===null)throw Error(s(456));if((I._pendingVisibility&2)===0){var nt=Ct(V,2);nt!==null&&(I._pendingVisibility|=2,zs(nt,V,2))}},attach:function(){var V=I._current;if(V===null)throw Error(s(456));if((I._pendingVisibility&2)!==0){var nt=Ct(V,2);nt!==null&&(I._pendingVisibility&=-3,zs(nt,V,2))}}};return f.stateNode=I,f}function Zp(f,p,x){return f=e(6,f,null,p),f.lanes=x,f}function x0(f,p,x){return p=e(4,f.children!==null?f.children:[],f.key,p),p.lanes=x,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function tT(f,p,x,w,I,V,nt,xt){this.tag=1,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Tc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=O(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O(0),this.hiddenUpdates=O(null),this.identifierPrefix=w,this.onUncaughtError=I,this.onCaughtError=V,this.onRecoverableError=nt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xt,this.incompleteTransitions=new Map}function E_(f,p,x,w,I,V,nt,xt,Ot,ue,Ae,Ne){return f=new tT(f,p,x,nt,xt,Ot,ue,Ne),p=1,V===!0&&(p|=24),V=e(3,null,null,p),f.current=V,V.stateNode=f,p=ya(),p.refCount++,f.pooledCache=p,p.refCount++,V.memoizedState={element:w,isDehydrated:x,cache:p},ve(V),f}function vs(f){return f?(f=Cc,f):Cc}function Qp(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(s(188)):(f=Object.keys(f).join(","),Error(s(268,f)));return f=_(p),f=f!==null?b(f):null,f===null?null:Ph(f.stateNode)}function Rh(f,p,x,w,I,V){I=vs(I),w.context===null?w.context=I:w.pendingContext=I,w=Xt(p),w.payload={element:x},V=V===void 0?null:V,V!==null&&(w.callback=V),x=te(f,w,p),x!==null&&(zs(x,f,p),re(x,f,p))}function Ch(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<p?x:p}}function od(f,p){Ch(f,p),(f=f.alternate)&&Ch(f,p)}var yn={},Dh=Fg(),xa=fet(),Jp=Object.assign,eT=Symbol.for("react.element"),ld=Symbol.for("react.transitional.element"),Qa=Symbol.for("react.portal"),Ec=Symbol.for("react.fragment"),cd=Symbol.for("react.strict_mode"),$p=Symbol.for("react.profiler"),ud=Symbol.for("react.provider"),b0=Symbol.for("react.consumer"),wo=Symbol.for("react.context"),hd=Symbol.for("react.forward_ref"),tm=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),em=Symbol.for("react.memo"),Ja=Symbol.for("react.lazy"),S0=Symbol.for("react.offscreen"),T_=Symbol.for("react.memo_cache_sentinel"),Nl=Symbol.iterator,E0=Symbol.for("react.client.reference"),nn=Dh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Zo,Ol,yu=!1,Nh=Array.isArray,T0=t.rendererVersion,fd=t.rendererPackageName,Oh=t.extraDevToolsConfig,Ph=t.getPublicInstance,M_=t.getRootHostContext,Uh=t.getChildHostContext,nm=t.prepareForCommit,A_=t.resetAfterCommit,M0=t.createInstance,dd=t.appendInitialChild,Pl=t.finalizeInitialChildren,vn=t.shouldSetTextContent,fi=t.createTextInstance,_s=t.scheduleTimeout,im=t.cancelTimeout,Tc=t.noTimeout,Ar=t.isPrimaryRenderer;t.warnsIfNotActing;var Ms=t.supportsMutation,$a=t.supportsPersistence,Js=t.supportsHydration,w_=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var os=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var fr=t.setCurrentUpdatePriority,Ul=t.getCurrentUpdatePriority,R_=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var C_=t.shouldAttemptEagerTransition,nT=t.detachDeletedInstance;t.requestPostPaintCallback;var A0=t.maySuspendCommit,sm=t.preloadInstance,w0=t.startSuspendingCommit,wr=t.suspendInstance,xs=t.waitForCommitToBeReady,Mc=t.NotPendingTransition,Ro=t.HostTransitionContext,rm=t.resetFormInstance;t.bindToConsole;var R0=t.supportsMicrotasks,Ll=t.scheduleMicrotask,Ac=t.supportsTestSelectors,C0=t.findFiberRoot,D0=t.getBoundingRect,D_=t.getTextContent,Lh=t.isHiddenSubtree,I_=t.matchAccessibilityRole,N_=t.setFocusIfFocusable,O_=t.setupIntersectionObserver,P_=t.appendChild,I0=t.appendChildToContainer,U_=t.commitTextUpdate,iT=t.commitMount,L_=t.commitUpdate,k_=t.insertBefore,B_=t.insertInContainerBefore,N0=t.removeChild,z_=t.removeChildFromContainer,O0=t.resetTextContent,F_=t.hideInstance,V_=t.hideTextInstance,H_=t.unhideInstance,sT=t.unhideTextInstance,G_=t.clearContainer,kh=t.cloneInstance,pd=t.createContainerChildSet,P0=t.appendChildToContainerChildSet,am=t.finalizeContainerChildren,Bh=t.replaceContainerChildren,U0=t.cloneHiddenInstance,L0=t.cloneHiddenTextInstance,om=t.isSuspenseInstancePending,lm=t.isSuspenseInstanceFallback,j_=t.getSuspenseInstanceFallbackErrorDetails,W_=t.registerSuspenseInstanceRetry,k0=t.canHydrateFormStateMarker,q_=t.isFormStateMarkerMatching,B0=t.getNextHydratableSibling,cm=t.getFirstHydratableChild,X_=t.getFirstHydratableChildWithinContainer,Y_=t.getFirstHydratableChildWithinSuspenseInstance,rT=t.canHydrateInstance,z0=t.canHydrateTextInstance,K_=t.canHydrateSuspenseInstance,Z_=t.hydrateInstance,F0=t.hydrateTextInstance,Q_=t.hydrateSuspenseInstance,J_=t.getNextHydratableInstanceAfterSuspenseInstance,aT=t.commitHydratedContainer,oT=t.commitHydratedSuspenseInstance,$_=t.clearSuspenseBoundary,md=t.clearSuspenseBoundaryFromContainer,um=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var hm=t.validateHydratableInstance,tx=t.validateHydratableTextInstance,ba=t.supportsResources,gd=t.isHostHoistableType,fm=t.getHoistableRoot,V0=t.getResource,ex=t.acquireResource,vu=t.releaseResource,yd=t.hydrateHoistable,vd=t.mountHoistable,zh=t.unmountHoistable,dm=t.createHoistableInstance,nx=t.prepareToCommitHoistables,ix=t.mayResourceSuspendCommit,_u=t.preloadResource,sx=t.suspendResource,bi=t.supportsSingletons,Co=t.resolveSingletonInstance,wc=t.clearSingleton,rx=t.acquireSingletonInstance,Rc=t.releaseSingletonInstance,Qo=t.isHostSingletonType,ls=[],kl=-1,Cc={},Rr=Math.clz32?Math.clz32:N,ax=Math.log,ox=Math.LN2,Jo=128,xu=4194304,_d=xa.unstable_scheduleCallback,pm=xa.unstable_cancelCallback,lx=xa.unstable_shouldYield,mm=xa.unstable_requestPaint,to=xa.unstable_now,gm=xa.unstable_ImmediatePriority,cx=xa.unstable_UserBlockingPriority,ym=xa.unstable_NormalPriority,lT=xa.unstable_IdlePriority,ux=xa.log,Fs=xa.unstable_setDisableYieldValue,cs=null,Kr=null,Zr=typeof Object.is=="function"?Object.is:$,H0=new WeakMap,bu=[],Su=0,Eu=null,Fh=0,Sa=[],Ea=0,Dc=null,Do=1,Io="",As=S(null),Vh=S(null),$o=S(null),Tu=S(null),$s=null,tr=null,Fn=!1,eo=null,Vs=!1,xd=Error(s(519)),no=[],Mu=0,No=0,bd=null,Bl=null,Au=!1,Ci=!1,G0=!1,Hh=0,Gh=null,wu=0,Ta=0,Ru=null,zl=!1,Cu=!1,tl=Object.prototype.hasOwnProperty,jh=Error(s(460)),Sd=Error(s(474)),Ed={then:function(){}},Ic=null,Nc=null,Oc=0,Pc=dn(!0),el=dn(!1),Di=S(null),Wh=S(0),Ma=S(null),Si=null,ws=S(0),Fl=0,Tn=null,Ye=null,Wn=null,io=!1,Du=!1,Uc=!1,vm=0,Iu=0,Hs=null,Oo=0,_m=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ji={readContext:ki,use:yt,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn};Ji.useCacheRefresh=Nn,Ji.useMemoCache=Nn,Ji.useHostTransitionStatus=Nn,Ji.useFormState=Nn,Ji.useActionState=Nn,Ji.useOptimistic=Nn;var Lc={readContext:ki,use:yt,useCallback:function(f,p){return St().memoizedState=[f,p===void 0?null:p],f},useContext:ki,useEffect:bo,useImperativeHandle:function(f,p,x){x=x!=null?x.concat([f]):null,_o(4194308,4,pa.bind(null,p,f),x)},useLayoutEffect:function(f,p){return _o(4194308,4,f,p)},useInsertionEffect:function(f,p){_o(4,2,f,p)},useMemo:function(f,p){var x=St();p=p===void 0?null:p;var w=f();if(Uc){J(!0);try{f()}finally{J(!1)}}return x.memoizedState=[w,p],w},useReducer:function(f,p,x){var w=St();if(x!==void 0){var I=x(p);if(Uc){J(!0);try{x(p)}finally{J(!1)}}}else I=p;return w.memoizedState=w.baseState=I,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:I},w.queue=f,f=f.dispatch=Sl.bind(null,Tn,f),[w.memoizedState,f]},useRef:function(f){var p=St();return f={current:f},p.memoizedState=f},useState:function(f){f=Ge(f);var p=f.queue,x=lc.bind(null,Tn,p);return p.dispatch=x,[f.memoizedState,x]},useDebugValue:or,useDeferredValue:function(f,p){var x=St();return ga(x,f,p)},useTransition:function(){var f=Ge(!1);return f=Va.bind(null,Tn,f.queue,!0,!1),St().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,x){var w=Tn,I=St();if(Fn){if(x===void 0)throw Error(s(407));x=x()}else{if(x=p(),ci===null)throw Error(s(349));(kn&60)!==0||Le(w,p,x)}I.memoizedState=x;var V={value:x,getSnapshot:p};return I.queue=V,bo(Cn.bind(null,w,V,f),[f]),w.flags|=2048,ri(9,$e.bind(null,w,V,x,p),{destroy:void 0},null),x},useId:function(){var f=St(),p=ci.identifierPrefix;if(Fn){var x=Io,w=Do;x=(w&~(1<<32-Rr(w)-1)).toString(32)+x,p=":"+p+"R"+x,x=vm++,0<x&&(p+="H"+x.toString(32)),p+=":"}else x=Oo++,p=":"+p+"r"+x.toString(32)+":";return f.memoizedState=p},useCacheRefresh:function(){return St().memoizedState=ai.bind(null,Tn)}};Lc.useMemoCache=_e,Lc.useHostTransitionStatus=br,Lc.useFormState=is,Lc.useActionState=is,Lc.useOptimistic=function(f){var p=St();p.memoizedState=p.baseState=f;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=x,p=Ga.bind(null,Tn,!0,x),x.dispatch=p,[f,p]};var Cr={readContext:ki,use:yt,useCallback:Es,useContext:ki,useEffect:za,useImperativeHandle:ma,useInsertionEffect:oc,useLayoutEffect:qs,useMemo:So,useReducer:De,useRef:Fr,useState:function(){return De(Me)},useDebugValue:or,useDeferredValue:function(f,p){var x=kt();return Fa(x,Ye.memoizedState,f,p)},useTransition:function(){var f=De(Me)[0],p=kt().memoizedState;return[typeof f=="boolean"?f:qt(f),p]},useSyncExternalStore:He,useId:Ha};Cr.useCacheRefresh=Ui,Cr.useMemoCache=_e,Cr.useHostTransitionStatus=br,Cr.useFormState=Vi,Cr.useActionState=Vi,Cr.useOptimistic=function(f,p){var x=kt();return Be(x,Ye,f,p)};var Aa={readContext:ki,use:yt,useCallback:Es,useContext:ki,useEffect:za,useImperativeHandle:ma,useInsertionEffect:oc,useLayoutEffect:qs,useMemo:So,useReducer:ze,useRef:Fr,useState:function(){return ze(Me)},useDebugValue:or,useDeferredValue:function(f,p){var x=kt();return Ye===null?ga(x,f,p):Fa(x,Ye.memoizedState,f,p)},useTransition:function(){var f=ze(Me)[0],p=kt().memoizedState;return[typeof f=="boolean"?f:qt(f),p]},useSyncExternalStore:He,useId:Ha};Aa.useCacheRefresh=Ui,Aa.useMemoCache=_e,Aa.useHostTransitionStatus=br,Aa.useFormState=zr,Aa.useActionState=zr,Aa.useOptimistic=function(f,p){var x=kt();return Ye!==null?Be(x,Ye,f,p):(x.baseState=f,[f,x.queue.dispatch])};var nl={isMounted:function(f){return(f=f._reactInternals)?g(f)===f:!1},enqueueSetState:function(f,p,x){f=f._reactInternals;var w=as(),I=Xt(w);I.payload=p,x!=null&&(I.callback=x),p=te(f,I,w),p!==null&&(zs(p,f,w),re(p,f,w))},enqueueReplaceState:function(f,p,x){f=f._reactInternals;var w=as(),I=Xt(w);I.tag=1,I.payload=p,x!=null&&(I.callback=x),p=te(f,I,w),p!==null&&(zs(p,f,w),re(p,f,w))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var x=as(),w=Xt(x);w.tag=2,p!=null&&(w.callback=p),p=te(f,w,x),p!==null&&(zs(p,f,x),re(p,f,x))}},xm=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},bm=Error(s(461)),Ei=!1,Sm={dehydrated:null,treeContext:null,retryLane:0},Vl=S(null),Po=null,wa=null,qh=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(x,w){f.push(w)}};this.abort=function(){p.aborted=!0,f.forEach(function(x){return x()})}},hx=xa.unstable_scheduleCallback,fx=xa.unstable_NormalPriority,Ii={$$typeof:wo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},j0=nn.S;nn.S=function(f,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&At(f,p),j0!==null&&j0(f,p)};var il=S(null),sl=!1,$i=!1,W0=!1,li=typeof WeakSet=="function"?WeakSet:Set,pn=null,In=!1,Xe=null,En=!1,Xi=null,Ra=8192,Xh={getCacheForType:function(f){var p=ki(Ii),x=p.data.get(f);return x===void 0&&(x=f(),p.data.set(f,x)),x}},Yh=0,so=1,Bi=2,Uo=3,rl=4;if(typeof Symbol=="function"&&Symbol.for){var Nu=Symbol.for;Yh=Nu("selector.component"),so=Nu("selector.has_pseudo_class"),Bi=Nu("selector.role"),Uo=Nu("selector.test_id"),rl=Nu("selector.text")}var ro=typeof WeakMap=="function"?WeakMap:Map,qn=0,ci=null,Ze=null,kn=0,mi=0,dr=null,ao=!1,Ca=!1,Rs=!1,pr=0,Ti=0,Da=0,Hl=0,Td=0,Ia=0,al=0,Ou=null,ts=null,Em=!1,Dr=0,Kh=1/0,Md=null,kc=null,Lo=!1,ol=null,Pu=0,Bc=0,Tm=null,Zh=0,Mm=null;return yn.attemptContinuousHydration=function(f){if(f.tag===13){var p=Ct(f,67108864);p!==null&&zs(p,f,67108864),od(f,67108864)}},yn.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var p=as(),x=Ct(f,p);x!==null&&zs(x,f,p),od(f,p)}},yn.attemptSynchronousHydration=function(f){switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var p=P(f.pendingLanes);if(p!==0){for(f.pendingLanes|=2,f.entangledLanes|=2;p;){var x=1<<31-Rr(p);f.entanglements[1]|=x,p&=~x}Ut(f),(qn&6)===0&&(Kh=to()+500,Nt(0))}}break;case 13:p=Ct(f,2),p!==null&&zs(p,f,2),id(),od(f,2)}},yn.batchedUpdates=function(f,p){return f(p)},yn.createComponentSelector=function(f){return{$$typeof:Yh,value:f}},yn.createContainer=function(f,p,x,w,I,V,nt,xt,Ot,ue){return E_(f,p,!1,null,x,w,V,nt,xt,Ot,ue,null)},yn.createHasPseudoClassSelector=function(f){return{$$typeof:so,value:f}},yn.createHydrationContainer=function(f,p,x,w,I,V,nt,xt,Ot,ue,Ae,Ne,Ue){return f=E_(x,w,!0,f,I,V,xt,Ot,ue,Ae,Ne,Ue),f.context=vs(null),x=f.current,w=as(),I=Xt(w),I.callback=p??null,te(x,I,w),f.current.lanes=w,F(f,w),Ut(f),f},yn.createPortal=function(f,p,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qa,key:w==null?null:""+w,children:f,containerInfo:p,implementation:x}},yn.createRoleSelector=function(f){return{$$typeof:Bi,value:f}},yn.createTestNameSelector=function(f){return{$$typeof:Uo,value:f}},yn.createTextSelector=function(f){return{$$typeof:rl,value:f}},yn.defaultOnCaughtError=function(f){console.error(f)},yn.defaultOnRecoverableError=function(f){xm(f)},yn.defaultOnUncaughtError=function(f){xm(f)},yn.deferredUpdates=function(f){var p=nn.T,x=Ul();try{return fr(32),nn.T=null,f()}finally{fr(x),nn.T=p}},yn.discreteUpdates=function(f,p,x,w,I){var V=nn.T,nt=Ul();try{return fr(2),nn.T=null,f(p,x,w,I)}finally{fr(nt),nn.T=V,qn===0&&(Kh=to()+500)}},yn.findAllNodes=ed,yn.findBoundingRects=function(f,p){if(!Ac)throw Error(s(363));p=ed(f,p),f=[];for(var x=0;x<p.length;x++)f.push(D0(p[x]));for(p=f.length-1;0<p;p--){x=f[p];for(var w=x.x,I=w+x.width,V=x.y,nt=V+x.height,xt=p-1;0<=xt;xt--)if(p!==xt){var Ot=f[xt],ue=Ot.x,Ae=ue+Ot.width,Ne=Ot.y,Ue=Ne+Ot.height;if(w>=ue&&V>=Ne&&I<=Ae&&nt<=Ue){f.splice(p,1);break}else if(w!==ue||x.width!==Ot.width||Ue<V||Ne>nt){if(!(V!==Ne||x.height!==Ot.height||Ae<w||ue>I)){ue>w&&(Ot.width+=ue-w,Ot.x=w),Ae<I&&(Ot.width=I-ue),f.splice(p,1);break}}else{Ne>V&&(Ot.height+=Ne-V,Ot.y=V),Ue<nt&&(Ot.height=nt-Ne),f.splice(p,1);break}}}return f},yn.findHostInstance=Qp,yn.findHostInstanceWithNoPortals=function(f){return f=_(f),f=f!==null?M(f):null,f===null?null:Ph(f.stateNode)},yn.findHostInstanceWithWarning=function(f){return Qp(f)},yn.flushPassiveEffects=Ao,yn.flushSyncFromReconciler=function(f){var p=qn;qn|=1;var x=nn.T,w=Ul();try{if(fr(2),nn.T=null,f)return f()}finally{fr(w),nn.T=x,qn=p,(qn&6)===0&&Nt(0)}},yn.flushSyncWork=id,yn.focusWithin=function(f,p){if(!Ac)throw Error(s(363));for(f=Th(f),p=Xr(f,p),p=Array.from(p),f=0;f<p.length;){var x=p[f++],w=x.tag;if(!Lh(x)){if((w===5||w===26||w===27)&&N_(x.stateNode))return!0;for(x=x.child;x!==null;)p.push(x),x=x.sibling}}return!1},yn.getFindAllNodesFailureDescription=function(f,p){if(!Ac)throw Error(s(363));var x=0,w=[];f=[Th(f),0];for(var I=0;I<f.length;){var V=f[I++],nt=V.tag,xt=f[I++],Ot=p[xt];if((nt!==5&&nt!==26&&nt!==27||!Lh(V))&&(yc(V,Ot)&&(w.push(d0(Ot)),xt++,xt>x&&(x=xt)),xt<p.length))for(V=V.child;V!==null;)f.push(V,xt),V=V.sibling}if(x<p.length){for(f=[];x<p.length;x++)f.push(d0(p[x]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},yn.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 27:case 5:return Ph(f.child.stateNode);default:return f.child.stateNode}},yn.injectIntoDevTools=function(){var f={bundleType:0,version:T0,rendererPackageName:fd,currentDispatcherRef:nn,findFiberByHostInstance:w_,reconcilerVersion:"19.0.0"};if(Oh!==null&&(f.rendererConfig=Oh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)f=!0;else{try{cs=p.inject(f),Kr=p}catch{}f=!!p.checkDCE}}return f},yn.isAlreadyRendering=function(){return!1},yn.observeVisibleRects=function(f,p,x,w){if(!Ac)throw Error(s(363));f=ed(f,p);var I=O_(f,x,w).disconnect;return{disconnect:function(){I()}}},yn.shouldError=function(){return null},yn.shouldSuspend=function(){return!1},yn.startHostTransition=function(f,p,x,w){if(f.tag!==5)throw Error(s(476));var I=ss(f).queue;Va(f,I,p,Mc,x===null?n:function(){var V=ss(f).next.queue;return Sr(f,V,{},as()),x(w)})},yn.updateContainer=function(f,p,x,w){var I=p.current,V=as();return Rh(I,V,f,p,x,w),V},yn.updateContainerSync=function(f,p,x,w){return p.tag===0&&Ao(),Rh(p.current,2,f,p,x,w),2},yn},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(nA)),nA.exports}var E3;function pet(){return E3||(E3=1,eA.exports=det()),eA.exports}var met=pet();const get=zw(met);var rA={exports:{}},aA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T3;function yet(){return T3||(T3=1,(function(i){function t(j,J){var $=j.length;j.push(J);t:for(;0<$;){var at=$-1>>>1,Y=j[at];if(0<s(Y,J))j[at]=J,j[$]=Y,$=at;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var J=j[0],$=j.pop();if($!==J){j[0]=$;t:for(var at=0,Y=j.length,Z=Y>>>1;at<Z;){var rt=2*(at+1)-1,ft=j[rt],dt=rt+1,_t=j[dt];if(0>s(ft,$))dt<Y&&0>s(_t,ft)?(j[at]=_t,j[dt]=$,at=dt):(j[at]=ft,j[rt]=$,at=rt);else if(dt<Y&&0>s(_t,$))j[at]=_t,j[dt]=$,at=dt;else break t}}return J}function s(j,J){var $=j.sortIndex-J.sortIndex;return $!==0?$:j.id-J.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,g=null,y=3,_=!1,b=!1,M=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N(j){for(var J=e(u);J!==null;){if(J.callback===null)n(u);else if(J.startTime<=j)n(u),J.sortIndex=J.expirationTime,t(c,J);else break;J=e(u)}}function P(j){if(M=!1,N(j),!b)if(e(c)!==null)b=!0,it();else{var J=e(u);J!==null&&lt(P,J.startTime-j)}}var k=!1,z=-1,L=5,U=-1;function D(){return!(i.unstable_now()-U<L)}function O(){if(k){var j=i.unstable_now();U=j;var J=!0;try{t:{b=!1,M&&(M=!1,E(z),z=-1),_=!0;var $=y;try{e:{for(N(j),g=e(c);g!==null&&!(g.expirationTime>j&&D());){var at=g.callback;if(typeof at=="function"){g.callback=null,y=g.priorityLevel;var Y=at(g.expirationTime<=j);if(j=i.unstable_now(),typeof Y=="function"){g.callback=Y,N(j),J=!0;break e}g===e(c)&&n(c),N(j)}else n(c);g=e(c)}if(g!==null)J=!0;else{var Z=e(u);Z!==null&&lt(P,Z.startTime-j),J=!1}}break t}finally{g=null,y=$,_=!1}J=void 0}}finally{J?F():k=!1}}}var F;if(typeof R=="function")F=function(){R(O)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=O,F=function(){G.postMessage(null)}}else F=function(){S(O,0)};function it(){k||(k=!0,F())}function lt(j,J){z=S(function(){j(i.unstable_now())},J)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){b||_||(b=!0,it())},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return e(c)},i.unstable_next=function(j){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var $=y;y=J;try{return j()}finally{y=$}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,J){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=y;y=j;try{return J()}finally{y=$}},i.unstable_scheduleCallback=function(j,J,$){var at=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?at+$:at):$=at,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=$+Y,j={id:d++,callback:J,priorityLevel:j,startTime:$,expirationTime:Y,sortIndex:-1},$>at?(j.sortIndex=$,t(u,j),e(c)===null&&j===e(u)&&(M?(E(z),z=-1):M=!0,lt(P,$-at))):(j.sortIndex=Y,t(c,j),b||_||(b=!0,it())),j},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(j){var J=y;return function(){var $=y;y=J;try{return j.apply(this,arguments)}finally{y=$}}}})(aA)),aA}var M3;function vet(){return M3||(M3=1,rA.exports=yet()),rA.exports}var A3=vet();function DR(i,t,e){if(!i)return;if(e(i)===!0)return i;let n=t?i.return:i.child;for(;n;){const s=DR(n,t,e);if(s)return s;n=t?null:n.sibling}}function SB(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const IR=SB(bt.createContext(null));class EB extends bt.Component{render(){return bt.createElement(IR.Provider,{value:this._reactInternals},this.props.children)}}function TB(){const i=bt.useContext(IR);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=bt.useId();return bt.useMemo(()=>{for(const e of[i,i?.alternate]){if(!e)continue;const n=DR(e,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(n)return n}},[i,t])}const _et=Symbol.for("react.context"),xet=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===_et;function bet(){const i=TB(),[t]=bt.useState(()=>new Map);t.clear();let e=i;for(;e;){const n=e.type;xet(n)&&n!==IR&&!t.has(n)&&t.set(n,bt.use(SB(n))),e=e.return}return t}function Eet(){const i=bet();return bt.useMemo(()=>Array.from(i.keys()).reduce((t,e)=>n=>bt.createElement(t,null,bt.createElement(e.Provider,{...n,value:i.get(e)})),t=>bt.createElement(EB,{...t})),[i])}function MB(i){let t=i.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const AB=i=>i&&i.isOrthographicCamera,Tet=i=>i&&i.hasOwnProperty("current"),Met=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),p_=((i,t)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?bt.useLayoutEffect:bt.useEffect;function wB(i){const t=bt.useRef(i);return p_(()=>void(t.current=i),[i]),t}function Aet(){const i=TB(),t=Eet();return bt.useMemo(()=>({children:e})=>{const s=!!DR(i,!0,r=>r.type===bt.StrictMode)?bt.StrictMode:bt.Fragment;return W.jsx(s,{children:W.jsx(t,{children:e})})},[i,t])}function wet({set:i}){return p_(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const Ret=(i=>(i=class extends bt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function RB(i){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}function Jm(i){var t;return(t=i.__r3f)==null?void 0:t.root.getState()}const hs={obj:i=>i===Object(i)&&!hs.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,t,{arrays:e="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(hs.str(i)||hs.num(i)||hs.boo(i))return i===t;const r=hs.obj(i);if(r&&n==="reference")return i===t;const a=hs.arr(i);if(a&&e==="reference")return i===t;if((a||r)&&i===t)return!0;let o;for(o in i)if(!(o in t))return!1;if(r&&e==="shallow"&&n==="shallow"){for(o in s?t:i)if(!hs.equ(i[o],t[o],{strict:s,objects:"reference"}))return!1}else for(o in s?t:i)if(i[o]!==t[o])return!1;if(hs.und(o)){if(a&&i.length===0&&t.length===0||r&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function Cet(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const t in i){const e=i[t];e?.type!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const CB=["children","key","ref"];function Det(i){const t={};for(const e in i)CB.includes(e)||(t[e]=i[e]);return t}function C1(i,t,e,n){const s=i;let r=s?.__r3f;return r||(r={root:t,type:e,parent:null,children:[],props:Det(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function Lv(i,t){let e=i[t];if(!t.includes("-"))return{root:i,key:t,target:e};e=i;for(const s of t.split("-")){var n;t=s,i=e,e=(n=e)==null?void 0:n[t]}return{root:i,key:t,target:e}}const w3=/-\d+$/;function D1(i,t){if(hs.str(t.props.attach)){if(w3.test(t.props.attach)){const s=t.props.attach.replace(w3,""),{root:r,key:a}=Lv(i.object,s);Array.isArray(r[a])||(r[a]=[])}const{root:e,key:n}=Lv(i.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else hs.fun(t.props.attach)&&(t.previousAttach=t.props.attach(i.object,t.object))}function I1(i,t){if(hs.str(t.props.attach)){const{root:e,key:n}=Lv(i.object,t.props.attach),s=t.previousAttach;s===void 0?delete e[n]:e[n]=s}else t.previousAttach==null||t.previousAttach(i.object,t.object);delete t.previousAttach}const Sw=[...CB,"args","dispose","attach","object","onUpdate","dispose"],R3=new Map;function Iet(i){let t=R3.get(i.constructor);try{t||(t=new i.constructor,R3.set(i.constructor,t))}catch{}return t}function Net(i,t){const e={};for(const n in t)if(!Sw.includes(n)&&!hs.equ(t[n],i.props[n])){e[n]=t[n];for(const s in t)s.startsWith(`${n}-`)&&(e[s]=t[s])}for(const n in i.props){if(Sw.includes(n)||t.hasOwnProperty(n))continue;const{root:s,key:r}=Lv(i.object,n);if(s.constructor&&s.constructor.length===0){const a=Iet(s);hs.und(a)||(e[r]=a[r])}else e[r]=0}return e}const Oet=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Pet=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function vf(i,t){var e;const n=i.__r3f,s=n&&MB(n).getState(),r=n?.eventCount;for(const o in t){let c=t[o];if(Sw.includes(o))continue;if(n&&Pet.test(o)){typeof c=="function"?n.handlers[o]=c:delete n.handlers[o],n.eventCount=Object.keys(n.handlers).length;continue}if(c===void 0)continue;let{root:u,key:d,target:g}=Lv(i,o);if(g instanceof Pg&&c instanceof Pg)g.mask=c.mask;else if(g instanceof Pe&&Met(c))g.set(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&c!=null&&c.constructor&&g.constructor===c.constructor)g.copy(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(c))typeof g.fromArray=="function"?g.fromArray(c):g.set(...c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof c=="number")typeof g.setScalar=="function"?g.setScalar(c):g.set(c);else{var a;u[d]=c,s&&!s.linear&&Oet.includes(d)&&(a=u[d])!=null&&a.isTexture&&u[d].format===aa&&u[d].type===yl&&(u[d].colorSpace=sa)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(e=n.object)!=null&&e.isObject3D&&r!==n.eventCount){const o=n.object,c=s.internal.interaction.indexOf(o);c>-1&&s.internal.interaction.splice(c,1),n.eventCount&&o.raycast!==null&&s.internal.interaction.push(o)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&t0(n),i}function t0(i){var t;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const e=(t=i.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function Uet(i,t){i.manual||(AB(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix())}const ho=i=>i?.isObject3D;function Db(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function DB(i,t,e,n){const s=e.get(t);s&&(e.delete(t),e.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function Let(i,t){const{internal:e}=i.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,s)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(s)}),e.capturedMap.forEach((n,s)=>{DB(e.capturedMap,t,n,s)})}function ket(i){function t(c){const{internal:u}=i.getState(),d=c.offsetX-u.initialClick[0],g=c.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+g*g))}function e(c){return c.filter(u=>["Move","Over","Enter","Out","Leave"].some(d=>{var g;return(g=u.__r3f)==null?void 0:g.handlers["onPointer"+d]}))}function n(c,u){const d=i.getState(),g=new Set,y=[],_=u?u(d.internal.interaction):d.internal.interaction;for(let E=0;E<_.length;E++){const R=Jm(_[E]);R&&(R.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(c,d);function b(E){const R=Jm(E);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var N;R.events.compute==null||R.events.compute(c,R,(N=R.previousRoot)==null?void 0:N.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(E,!0):[]}let M=_.flatMap(b).sort((E,R)=>{const N=Jm(E.object),P=Jm(R.object);return!N||!P?E.distance-R.distance:P.events.priority-N.events.priority||E.distance-R.distance}).filter(E=>{const R=Db(E);return g.has(R)?!1:(g.add(R),!0)});d.events.filter&&(M=d.events.filter(M,d));for(const E of M){let R=E.object;for(;R;){var S;(S=R.__r3f)!=null&&S.eventCount&&y.push({...E,eventObject:R}),R=R.parent}}if("pointerId"in c&&d.internal.capturedMap.has(c.pointerId))for(let E of d.internal.capturedMap.get(c.pointerId).values())g.has(Db(E.intersection))||y.push(E.intersection);return y}function s(c,u,d,g){if(c.length){const y={stopped:!1};for(const _ of c){let b=Jm(_.object);if(b||_.object.traverseAncestors(M=>{const S=Jm(M);if(S)return b=S,!1}),b){const{raycaster:M,pointer:S,camera:E,internal:R}=b,N=new ot(S.x,S.y,0).unproject(E),P=D=>{var O,F;return(O=(F=R.capturedMap.get(D))==null?void 0:F.has(_.eventObject))!=null?O:!1},k=D=>{const O={intersection:_,target:u.target};R.capturedMap.has(D)?R.capturedMap.get(D).set(_.eventObject,O):R.capturedMap.set(D,new Map([[_.eventObject,O]])),u.target.setPointerCapture(D)},z=D=>{const O=R.capturedMap.get(D);O&&DB(R.capturedMap,_.eventObject,O,D)};let L={};for(let D in u){let O=u[D];typeof O!="function"&&(L[D]=O)}let U={..._,...L,pointer:S,intersections:c,stopped:y.stopped,delta:d,unprojectedPoint:N,ray:M.ray,camera:E,stopPropagation(){const D="pointerId"in u&&R.capturedMap.get(u.pointerId);if((!D||D.has(_.eventObject))&&(U.stopped=y.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(O=>O.eventObject===_.eventObject))){const O=c.slice(0,c.indexOf(_));r([...O,_])}},target:{hasPointerCapture:P,setPointerCapture:k,releasePointerCapture:z},currentTarget:{hasPointerCapture:P,setPointerCapture:k,releasePointerCapture:z},nativeEvent:u};if(g(U),y.stopped===!0)break}}}return c}function r(c){const{internal:u}=i.getState();for(const d of u.hovered.values())if(!c.length||!c.find(g=>g.object===d.object&&g.index===d.index&&g.instanceId===d.instanceId)){const y=d.eventObject.__r3f;if(u.hovered.delete(Db(d)),y!=null&&y.eventCount){const _=y.handlers,b={...d,intersections:c};_.onPointerOut==null||_.onPointerOut(b),_.onPointerLeave==null||_.onPointerLeave(b)}}}function a(c,u){for(let d=0;d<u.length;d++){const g=u[d].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(c)}}function o(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return u=>{const{internal:d}=i.getState();"pointerId"in u&&d.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),r([]))})}}return function(d){const{onPointerMissed:g,internal:y}=i.getState();y.lastEvent.current=d;const _=c==="onPointerMove",b=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",S=n(d,_?e:void 0),E=b?t(d):0;c==="onPointerDown"&&(y.initialClick=[d.offsetX,d.offsetY],y.initialHits=S.map(N=>N.eventObject)),b&&!S.length&&E<=2&&(a(d,y.interaction),g&&g(d)),_&&r(S);function R(N){const P=N.eventObject,k=P.__r3f;if(!(k!=null&&k.eventCount))return;const z=k.handlers;if(_){if(z.onPointerOver||z.onPointerEnter||z.onPointerOut||z.onPointerLeave){const L=Db(N),U=y.hovered.get(L);U?U.stopped&&N.stopPropagation():(y.hovered.set(L,N),z.onPointerOver==null||z.onPointerOver(N),z.onPointerEnter==null||z.onPointerEnter(N))}z.onPointerMove==null||z.onPointerMove(N)}else{const L=z[c];L?(!b||y.initialHits.includes(P))&&(a(d,y.interaction.filter(U=>!y.initialHits.includes(U))),L(N)):b&&y.initialHits.includes(P)&&a(d,y.interaction.filter(U=>!y.initialHits.includes(U)))}}s(S,d,E,R)}}return{handlePointer:o}}const C3=i=>!!(i!=null&&i.render),IB=bt.createContext(null),Bet=(i,t)=>{const e=ret((o,c)=>{const u=new ot,d=new ot,g=new ot;function y(E=c().camera,R=d,N=c().size){const{width:P,height:k,top:z,left:L}=N,U=P/k;R.isVector3?g.copy(R):g.set(...R);const D=E.getWorldPosition(u).distanceTo(g);if(AB(E))return{width:P/E.zoom,height:k/E.zoom,top:z,left:L,factor:1,distance:D,aspect:U};{const O=E.fov*Math.PI/180,F=2*Math.tan(O/2)*D,H=F*(P/k);return{width:H,height:F,top:z,left:L,factor:P/H,distance:D,aspect:U}}}let _;const b=E=>o(R=>({performance:{...R.performance,current:E}})),M=new ce;return{set:o,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(E=1)=>i(c(),E),advance:(E,R)=>t(E,R,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new TR,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const E=c();_&&clearTimeout(_),E.performance.current!==E.performance.min&&b(E.performance.min),_=setTimeout(()=>b(c().performance.max),E.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:E=>o(R=>({...R,events:{...R.events,...E}})),setSize:(E,R,N=0,P=0)=>{const k=c().camera,z={width:E,height:R,top:N,left:P};o(L=>({size:z,viewport:{...L.viewport,...y(k,d,z)}}))},setDpr:E=>o(R=>{const N=RB(E);return{viewport:{...R.viewport,dpr:N,initialDpr:R.viewport.initialDpr||N}}}),setFrameloop:(E="always")=>{const R=c().clock;R.stop(),R.elapsedTime=0,E!=="never"&&(R.start(),R.elapsedTime=0),o(()=>({frameloop:E}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:bt.createRef(),active:!1,frames:0,priority:0,subscribe:(E,R,N)=>{const P=c().internal;return P.priority=P.priority+(R>0?1:0),P.subscribers.push({ref:E,priority:R,store:N}),P.subscribers=P.subscribers.sort((k,z)=>k.priority-z.priority),()=>{const k=c().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(R>0?1:0),k.subscribers=k.subscribers.filter(z=>z.ref!==E))}}}}}),n=e.getState();let s=n.size,r=n.viewport.dpr,a=n.camera;return e.subscribe(()=>{const{camera:o,size:c,viewport:u,gl:d,set:g}=e.getState();if(c.width!==s.width||c.height!==s.height||u.dpr!==r){s=c,r=u.dpr,Uet(o,c),u.dpr>0&&d.setPixelRatio(u.dpr);const y=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(c.width,c.height,y)}o!==a&&(a=o,g(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(o)}})))}),e.subscribe(o=>i(o)),e};function NB(){const i=bt.useContext(IB);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function ju(i=e=>e,t){return NB()(i,t)}function zet(i,t=0){const e=NB(),n=e.getState().internal.subscribe,s=wB(i);return p_(()=>n(s,t,e),[t,n,e]),null}function Fet(i){const t=get(i);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:bt.version}),t}const OB=0,kg={},Vet=/^three(?=[A-Z])/,qE=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let Het=0;const Get=i=>typeof i=="function";function jet(i){if(Get(i)){const t=`${Het++}`;return kg[t]=i,t}else Object.assign(kg,i)}function PB(i,t){const e=qE(i),n=kg[e];if(i!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function Wet(i,t,e){var n;return i=qE(i)in kg?i:i.replace(Vet,""),PB(i,t),i==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,C1(t.object,e,i,t)}function qet(i){if(!i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?I1(i.parent,i):ho(i.object)&&(i.object.visible=!1),i.isHidden=!0,t0(i)}}function UB(i){if(i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?D1(i.parent,i):ho(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,t0(i)}}function NR(i,t,e){const n=t.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!t.object){var s,r;const a=kg[qE(t.type)];t.object=(s=t.props.object)!=null?s:new a(...(r=t.props.args)!=null?r:[]),t.object.__r3f=t}if(vf(t.object,t.props),t.props.attach)D1(i,t);else if(ho(t.object)&&ho(i.object)){const a=i.object.children.indexOf(e?.object);if(e&&a!==-1){const o=i.object.children.indexOf(t.object);if(o!==-1){i.object.children.splice(o,1);const c=o<a?a-1:a;i.object.children.splice(c,0,t.object)}else t.object.parent=i.object,i.object.children.splice(a,0,t.object),t.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:t.object})}else i.object.add(t.object)}for(const a of t.children)NR(t,a);t0(t)}}function oA(i,t){t&&(t.parent=i,i.children.push(t),NR(i,t))}function D3(i,t,e){if(!t||!e)return;t.parent=i;const n=i.children.indexOf(e);n!==-1?i.children.splice(n,0,t):i.children.push(t),NR(i,t,e)}function LB(i){if(typeof i.dispose=="function"){const t=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():A3.unstable_scheduleCallback(A3.unstable_IdlePriority,t)}}function Ew(i,t,e){if(!t)return;t.parent=null;const n=i.children.indexOf(t);n!==-1&&i.children.splice(n,1),t.props.attach?I1(i,t):ho(t.object)&&ho(i.object)&&(i.object.remove(t.object),Let(MB(t),t.object));const s=t.props.dispose!==null&&e!==!1;for(let r=t.children.length-1;r>=0;r--){const a=t.children[r];Ew(t,a,s)}t.children.length=0,delete t.object.__r3f,s&&t.type!=="primitive"&&t.object.type!=="Scene"&&LB(t.object),e===void 0&&t0(t)}function Xet(i,t){for(const e of[i,i.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const hS=[];function Yet(){for(const[e]of hS){const n=e.parent;if(n){e.props.attach?I1(n,e):ho(e.object)&&ho(n.object)&&n.object.remove(e.object);for(const s of e.children)s.props.attach?I1(e,s):ho(s.object)&&ho(e.object)&&e.object.remove(s.object)}e.isHidden&&UB(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&LB(e.object)}for(const[e,n,s]of hS){e.props=n;const r=e.parent;if(r){var i,t;const a=kg[qE(e.type)];e.object=(i=e.props.object)!=null?i:new a(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,Xet(s,e.object),vf(e.object,e.props),e.props.attach?D1(r,e):ho(e.object)&&ho(r.object)&&r.object.add(e.object);for(const o of e.children)o.props.attach?D1(e,o):ho(o.object)&&ho(e.object)&&e.object.add(o.object);t0(e)}}hS.length=0}const lA=()=>{},I3={};let Ib=OB;const Ket=0,Zet=4,Tw=Fet({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Wet,removeChild:Ew,appendChild:oA,appendInitialChild:oA,insertBefore:D3,appendChildToContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||oA(e,t)},removeChildFromContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||Ew(e,t)},insertInContainerBefore(i,t,e){const n=i.getState().scene.__r3f;!t||!e||!n||D3(n,t,e)},getRootHostContext:()=>I3,getChildHostContext:()=>I3,commitUpdate(i,t,e,n,s){var r,a,o;PB(t,n);let c=!1;if((i.type==="primitive"&&e.object!==n.object||((r=n.args)==null?void 0:r.length)!==((a=e.args)==null?void 0:a.length)||(o=n.args)!=null&&o.some((d,g)=>{var y;return d!==((y=e.args)==null?void 0:y[g])}))&&(c=!0),c)hS.push([i,{...n},s]);else{const d=Net(i,n);Object.keys(d).length&&(Object.assign(i.props,d),vf(i.object,d))}(s.sibling===null||(s.flags&Zet)===Ket)&&Yet()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>C1(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:qet,unhideInstance:UB,createTextInstance:lA,hideTextInstance:lA,unhideTextInstance:lA,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:bt.createContext(null),setCurrentUpdatePriority(i){Ib=i},getCurrentUpdatePriority(){return Ib},resolveUpdatePriority(){var i;if(Ib!==OB)return Ib;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return oS.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return oS.ContinuousEventPriority;default:return oS.DefaultEventPriority}},resetFormInstance(){}}),bp=new Map,$m={objects:"shallow",strict:!1};function Qet(i,t){if(!t&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:e,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:e,height:n,top:s,left:r}}else if(!t&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function Jet(i){const t=bp.get(i),e=t?.fiber,n=t?.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||Bet(ww,O3),a=e||Tw.createContainer(r,oS.ConcurrentRoot,null,!1,null,"",s,s,s,null);t||bp.set(i,{fiber:a,store:r});let o,c,u=!1,d=null;return{async configure(g={}){let y;d=new Promise(Z=>y=Z);let{gl:_,size:b,scene:M,events:S,onCreated:E,shadows:R=!1,linear:N=!1,flat:P=!1,legacy:k=!1,orthographic:z=!1,frameloop:L="always",dpr:U=[1,2],performance:D,raycaster:O,camera:F,onPointerMissed:H}=g,G=r.getState(),it=G.gl;if(!G.gl){const Z={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},rt=typeof _=="function"?await _(Z):_;C3(rt)?it=rt:it=new bB({...Z,..._}),G.set({gl:it})}let lt=G.raycaster;lt||G.set({raycaster:lt=new dB});const{params:j,...J}=O||{};if(hs.equ(J,lt,$m)||vf(lt,{...J}),hs.equ(j,lt.params,$m)||vf(lt,{params:{...lt.params,...j}}),!G.camera||G.camera===c&&!hs.equ(c,F,$m)){c=F;const Z=F?.isCamera,rt=Z?F:z?new Rf(0,0,0,0,.1,1e3):new Is(75,0,.1,1e3);Z||(rt.position.z=5,F&&(vf(rt,F),rt.manual||("aspect"in F||"left"in F||"right"in F||"bottom"in F||"top"in F)&&(rt.manual=!0,rt.updateProjectionMatrix())),!G.camera&&!(F!=null&&F.rotation)&&rt.lookAt(0,0,0)),G.set({camera:rt}),lt.camera=rt}if(!G.scene){let Z;M!=null&&M.isScene?(Z=M,C1(Z,r,"",{})):(Z=new sR,C1(Z,r,"",{}),M&&vf(Z,M)),G.set({scene:Z})}S&&!G.events.handlers&&G.set({events:S(r)});const $=Qet(i,b);if(hs.equ($,G.size,$m)||G.setSize($.width,$.height,$.top,$.left),U&&G.viewport.dpr!==RB(U)&&G.setDpr(U),G.frameloop!==L&&G.setFrameloop(L),G.onPointerMissed||G.set({onPointerMissed:H}),D&&!hs.equ(D,G.performance,$m)&&G.set(Z=>({performance:{...Z.performance,...D}})),!G.xr){var at;const Z=(dt,_t)=>{const ut=r.getState();ut.frameloop!=="never"&&O3(dt,!0,ut,_t)},rt=()=>{const dt=r.getState();dt.gl.xr.enabled=dt.gl.xr.isPresenting,dt.gl.xr.setAnimationLoop(dt.gl.xr.isPresenting?Z:null),dt.gl.xr.isPresenting||ww(dt)},ft={connect(){const dt=r.getState().gl;dt.xr.addEventListener("sessionstart",rt),dt.xr.addEventListener("sessionend",rt)},disconnect(){const dt=r.getState().gl;dt.xr.removeEventListener("sessionstart",rt),dt.xr.removeEventListener("sessionend",rt)}};typeof((at=it.xr)==null?void 0:at.addEventListener)=="function"&&ft.connect(),G.set({xr:ft})}if(it.shadowMap){const Z=it.shadowMap.enabled,rt=it.shadowMap.type;if(it.shadowMap.enabled=!!R,hs.boo(R))it.shadowMap.type=qy;else if(hs.str(R)){var Y;const ft={basic:A4,percentage:hE,soft:qy,variance:Xl};it.shadowMap.type=(Y=ft[R])!=null?Y:qy}else hs.obj(R)&&Object.assign(it.shadowMap,R);(Z!==it.shadowMap.enabled||rt!==it.shadowMap.type)&&(it.shadowMap.needsUpdate=!0)}return Xn.enabled=!k,u||(it.outputColorSpace=N?Bf:sa,it.toneMapping=P?nu:V2),G.legacy!==k&&G.set(()=>({legacy:k})),G.linear!==N&&G.set(()=>({linear:N})),G.flat!==P&&G.set(()=>({flat:P})),_&&!hs.fun(_)&&!C3(_)&&!hs.equ(_,it,$m)&&vf(it,_),o=E,u=!0,y(),this},render(g){return!u&&!d&&this.configure(),d.then(()=>{Tw.updateContainer(W.jsx($et,{store:r,children:g,onCreated:o,rootElement:i}),a,null,()=>{})}),r},unmount(){kB(i)}}}function $et({store:i,children:t,onCreated:e,rootElement:n}){return p_(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),e&&e(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),W.jsx(IB.Provider,{value:i,children:t})}function kB(i,t){const e=bp.get(i),n=e?.fiber;if(n){const s=e?.store.getState();s&&(s.internal.active=!1),Tw.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,a,o,c;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(o=s.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(c=s.gl)!=null&&c.xr&&s.xr.disconnect(),Cet(s.scene),bp.delete(i)}catch{}},500)})}}const tnt=new Set,ent=new Set,nnt=new Set;function cA(i,t){if(i.size)for(const{callback:e}of i.values())e(t)}function ev(i,t){switch(i){case"before":return cA(tnt,t);case"after":return cA(ent,t);case"tail":return cA(nnt,t)}}let uA,hA;function Mw(i,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof i=="number"&&(n=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),uA=t.internal.subscribers;for(let s=0;s<uA.length;s++)hA=uA[s],hA.ref.current(hA.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let N1=!1,Aw=!1,fA,N3,tg;function BB(i){N3=requestAnimationFrame(BB),N1=!0,fA=0,ev("before",i),Aw=!0;for(const e of bp.values()){var t;tg=e.store.getState(),tg.internal.active&&(tg.frameloop==="always"||tg.internal.frames>0)&&!((t=tg.gl.xr)!=null&&t.isPresenting)&&(fA+=Mw(i,tg))}if(Aw=!1,ev("after",i),fA===0)return ev("tail",i),N1=!1,cancelAnimationFrame(N3)}function ww(i,t=1){var e;if(!i)return bp.forEach(n=>ww(n.store.getState(),t));(e=i.gl.xr)!=null&&e.isPresenting||!i.internal.active||i.frameloop==="never"||(t>1?i.internal.frames=Math.min(60,i.internal.frames+t):Aw?i.internal.frames=2:i.internal.frames=1,N1||(N1=!0,requestAnimationFrame(BB)))}function O3(i,t=!0,e,n){if(t&&ev("before",i),e)Mw(i,e,n);else for(const s of bp.values())Mw(i,s.store.getState());t&&ev("after",i)}const dA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function int(i){const{handlePointer:t}=ket(i);return{priority:1,enabled:!0,compute(e,n,s){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(dA).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:s}=i.getState();(e=s.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:e=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:e}})),s.handlers)for(const r in s.handlers){const a=s.handlers[r],[o,c]=dA[r];e.addEventListener(o,a,{passive:c})}},disconnect:()=>{const{set:e,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[a]=dA[s];n.connected.removeEventListener(a,r)}e(s=>({events:{...s.events,connected:void 0}}))}}}}function P3(i,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>i(...n),t)}}function snt({debounce:i,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=bt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=bt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),c=i?typeof i=="number"?i:i.scroll:null,u=i?typeof i=="number"?i:i.resize:null,d=bt.useRef(!1);bt.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[g,y,_]=bt.useMemo(()=>{const E=()=>{if(!o.current.element)return;const{left:R,top:N,width:P,height:k,bottom:z,right:L,x:U,y:D}=o.current.element.getBoundingClientRect(),O={left:R,top:N,width:P,height:k,bottom:z,right:L,x:U,y:D};o.current.element instanceof HTMLElement&&n&&(O.height=o.current.element.offsetHeight,O.width=o.current.element.offsetWidth),Object.freeze(O),d.current&&!lnt(o.current.lastBounds,O)&&a(o.current.lastBounds=O)};return[E,u?P3(E,u):E,c?P3(E,c):E]},[a,n,c,u]);function b(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",_,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function M(){o.current.element&&(o.current.resizeObserver=new s(_),o.current.resizeObserver.observe(o.current.element),t&&o.current.scrollContainers&&o.current.scrollContainers.forEach(E=>E.addEventListener("scroll",_,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const S=E=>{!E||E===o.current.element||(b(),o.current.element=E,o.current.scrollContainers=zB(E),M())};return ant(_,!!t),rnt(y),bt.useEffect(()=>{b(),M()},[t,_,y]),bt.useEffect(()=>b,[]),[S,r,g]}function rnt(i){bt.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[i])}function ant(i,t){bt.useEffect(()=>{if(t){const e=i;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[i,t])}function zB(i){const t=[];if(!i||i===document.body)return t;const{overflow:e,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[e,n,s].some(r=>r==="auto"||r==="scroll")&&t.push(i),[...t,...zB(i.parentElement)]}const ont=["x","y","top","bottom","left","right","width","height"],lnt=(i,t)=>ont.every(e=>i[e]===t[e]);function cnt({ref:i,children:t,fallback:e,resize:n,style:s,gl:r,events:a=int,eventSource:o,eventPrefix:c,shadows:u,linear:d,flat:g,legacy:y,orthographic:_,frameloop:b,dpr:M,performance:S,raycaster:E,camera:R,scene:N,onPointerMissed:P,onCreated:k,...z}){bt.useMemo(()=>jet(Ytt),[]);const L=Aet(),[U,D]=snt({scroll:!0,debounce:{scroll:50,resize:0},...n}),O=bt.useRef(null),F=bt.useRef(null);bt.useImperativeHandle(i,()=>O.current);const H=wB(P),[G,it]=bt.useState(!1),[lt,j]=bt.useState(!1);if(G)throw G;if(lt)throw lt;const J=bt.useRef(null);p_(()=>{const at=O.current;if(D.width>0&&D.height>0&&at){J.current||(J.current=Jet(at));async function Y(){await J.current.configure({gl:r,scene:N,events:a,shadows:u,linear:d,flat:g,legacy:y,orthographic:_,frameloop:b,dpr:M,performance:S,raycaster:E,camera:R,size:D,onPointerMissed:(...Z)=>H.current==null?void 0:H.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(o?Tet(o)?o.current:o:F.current),c&&Z.setEvents({compute:(rt,ft)=>{const dt=rt[c+"X"],_t=rt[c+"Y"];ft.pointer.set(dt/ft.size.width*2-1,-(_t/ft.size.height)*2+1),ft.raycaster.setFromCamera(ft.pointer,ft.camera)}}),k?.(Z)}}),J.current.render(W.jsx(L,{children:W.jsx(Ret,{set:j,children:W.jsx(bt.Suspense,{fallback:W.jsx(wet,{set:it}),children:t??null})})}))}Y()}}),bt.useEffect(()=>{const at=O.current;if(at)return()=>kB(at)},[]);const $=o?"none":"auto";return W.jsx("div",{ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:$,...s},...z,children:W.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:W.jsx("canvas",{ref:O,style:{display:"block"},children:e})})})}function unt(i){return W.jsx(EB,{children:W.jsx(cnt,{...i})})}function kv(){return kv=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},kv.apply(null,arguments)}var hnt=Object.defineProperty,fnt=(i,t,e)=>t in i?hnt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,dnt=(i,t,e)=>(fnt(i,t+"",e),e);class pnt{constructor(){dnt(this,"_listeners")}addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const s=this._listeners[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,t);t.target=null}}}var mnt=Object.defineProperty,gnt=(i,t,e)=>t in i?mnt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Qe=(i,t,e)=>(gnt(i,typeof t!="symbol"?t+"":t,e),e);const Nb=new Np,U3=new Xu,ynt=Math.cos(70*(Math.PI/180)),L3=(i,t)=>(i%t+t)%t;let vnt=class extends pnt{constructor(t,e){super(),Qe(this,"object"),Qe(this,"domElement"),Qe(this,"enabled",!0),Qe(this,"target",new ot),Qe(this,"minDistance",0),Qe(this,"maxDistance",1/0),Qe(this,"minZoom",0),Qe(this,"maxZoom",1/0),Qe(this,"minPolarAngle",0),Qe(this,"maxPolarAngle",Math.PI),Qe(this,"minAzimuthAngle",-1/0),Qe(this,"maxAzimuthAngle",1/0),Qe(this,"enableDamping",!1),Qe(this,"dampingFactor",.05),Qe(this,"enableZoom",!0),Qe(this,"zoomSpeed",1),Qe(this,"enableRotate",!0),Qe(this,"rotateSpeed",1),Qe(this,"enablePan",!0),Qe(this,"panSpeed",1),Qe(this,"screenSpacePanning",!0),Qe(this,"keyPanSpeed",7),Qe(this,"zoomToCursor",!1),Qe(this,"autoRotate",!1),Qe(this,"autoRotateSpeed",2),Qe(this,"reverseOrbit",!1),Qe(this,"reverseHorizontalOrbit",!1),Qe(this,"reverseVerticalOrbit",!1),Qe(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Qe(this,"mouseButtons",{LEFT:qd.ROTATE,MIDDLE:qd.DOLLY,RIGHT:qd.PAN}),Qe(this,"touches",{ONE:Xd.ROTATE,TWO:Xd.DOLLY_PAN}),Qe(this,"target0"),Qe(this,"position0"),Qe(this,"zoom0"),Qe(this,"_domElementKeyEvents",null),Qe(this,"getPolarAngle"),Qe(this,"getAzimuthalAngle"),Qe(this,"setPolarAngle"),Qe(this,"setAzimuthalAngle"),Qe(this,"getDistance"),Qe(this,"getZoomScale"),Qe(this,"listenToKeyEvents"),Qe(this,"stopListenToKeyEvents"),Qe(this,"saveState"),Qe(this,"reset"),Qe(this,"update"),Qe(this,"connect"),Qe(this,"dispose"),Qe(this,"dollyIn"),Qe(this,"dollyOut"),Qe(this,"getScale"),Qe(this,"setScale"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=ht=>{let wt=L3(ht,2*Math.PI),de=d.phi;de<0&&(de+=2*Math.PI),wt<0&&(wt+=2*Math.PI);let pt=Math.abs(wt-de);2*Math.PI-pt<pt&&(wt<de?wt+=2*Math.PI:de+=2*Math.PI),g.phi=wt-de,n.update()},this.setAzimuthalAngle=ht=>{let wt=L3(ht,2*Math.PI),de=d.theta;de<0&&(de+=2*Math.PI),wt<0&&(wt+=2*Math.PI);let pt=Math.abs(wt-de);2*Math.PI-pt<pt&&(wt<de?wt+=2*Math.PI:de+=2*Math.PI),g.theta=wt-de,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ht=>{ht.addEventListener("keydown",At),this._domElementKeyEvents=ht},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",At),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(s),n.update(),c=o.NONE},this.update=(()=>{const ht=new ot,wt=new ot(0,1,0),de=new ca().setFromUnitVectors(t.up,wt),pt=de.clone().invert(),Ft=new ot,ie=new ca,ye=2*Math.PI;return function(){const jt=n.object.position;de.setFromUnitVectors(t.up,wt),pt.copy(de).invert(),ht.copy(jt).sub(n.target),ht.applyQuaternion(de),d.setFromVector3(ht),n.autoRotate&&c===o.NONE&&it(H()),n.enableDamping?(d.theta+=g.theta*n.dampingFactor,d.phi+=g.phi*n.dampingFactor):(d.theta+=g.theta,d.phi+=g.phi);let xe=n.minAzimuthAngle,we=n.maxAzimuthAngle;isFinite(xe)&&isFinite(we)&&(xe<-Math.PI?xe+=ye:xe>Math.PI&&(xe-=ye),we<-Math.PI?we+=ye:we>Math.PI&&(we-=ye),xe<=we?d.theta=Math.max(xe,Math.min(we,d.theta)):d.theta=d.theta>(xe+we)/2?Math.max(xe,d.theta):Math.min(we,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(_,n.dampingFactor):n.target.add(_),n.zoomToCursor&&D||n.object.isOrthographicCamera?d.radius=ft(d.radius):d.radius=ft(d.radius*y),ht.setFromSpherical(d),ht.applyQuaternion(pt),jt.copy(n.target).add(ht),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(g.theta*=1-n.dampingFactor,g.phi*=1-n.dampingFactor,_.multiplyScalar(1-n.dampingFactor)):(g.set(0,0,0),_.set(0,0,0));let Ce=!1;if(n.zoomToCursor&&D){let Ie=null;if(n.object instanceof Is&&n.object.isPerspectiveCamera){const Ln=ht.length();Ie=ft(Ln*y);const dn=Ln-Ie;n.object.position.addScaledVector(L,dn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Ln=new ot(U.x,U.y,0);Ln.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix(),Ce=!0;const dn=new ot(U.x,U.y,0);dn.unproject(n.object),n.object.position.sub(dn).add(Ln),n.object.updateMatrixWorld(),Ie=ht.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Ie!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Ie).add(n.object.position):(Nb.origin.copy(n.object.position),Nb.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Nb.direction))<ynt?t.lookAt(n.target):(U3.setFromNormalAndCoplanarPoint(n.object.up,n.target),Nb.intersectPlane(U3,n.target))))}else n.object instanceof Rf&&n.object.isOrthographicCamera&&(Ce=y!==1,Ce&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix()));return y=1,D=!1,Ce||Ft.distanceToSquared(n.object.position)>u||8*(1-ie.dot(n.object.quaternion))>u?(n.dispatchEvent(s),Ft.copy(n.object.position),ie.copy(n.object.quaternion),Ce=!1,!0):!1}})(),this.connect=ht=>{n.domElement=ht,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",ve),n.domElement.addEventListener("pointerdown",ge),n.domElement.addEventListener("pointercancel",K),n.domElement.addEventListener("wheel",Rt)},this.dispose=()=>{var ht,wt,de,pt,Ft,ie;n.domElement&&(n.domElement.style.touchAction="auto"),(ht=n.domElement)==null||ht.removeEventListener("contextmenu",ve),(wt=n.domElement)==null||wt.removeEventListener("pointerdown",ge),(de=n.domElement)==null||de.removeEventListener("pointercancel",K),(pt=n.domElement)==null||pt.removeEventListener("wheel",Rt),(Ft=n.domElement)==null||Ft.ownerDocument.removeEventListener("pointermove",Q),(ie=n.domElement)==null||ie.ownerDocument.removeEventListener("pointerup",K),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",At)};const n=this,s={type:"change"},r={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=o.NONE;const u=1e-6,d=new vw,g=new vw;let y=1;const _=new ot,b=new ce,M=new ce,S=new ce,E=new ce,R=new ce,N=new ce,P=new ce,k=new ce,z=new ce,L=new ot,U=new ce;let D=!1;const O=[],F={};function H(){return 2*Math.PI/60/60*n.autoRotateSpeed}function G(){return Math.pow(.95,n.zoomSpeed)}function it(ht){n.reverseOrbit||n.reverseHorizontalOrbit?g.theta+=ht:g.theta-=ht}function lt(ht){n.reverseOrbit||n.reverseVerticalOrbit?g.phi+=ht:g.phi-=ht}const j=(()=>{const ht=new ot;return function(de,pt){ht.setFromMatrixColumn(pt,0),ht.multiplyScalar(-de),_.add(ht)}})(),J=(()=>{const ht=new ot;return function(de,pt){n.screenSpacePanning===!0?ht.setFromMatrixColumn(pt,1):(ht.setFromMatrixColumn(pt,0),ht.crossVectors(n.object.up,ht)),ht.multiplyScalar(de),_.add(ht)}})(),$=(()=>{const ht=new ot;return function(de,pt){const Ft=n.domElement;if(Ft&&n.object instanceof Is&&n.object.isPerspectiveCamera){const ie=n.object.position;ht.copy(ie).sub(n.target);let ye=ht.length();ye*=Math.tan(n.object.fov/2*Math.PI/180),j(2*de*ye/Ft.clientHeight,n.object.matrix),J(2*pt*ye/Ft.clientHeight,n.object.matrix)}else Ft&&n.object instanceof Rf&&n.object.isOrthographicCamera?(j(de*(n.object.right-n.object.left)/n.object.zoom/Ft.clientWidth,n.object.matrix),J(pt*(n.object.top-n.object.bottom)/n.object.zoom/Ft.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function at(ht){n.object instanceof Is&&n.object.isPerspectiveCamera||n.object instanceof Rf&&n.object.isOrthographicCamera?y=ht:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Y(ht){at(y/ht)}function Z(ht){at(y*ht)}function rt(ht){if(!n.zoomToCursor||!n.domElement)return;D=!0;const wt=n.domElement.getBoundingClientRect(),de=ht.clientX-wt.left,pt=ht.clientY-wt.top,Ft=wt.width,ie=wt.height;U.x=de/Ft*2-1,U.y=-(pt/ie)*2+1,L.set(U.x,U.y,1).unproject(n.object).sub(n.object.position).normalize()}function ft(ht){return Math.max(n.minDistance,Math.min(n.maxDistance,ht))}function dt(ht){b.set(ht.clientX,ht.clientY)}function _t(ht){rt(ht),P.set(ht.clientX,ht.clientY)}function ut(ht){E.set(ht.clientX,ht.clientY)}function gt(ht){M.set(ht.clientX,ht.clientY),S.subVectors(M,b).multiplyScalar(n.rotateSpeed);const wt=n.domElement;wt&&(it(2*Math.PI*S.x/wt.clientHeight),lt(2*Math.PI*S.y/wt.clientHeight)),b.copy(M),n.update()}function Tt(ht){k.set(ht.clientX,ht.clientY),z.subVectors(k,P),z.y>0?Y(G()):z.y<0&&Z(G()),P.copy(k),n.update()}function $t(ht){R.set(ht.clientX,ht.clientY),N.subVectors(R,E).multiplyScalar(n.panSpeed),$(N.x,N.y),E.copy(R),n.update()}function ae(ht){rt(ht),ht.deltaY<0?Z(G()):ht.deltaY>0&&Y(G()),n.update()}function ne(ht){let wt=!1;switch(ht.code){case n.keys.UP:$(0,n.keyPanSpeed),wt=!0;break;case n.keys.BOTTOM:$(0,-n.keyPanSpeed),wt=!0;break;case n.keys.LEFT:$(n.keyPanSpeed,0),wt=!0;break;case n.keys.RIGHT:$(-n.keyPanSpeed,0),wt=!0;break}wt&&(ht.preventDefault(),n.update())}function ee(){if(O.length==1)b.set(O[0].pageX,O[0].pageY);else{const ht=.5*(O[0].pageX+O[1].pageX),wt=.5*(O[0].pageY+O[1].pageY);b.set(ht,wt)}}function ct(){if(O.length==1)E.set(O[0].pageX,O[0].pageY);else{const ht=.5*(O[0].pageX+O[1].pageX),wt=.5*(O[0].pageY+O[1].pageY);E.set(ht,wt)}}function Gt(){const ht=O[0].pageX-O[1].pageX,wt=O[0].pageY-O[1].pageY,de=Math.sqrt(ht*ht+wt*wt);P.set(0,de)}function zt(){n.enableZoom&&Gt(),n.enablePan&&ct()}function Pt(){n.enableZoom&&Gt(),n.enableRotate&&ee()}function Ct(ht){if(O.length==1)M.set(ht.pageX,ht.pageY);else{const de=re(ht),pt=.5*(ht.pageX+de.x),Ft=.5*(ht.pageY+de.y);M.set(pt,Ft)}S.subVectors(M,b).multiplyScalar(n.rotateSpeed);const wt=n.domElement;wt&&(it(2*Math.PI*S.x/wt.clientHeight),lt(2*Math.PI*S.y/wt.clientHeight)),b.copy(M)}function Bt(ht){if(O.length==1)R.set(ht.pageX,ht.pageY);else{const wt=re(ht),de=.5*(ht.pageX+wt.x),pt=.5*(ht.pageY+wt.y);R.set(de,pt)}N.subVectors(R,E).multiplyScalar(n.panSpeed),$(N.x,N.y),E.copy(R)}function Dt(ht){const wt=re(ht),de=ht.pageX-wt.x,pt=ht.pageY-wt.y,Ft=Math.sqrt(de*de+pt*pt);k.set(0,Ft),z.set(0,Math.pow(k.y/P.y,n.zoomSpeed)),Y(z.y),P.copy(k)}function Ut(ht){n.enableZoom&&Dt(ht),n.enablePan&&Bt(ht)}function Nt(ht){n.enableZoom&&Dt(ht),n.enableRotate&&Ct(ht)}function ge(ht){var wt,de;n.enabled!==!1&&(O.length===0&&((wt=n.domElement)==null||wt.ownerDocument.addEventListener("pointermove",Q),(de=n.domElement)==null||de.ownerDocument.addEventListener("pointerup",K)),be(ht),ht.pointerType==="touch"?oe(ht):mt(ht))}function Q(ht){n.enabled!==!1&&(ht.pointerType==="touch"?le(ht):Lt(ht))}function K(ht){var wt,de,pt;Xt(ht),O.length===0&&((wt=n.domElement)==null||wt.releasePointerCapture(ht.pointerId),(de=n.domElement)==null||de.ownerDocument.removeEventListener("pointermove",Q),(pt=n.domElement)==null||pt.ownerDocument.removeEventListener("pointerup",K)),n.dispatchEvent(a),c=o.NONE}function mt(ht){let wt;switch(ht.button){case 0:wt=n.mouseButtons.LEFT;break;case 1:wt=n.mouseButtons.MIDDLE;break;case 2:wt=n.mouseButtons.RIGHT;break;default:wt=-1}switch(wt){case qd.DOLLY:if(n.enableZoom===!1)return;_t(ht),c=o.DOLLY;break;case qd.ROTATE:if(ht.ctrlKey||ht.metaKey||ht.shiftKey){if(n.enablePan===!1)return;ut(ht),c=o.PAN}else{if(n.enableRotate===!1)return;dt(ht),c=o.ROTATE}break;case qd.PAN:if(ht.ctrlKey||ht.metaKey||ht.shiftKey){if(n.enableRotate===!1)return;dt(ht),c=o.ROTATE}else{if(n.enablePan===!1)return;ut(ht),c=o.PAN}break;default:c=o.NONE}c!==o.NONE&&n.dispatchEvent(r)}function Lt(ht){if(n.enabled!==!1)switch(c){case o.ROTATE:if(n.enableRotate===!1)return;gt(ht);break;case o.DOLLY:if(n.enableZoom===!1)return;Tt(ht);break;case o.PAN:if(n.enablePan===!1)return;$t(ht);break}}function Rt(ht){n.enabled===!1||n.enableZoom===!1||c!==o.NONE&&c!==o.ROTATE||(ht.preventDefault(),n.dispatchEvent(r),ae(ht),n.dispatchEvent(a))}function At(ht){n.enabled===!1||n.enablePan===!1||ne(ht)}function oe(ht){switch(te(ht),O.length){case 1:switch(n.touches.ONE){case Xd.ROTATE:if(n.enableRotate===!1)return;ee(),c=o.TOUCH_ROTATE;break;case Xd.PAN:if(n.enablePan===!1)return;ct(),c=o.TOUCH_PAN;break;default:c=o.NONE}break;case 2:switch(n.touches.TWO){case Xd.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;zt(),c=o.TOUCH_DOLLY_PAN;break;case Xd.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Pt(),c=o.TOUCH_DOLLY_ROTATE;break;default:c=o.NONE}break;default:c=o.NONE}c!==o.NONE&&n.dispatchEvent(r)}function le(ht){switch(te(ht),c){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;Ct(ht),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;Bt(ht),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ut(ht),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Nt(ht),n.update();break;default:c=o.NONE}}function ve(ht){n.enabled!==!1&&ht.preventDefault()}function be(ht){O.push(ht)}function Xt(ht){delete F[ht.pointerId];for(let wt=0;wt<O.length;wt++)if(O[wt].pointerId==ht.pointerId){O.splice(wt,1);return}}function te(ht){let wt=F[ht.pointerId];wt===void 0&&(wt=new ce,F[ht.pointerId]=wt),wt.set(ht.pageX,ht.pageY)}function re(ht){const wt=ht.pointerId===O[0].pointerId?O[1]:O[0];return F[wt.pointerId]}this.dollyIn=(ht=G())=>{Z(ht),n.update()},this.dollyOut=(ht=G())=>{Y(ht),n.update()},this.getScale=()=>y,this.setScale=ht=>{at(ht),n.update()},this.getZoomScale=()=>G(),e!==void 0&&this.connect(e),this.update()}};function _nt(){var i=Object.create(null);function t(s,r){var a=s.id,o=s.name,c=s.dependencies;c===void 0&&(c=[]);var u=s.init;u===void 0&&(u=function(){});var d=s.getTransferables;if(d===void 0&&(d=null),!i[a])try{c=c.map(function(y){return y&&y.isWorkerModule&&(t(y,function(_){if(_ instanceof Error)throw _}),y=i[y.id].value),y}),u=n("<"+o+">.init",u),d&&(d=n("<"+o+">.getTransferables",d));var g=null;typeof u=="function"?g=u.apply(void 0,c):console.error("worker module init function failed to rehydrate"),i[a]={id:a,value:g,getTransferables:d},r(g)}catch(y){y&&y.noLog||console.error(y),r(y)}}function e(s,r){var a,o=s.id,c=s.args;(!i[o]||typeof i[o].value!="function")&&r(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var u=(a=i[o]).value.apply(a,c);u&&typeof u.then=="function"?u.then(d,function(g){return r(g instanceof Error?g:new Error(""+g))}):d(u)}catch(g){r(g)}function d(g){try{var y=i[o].getTransferables&&i[o].getTransferables(g);(!y||!Array.isArray(y)||!y.length)&&(y=void 0),r(g,y)}catch(_){console.error(_),r(_)}}}function n(s,r){var a=void 0;self.troikaDefine=function(c){return a=c};var o=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+r+`
)`],{type:"application/javascript"}));try{importScripts(o)}catch(c){console.error(c)}return URL.revokeObjectURL(o),delete self.troikaDefine,a}self.addEventListener("message",function(s){var r=s.data,a=r.messageId,o=r.action,c=r.data;try{o==="registerModule"&&t(c,function(u){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof u=="function"}})}),o==="callModule"&&e(c,function(u,d){u instanceof Error?postMessage({messageId:a,success:!1,error:u.message}):postMessage({messageId:a,success:!0,result:u},d||void 0)})}catch(u){postMessage({messageId:a,success:!1,error:u.stack})}})}function xnt(i){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var e=i.dependencies,n=i.init;e=Array.isArray(e)?e.map(function(r){return r&&(r=r.onMainThread||r,r._getInitResult&&(r=r._getInitResult())),r}):[];var s=Promise.all(e).then(function(r){return n.apply(null,r)});return t._getInitResult=function(){return s},s},t}var FB=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),i=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return FB=function(){return i},i},bnt=0,Snt=0,pA=!1,nv=Object.create(null),iv=Object.create(null),Rw=Object.create(null);function e0(i){if((!i||typeof i.init!="function")&&!pA)throw new Error("requires `options.init` function");var t=i.dependencies,e=i.init,n=i.getTransferables,s=i.workerId,r=xnt(i);s==null&&(s="#default");var a="workerModule"+ ++bnt,o=i.name||a,c=null;t=t&&t.map(function(d){return typeof d=="function"&&!d.workerModuleData&&(pA=!0,d=e0({workerId:s,name:"<"+o+"> function dependency: "+d.name,init:`function(){return (
`+fS(d)+`
)}`}),pA=!1),d&&d.workerModuleData&&(d=d.workerModuleData),d});function u(){for(var d=[],g=arguments.length;g--;)d[g]=arguments[g];if(!FB())return r.apply(void 0,d);if(!c){c=k3(s,"registerModule",u.workerModuleData);var y=function(){c=null,iv[s].delete(y)};(iv[s]||(iv[s]=new Set)).add(y)}return c.then(function(_){var b=_.isCallable;if(b)return k3(s,"callModule",{id:a,args:d});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:a,name:o,dependencies:t,init:fS(e),getTransferables:n&&fS(n)},u.onMainThread=r,u}function Ent(i){iv[i]&&iv[i].forEach(function(t){t()}),nv[i]&&(nv[i].terminate(),delete nv[i])}function fS(i){var t=i.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function Tnt(i){var t=nv[i];if(!t){var e=fS(_nt);t=nv[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+e+")()"],{type:"application/javascript"}))),t.onmessage=function(n){var s=n.data,r=s.messageId,a=Rw[r];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete Rw[r],a(s)}}return t}function k3(i,t,e){return new Promise(function(n,s){var r=++Snt;Rw[r]=function(a){a.success?n(a.result):s(new Error("Error in worker "+t+" call: "+a.error))},Tnt(i).postMessage({messageId:r,action:t,data:e})})}function VB(){var i=(function(t){function e(at,Y,Z,rt,ft,dt,_t,ut){var gt=1-_t;ut.x=gt*gt*at+2*gt*_t*Z+_t*_t*ft,ut.y=gt*gt*Y+2*gt*_t*rt+_t*_t*dt}function n(at,Y,Z,rt,ft,dt,_t,ut,gt,Tt){var $t=1-gt;Tt.x=$t*$t*$t*at+3*$t*$t*gt*Z+3*$t*gt*gt*ft+gt*gt*gt*_t,Tt.y=$t*$t*$t*Y+3*$t*$t*gt*rt+3*$t*gt*gt*dt+gt*gt*gt*ut}function s(at,Y){for(var Z=/([MLQCZ])([^MLQCZ]*)/g,rt,ft,dt,_t,ut;rt=Z.exec(at);){var gt=rt[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Tt){return parseFloat(Tt)});switch(rt[1]){case"M":_t=ft=gt[0],ut=dt=gt[1];break;case"L":(gt[0]!==_t||gt[1]!==ut)&&Y("L",_t,ut,_t=gt[0],ut=gt[1]);break;case"Q":{Y("Q",_t,ut,_t=gt[2],ut=gt[3],gt[0],gt[1]);break}case"C":{Y("C",_t,ut,_t=gt[4],ut=gt[5],gt[0],gt[1],gt[2],gt[3]);break}case"Z":(_t!==ft||ut!==dt)&&Y("L",_t,ut,ft,dt);break}}}function r(at,Y,Z){Z===void 0&&(Z=16);var rt={x:0,y:0};s(at,function(ft,dt,_t,ut,gt,Tt,$t,ae,ne){switch(ft){case"L":Y(dt,_t,ut,gt);break;case"Q":{for(var ee=dt,ct=_t,Gt=1;Gt<Z;Gt++)e(dt,_t,Tt,$t,ut,gt,Gt/(Z-1),rt),Y(ee,ct,rt.x,rt.y),ee=rt.x,ct=rt.y;break}case"C":{for(var zt=dt,Pt=_t,Ct=1;Ct<Z;Ct++)n(dt,_t,Tt,$t,ae,ne,ut,gt,Ct/(Z-1),rt),Y(zt,Pt,rt.x,rt.y),zt=rt.x,Pt=rt.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",c=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function d(at,Y){var Z=at.getContext?at.getContext("webgl",u):at,rt=c.get(Z);if(!rt){let zt=function(Nt){var ge=dt[Nt];if(!ge&&(ge=dt[Nt]=Z.getExtension(Nt),!ge))throw new Error(Nt+" not supported");return ge},Pt=function(Nt,ge){var Q=Z.createShader(ge);return Z.shaderSource(Q,Nt),Z.compileShader(Q),Q},Ct=function(Nt,ge,Q,K){if(!_t[Nt]){var mt={},Lt={},Rt=Z.createProgram();Z.attachShader(Rt,Pt(ge,Z.VERTEX_SHADER)),Z.attachShader(Rt,Pt(Q,Z.FRAGMENT_SHADER)),Z.linkProgram(Rt),_t[Nt]={program:Rt,transaction:function(oe){Z.useProgram(Rt),oe({setUniform:function(ve,be){for(var Xt=[],te=arguments.length-2;te-- >0;)Xt[te]=arguments[te+2];var re=Lt[be]||(Lt[be]=Z.getUniformLocation(Rt,be));Z["uniform"+ve].apply(Z,[re].concat(Xt))},setAttribute:function(ve,be,Xt,te,re){var ht=mt[ve];ht||(ht=mt[ve]={buf:Z.createBuffer(),loc:Z.getAttribLocation(Rt,ve),data:null}),Z.bindBuffer(Z.ARRAY_BUFFER,ht.buf),Z.vertexAttribPointer(ht.loc,be,Z.FLOAT,!1,0,0),Z.enableVertexAttribArray(ht.loc),ft?Z.vertexAttribDivisor(ht.loc,te):zt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ht.loc,te),re!==ht.data&&(Z.bufferData(Z.ARRAY_BUFFER,re,Xt),ht.data=re)}})}}}_t[Nt].transaction(K)},Bt=function(Nt,ge){gt++;try{Z.activeTexture(Z.TEXTURE0+gt);var Q=ut[Nt];Q||(Q=ut[Nt]=Z.createTexture(),Z.bindTexture(Z.TEXTURE_2D,Q),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.NEAREST),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.NEAREST)),Z.bindTexture(Z.TEXTURE_2D,Q),ge(Q,gt)}finally{gt--}},Dt=function(Nt,ge,Q){var K=Z.createFramebuffer();Tt.push(K),Z.bindFramebuffer(Z.FRAMEBUFFER,K),Z.activeTexture(Z.TEXTURE0+ge),Z.bindTexture(Z.TEXTURE_2D,Nt),Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Nt,0);try{Q(K)}finally{Z.deleteFramebuffer(K),Z.bindFramebuffer(Z.FRAMEBUFFER,Tt[--Tt.length-1]||null)}},Ut=function(){dt={},_t={},ut={},gt=-1,Tt.length=0};var $t=zt,ae=Pt,ne=Ct,ee=Bt,ct=Dt,Gt=Ut,ft=typeof WebGL2RenderingContext<"u"&&Z instanceof WebGL2RenderingContext,dt={},_t={},ut={},gt=-1,Tt=[];Z.canvas.addEventListener("webglcontextlost",function(Nt){Ut(),Nt.preventDefault()},!1),c.set(Z,rt={gl:Z,isWebGL2:ft,getExtension:zt,withProgram:Ct,withTexture:Bt,withTextureFramebuffer:Dt,handleContextLoss:Ut})}Y(rt)}function g(at,Y,Z,rt,ft,dt,_t,ut){_t===void 0&&(_t=15),ut===void 0&&(ut=null),d(at,function(gt){var Tt=gt.gl,$t=gt.withProgram,ae=gt.withTexture;ae("copy",function(ne,ee){Tt.texImage2D(Tt.TEXTURE_2D,0,Tt.RGBA,ft,dt,0,Tt.RGBA,Tt.UNSIGNED_BYTE,Y),$t("copy",a,o,function(ct){var Gt=ct.setUniform,zt=ct.setAttribute;zt("aUV",2,Tt.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Gt("1i","image",ee),Tt.bindFramebuffer(Tt.FRAMEBUFFER,ut||null),Tt.disable(Tt.BLEND),Tt.colorMask(_t&8,_t&4,_t&2,_t&1),Tt.viewport(Z,rt,ft,dt),Tt.scissor(Z,rt,ft,dt),Tt.drawArrays(Tt.TRIANGLES,0,3)})})})}function y(at,Y,Z){var rt=at.width,ft=at.height;d(at,function(dt){var _t=dt.gl,ut=new Uint8Array(rt*ft*4);_t.readPixels(0,0,rt,ft,_t.RGBA,_t.UNSIGNED_BYTE,ut),at.width=Y,at.height=Z,g(_t,ut,0,0,rt,ft)})}var _=Object.freeze({__proto__:null,withWebGLContext:d,renderImageData:g,resizeWebGLCanvasWithoutClearing:y});function b(at,Y,Z,rt,ft,dt){dt===void 0&&(dt=1);var _t=new Uint8Array(at*Y),ut=rt[2]-rt[0],gt=rt[3]-rt[1],Tt=[];r(Z,function(zt,Pt,Ct,Bt){Tt.push({x1:zt,y1:Pt,x2:Ct,y2:Bt,minX:Math.min(zt,Ct),minY:Math.min(Pt,Bt),maxX:Math.max(zt,Ct),maxY:Math.max(Pt,Bt)})}),Tt.sort(function(zt,Pt){return zt.maxX-Pt.maxX});for(var $t=0;$t<at;$t++)for(var ae=0;ae<Y;ae++){var ne=ct(rt[0]+ut*($t+.5)/at,rt[1]+gt*(ae+.5)/Y),ee=Math.pow(1-Math.abs(ne)/ft,dt)/2;ne<0&&(ee=1-ee),ee=Math.max(0,Math.min(255,Math.round(ee*255))),_t[ae*at+$t]=ee}return _t;function ct(zt,Pt){for(var Ct=1/0,Bt=1/0,Dt=Tt.length;Dt--;){var Ut=Tt[Dt];if(Ut.maxX+Bt<=zt)break;if(zt+Bt>Ut.minX&&Pt-Bt<Ut.maxY&&Pt+Bt>Ut.minY){var Nt=E(zt,Pt,Ut.x1,Ut.y1,Ut.x2,Ut.y2);Nt<Ct&&(Ct=Nt,Bt=Math.sqrt(Ct))}}return Gt(zt,Pt)&&(Bt=-Bt),Bt}function Gt(zt,Pt){for(var Ct=0,Bt=Tt.length;Bt--;){var Dt=Tt[Bt];if(Dt.maxX<=zt)break;var Ut=Dt.y1>Pt!=Dt.y2>Pt&&zt<(Dt.x2-Dt.x1)*(Pt-Dt.y1)/(Dt.y2-Dt.y1)+Dt.x1;Ut&&(Ct+=Dt.y1<Dt.y2?1:-1)}return Ct!==0}}function M(at,Y,Z,rt,ft,dt,_t,ut,gt,Tt){dt===void 0&&(dt=1),ut===void 0&&(ut=0),gt===void 0&&(gt=0),Tt===void 0&&(Tt=0),S(at,Y,Z,rt,ft,dt,_t,null,ut,gt,Tt)}function S(at,Y,Z,rt,ft,dt,_t,ut,gt,Tt,$t){dt===void 0&&(dt=1),gt===void 0&&(gt=0),Tt===void 0&&(Tt=0),$t===void 0&&($t=0);for(var ae=b(at,Y,Z,rt,ft,dt),ne=new Uint8Array(ae.length*4),ee=0;ee<ae.length;ee++)ne[ee*4+$t]=ae[ee];g(_t,ne,gt,Tt,at,Y,1<<3-$t,ut)}function E(at,Y,Z,rt,ft,dt){var _t=ft-Z,ut=dt-rt,gt=_t*_t+ut*ut,Tt=gt?Math.max(0,Math.min(1,((at-Z)*_t+(Y-rt)*ut)/gt)):0,$t=at-(Z+Tt*_t),ae=Y-(rt+Tt*ut);return $t*$t+ae*ae}var R=Object.freeze({__proto__:null,generate:b,generateIntoCanvas:M,generateIntoFramebuffer:S}),N="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",P="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",k="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",z=new Float32Array([0,0,2,0,0,2]),L=null,U=!1,D={},O=new WeakMap;function F(at){if(!U&&!lt(at))throw new Error("WebGL generation not supported")}function H(at,Y,Z,rt,ft,dt,_t){if(dt===void 0&&(dt=1),_t===void 0&&(_t=null),!_t&&(_t=L,!_t)){var ut=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ut)throw new Error("OffscreenCanvas or DOM canvas not supported");_t=L=ut.getContext("webgl",{depth:!1})}F(_t);var gt=new Uint8Array(at*Y*4);d(_t,function(ne){var ee=ne.gl,ct=ne.withTexture,Gt=ne.withTextureFramebuffer;ct("readable",function(zt,Pt){ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,at,Y,0,ee.RGBA,ee.UNSIGNED_BYTE,null),Gt(zt,Pt,function(Ct){it(at,Y,Z,rt,ft,dt,ee,Ct,0,0,0),ee.readPixels(0,0,at,Y,ee.RGBA,ee.UNSIGNED_BYTE,gt)})})});for(var Tt=new Uint8Array(at*Y),$t=0,ae=0;$t<gt.length;$t+=4)Tt[ae++]=gt[$t];return Tt}function G(at,Y,Z,rt,ft,dt,_t,ut,gt,Tt){dt===void 0&&(dt=1),ut===void 0&&(ut=0),gt===void 0&&(gt=0),Tt===void 0&&(Tt=0),it(at,Y,Z,rt,ft,dt,_t,null,ut,gt,Tt)}function it(at,Y,Z,rt,ft,dt,_t,ut,gt,Tt,$t){dt===void 0&&(dt=1),gt===void 0&&(gt=0),Tt===void 0&&(Tt=0),$t===void 0&&($t=0),F(_t);var ae=[];r(Z,function(ne,ee,ct,Gt){ae.push(ne,ee,ct,Gt)}),ae=new Float32Array(ae),d(_t,function(ne){var ee=ne.gl,ct=ne.isWebGL2,Gt=ne.getExtension,zt=ne.withProgram,Pt=ne.withTexture,Ct=ne.withTextureFramebuffer,Bt=ne.handleContextLoss;if(Pt("rawDistances",function(Dt,Ut){(at!==Dt._lastWidth||Y!==Dt._lastHeight)&&ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,Dt._lastWidth=at,Dt._lastHeight=Y,0,ee.RGBA,ee.UNSIGNED_BYTE,null),zt("main",N,P,function(Nt){var ge=Nt.setAttribute,Q=Nt.setUniform,K=!ct&&Gt("ANGLE_instanced_arrays"),mt=!ct&&Gt("EXT_blend_minmax");ge("aUV",2,ee.STATIC_DRAW,0,z),ge("aLineSegment",4,ee.DYNAMIC_DRAW,1,ae),Q.apply(void 0,["4f","uGlyphBounds"].concat(rt)),Q("1f","uMaxDistance",ft),Q("1f","uExponent",dt),Ct(Dt,Ut,function(Lt){ee.enable(ee.BLEND),ee.colorMask(!0,!0,!0,!0),ee.viewport(0,0,at,Y),ee.scissor(0,0,at,Y),ee.blendFunc(ee.ONE,ee.ONE),ee.blendEquationSeparate(ee.FUNC_ADD,ct?ee.MAX:mt.MAX_EXT),ee.clear(ee.COLOR_BUFFER_BIT),ct?ee.drawArraysInstanced(ee.TRIANGLES,0,3,ae.length/4):K.drawArraysInstancedANGLE(ee.TRIANGLES,0,3,ae.length/4)})}),zt("post",a,k,function(Nt){Nt.setAttribute("aUV",2,ee.STATIC_DRAW,0,z),Nt.setUniform("1i","tex",Ut),ee.bindFramebuffer(ee.FRAMEBUFFER,ut),ee.disable(ee.BLEND),ee.colorMask($t===0,$t===1,$t===2,$t===3),ee.viewport(gt,Tt,at,Y),ee.scissor(gt,Tt,at,Y),ee.drawArrays(ee.TRIANGLES,0,3)})}),ee.isContextLost())throw Bt(),new Error("webgl context lost")})}function lt(at){var Y=!at||at===L?D:at.canvas||at,Z=O.get(Y);if(Z===void 0){U=!0;var rt=null;try{var ft=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],dt=H(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,at);Z=dt&&ft.length===dt.length&&dt.every(function(_t,ut){return _t===ft[ut]}),Z||(rt="bad trial run results",console.info(ft,dt))}catch(_t){Z=!1,rt=_t.message}rt&&console.warn("WebGL SDF generation not supported:",rt),U=!1,O.set(Y,Z)}return Z}var j=Object.freeze({__proto__:null,generate:H,generateIntoCanvas:G,generateIntoFramebuffer:it,isSupported:lt});function J(at,Y,Z,rt,ft,dt){ft===void 0&&(ft=Math.max(rt[2]-rt[0],rt[3]-rt[1])/2),dt===void 0&&(dt=1);try{return H.apply(j,arguments)}catch(_t){return console.info("WebGL SDF generation failed, falling back to JS",_t),b.apply(R,arguments)}}function $(at,Y,Z,rt,ft,dt,_t,ut,gt,Tt){ft===void 0&&(ft=Math.max(rt[2]-rt[0],rt[3]-rt[1])/2),dt===void 0&&(dt=1),ut===void 0&&(ut=0),gt===void 0&&(gt=0),Tt===void 0&&(Tt=0);try{return G.apply(j,arguments)}catch($t){return console.info("WebGL SDF generation failed, falling back to JS",$t),M.apply(R,arguments)}}return t.forEachPathCommand=s,t.generate=J,t.generateIntoCanvas=$,t.javascript=R,t.pathToLineSegments=r,t.webgl=j,t.webglUtils=_,Object.defineProperty(t,"__esModule",{value:!0}),t})({});return i}function Mnt(){var i=(function(t){var e={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},s={};n.L=1,s[1]="L",Object.keys(e).forEach(function(Bt,Dt){n[Bt]=1<<Dt+1,s[n[Bt]]=Bt}),Object.freeze(n);var r=n.LRI|n.RLI|n.FSI,a=n.L|n.R|n.AL,o=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,c=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,u=n.S|n.WS|n.B|r|n.PDI|c,d=null;function g(){if(!d){d=new Map;var Bt=function(Ut){if(e.hasOwnProperty(Ut)){var Nt=0;e[Ut].split(",").forEach(function(ge){var Q=ge.split("+"),K=Q[0],mt=Q[1];K=parseInt(K,36),mt=mt?parseInt(mt,36):0,d.set(Nt+=K,n[Ut]);for(var Lt=0;Lt<mt;Lt++)d.set(++Nt,n[Ut])})}};for(var Dt in e)Bt(Dt)}}function y(Bt){return g(),d.get(Bt.codePointAt(0))||n.L}function _(Bt){return s[y(Bt)]}var b={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function M(Bt,Dt){var Ut=36,Nt=0,ge=new Map,Q=Dt&&new Map,K;return Bt.split(",").forEach(function mt(Lt){if(Lt.indexOf("+")!==-1)for(var Rt=+Lt;Rt--;)mt(K);else{K=Lt;var At=Lt.split(">"),oe=At[0],le=At[1];oe=String.fromCodePoint(Nt+=parseInt(oe,Ut)),le=String.fromCodePoint(Nt+=parseInt(le,Ut)),ge.set(oe,le),Dt&&Q.set(le,oe)}}),{map:ge,reverseMap:Q}}var S,E,R;function N(){if(!S){var Bt=M(b.pairs,!0),Dt=Bt.map,Ut=Bt.reverseMap;S=Dt,E=Ut,R=M(b.canonical,!1).map}}function P(Bt){return N(),S.get(Bt)||null}function k(Bt){return N(),E.get(Bt)||null}function z(Bt){return N(),R.get(Bt)||null}var L=n.L,U=n.R,D=n.EN,O=n.ES,F=n.ET,H=n.AN,G=n.CS,it=n.B,lt=n.S,j=n.ON,J=n.BN,$=n.NSM,at=n.AL,Y=n.LRO,Z=n.RLO,rt=n.LRE,ft=n.RLE,dt=n.PDF,_t=n.LRI,ut=n.RLI,gt=n.FSI,Tt=n.PDI;function $t(Bt,Dt){for(var Ut=125,Nt=new Uint32Array(Bt.length),ge=0;ge<Bt.length;ge++)Nt[ge]=y(Bt[ge]);var Q=new Map;function K(rs,Xs){var Li=Nt[rs];Nt[rs]=Xs,Q.set(Li,Q.get(Li)-1),Li&o&&Q.set(o,Q.get(o)-1),Q.set(Xs,(Q.get(Xs)||0)+1),Xs&o&&Q.set(o,(Q.get(o)||0)+1)}for(var mt=new Uint8Array(Bt.length),Lt=new Map,Rt=[],At=null,oe=0;oe<Bt.length;oe++)At||Rt.push(At={start:oe,end:Bt.length-1,level:Dt==="rtl"?1:Dt==="ltr"?0:cc(oe,!1)}),Nt[oe]&it&&(At.end=oe,At=null);for(var le=ft|rt|Z|Y|r|Tt|dt|it,ve=function(rs){return rs+(rs&1?1:2)},be=function(rs){return rs+(rs&1?2:1)},Xt=0;Xt<Rt.length;Xt++){At=Rt[Xt];var te=[{_level:At.level,_override:0,_isolate:0}],re=void 0,ht=0,wt=0,de=0;Q.clear();for(var pt=At.start;pt<=At.end;pt++){var Ft=Nt[pt];if(re=te[te.length-1],Q.set(Ft,(Q.get(Ft)||0)+1),Ft&o&&Q.set(o,(Q.get(o)||0)+1),Ft&le)if(Ft&(ft|rt)){mt[pt]=re._level;var ie=(Ft===ft?be:ve)(re._level);ie<=Ut&&!ht&&!wt?te.push({_level:ie,_override:0,_isolate:0}):ht||wt++}else if(Ft&(Z|Y)){mt[pt]=re._level;var ye=(Ft===Z?be:ve)(re._level);ye<=Ut&&!ht&&!wt?te.push({_level:ye,_override:Ft&Z?U:L,_isolate:0}):ht||wt++}else if(Ft&r){Ft&gt&&(Ft=cc(pt+1,!0)===1?ut:_t),mt[pt]=re._level,re._override&&K(pt,re._override);var se=(Ft===ut?be:ve)(re._level);se<=Ut&&ht===0&&wt===0?(de++,te.push({_level:se,_override:0,_isolate:1,_isolInitIndex:pt})):ht++}else if(Ft&Tt){if(ht>0)ht--;else if(de>0){for(wt=0;!te[te.length-1]._isolate;)te.pop();var jt=te[te.length-1]._isolInitIndex;jt!=null&&(Lt.set(jt,pt),Lt.set(pt,jt)),te.pop(),de--}re=te[te.length-1],mt[pt]=re._level,re._override&&K(pt,re._override)}else Ft&dt?(ht===0&&(wt>0?wt--:!re._isolate&&te.length>1&&(te.pop(),re=te[te.length-1])),mt[pt]=re._level):Ft&it&&(mt[pt]=At.level);else mt[pt]=re._level,re._override&&Ft!==J&&K(pt,re._override)}for(var xe=[],we=null,Ce=At.start;Ce<=At.end;Ce++){var Ie=Nt[Ce];if(!(Ie&c)){var Ln=mt[Ce],dn=Ie&r,fn=Ie===Tt;we&&Ln===we._level?(we._end=Ce,we._endsWithIsolInit=dn):xe.push(we={_start:Ce,_end:Ce,_level:Ln,_startsWithPDI:fn,_endsWithIsolInit:dn})}}for(var Rn=[],Fi=0;Fi<xe.length;Fi++){var vi=xe[Fi];if(!vi._startsWithPDI||vi._startsWithPDI&&!Lt.has(vi._start)){for(var ys=[we=vi],ji=void 0;we&&we._endsWithIsolInit&&(ji=Lt.get(we._end))!=null;)for(var Kn=Fi+1;Kn<xe.length;Kn++)if(xe[Kn]._start===ji){ys.push(we=xe[Kn]);break}for(var Zn=[],Nn=0;Nn<ys.length;Nn++)for(var Ps=ys[Nn],Us=Ps._start;Us<=Ps._end;Us++)Zn.push(Us);for(var fa=mt[Zn[0]],Br=At.level,di=Zn[0]-1;di>=0;di--)if(!(Nt[di]&c)){Br=mt[di];break}var Ba=Zn[Zn.length-1],da=mt[Ba],et=At.level;if(!(Nt[Ba]&r)){for(var St=Ba+1;St<=At.end;St++)if(!(Nt[St]&c)){et=mt[St];break}}Rn.push({_seqIndices:Zn,_sosType:Math.max(Br,fa)%2?U:L,_eosType:Math.max(et,da)%2?U:L})}}for(var kt=0;kt<Rn.length;kt++){var qt=Rn[kt],yt=qt._seqIndices,_e=qt._sosType,Me=qt._eosType,De=mt[yt[0]]&1?U:L;if(Q.get($))for(var Re=0;Re<yt.length;Re++){var ze=yt[Re];if(Nt[ze]&$){for(var He=_e,Le=Re-1;Le>=0;Le--)if(!(Nt[yt[Le]]&c)){He=Nt[yt[Le]];break}K(ze,He&(r|Tt)?j:He)}}if(Q.get(D))for(var $e=0;$e<yt.length;$e++){var Cn=yt[$e];if(Nt[Cn]&D)for(var Qn=$e-1;Qn>=-1;Qn--){var bn=Qn===-1?_e:Nt[yt[Qn]];if(bn&a){bn===at&&K(Cn,H);break}}}if(Q.get(at))for(var Ge=0;Ge<yt.length;Ge++){var Be=yt[Ge];Nt[Be]&at&&K(Be,U)}if(Q.get(O)||Q.get(G))for(var On=1;On<yt.length-1;On++){var cn=yt[On];if(Nt[cn]&(O|G)){for(var Ke=0,ns=0,_i=On-1;_i>=0&&(Ke=Nt[yt[_i]],!!(Ke&c));_i--);for(var hi=On+1;hi<yt.length&&(ns=Nt[yt[hi]],!!(ns&c));hi++);Ke===ns&&(Nt[cn]===O?Ke===D:Ke&(D|H))&&K(cn,Ke)}}if(Q.get(D))for(var Sn=0;Sn<yt.length;Sn++){var is=yt[Sn];if(Nt[is]&D){for(var Vi=Sn-1;Vi>=0&&Nt[yt[Vi]]&(F|c);Vi--)K(yt[Vi],D);for(Sn++;Sn<yt.length&&Nt[yt[Sn]]&(F|c|D);Sn++)Nt[yt[Sn]]!==D&&K(yt[Sn],D)}}if(Q.get(F)||Q.get(O)||Q.get(G))for(var ei=0;ei<yt.length;ei++){var Zi=yt[ei];if(Nt[Zi]&(F|O|G)){K(Zi,j);for(var zr=ei-1;zr>=0&&Nt[yt[zr]]&c;zr--)K(yt[zr],j);for(var ri=ei+1;ri<yt.length&&Nt[yt[ri]]&c;ri++)K(yt[ri],j)}}if(Q.get(D))for(var Fr=0,_o=_e;Fr<yt.length;Fr++){var xo=yt[Fr],bo=Nt[xo];bo&D?_o===L&&K(xo,L):bo&a&&(_o=bo)}if(Q.get(o)){var za=U|D|H,oc=za|L,qs=[];{for(var pa=[],ma=0;ma<yt.length;ma++)if(Nt[yt[ma]]&o){var or=Bt[yt[ma]],Es=void 0;if(P(or)!==null)if(pa.length<63)pa.push({char:or,seqIndex:ma});else break;else if((Es=k(or))!==null)for(var So=pa.length-1;So>=0;So--){var ga=pa[So].char;if(ga===Es||ga===k(z(or))||P(z(ga))===or){qs.push([pa[So].seqIndex,ma]),pa.length=So;break}}}qs.sort(function(rs,Xs){return rs[0]-Xs[0]})}for(var Fa=0;Fa<qs.length;Fa++){for(var Va=qs[Fa],ss=Va[0],br=Va[1],Ha=!1,Ui=0,ai=ss+1;ai<br;ai++){var Sl=yt[ai];if(Nt[Sl]&oc){Ha=!0;var lc=Nt[Sl]&za?U:L;if(lc===De){Ui=lc;break}}}if(Ha&&!Ui){Ui=_e;for(var Sr=ss-1;Sr>=0;Sr--){var Ga=yt[Sr];if(Nt[Ga]&oc){var Eo=Nt[Ga]&za?U:L;Eo!==De?Ui=Eo:Ui=De;break}}}if(Ui){if(Nt[yt[ss]]=Nt[yt[br]]=Ui,Ui!==De){for(var Ri=ss+1;Ri<yt.length;Ri++)if(!(Nt[yt[Ri]]&c)){y(Bt[yt[Ri]])&$&&(Nt[yt[Ri]]=Ui);break}}if(Ui!==De){for(var Wi=br+1;Wi<yt.length;Wi++)if(!(Nt[yt[Wi]]&c)){y(Bt[yt[Wi]])&$&&(Nt[yt[Wi]]=Ui);break}}}}for(var Ls=0;Ls<yt.length;Ls++)if(Nt[yt[Ls]]&o){for(var To=Ls,ja=Ls,lr=_e,cr=Ls-1;cr>=0;cr--)if(Nt[yt[cr]]&c)To=cr;else{lr=Nt[yt[cr]]&za?U:L;break}for(var Vr=Me,Er=Ls+1;Er<yt.length;Er++)if(Nt[yt[Er]]&(o|c))ja=Er;else{Vr=Nt[yt[Er]]&za?U:L;break}for(var Wa=To;Wa<=ja;Wa++)Nt[yt[Wa]]=lr===Vr?lr:De;Ls=ja}}}for(var ks=At.start;ks<=At.end;ks++){var vh=mt[ks],pi=Nt[ks];if(vh&1?pi&(L|D|H)&&mt[ks]++:pi&U?mt[ks]++:pi&(H|D)&&(mt[ks]+=2),pi&c&&(mt[ks]=ks===0?At.level:mt[ks-1]),ks===At.end||y(Bt[ks])&(lt|it))for(var qa=ks;qa>=0&&y(Bt[qa])&u;qa--)mt[qa]=At.level}}return{levels:mt,paragraphs:Rt};function cc(rs,Xs){for(var Li=rs;Li<Bt.length;Li++){var ur=Nt[Li];if(ur&(U|at))return 1;if(ur&(it|L)||Xs&&ur===Tt)return 0;if(ur&r){var hc=uc(Li);Li=hc===-1?Bt.length:hc}}return 0}function uc(rs){for(var Xs=1,Li=rs+1;Li<Bt.length;Li++){var ur=Nt[Li];if(ur&it)break;if(ur&Tt){if(--Xs===0)return Li}else ur&r&&Xs++}return-1}}var ae="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ne;function ee(){if(!ne){var Bt=M(ae,!0),Dt=Bt.map,Ut=Bt.reverseMap;Ut.forEach(function(Nt,ge){Dt.set(ge,Nt)}),ne=Dt}}function ct(Bt){return ee(),ne.get(Bt)||null}function Gt(Bt,Dt,Ut,Nt){var ge=Bt.length;Ut=Math.max(0,Ut==null?0:+Ut),Nt=Math.min(ge-1,Nt==null?ge-1:+Nt);for(var Q=new Map,K=Ut;K<=Nt;K++)if(Dt[K]&1){var mt=ct(Bt[K]);mt!==null&&Q.set(K,mt)}return Q}function zt(Bt,Dt,Ut,Nt){var ge=Bt.length;Ut=Math.max(0,Ut==null?0:+Ut),Nt=Math.min(ge-1,Nt==null?ge-1:+Nt);var Q=[];return Dt.paragraphs.forEach(function(K){var mt=Math.max(Ut,K.start),Lt=Math.min(Nt,K.end);if(mt<Lt){for(var Rt=Dt.levels.slice(mt,Lt+1),At=Lt;At>=mt&&y(Bt[At])&u;At--)Rt[At]=K.level;for(var oe=K.level,le=1/0,ve=0;ve<Rt.length;ve++){var be=Rt[ve];be>oe&&(oe=be),be<le&&(le=be|1)}for(var Xt=oe;Xt>=le;Xt--)for(var te=0;te<Rt.length;te++)if(Rt[te]>=Xt){for(var re=te;te+1<Rt.length&&Rt[te+1]>=Xt;)te++;te>re&&Q.push([re+mt,te+mt])}}}),Q}function Pt(Bt,Dt,Ut,Nt){var ge=Ct(Bt,Dt,Ut,Nt),Q=[].concat(Bt);return ge.forEach(function(K,mt){Q[mt]=(Dt.levels[K]&1?ct(Bt[K]):null)||Bt[K]}),Q.join("")}function Ct(Bt,Dt,Ut,Nt){for(var ge=zt(Bt,Dt,Ut,Nt),Q=[],K=0;K<Bt.length;K++)Q[K]=K;return ge.forEach(function(mt){for(var Lt=mt[0],Rt=mt[1],At=Q.slice(Lt,Rt+1),oe=At.length;oe--;)Q[Rt-oe]=At[oe]}),Q}return t.closingToOpeningBracket=k,t.getBidiCharType=y,t.getBidiCharTypeName=_,t.getCanonicalBracket=z,t.getEmbeddingLevels=$t,t.getMirroredCharacter=ct,t.getMirroredCharactersMap=Gt,t.getReorderSegments=zt,t.getReorderedIndices=Ct,t.getReorderedString=Pt,t.openingToClosingBracket=P,Object.defineProperty(t,"__esModule",{value:!0}),t})({});return i}const HB=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Cw(i){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function e(n,s){let r=Mn[s];return r?Cw(r):n}return i.replace(t,e)}const Nr=[];for(let i=0;i<256;i++)Nr[i]=(i<16?"0":"")+i.toString(16);function Ant(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Nr[i&255]+Nr[i>>8&255]+Nr[i>>16&255]+Nr[i>>24&255]+"-"+Nr[t&255]+Nr[t>>8&255]+"-"+Nr[t>>16&15|64]+Nr[t>>24&255]+"-"+Nr[e&63|128]+Nr[e>>8&255]+"-"+Nr[e>>16&255]+Nr[e>>24&255]+Nr[n&255]+Nr[n>>8&255]+Nr[n>>16&255]+Nr[n>>24&255]).toUpperCase()}const Vd=Object.assign||function(){let i=arguments[0];for(let t=1,e=arguments.length;t<e;t++){let n=arguments[t];if(n)for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},wnt=Date.now(),B3=new WeakMap,z3=new Map;let Rnt=1e10;function Dw(i,t){const e=Nnt(t);let n=B3.get(i);if(n||B3.set(i,n=Object.create(null)),n[e])return new n[e];const s=`_onBeforeCompile${e}`,r=function(u,d){i.onBeforeCompile.call(this,u,d);const g=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let y=z3[g];if(!y){const _=Cnt(this,u,t,e);y=z3[g]=_}u.vertexShader=y.vertexShader,u.fragmentShader=y.fragmentShader,Vd(u.uniforms,this.uniforms),t.timeUniform&&(u.uniforms[t.timeUniform]={get value(){return Date.now()-wnt}}),this[s]&&this[s](u)},a=function(){return o(t.chained?i:i.clone())},o=function(u){const d=Object.create(u,c);return Object.defineProperty(d,"baseMaterial",{value:i}),Object.defineProperty(d,"id",{value:Rnt++}),d.uuid=Ant(),d.uniforms=Vd({},u.uniforms,t.uniforms),d.defines=Vd({},u.defines,t.defines),d.defines[`TROIKA_DERIVED_MATERIAL_${e}`]="",d.extensions=Vd({},u.extensions,t.extensions),d._listeners=void 0,d},c={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>i.type,set:u=>{i.type=u}},isDerivedFrom:{writable:!0,configurable:!0,value:function(u){const d=this.baseMaterial;return u===d||d.isDerivedMaterial&&d.isDerivedFrom(u)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+e}},onBeforeCompile:{get(){return r},set(u){this[s]=u}},copy:{writable:!0,configurable:!0,value:function(u){return i.copy.call(this,u),!i.isShaderMaterial&&!i.isDerivedMaterial&&(Vd(this.extensions,u.extensions),Vd(this.defines,u.defines),Vd(this.uniforms,iR.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new i.constructor;return o(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=Dw(i.isDerivedMaterial?i.getDepthMaterial():new HE({depthPacking:Q2}),t),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=Dw(i.isDerivedMaterial?i.getDistanceMaterial():new GE,t),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:d}=this;u&&u.dispose(),d&&d.dispose(),i.dispose.call(this)}}};return n[e]=a,new a}function Cnt(i,{vertexShader:t,fragmentShader:e},n,s){let{vertexDefs:r,vertexMainIntro:a,vertexMainOutro:o,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:d,fragmentMainOutro:g,fragmentColorTransform:y,customRewriter:_,timeUniform:b}=n;if(r=r||"",a=a||"",o=o||"",u=u||"",d=d||"",g=g||"",(c||_)&&(t=Cw(t)),(y||_)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=Cw(e)),_){let M=_({vertexShader:t,fragmentShader:e});t=M.vertexShader,e=M.fragmentShader}if(y){let M=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,S=>(M.push(S),"")),g=`${y}
${M.join(`
`)}
${g}`}if(b){const M=`
uniform float ${b};
`;r=M+r,u=M+u}return c&&(t=`vec3 troika_position_${s};
vec3 troika_normal_${s};
vec2 troika_uv_${s};
${t}
`,r=`${r}
void troikaVertexTransform${s}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,a=`
troika_position_${s} = vec3(position);
troika_normal_${s} = vec3(normal);
troika_uv_${s} = vec2(uv);
troikaVertexTransform${s}(troika_position_${s}, troika_normal_${s}, troika_uv_${s});
${a}
`,t=t.replace(/\b(position|normal|uv)\b/g,(M,S,E,R)=>/\battribute\s+vec[23]\s+$/.test(R.substr(0,E))?S:`troika_${S}_${s}`),i.map&&i.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${s}`))),t=F3(t,s,r,a,o),e=F3(e,s,u,d,g),{vertexShader:t,fragmentShader:e}}function F3(i,t,e,n,s){return(n||s||e)&&(i=i.replace(HB,`
${e}
void troikaOrigMain${t}() {`),i+=`
void main() {
  ${n}
  troikaOrigMain${t}();
  ${s}
}`),i}function Dnt(i,t){return i==="uniforms"?void 0:typeof t=="function"?t.toString():t}let Int=0;const V3=new Map;function Nnt(i){const t=JSON.stringify(i,Dnt);let e=V3.get(t);return e==null&&V3.set(t,e=++Int),e}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function Ont(){return typeof window>"u"&&(self.window=self),(function(i){var t={parse:function(s){var r=t._bin,a=new Uint8Array(s);if(r.readASCII(a,0,4)=="ttcf"){var o=4;r.readUshort(a,o),o+=2,r.readUshort(a,o),o+=2;var c=r.readUint(a,o);o+=4;for(var u=[],d=0;d<c;d++){var g=r.readUint(a,o);o+=4,u.push(t._readFont(a,g))}return u}return[t._readFont(a,0)]},_readFont:function(s,r){var a=t._bin,o=r;a.readFixed(s,r),r+=4;var c=a.readUshort(s,r);r+=2,a.readUshort(s,r),r+=2,a.readUshort(s,r),r+=2,a.readUshort(s,r),r+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],d={_data:s,_offset:o},g={},y=0;y<c;y++){var _=a.readASCII(s,r,4);r+=4,a.readUint(s,r),r+=4;var b=a.readUint(s,r);r+=4;var M=a.readUint(s,r);r+=4,g[_]={offset:b,length:M}}for(y=0;y<u.length;y++){var S=u[y];g[S]&&(d[S.trim()]=t[S.trim()].parse(s,g[S].offset,g[S].length,d))}return d},_tabOffset:function(s,r,a){for(var o=t._bin,c=o.readUshort(s,a+4),u=a+12,d=0;d<c;d++){var g=o.readASCII(s,u,4);u+=4,o.readUint(s,u),u+=4;var y=o.readUint(s,u);if(u+=4,o.readUint(s,u),u+=4,g==r)return y}return 0}};t._bin={readFixed:function(s,r){return(s[r]<<8|s[r+1])+(s[r+2]<<8|s[r+3])/65540},readF2dot14:function(s,r){return t._bin.readShort(s,r)/16384},readInt:function(s,r){return t._bin._view(s).getInt32(r)},readInt8:function(s,r){return t._bin._view(s).getInt8(r)},readShort:function(s,r){return t._bin._view(s).getInt16(r)},readUshort:function(s,r){return t._bin._view(s).getUint16(r)},readUshorts:function(s,r,a){for(var o=[],c=0;c<a;c++)o.push(t._bin.readUshort(s,r+2*c));return o},readUint:function(s,r){return t._bin._view(s).getUint32(r)},readUint64:function(s,r){return 4294967296*t._bin.readUint(s,r)+t._bin.readUint(s,r+4)},readASCII:function(s,r,a){for(var o="",c=0;c<a;c++)o+=String.fromCharCode(s[r+c]);return o},readUnicode:function(s,r,a){for(var o="",c=0;c<a;c++){var u=s[r++]<<8|s[r++];o+=String.fromCharCode(u)}return o},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,r,a){var o=t._bin._tdec;return o&&r==0&&a==s.length?o.decode(s):t._bin.readASCII(s,r,a)},readBytes:function(s,r,a){for(var o=[],c=0;c<a;c++)o.push(s[r+c]);return o},readASCIIArray:function(s,r,a){for(var o=[],c=0;c<a;c++)o.push(String.fromCharCode(s[r+c]));return o},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},t._lctf={},t._lctf.parse=function(s,r,a,o,c){var u=t._bin,d={},g=r;u.readFixed(s,r),r+=4;var y=u.readUshort(s,r);r+=2;var _=u.readUshort(s,r);r+=2;var b=u.readUshort(s,r);return r+=2,d.scriptList=t._lctf.readScriptList(s,g+y),d.featureList=t._lctf.readFeatureList(s,g+_),d.lookupList=t._lctf.readLookupList(s,g+b,c),d},t._lctf.readLookupList=function(s,r,a){var o=t._bin,c=r,u=[],d=o.readUshort(s,r);r+=2;for(var g=0;g<d;g++){var y=o.readUshort(s,r);r+=2;var _=t._lctf.readLookupTable(s,c+y,a);u.push(_)}return u},t._lctf.readLookupTable=function(s,r,a){var o=t._bin,c=r,u={tabs:[]};u.ltype=o.readUshort(s,r),r+=2,u.flag=o.readUshort(s,r),r+=2;var d=o.readUshort(s,r);r+=2;for(var g=u.ltype,y=0;y<d;y++){var _=o.readUshort(s,r);r+=2;var b=a(s,g,c+_,u);u.tabs.push(b)}return u},t._lctf.numOfOnes=function(s){for(var r=0,a=0;a<32;a++)(s>>>a&1)!=0&&r++;return r},t._lctf.readClassDef=function(s,r){var a=t._bin,o=[],c=a.readUshort(s,r);if(r+=2,c==1){var u=a.readUshort(s,r);r+=2;var d=a.readUshort(s,r);r+=2;for(var g=0;g<d;g++)o.push(u+g),o.push(u+g),o.push(a.readUshort(s,r)),r+=2}if(c==2){var y=a.readUshort(s,r);for(r+=2,g=0;g<y;g++)o.push(a.readUshort(s,r)),r+=2,o.push(a.readUshort(s,r)),r+=2,o.push(a.readUshort(s,r)),r+=2}return o},t._lctf.getInterval=function(s,r){for(var a=0;a<s.length;a+=3){var o=s[a],c=s[a+1];if(s[a+2],o<=r&&r<=c)return a}return-1},t._lctf.readCoverage=function(s,r){var a=t._bin,o={};o.fmt=a.readUshort(s,r),r+=2;var c=a.readUshort(s,r);return r+=2,o.fmt==1&&(o.tab=a.readUshorts(s,r,c)),o.fmt==2&&(o.tab=a.readUshorts(s,r,3*c)),o},t._lctf.coverageIndex=function(s,r){var a=s.tab;if(s.fmt==1)return a.indexOf(r);if(s.fmt==2){var o=t._lctf.getInterval(a,r);if(o!=-1)return a[o+2]+(r-a[o])}return-1},t._lctf.readFeatureList=function(s,r){var a=t._bin,o=r,c=[],u=a.readUshort(s,r);r+=2;for(var d=0;d<u;d++){var g=a.readASCII(s,r,4);r+=4;var y=a.readUshort(s,r);r+=2;var _=t._lctf.readFeatureTable(s,o+y);_.tag=g.trim(),c.push(_)}return c},t._lctf.readFeatureTable=function(s,r){var a=t._bin,o=r,c={},u=a.readUshort(s,r);r+=2,u>0&&(c.featureParams=o+u);var d=a.readUshort(s,r);r+=2,c.tab=[];for(var g=0;g<d;g++)c.tab.push(a.readUshort(s,r+2*g));return c},t._lctf.readScriptList=function(s,r){var a=t._bin,o=r,c={},u=a.readUshort(s,r);r+=2;for(var d=0;d<u;d++){var g=a.readASCII(s,r,4);r+=4;var y=a.readUshort(s,r);r+=2,c[g.trim()]=t._lctf.readScriptTable(s,o+y)}return c},t._lctf.readScriptTable=function(s,r){var a=t._bin,o=r,c={},u=a.readUshort(s,r);r+=2,u>0&&(c.default=t._lctf.readLangSysTable(s,o+u));var d=a.readUshort(s,r);r+=2;for(var g=0;g<d;g++){var y=a.readASCII(s,r,4);r+=4;var _=a.readUshort(s,r);r+=2,c[y.trim()]=t._lctf.readLangSysTable(s,o+_)}return c},t._lctf.readLangSysTable=function(s,r){var a=t._bin,o={};a.readUshort(s,r),r+=2,o.reqFeature=a.readUshort(s,r),r+=2;var c=a.readUshort(s,r);return r+=2,o.features=a.readUshorts(s,r,c),o},t.CFF={},t.CFF.parse=function(s,r,a){var o=t._bin;(s=new Uint8Array(s.buffer,r,a))[r=0],s[++r],s[++r],s[++r],r++;var c=[];r=t.CFF.readIndex(s,r,c);for(var u=[],d=0;d<c.length-1;d++)u.push(o.readASCII(s,r+c[d],c[d+1]-c[d]));r+=c[c.length-1];var g=[];r=t.CFF.readIndex(s,r,g);var y=[];for(d=0;d<g.length-1;d++)y.push(t.CFF.readDict(s,r+g[d],r+g[d+1]));r+=g[g.length-1];var _=y[0],b=[];r=t.CFF.readIndex(s,r,b);var M=[];for(d=0;d<b.length-1;d++)M.push(o.readASCII(s,r+b[d],b[d+1]-b[d]));if(r+=b[b.length-1],t.CFF.readSubrs(s,r,_),_.CharStrings){r=_.CharStrings,b=[],r=t.CFF.readIndex(s,r,b);var S=[];for(d=0;d<b.length-1;d++)S.push(o.readBytes(s,r+b[d],b[d+1]-b[d]));_.CharStrings=S}if(_.ROS){r=_.FDArray;var E=[];for(r=t.CFF.readIndex(s,r,E),_.FDArray=[],d=0;d<E.length-1;d++){var R=t.CFF.readDict(s,r+E[d],r+E[d+1]);t.CFF._readFDict(s,R,M),_.FDArray.push(R)}r+=E[E.length-1],r=_.FDSelect,_.FDSelect=[];var N=s[r];if(r++,N!=3)throw N;var P=o.readUshort(s,r);for(r+=2,d=0;d<P+1;d++)_.FDSelect.push(o.readUshort(s,r),s[r+2]),r+=3}return _.Encoding&&(_.Encoding=t.CFF.readEncoding(s,_.Encoding,_.CharStrings.length)),_.charset&&(_.charset=t.CFF.readCharset(s,_.charset,_.CharStrings.length)),t.CFF._readFDict(s,_,M),_},t.CFF._readFDict=function(s,r,a){var o;for(var c in r.Private&&(o=r.Private[1],r.Private=t.CFF.readDict(s,o,o+r.Private[0]),r.Private.Subrs&&t.CFF.readSubrs(s,o+r.Private.Subrs,r.Private)),r)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(c)!=-1&&(r[c]=a[r[c]-426+35])},t.CFF.readSubrs=function(s,r,a){var o=t._bin,c=[];r=t.CFF.readIndex(s,r,c);var u,d=c.length;u=d<1240?107:d<33900?1131:32768,a.Bias=u,a.Subrs=[];for(var g=0;g<c.length-1;g++)a.Subrs.push(o.readBytes(s,r+c[g],c[g+1]-c[g]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(s,r){for(var a=0;a<s.charset.length;a++)if(s.charset[a]==r)return a;return-1},t.CFF.glyphBySE=function(s,r){return r<0||r>255?-1:t.CFF.glyphByUnicode(s,t.CFF.tableSE[r])},t.CFF.readEncoding=function(s,r,a){t._bin;var o=[".notdef"],c=s[r];if(r++,c!=0)throw"error: unknown encoding format: "+c;var u=s[r];r++;for(var d=0;d<u;d++)o.push(s[r+d]);return o},t.CFF.readCharset=function(s,r,a){var o=t._bin,c=[".notdef"],u=s[r];if(r++,u==0)for(var d=0;d<a;d++){var g=o.readUshort(s,r);r+=2,c.push(g)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;c.length<a;){g=o.readUshort(s,r),r+=2;var y=0;for(u==1?(y=s[r],r++):(y=o.readUshort(s,r),r+=2),d=0;d<=y;d++)c.push(g),g++}}return c},t.CFF.readIndex=function(s,r,a){var o=t._bin,c=o.readUshort(s,r)+1,u=s[r+=2];if(r++,u==1)for(var d=0;d<c;d++)a.push(s[r+d]);else if(u==2)for(d=0;d<c;d++)a.push(o.readUshort(s,r+2*d));else if(u==3)for(d=0;d<c;d++)a.push(16777215&o.readUint(s,r+3*d-1));else if(c!=1)throw"unsupported offset size: "+u+", count: "+c;return(r+=c*u)-1},t.CFF.getCharString=function(s,r,a){var o=t._bin,c=s[r],u=s[r+1];s[r+2],s[r+3],s[r+4];var d=1,g=null,y=null;c<=20&&(g=c,d=1),c==12&&(g=100*c+u,d=2),21<=c&&c<=27&&(g=c,d=1),c==28&&(y=o.readShort(s,r+1),d=3),29<=c&&c<=31&&(g=c,d=1),32<=c&&c<=246&&(y=c-139,d=1),247<=c&&c<=250&&(y=256*(c-247)+u+108,d=2),251<=c&&c<=254&&(y=256*-(c-251)-u-108,d=2),c==255&&(y=o.readInt(s,r+1)/65535,d=5),a.val=y??"o"+g,a.size=d},t.CFF.readCharString=function(s,r,a){for(var o=r+a,c=t._bin,u=[];r<o;){var d=s[r],g=s[r+1];s[r+2],s[r+3],s[r+4];var y=1,_=null,b=null;d<=20&&(_=d,y=1),d==12&&(_=100*d+g,y=2),d!=19&&d!=20||(_=d,y=2),21<=d&&d<=27&&(_=d,y=1),d==28&&(b=c.readShort(s,r+1),y=3),29<=d&&d<=31&&(_=d,y=1),32<=d&&d<=246&&(b=d-139,y=1),247<=d&&d<=250&&(b=256*(d-247)+g+108,y=2),251<=d&&d<=254&&(b=256*-(d-251)-g-108,y=2),d==255&&(b=c.readInt(s,r+1)/65535,y=5),u.push(b??"o"+_),r+=y}return u},t.CFF.readDict=function(s,r,a){for(var o=t._bin,c={},u=[];r<a;){var d=s[r],g=s[r+1];s[r+2],s[r+3],s[r+4];var y=1,_=null,b=null;if(d==28&&(b=o.readShort(s,r+1),y=3),d==29&&(b=o.readInt(s,r+1),y=5),32<=d&&d<=246&&(b=d-139,y=1),247<=d&&d<=250&&(b=256*(d-247)+g+108,y=2),251<=d&&d<=254&&(b=256*-(d-251)-g-108,y=2),d==255)throw b=o.readInt(s,r+1)/65535,y=5,"unknown number";if(d==30){var M=[];for(y=1;;){var S=s[r+y];y++;var E=S>>4,R=15&S;if(E!=15&&M.push(E),R!=15&&M.push(R),R==15)break}for(var N="",P=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],k=0;k<M.length;k++)N+=P[M[k]];b=parseFloat(N)}d<=21&&(_=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][d],y=1,d==12&&(_=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][g],y=2)),_!=null?(c[_]=u.length==1?u[0]:u,u=[]):u.push(b),r+=y}return c},t.cmap={},t.cmap.parse=function(s,r,a){s=new Uint8Array(s.buffer,r,a),r=0;var o=t._bin,c={};o.readUshort(s,r),r+=2;var u=o.readUshort(s,r);r+=2;var d=[];c.tables=[];for(var g=0;g<u;g++){var y=o.readUshort(s,r);r+=2;var _=o.readUshort(s,r);r+=2;var b=o.readUint(s,r);r+=4;var M="p"+y+"e"+_,S=d.indexOf(b);if(S==-1){var E;S=c.tables.length,d.push(b);var R=o.readUshort(s,b);R==0?E=t.cmap.parse0(s,b):R==4?E=t.cmap.parse4(s,b):R==6?E=t.cmap.parse6(s,b):R==12?E=t.cmap.parse12(s,b):console.debug("unknown format: "+R,y,_,b),c.tables.push(E)}if(c[M]!=null)throw"multiple tables for one platform+encoding";c[M]=S}return c},t.cmap.parse0=function(s,r){var a=t._bin,o={};o.format=a.readUshort(s,r),r+=2;var c=a.readUshort(s,r);r+=2,a.readUshort(s,r),r+=2,o.map=[];for(var u=0;u<c-6;u++)o.map.push(s[r+u]);return o},t.cmap.parse4=function(s,r){var a=t._bin,o=r,c={};c.format=a.readUshort(s,r),r+=2;var u=a.readUshort(s,r);r+=2,a.readUshort(s,r),r+=2;var d=a.readUshort(s,r);r+=2;var g=d/2;c.searchRange=a.readUshort(s,r),r+=2,c.entrySelector=a.readUshort(s,r),r+=2,c.rangeShift=a.readUshort(s,r),r+=2,c.endCount=a.readUshorts(s,r,g),r+=2*g,r+=2,c.startCount=a.readUshorts(s,r,g),r+=2*g,c.idDelta=[];for(var y=0;y<g;y++)c.idDelta.push(a.readShort(s,r)),r+=2;for(c.idRangeOffset=a.readUshorts(s,r,g),r+=2*g,c.glyphIdArray=[];r<o+u;)c.glyphIdArray.push(a.readUshort(s,r)),r+=2;return c},t.cmap.parse6=function(s,r){var a=t._bin,o={};o.format=a.readUshort(s,r),r+=2,a.readUshort(s,r),r+=2,a.readUshort(s,r),r+=2,o.firstCode=a.readUshort(s,r),r+=2;var c=a.readUshort(s,r);r+=2,o.glyphIdArray=[];for(var u=0;u<c;u++)o.glyphIdArray.push(a.readUshort(s,r)),r+=2;return o},t.cmap.parse12=function(s,r){var a=t._bin,o={};o.format=a.readUshort(s,r),r+=2,r+=2,a.readUint(s,r),r+=4,a.readUint(s,r),r+=4;var c=a.readUint(s,r);r+=4,o.groups=[];for(var u=0;u<c;u++){var d=r+12*u,g=a.readUint(s,d+0),y=a.readUint(s,d+4),_=a.readUint(s,d+8);o.groups.push([g,y,_])}return o},t.glyf={},t.glyf.parse=function(s,r,a,o){for(var c=[],u=0;u<o.maxp.numGlyphs;u++)c.push(null);return c},t.glyf._parseGlyf=function(s,r){var a=t._bin,o=s._data,c=t._tabOffset(o,"glyf",s._offset)+s.loca[r];if(s.loca[r]==s.loca[r+1])return null;var u={};if(u.noc=a.readShort(o,c),c+=2,u.xMin=a.readShort(o,c),c+=2,u.yMin=a.readShort(o,c),c+=2,u.xMax=a.readShort(o,c),c+=2,u.yMax=a.readShort(o,c),c+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var d=0;d<u.noc;d++)u.endPts.push(a.readUshort(o,c)),c+=2;var g=a.readUshort(o,c);if(c+=2,o.length-c<g)return null;u.instructions=a.readBytes(o,c,g),c+=g;var y=u.endPts[u.noc-1]+1;for(u.flags=[],d=0;d<y;d++){var _=o[c];if(c++,u.flags.push(_),(8&_)!=0){var b=o[c];c++;for(var M=0;M<b;M++)u.flags.push(_),d++}}for(u.xs=[],d=0;d<y;d++){var S=(2&u.flags[d])!=0,E=(16&u.flags[d])!=0;S?(u.xs.push(E?o[c]:-o[c]),c++):E?u.xs.push(0):(u.xs.push(a.readShort(o,c)),c+=2)}for(u.ys=[],d=0;d<y;d++)S=(4&u.flags[d])!=0,E=(32&u.flags[d])!=0,S?(u.ys.push(E?o[c]:-o[c]),c++):E?u.ys.push(0):(u.ys.push(a.readShort(o,c)),c+=2);var R=0,N=0;for(d=0;d<y;d++)R+=u.xs[d],N+=u.ys[d],u.xs[d]=R,u.ys[d]=N}else{var P;u.parts=[];do{P=a.readUshort(o,c),c+=2;var k={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(k),k.glyphIndex=a.readUshort(o,c),c+=2,1&P){var z=a.readShort(o,c);c+=2;var L=a.readShort(o,c);c+=2}else z=a.readInt8(o,c),c++,L=a.readInt8(o,c),c++;2&P?(k.m.tx=z,k.m.ty=L):(k.p1=z,k.p2=L),8&P?(k.m.a=k.m.d=a.readF2dot14(o,c),c+=2):64&P?(k.m.a=a.readF2dot14(o,c),c+=2,k.m.d=a.readF2dot14(o,c),c+=2):128&P&&(k.m.a=a.readF2dot14(o,c),c+=2,k.m.b=a.readF2dot14(o,c),c+=2,k.m.c=a.readF2dot14(o,c),c+=2,k.m.d=a.readF2dot14(o,c),c+=2)}while(32&P);if(256&P){var U=a.readUshort(o,c);for(c+=2,u.instr=[],d=0;d<U;d++)u.instr.push(o[c]),c++}}return u},t.GDEF={},t.GDEF.parse=function(s,r,a,o){var c=r;r+=4;var u=t._bin.readUshort(s,r);return{glyphClassDef:u===0?null:t._lctf.readClassDef(s,c+u)}},t.GPOS={},t.GPOS.parse=function(s,r,a,o){return t._lctf.parse(s,r,a,o,t.GPOS.subt)},t.GPOS.subt=function(s,r,a,o){var c=t._bin,u=a,d={};if(d.fmt=c.readUshort(s,a),a+=2,r==1||r==2||r==3||r==7||r==8&&d.fmt<=2){var g=c.readUshort(s,a);a+=2,d.coverage=t._lctf.readCoverage(s,g+u)}if(r==1&&d.fmt==1){var y=c.readUshort(s,a);a+=2,y!=0&&(d.pos=t.GPOS.readValueRecord(s,a,y))}else if(r==2&&d.fmt>=1&&d.fmt<=2){y=c.readUshort(s,a),a+=2;var _=c.readUshort(s,a);a+=2;var b=t._lctf.numOfOnes(y),M=t._lctf.numOfOnes(_);if(d.fmt==1){d.pairsets=[];var S=c.readUshort(s,a);a+=2;for(var E=0;E<S;E++){var R=u+c.readUshort(s,a);a+=2;var N=c.readUshort(s,R);R+=2;for(var P=[],k=0;k<N;k++){var z=c.readUshort(s,R);R+=2,y!=0&&(H=t.GPOS.readValueRecord(s,R,y),R+=2*b),_!=0&&(G=t.GPOS.readValueRecord(s,R,_),R+=2*M),P.push({gid2:z,val1:H,val2:G})}d.pairsets.push(P)}}if(d.fmt==2){var L=c.readUshort(s,a);a+=2;var U=c.readUshort(s,a);a+=2;var D=c.readUshort(s,a);a+=2;var O=c.readUshort(s,a);for(a+=2,d.classDef1=t._lctf.readClassDef(s,u+L),d.classDef2=t._lctf.readClassDef(s,u+U),d.matrix=[],E=0;E<D;E++){var F=[];for(k=0;k<O;k++){var H=null,G=null;y!=0&&(H=t.GPOS.readValueRecord(s,a,y),a+=2*b),_!=0&&(G=t.GPOS.readValueRecord(s,a,_),a+=2*M),F.push({val1:H,val2:G})}d.matrix.push(F)}}}else if(r==4&&d.fmt==1)d.markCoverage=t._lctf.readCoverage(s,c.readUshort(s,a)+u),d.baseCoverage=t._lctf.readCoverage(s,c.readUshort(s,a+2)+u),d.markClassCount=c.readUshort(s,a+4),d.markArray=t.GPOS.readMarkArray(s,c.readUshort(s,a+6)+u),d.baseArray=t.GPOS.readBaseArray(s,c.readUshort(s,a+8)+u,d.markClassCount);else if(r==6&&d.fmt==1)d.mark1Coverage=t._lctf.readCoverage(s,c.readUshort(s,a)+u),d.mark2Coverage=t._lctf.readCoverage(s,c.readUshort(s,a+2)+u),d.markClassCount=c.readUshort(s,a+4),d.mark1Array=t.GPOS.readMarkArray(s,c.readUshort(s,a+6)+u),d.mark2Array=t.GPOS.readBaseArray(s,c.readUshort(s,a+8)+u,d.markClassCount);else{if(r==9&&d.fmt==1){var it=c.readUshort(s,a);a+=2;var lt=c.readUint(s,a);if(a+=4,o.ltype==9)o.ltype=it;else if(o.ltype!=it)throw"invalid extension substitution";return t.GPOS.subt(s,o.ltype,u+lt)}console.debug("unsupported GPOS table LookupType",r,"format",d.fmt)}return d},t.GPOS.readValueRecord=function(s,r,a){var o=t._bin,c=[];return c.push(1&a?o.readShort(s,r):0),r+=1&a?2:0,c.push(2&a?o.readShort(s,r):0),r+=2&a?2:0,c.push(4&a?o.readShort(s,r):0),r+=4&a?2:0,c.push(8&a?o.readShort(s,r):0),r+=8&a?2:0,c},t.GPOS.readBaseArray=function(s,r,a){var o=t._bin,c=[],u=r,d=o.readUshort(s,r);r+=2;for(var g=0;g<d;g++){for(var y=[],_=0;_<a;_++)y.push(t.GPOS.readAnchorRecord(s,u+o.readUshort(s,r))),r+=2;c.push(y)}return c},t.GPOS.readMarkArray=function(s,r){var a=t._bin,o=[],c=r,u=a.readUshort(s,r);r+=2;for(var d=0;d<u;d++){var g=t.GPOS.readAnchorRecord(s,a.readUshort(s,r+2)+c);g.markClass=a.readUshort(s,r),o.push(g),r+=4}return o},t.GPOS.readAnchorRecord=function(s,r){var a=t._bin,o={};return o.fmt=a.readUshort(s,r),o.x=a.readShort(s,r+2),o.y=a.readShort(s,r+4),o},t.GSUB={},t.GSUB.parse=function(s,r,a,o){return t._lctf.parse(s,r,a,o,t.GSUB.subt)},t.GSUB.subt=function(s,r,a,o){var c=t._bin,u=a,d={};if(d.fmt=c.readUshort(s,a),a+=2,r!=1&&r!=2&&r!=4&&r!=5&&r!=6)return null;if(r==1||r==2||r==4||r==5&&d.fmt<=2||r==6&&d.fmt<=2){var g=c.readUshort(s,a);a+=2,d.coverage=t._lctf.readCoverage(s,u+g)}if(r==1&&d.fmt>=1&&d.fmt<=2){if(d.fmt==1)d.delta=c.readShort(s,a),a+=2;else if(d.fmt==2){var y=c.readUshort(s,a);a+=2,d.newg=c.readUshorts(s,a,y),a+=2*d.newg.length}}else if(r==2&&d.fmt==1){y=c.readUshort(s,a),a+=2,d.seqs=[];for(var _=0;_<y;_++){var b=c.readUshort(s,a)+u;a+=2;var M=c.readUshort(s,b);d.seqs.push(c.readUshorts(s,b+2,M))}}else if(r==4)for(d.vals=[],y=c.readUshort(s,a),a+=2,_=0;_<y;_++){var S=c.readUshort(s,a);a+=2,d.vals.push(t.GSUB.readLigatureSet(s,u+S))}else if(r==5&&d.fmt==2){if(d.fmt==2){var E=c.readUshort(s,a);a+=2,d.cDef=t._lctf.readClassDef(s,u+E),d.scset=[];var R=c.readUshort(s,a);for(a+=2,_=0;_<R;_++){var N=c.readUshort(s,a);a+=2,d.scset.push(N==0?null:t.GSUB.readSubClassSet(s,u+N))}}}else if(r==6&&d.fmt==3){if(d.fmt==3){for(_=0;_<3;_++){y=c.readUshort(s,a),a+=2;for(var P=[],k=0;k<y;k++)P.push(t._lctf.readCoverage(s,u+c.readUshort(s,a+2*k)));a+=2*y,_==0&&(d.backCvg=P),_==1&&(d.inptCvg=P),_==2&&(d.ahedCvg=P)}y=c.readUshort(s,a),a+=2,d.lookupRec=t.GSUB.readSubstLookupRecords(s,a,y)}}else{if(r==7&&d.fmt==1){var z=c.readUshort(s,a);a+=2;var L=c.readUint(s,a);if(a+=4,o.ltype==9)o.ltype=z;else if(o.ltype!=z)throw"invalid extension substitution";return t.GSUB.subt(s,o.ltype,u+L)}console.debug("unsupported GSUB table LookupType",r,"format",d.fmt)}return d},t.GSUB.readSubClassSet=function(s,r){var a=t._bin.readUshort,o=r,c=[],u=a(s,r);r+=2;for(var d=0;d<u;d++){var g=a(s,r);r+=2,c.push(t.GSUB.readSubClassRule(s,o+g))}return c},t.GSUB.readSubClassRule=function(s,r){var a=t._bin.readUshort,o={},c=a(s,r),u=a(s,r+=2);r+=2,o.input=[];for(var d=0;d<c-1;d++)o.input.push(a(s,r)),r+=2;return o.substLookupRecords=t.GSUB.readSubstLookupRecords(s,r,u),o},t.GSUB.readSubstLookupRecords=function(s,r,a){for(var o=t._bin.readUshort,c=[],u=0;u<a;u++)c.push(o(s,r),o(s,r+2)),r+=4;return c},t.GSUB.readChainSubClassSet=function(s,r){var a=t._bin,o=r,c=[],u=a.readUshort(s,r);r+=2;for(var d=0;d<u;d++){var g=a.readUshort(s,r);r+=2,c.push(t.GSUB.readChainSubClassRule(s,o+g))}return c},t.GSUB.readChainSubClassRule=function(s,r){for(var a=t._bin,o={},c=["backtrack","input","lookahead"],u=0;u<c.length;u++){var d=a.readUshort(s,r);r+=2,u==1&&d--,o[c[u]]=a.readUshorts(s,r,d),r+=2*o[c[u]].length}return d=a.readUshort(s,r),r+=2,o.subst=a.readUshorts(s,r,2*d),r+=2*o.subst.length,o},t.GSUB.readLigatureSet=function(s,r){var a=t._bin,o=r,c=[],u=a.readUshort(s,r);r+=2;for(var d=0;d<u;d++){var g=a.readUshort(s,r);r+=2,c.push(t.GSUB.readLigature(s,o+g))}return c},t.GSUB.readLigature=function(s,r){var a=t._bin,o={chain:[]};o.nglyph=a.readUshort(s,r),r+=2;var c=a.readUshort(s,r);r+=2;for(var u=0;u<c-1;u++)o.chain.push(a.readUshort(s,r)),r+=2;return o},t.head={},t.head.parse=function(s,r,a){var o=t._bin,c={};return o.readFixed(s,r),r+=4,c.fontRevision=o.readFixed(s,r),r+=4,o.readUint(s,r),r+=4,o.readUint(s,r),r+=4,c.flags=o.readUshort(s,r),r+=2,c.unitsPerEm=o.readUshort(s,r),r+=2,c.created=o.readUint64(s,r),r+=8,c.modified=o.readUint64(s,r),r+=8,c.xMin=o.readShort(s,r),r+=2,c.yMin=o.readShort(s,r),r+=2,c.xMax=o.readShort(s,r),r+=2,c.yMax=o.readShort(s,r),r+=2,c.macStyle=o.readUshort(s,r),r+=2,c.lowestRecPPEM=o.readUshort(s,r),r+=2,c.fontDirectionHint=o.readShort(s,r),r+=2,c.indexToLocFormat=o.readShort(s,r),r+=2,c.glyphDataFormat=o.readShort(s,r),r+=2,c},t.hhea={},t.hhea.parse=function(s,r,a){var o=t._bin,c={};return o.readFixed(s,r),r+=4,c.ascender=o.readShort(s,r),r+=2,c.descender=o.readShort(s,r),r+=2,c.lineGap=o.readShort(s,r),r+=2,c.advanceWidthMax=o.readUshort(s,r),r+=2,c.minLeftSideBearing=o.readShort(s,r),r+=2,c.minRightSideBearing=o.readShort(s,r),r+=2,c.xMaxExtent=o.readShort(s,r),r+=2,c.caretSlopeRise=o.readShort(s,r),r+=2,c.caretSlopeRun=o.readShort(s,r),r+=2,c.caretOffset=o.readShort(s,r),r+=2,r+=8,c.metricDataFormat=o.readShort(s,r),r+=2,c.numberOfHMetrics=o.readUshort(s,r),r+=2,c},t.hmtx={},t.hmtx.parse=function(s,r,a,o){for(var c=t._bin,u={aWidth:[],lsBearing:[]},d=0,g=0,y=0;y<o.maxp.numGlyphs;y++)y<o.hhea.numberOfHMetrics&&(d=c.readUshort(s,r),r+=2,g=c.readShort(s,r),r+=2),u.aWidth.push(d),u.lsBearing.push(g);return u},t.kern={},t.kern.parse=function(s,r,a,o){var c=t._bin,u=c.readUshort(s,r);if(r+=2,u==1)return t.kern.parseV1(s,r-2,a,o);var d=c.readUshort(s,r);r+=2;for(var g={glyph1:[],rval:[]},y=0;y<d;y++){r+=2,a=c.readUshort(s,r),r+=2;var _=c.readUshort(s,r);r+=2;var b=_>>>8;if((b&=15)!=0)throw"unknown kern table format: "+b;r=t.kern.readFormat0(s,r,g)}return g},t.kern.parseV1=function(s,r,a,o){var c=t._bin;c.readFixed(s,r),r+=4;var u=c.readUint(s,r);r+=4;for(var d={glyph1:[],rval:[]},g=0;g<u;g++){c.readUint(s,r),r+=4;var y=c.readUshort(s,r);r+=2,c.readUshort(s,r),r+=2;var _=y>>>8;if((_&=15)!=0)throw"unknown kern table format: "+_;r=t.kern.readFormat0(s,r,d)}return d},t.kern.readFormat0=function(s,r,a){var o=t._bin,c=-1,u=o.readUshort(s,r);r+=2,o.readUshort(s,r),r+=2,o.readUshort(s,r),r+=2,o.readUshort(s,r),r+=2;for(var d=0;d<u;d++){var g=o.readUshort(s,r);r+=2;var y=o.readUshort(s,r);r+=2;var _=o.readShort(s,r);r+=2,g!=c&&(a.glyph1.push(g),a.rval.push({glyph2:[],vals:[]}));var b=a.rval[a.rval.length-1];b.glyph2.push(y),b.vals.push(_),c=g}return r},t.loca={},t.loca.parse=function(s,r,a,o){var c=t._bin,u=[],d=o.head.indexToLocFormat,g=o.maxp.numGlyphs+1;if(d==0)for(var y=0;y<g;y++)u.push(c.readUshort(s,r+(y<<1))<<1);if(d==1)for(y=0;y<g;y++)u.push(c.readUint(s,r+(y<<2)));return u},t.maxp={},t.maxp.parse=function(s,r,a){var o=t._bin,c={},u=o.readUint(s,r);return r+=4,c.numGlyphs=o.readUshort(s,r),r+=2,u==65536&&(c.maxPoints=o.readUshort(s,r),r+=2,c.maxContours=o.readUshort(s,r),r+=2,c.maxCompositePoints=o.readUshort(s,r),r+=2,c.maxCompositeContours=o.readUshort(s,r),r+=2,c.maxZones=o.readUshort(s,r),r+=2,c.maxTwilightPoints=o.readUshort(s,r),r+=2,c.maxStorage=o.readUshort(s,r),r+=2,c.maxFunctionDefs=o.readUshort(s,r),r+=2,c.maxInstructionDefs=o.readUshort(s,r),r+=2,c.maxStackElements=o.readUshort(s,r),r+=2,c.maxSizeOfInstructions=o.readUshort(s,r),r+=2,c.maxComponentElements=o.readUshort(s,r),r+=2,c.maxComponentDepth=o.readUshort(s,r),r+=2),c},t.name={},t.name.parse=function(s,r,a){var o=t._bin,c={};o.readUshort(s,r),r+=2;var u=o.readUshort(s,r);r+=2,o.readUshort(s,r);for(var d,g=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],y=r+=2,_=0;_<u;_++){var b=o.readUshort(s,r);r+=2;var M=o.readUshort(s,r);r+=2;var S=o.readUshort(s,r);r+=2;var E=o.readUshort(s,r);r+=2;var R=o.readUshort(s,r);r+=2;var N=o.readUshort(s,r);r+=2;var P,k=g[E],z=y+12*u+N;if(b==0)P=o.readUnicode(s,z,R/2);else if(b==3&&M==0)P=o.readUnicode(s,z,R/2);else if(M==0)P=o.readASCII(s,z,R);else if(M==1)P=o.readUnicode(s,z,R/2);else if(M==3)P=o.readUnicode(s,z,R/2);else{if(b!=1)throw"unknown encoding "+M+", platformID: "+b;P=o.readASCII(s,z,R),console.debug("reading unknown MAC encoding "+M+" as ASCII")}var L="p"+b+","+S.toString(16);c[L]==null&&(c[L]={}),c[L][k!==void 0?k:E]=P,c[L]._lang=S}for(var U in c)if(c[U].postScriptName!=null&&c[U]._lang==1033)return c[U];for(var U in c)if(c[U].postScriptName!=null&&c[U]._lang==0)return c[U];for(var U in c)if(c[U].postScriptName!=null&&c[U]._lang==3084)return c[U];for(var U in c)if(c[U].postScriptName!=null)return c[U];for(var U in c){d=U;break}return console.debug("returning name table with languageID "+c[d]._lang),c[d]},t["OS/2"]={},t["OS/2"].parse=function(s,r,a){var o=t._bin.readUshort(s,r);r+=2;var c={};if(o==0)t["OS/2"].version0(s,r,c);else if(o==1)t["OS/2"].version1(s,r,c);else if(o==2||o==3||o==4)t["OS/2"].version2(s,r,c);else{if(o!=5)throw"unknown OS/2 table version: "+o;t["OS/2"].version5(s,r,c)}return c},t["OS/2"].version0=function(s,r,a){var o=t._bin;return a.xAvgCharWidth=o.readShort(s,r),r+=2,a.usWeightClass=o.readUshort(s,r),r+=2,a.usWidthClass=o.readUshort(s,r),r+=2,a.fsType=o.readUshort(s,r),r+=2,a.ySubscriptXSize=o.readShort(s,r),r+=2,a.ySubscriptYSize=o.readShort(s,r),r+=2,a.ySubscriptXOffset=o.readShort(s,r),r+=2,a.ySubscriptYOffset=o.readShort(s,r),r+=2,a.ySuperscriptXSize=o.readShort(s,r),r+=2,a.ySuperscriptYSize=o.readShort(s,r),r+=2,a.ySuperscriptXOffset=o.readShort(s,r),r+=2,a.ySuperscriptYOffset=o.readShort(s,r),r+=2,a.yStrikeoutSize=o.readShort(s,r),r+=2,a.yStrikeoutPosition=o.readShort(s,r),r+=2,a.sFamilyClass=o.readShort(s,r),r+=2,a.panose=o.readBytes(s,r,10),r+=10,a.ulUnicodeRange1=o.readUint(s,r),r+=4,a.ulUnicodeRange2=o.readUint(s,r),r+=4,a.ulUnicodeRange3=o.readUint(s,r),r+=4,a.ulUnicodeRange4=o.readUint(s,r),r+=4,a.achVendID=[o.readInt8(s,r),o.readInt8(s,r+1),o.readInt8(s,r+2),o.readInt8(s,r+3)],r+=4,a.fsSelection=o.readUshort(s,r),r+=2,a.usFirstCharIndex=o.readUshort(s,r),r+=2,a.usLastCharIndex=o.readUshort(s,r),r+=2,a.sTypoAscender=o.readShort(s,r),r+=2,a.sTypoDescender=o.readShort(s,r),r+=2,a.sTypoLineGap=o.readShort(s,r),r+=2,a.usWinAscent=o.readUshort(s,r),r+=2,a.usWinDescent=o.readUshort(s,r),r+=2},t["OS/2"].version1=function(s,r,a){var o=t._bin;return r=t["OS/2"].version0(s,r,a),a.ulCodePageRange1=o.readUint(s,r),r+=4,a.ulCodePageRange2=o.readUint(s,r),r+=4},t["OS/2"].version2=function(s,r,a){var o=t._bin;return r=t["OS/2"].version1(s,r,a),a.sxHeight=o.readShort(s,r),r+=2,a.sCapHeight=o.readShort(s,r),r+=2,a.usDefault=o.readUshort(s,r),r+=2,a.usBreak=o.readUshort(s,r),r+=2,a.usMaxContext=o.readUshort(s,r),r+=2},t["OS/2"].version5=function(s,r,a){var o=t._bin;return r=t["OS/2"].version2(s,r,a),a.usLowerOpticalPointSize=o.readUshort(s,r),r+=2,a.usUpperOpticalPointSize=o.readUshort(s,r),r+=2},t.post={},t.post.parse=function(s,r,a){var o=t._bin,c={};return c.version=o.readFixed(s,r),r+=4,c.italicAngle=o.readFixed(s,r),r+=4,c.underlinePosition=o.readShort(s,r),r+=2,c.underlineThickness=o.readShort(s,r),r+=2,c},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(s,r){var a=s.cmap,o=-1;if(a.p0e4!=null?o=a.p0e4:a.p3e1!=null?o=a.p3e1:a.p1e0!=null?o=a.p1e0:a.p0e3!=null&&(o=a.p0e3),o==-1)throw"no familiar platform and encoding!";var c=a.tables[o];if(c.format==0)return r>=c.map.length?0:c.map[r];if(c.format==4){for(var u=-1,d=0;d<c.endCount.length;d++)if(r<=c.endCount[d]){u=d;break}return u==-1||c.startCount[u]>r?0:65535&(c.idRangeOffset[u]!=0?c.glyphIdArray[r-c.startCount[u]+(c.idRangeOffset[u]>>1)-(c.idRangeOffset.length-u)]:r+c.idDelta[u])}if(c.format==12){if(r>c.groups[c.groups.length-1][1])return 0;for(d=0;d<c.groups.length;d++){var g=c.groups[d];if(g[0]<=r&&r<=g[1])return g[2]+(r-g[0])}return 0}throw"unknown cmap table format "+c.format},t.U.glyphToPath=function(s,r){var a={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[r]){var o=s.SVG.entries[r];return o==null?a:(typeof o=="string"&&(o=t.SVG.toPath(o),s.SVG.entries[r]=o),o)}if(s.CFF){var c={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},u=s.CFF,d=s.CFF.Private;if(u.ROS){for(var g=0;u.FDSelect[g+2]<=r;)g+=2;d=u.FDArray[u.FDSelect[g+1]].Private}t.U._drawCFF(s.CFF.CharStrings[r],c,u,d,a)}else s.glyf&&t.U._drawGlyf(r,s,a);return a},t.U._drawGlyf=function(s,r,a){var o=r.glyf[s];o==null&&(o=r.glyf[s]=t.glyf._parseGlyf(r,s)),o!=null&&(o.noc>-1?t.U._simpleGlyph(o,a):t.U._compoGlyph(o,r,a))},t.U._simpleGlyph=function(s,r){for(var a=0;a<s.noc;a++){for(var o=a==0?0:s.endPts[a-1]+1,c=s.endPts[a],u=o;u<=c;u++){var d=u==o?c:u-1,g=u==c?o:u+1,y=1&s.flags[u],_=1&s.flags[d],b=1&s.flags[g],M=s.xs[u],S=s.ys[u];if(u==o)if(y){if(!_){t.U.P.moveTo(r,M,S);continue}t.U.P.moveTo(r,s.xs[d],s.ys[d])}else _?t.U.P.moveTo(r,s.xs[d],s.ys[d]):t.U.P.moveTo(r,(s.xs[d]+M)/2,(s.ys[d]+S)/2);y?_&&t.U.P.lineTo(r,M,S):b?t.U.P.qcurveTo(r,M,S,s.xs[g],s.ys[g]):t.U.P.qcurveTo(r,M,S,(M+s.xs[g])/2,(S+s.ys[g])/2)}t.U.P.closePath(r)}},t.U._compoGlyph=function(s,r,a){for(var o=0;o<s.parts.length;o++){var c={cmds:[],crds:[]},u=s.parts[o];t.U._drawGlyf(u.glyphIndex,r,c);for(var d=u.m,g=0;g<c.crds.length;g+=2){var y=c.crds[g],_=c.crds[g+1];a.crds.push(y*d.a+_*d.b+d.tx),a.crds.push(y*d.c+_*d.d+d.ty)}for(g=0;g<c.cmds.length;g++)a.cmds.push(c.cmds[g])}},t.U._getGlyphClass=function(s,r){var a=t._lctf.getInterval(r,s);return a==-1?0:r[a+2]},t.U._applySubs=function(s,r,a,o){for(var c=s.length-r-1,u=0;u<a.tabs.length;u++)if(a.tabs[u]!=null){var d,g=a.tabs[u];if(!g.coverage||(d=t._lctf.coverageIndex(g.coverage,s[r]))!=-1){if(a.ltype==1)s[r],g.fmt==1?s[r]=s[r]+g.delta:s[r]=g.newg[d];else if(a.ltype==4)for(var y=g.vals[d],_=0;_<y.length;_++){var b=y[_],M=b.chain.length;if(!(M>c)){for(var S=!0,E=0,R=0;R<M;R++){for(;s[r+E+(1+R)]==-1;)E++;b.chain[R]!=s[r+E+(1+R)]&&(S=!1)}if(S){for(s[r]=b.nglyph,R=0;R<M+E;R++)s[r+R+1]=-1;break}}}else if(a.ltype==5&&g.fmt==2)for(var N=t._lctf.getInterval(g.cDef,s[r]),P=g.cDef[N+2],k=g.scset[P],z=0;z<k.length;z++){var L=k[z],U=L.input;if(!(U.length>c)){for(S=!0,R=0;R<U.length;R++){var D=t._lctf.getInterval(g.cDef,s[r+1+R]);if(N==-1&&g.cDef[D+2]!=U[R]){S=!1;break}}if(S){var O=L.substLookupRecords;for(_=0;_<O.length;_+=2)O[_],O[_+1]}}}else if(a.ltype==6&&g.fmt==3){if(!t.U._glsCovered(s,g.backCvg,r-g.backCvg.length)||!t.U._glsCovered(s,g.inptCvg,r)||!t.U._glsCovered(s,g.ahedCvg,r+g.inptCvg.length))continue;var F=g.lookupRec;for(z=0;z<F.length;z+=2){N=F[z];var H=o[F[z+1]];t.U._applySubs(s,r+N,H,o)}}}}},t.U._glsCovered=function(s,r,a){for(var o=0;o<r.length;o++)if(t._lctf.coverageIndex(r[o],s[a+o])==-1)return!1;return!0},t.U.glyphsToPath=function(s,r,a){for(var o={cmds:[],crds:[]},c=0,u=0;u<r.length;u++){var d=r[u];if(d!=-1){for(var g=u<r.length-1&&r[u+1]!=-1?r[u+1]:0,y=t.U.glyphToPath(s,d),_=0;_<y.crds.length;_+=2)o.crds.push(y.crds[_]+c),o.crds.push(y.crds[_+1]);for(a&&o.cmds.push(a),_=0;_<y.cmds.length;_++)o.cmds.push(y.cmds[_]);a&&o.cmds.push("X"),c+=s.hmtx.aWidth[d],u<r.length-1&&(c+=t.U.getPairAdjustment(s,d,g))}}return o},t.U.P={},t.U.P.moveTo=function(s,r,a){s.cmds.push("M"),s.crds.push(r,a)},t.U.P.lineTo=function(s,r,a){s.cmds.push("L"),s.crds.push(r,a)},t.U.P.curveTo=function(s,r,a,o,c,u,d){s.cmds.push("C"),s.crds.push(r,a,o,c,u,d)},t.U.P.qcurveTo=function(s,r,a,o,c){s.cmds.push("Q"),s.crds.push(r,a,o,c)},t.U.P.closePath=function(s){s.cmds.push("Z")},t.U._drawCFF=function(s,r,a,o,c){for(var u=r.stack,d=r.nStems,g=r.haveWidth,y=r.width,_=r.open,b=0,M=r.x,S=r.y,E=0,R=0,N=0,P=0,k=0,z=0,L=0,U=0,D=0,O=0,F={val:0,size:0};b<s.length;){t.CFF.getCharString(s,b,F);var H=F.val;if(b+=F.size,H=="o1"||H=="o18")u.length%2!=0&&!g&&(y=u.shift()+o.nominalWidthX),d+=u.length>>1,u.length=0,g=!0;else if(H=="o3"||H=="o23")u.length%2!=0&&!g&&(y=u.shift()+o.nominalWidthX),d+=u.length>>1,u.length=0,g=!0;else if(H=="o4")u.length>1&&!g&&(y=u.shift()+o.nominalWidthX,g=!0),_&&t.U.P.closePath(c),S+=u.pop(),t.U.P.moveTo(c,M,S),_=!0;else if(H=="o5")for(;u.length>0;)M+=u.shift(),S+=u.shift(),t.U.P.lineTo(c,M,S);else if(H=="o6"||H=="o7")for(var G=u.length,it=H=="o6",lt=0;lt<G;lt++){var j=u.shift();it?M+=j:S+=j,it=!it,t.U.P.lineTo(c,M,S)}else if(H=="o8"||H=="o24"){G=u.length;for(var J=0;J+6<=G;)E=M+u.shift(),R=S+u.shift(),N=E+u.shift(),P=R+u.shift(),M=N+u.shift(),S=P+u.shift(),t.U.P.curveTo(c,E,R,N,P,M,S),J+=6;H=="o24"&&(M+=u.shift(),S+=u.shift(),t.U.P.lineTo(c,M,S))}else{if(H=="o11")break;if(H=="o1234"||H=="o1235"||H=="o1236"||H=="o1237")H=="o1234"&&(R=S,N=(E=M+u.shift())+u.shift(),O=P=R+u.shift(),z=P,U=S,M=(L=(k=(D=N+u.shift())+u.shift())+u.shift())+u.shift(),t.U.P.curveTo(c,E,R,N,P,D,O),t.U.P.curveTo(c,k,z,L,U,M,S)),H=="o1235"&&(E=M+u.shift(),R=S+u.shift(),N=E+u.shift(),P=R+u.shift(),D=N+u.shift(),O=P+u.shift(),k=D+u.shift(),z=O+u.shift(),L=k+u.shift(),U=z+u.shift(),M=L+u.shift(),S=U+u.shift(),u.shift(),t.U.P.curveTo(c,E,R,N,P,D,O),t.U.P.curveTo(c,k,z,L,U,M,S)),H=="o1236"&&(E=M+u.shift(),R=S+u.shift(),N=E+u.shift(),O=P=R+u.shift(),z=P,L=(k=(D=N+u.shift())+u.shift())+u.shift(),U=z+u.shift(),M=L+u.shift(),t.U.P.curveTo(c,E,R,N,P,D,O),t.U.P.curveTo(c,k,z,L,U,M,S)),H=="o1237"&&(E=M+u.shift(),R=S+u.shift(),N=E+u.shift(),P=R+u.shift(),D=N+u.shift(),O=P+u.shift(),k=D+u.shift(),z=O+u.shift(),L=k+u.shift(),U=z+u.shift(),Math.abs(L-M)>Math.abs(U-S)?M=L+u.shift():S=U+u.shift(),t.U.P.curveTo(c,E,R,N,P,D,O),t.U.P.curveTo(c,k,z,L,U,M,S));else if(H=="o14"){if(u.length>0&&!g&&(y=u.shift()+a.nominalWidthX,g=!0),u.length==4){var $=u.shift(),at=u.shift(),Y=u.shift(),Z=u.shift(),rt=t.CFF.glyphBySE(a,Y),ft=t.CFF.glyphBySE(a,Z);t.U._drawCFF(a.CharStrings[rt],r,a,o,c),r.x=$,r.y=at,t.U._drawCFF(a.CharStrings[ft],r,a,o,c)}_&&(t.U.P.closePath(c),_=!1)}else if(H=="o19"||H=="o20")u.length%2!=0&&!g&&(y=u.shift()+o.nominalWidthX),d+=u.length>>1,u.length=0,g=!0,b+=d+7>>3;else if(H=="o21")u.length>2&&!g&&(y=u.shift()+o.nominalWidthX,g=!0),S+=u.pop(),M+=u.pop(),_&&t.U.P.closePath(c),t.U.P.moveTo(c,M,S),_=!0;else if(H=="o22")u.length>1&&!g&&(y=u.shift()+o.nominalWidthX,g=!0),M+=u.pop(),_&&t.U.P.closePath(c),t.U.P.moveTo(c,M,S),_=!0;else if(H=="o25"){for(;u.length>6;)M+=u.shift(),S+=u.shift(),t.U.P.lineTo(c,M,S);E=M+u.shift(),R=S+u.shift(),N=E+u.shift(),P=R+u.shift(),M=N+u.shift(),S=P+u.shift(),t.U.P.curveTo(c,E,R,N,P,M,S)}else if(H=="o26")for(u.length%2&&(M+=u.shift());u.length>0;)E=M,R=S+u.shift(),M=N=E+u.shift(),S=(P=R+u.shift())+u.shift(),t.U.P.curveTo(c,E,R,N,P,M,S);else if(H=="o27")for(u.length%2&&(S+=u.shift());u.length>0;)R=S,N=(E=M+u.shift())+u.shift(),P=R+u.shift(),M=N+u.shift(),S=P,t.U.P.curveTo(c,E,R,N,P,M,S);else if(H=="o10"||H=="o29"){var dt=H=="o10"?o:a;if(u.length==0)console.debug("error: empty stack");else{var _t=u.pop(),ut=dt.Subrs[_t+dt.Bias];r.x=M,r.y=S,r.nStems=d,r.haveWidth=g,r.width=y,r.open=_,t.U._drawCFF(ut,r,a,o,c),M=r.x,S=r.y,d=r.nStems,g=r.haveWidth,y=r.width,_=r.open}}else if(H=="o30"||H=="o31"){var gt=u.length,Tt=(J=0,H=="o31");for(J+=gt-(G=-3&gt);J<G;)Tt?(R=S,N=(E=M+u.shift())+u.shift(),S=(P=R+u.shift())+u.shift(),G-J==5?(M=N+u.shift(),J++):M=N,Tt=!1):(E=M,R=S+u.shift(),N=E+u.shift(),P=R+u.shift(),M=N+u.shift(),G-J==5?(S=P+u.shift(),J++):S=P,Tt=!0),t.U.P.curveTo(c,E,R,N,P,M,S),J+=4}else{if((H+"").charAt(0)=="o")throw console.debug("Unknown operation: "+H,s),H;u.push(H)}}}r.x=M,r.y=S,r.nStems=d,r.haveWidth=g,r.width=y,r.open=_};var e=t,n={Typr:e};return i.Typr=e,i.default=n,Object.defineProperty(i,"__esModule",{value:!0}),i})({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Pnt(){return(function(i){var t=Uint8Array,e=Uint16Array,n=Uint32Array,s=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(H,G){for(var it=new e(31),lt=0;lt<31;++lt)it[lt]=G+=1<<H[lt-1];var j=new n(it[30]);for(lt=1;lt<30;++lt)for(var J=it[lt];J<it[lt+1];++J)j[J]=J-it[lt]<<5|lt;return[it,j]},c=o(s,2),u=c[0],d=c[1];u[28]=258,d[258]=28;for(var g=o(r,0)[0],y=new e(32768),_=0;_<32768;++_){var b=(43690&_)>>>1|(21845&_)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,y[_]=((65280&b)>>>8|(255&b)<<8)>>>1}var M=function(H,G,it){for(var lt=H.length,j=0,J=new e(G);j<lt;++j)++J[H[j]-1];var $,at=new e(G);for(j=0;j<G;++j)at[j]=at[j-1]+J[j-1]<<1;{$=new e(1<<G);var Y=15-G;for(j=0;j<lt;++j)if(H[j])for(var Z=j<<4|H[j],rt=G-H[j],ft=at[H[j]-1]++<<rt,dt=ft|(1<<rt)-1;ft<=dt;++ft)$[y[ft]>>>Y]=Z}return $},S=new t(288);for(_=0;_<144;++_)S[_]=8;for(_=144;_<256;++_)S[_]=9;for(_=256;_<280;++_)S[_]=7;for(_=280;_<288;++_)S[_]=8;var E=new t(32);for(_=0;_<32;++_)E[_]=5;var R=M(S,9),N=M(E,5),P=function(H){for(var G=H[0],it=1;it<H.length;++it)H[it]>G&&(G=H[it]);return G},k=function(H,G,it){var lt=G/8|0;return(H[lt]|H[lt+1]<<8)>>(7&G)&it},z=function(H,G){var it=G/8|0;return(H[it]|H[it+1]<<8|H[it+2]<<16)>>(7&G)},L=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],U=function(H,G,it){var lt=new Error(G||L[H]);if(lt.code=H,Error.captureStackTrace&&Error.captureStackTrace(lt,U),!it)throw lt;return lt},D=function(H,G,it){var lt=H.length;if(!lt||it&&!it.l&&lt<5)return G||new t(0);var j=!G||it,J=!it||it.i;it||(it={}),G||(G=new t(3*lt));var $,at=function(re){var ht=G.length;if(re>ht){var wt=new t(Math.max(2*ht,re));wt.set(G),G=wt}},Y=it.f||0,Z=it.p||0,rt=it.b||0,ft=it.l,dt=it.d,_t=it.m,ut=it.n,gt=8*lt;do{if(!ft){it.f=Y=k(H,Z,1);var Tt=k(H,Z+1,3);if(Z+=3,!Tt){var $t=H[(Ut=(($=Z)/8|0)+(7&$&&1)+4)-4]|H[Ut-3]<<8,ae=Ut+$t;if(ae>lt){J&&U(0);break}j&&at(rt+$t),G.set(H.subarray(Ut,ae),rt),it.b=rt+=$t,it.p=Z=8*ae;continue}if(Tt==1)ft=R,dt=N,_t=9,ut=5;else if(Tt==2){var ne=k(H,Z,31)+257,ee=k(H,Z+10,15)+4,ct=ne+k(H,Z+5,31)+1;Z+=14;for(var Gt=new t(ct),zt=new t(19),Pt=0;Pt<ee;++Pt)zt[a[Pt]]=k(H,Z+3*Pt,7);Z+=3*ee;var Ct=P(zt),Bt=(1<<Ct)-1,Dt=M(zt,Ct);for(Pt=0;Pt<ct;){var Ut,Nt=Dt[k(H,Z,Bt)];if(Z+=15&Nt,(Ut=Nt>>>4)<16)Gt[Pt++]=Ut;else{var ge=0,Q=0;for(Ut==16?(Q=3+k(H,Z,3),Z+=2,ge=Gt[Pt-1]):Ut==17?(Q=3+k(H,Z,7),Z+=3):Ut==18&&(Q=11+k(H,Z,127),Z+=7);Q--;)Gt[Pt++]=ge}}var K=Gt.subarray(0,ne),mt=Gt.subarray(ne);_t=P(K),ut=P(mt),ft=M(K,_t),dt=M(mt,ut)}else U(1);if(Z>gt){J&&U(0);break}}j&&at(rt+131072);for(var Lt=(1<<_t)-1,Rt=(1<<ut)-1,At=Z;;At=Z){var oe=(ge=ft[z(H,Z)&Lt])>>>4;if((Z+=15&ge)>gt){J&&U(0);break}if(ge||U(2),oe<256)G[rt++]=oe;else{if(oe==256){At=Z,ft=null;break}var le=oe-254;if(oe>264){var ve=s[Pt=oe-257];le=k(H,Z,(1<<ve)-1)+u[Pt],Z+=ve}var be=dt[z(H,Z)&Rt],Xt=be>>>4;if(be||U(3),Z+=15&be,mt=g[Xt],Xt>3&&(ve=r[Xt],mt+=z(H,Z)&(1<<ve)-1,Z+=ve),Z>gt){J&&U(0);break}j&&at(rt+131072);for(var te=rt+le;rt<te;rt+=4)G[rt]=G[rt-mt],G[rt+1]=G[rt+1-mt],G[rt+2]=G[rt+2-mt],G[rt+3]=G[rt+3-mt];rt=te}}it.l=ft,it.p=At,it.b=rt,ft&&(Y=1,it.m=_t,it.d=dt,it.n=ut)}while(!Y);return rt==G.length?G:(function(re,ht,wt){(wt==null||wt>re.length)&&(wt=re.length);var de=new(re instanceof e?e:re instanceof n?n:t)(wt-ht);return de.set(re.subarray(ht,wt)),de})(G,0,rt)},O=new t(0),F=typeof TextDecoder<"u"&&new TextDecoder;try{F.decode(O,{stream:!0})}catch{}return i.convert_streams=function(H){var G=new DataView(H),it=0;function lt(){var ne=G.getUint16(it);return it+=2,ne}function j(){var ne=G.getUint32(it);return it+=4,ne}function J(ne){$t.setUint16(ae,ne),ae+=2}function $(ne){$t.setUint32(ae,ne),ae+=4}for(var at={signature:j(),flavor:j(),length:j(),numTables:lt(),reserved:lt(),totalSfntSize:j(),majorVersion:lt(),minorVersion:lt(),metaOffset:j(),metaLength:j(),metaOrigLength:j(),privOffset:j(),privLength:j()},Y=0;Math.pow(2,Y)<=at.numTables;)Y++;Y--;for(var Z=16*Math.pow(2,Y),rt=16*at.numTables-Z,ft=12,dt=[],_t=0;_t<at.numTables;_t++)dt.push({tag:j(),offset:j(),compLength:j(),origLength:j(),origChecksum:j()}),ft+=16;var ut,gt=new Uint8Array(12+16*dt.length+dt.reduce((function(ne,ee){return ne+ee.origLength+4}),0)),Tt=gt.buffer,$t=new DataView(Tt),ae=0;return $(at.flavor),J(at.numTables),J(Z),J(Y),J(rt),dt.forEach((function(ne){$(ne.tag),$(ne.origChecksum),$(ft),$(ne.origLength),ne.outOffset=ft,(ft+=ne.origLength)%4!=0&&(ft+=4-ft%4)})),dt.forEach((function(ne){var ee,ct=H.slice(ne.offset,ne.offset+ne.compLength);if(ne.compLength!=ne.origLength){var Gt=new Uint8Array(ne.origLength);ee=new Uint8Array(ct,2),D(ee,Gt)}else Gt=new Uint8Array(ct);gt.set(Gt,ne.outOffset);var zt=0;(ft=ne.outOffset+ne.origLength)%4!=0&&(zt=4-ft%4),gt.set(new Uint8Array(zt).buffer,ne.outOffset+ne.origLength),ut=ft+zt})),Tt.slice(0,ut)},Object.defineProperty(i,"__esModule",{value:!0}),i})({}).convert_streams}function Unt(i,t){const e={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,r=2,a=4,o=8,c=16,u=32;let d;function g(L){if(!d){const U={R:r,L:s,D:a,C:c,U:u,T:o};d=new Map;for(let D in n){let O=0;n[D].split(",").forEach(F=>{let[H,G]=F.split("+");H=parseInt(H,36),G=G?parseInt(G,36):0,d.set(O+=H,U[D]);for(let it=G;it--;)d.set(++O,U[D])})}}return d.get(L)||u}const y=1,_=2,b=3,M=4,S=[null,"isol","init","fina","medi"];function E(L){const U=new Uint8Array(L.length);let D=u,O=y,F=-1;for(let H=0;H<L.length;H++){const G=L.codePointAt(H);let it=g(G)|0,lt=y;it&o||(D&(s|a|c)?it&(r|a|c)?(lt=b,(O===y||O===b)&&U[F]++):it&(s|u)&&(O===_||O===M)&&U[F]--:D&(r|u)&&(O===_||O===M)&&U[F]--,O=U[H]=lt,D=it,F=H,G>65535&&H++)}return U}function R(L,U){const D=[];for(let F=0;F<U.length;F++){const H=U.codePointAt(F);H>65535&&F++,D.push(i.U.codeToGlyph(L,H))}const O=L.GSUB;if(O){const{lookupList:F,featureList:H}=O;let G;const it=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,lt=[];H.forEach(j=>{if(it.test(j.tag))for(let J=0;J<j.tab.length;J++){if(lt[j.tab[J]])continue;lt[j.tab[J]]=!0;const $=F[j.tab[J]],at=/^(isol|init|fina|medi)$/.test(j.tag);at&&!G&&(G=E(U));for(let Y=0;Y<D.length;Y++)(!G||!at||S[G[Y]]===j.tag)&&i.U._applySubs(D,Y,$,F)}})}return D}function N(L,U){const D=new Int16Array(U.length*3);let O=0;for(;O<U.length;O++){const it=U[O];if(it===-1)continue;D[O*3+2]=L.hmtx.aWidth[it];const lt=L.GPOS;if(lt){const j=lt.lookupList;for(let J=0;J<j.length;J++){const $=j[J];for(let at=0;at<$.tabs.length;at++){const Y=$.tabs[at];if($.ltype===1){if(i._lctf.coverageIndex(Y.coverage,it)!==-1&&Y.pos){G(Y.pos,O);break}}else if($.ltype===2){let Z=null,rt=F();if(rt!==-1){const ft=i._lctf.coverageIndex(Y.coverage,U[rt]);if(ft!==-1){if(Y.fmt===1){const dt=Y.pairsets[ft];for(let _t=0;_t<dt.length;_t++)dt[_t].gid2===it&&(Z=dt[_t])}else if(Y.fmt===2){const dt=i.U._getGlyphClass(U[rt],Y.classDef1),_t=i.U._getGlyphClass(it,Y.classDef2);Z=Y.matrix[dt][_t]}if(Z){Z.val1&&G(Z.val1,rt),Z.val2&&G(Z.val2,O);break}}}}else if($.ltype===4){const Z=i._lctf.coverageIndex(Y.markCoverage,it);if(Z!==-1){const rt=F(H),ft=rt===-1?-1:i._lctf.coverageIndex(Y.baseCoverage,U[rt]);if(ft!==-1){const dt=Y.markArray[Z],_t=Y.baseArray[ft][dt.markClass];D[O*3]=_t.x-dt.x+D[rt*3]-D[rt*3+2],D[O*3+1]=_t.y-dt.y+D[rt*3+1];break}}}else if($.ltype===6){const Z=i._lctf.coverageIndex(Y.mark1Coverage,it);if(Z!==-1){const rt=F();if(rt!==-1){const ft=U[rt];if(P(L,ft)===3){const dt=i._lctf.coverageIndex(Y.mark2Coverage,ft);if(dt!==-1){const _t=Y.mark1Array[Z],ut=Y.mark2Array[dt][_t.markClass];D[O*3]=ut.x-_t.x+D[rt*3]-D[rt*3+2],D[O*3+1]=ut.y-_t.y+D[rt*3+1];break}}}}}}}}else if(L.kern&&!L.cff){const j=F();if(j!==-1){const J=L.kern.glyph1.indexOf(U[j]);if(J!==-1){const $=L.kern.rval[J].glyph2.indexOf(it);$!==-1&&(D[j*3+2]+=L.kern.rval[J].vals[$])}}}}return D;function F(it){for(let lt=O-1;lt>=0;lt--)if(U[lt]!==-1&&(!it||it(U[lt])))return lt;return-1}function H(it){return P(L,it)===1}function G(it,lt){for(let j=0;j<3;j++)D[lt*3+j]+=it[j]||0}}function P(L,U){const D=L.GDEF&&L.GDEF.glyphClassDef;return D?i.U._getGlyphClass(U,D):0}function k(...L){for(let U=0;U<L.length;U++)if(typeof L[U]=="number")return L[U]}function z(L){const U=Object.create(null),D=L["OS/2"],O=L.hhea,F=L.head.unitsPerEm,H=k(D&&D.sTypoAscender,O&&O.ascender,F),G={unitsPerEm:F,ascender:H,descender:k(D&&D.sTypoDescender,O&&O.descender,0),capHeight:k(D&&D.sCapHeight,H),xHeight:k(D&&D.sxHeight,H),lineGap:k(D&&D.sTypoLineGap,O&&O.lineGap),supportsCodePoint(it){return i.U.codeToGlyph(L,it)>0},forEachGlyph(it,lt,j,J){let $=0;const at=1/G.unitsPerEm*lt,Y=R(L,it);let Z=0;const rt=N(L,Y);return Y.forEach((ft,dt)=>{if(ft!==-1){let _t=U[ft];if(!_t){const{cmds:ut,crds:gt}=i.U.glyphToPath(L,ft);let Tt="",$t=0;for(let Gt=0,zt=ut.length;Gt<zt;Gt++){const Pt=e[ut[Gt]];Tt+=ut[Gt];for(let Ct=1;Ct<=Pt;Ct++)Tt+=(Ct>1?",":"")+gt[$t++]}let ae,ne,ee,ct;if(gt.length){ae=ne=1/0,ee=ct=-1/0;for(let Gt=0,zt=gt.length;Gt<zt;Gt+=2){let Pt=gt[Gt],Ct=gt[Gt+1];Pt<ae&&(ae=Pt),Ct<ne&&(ne=Ct),Pt>ee&&(ee=Pt),Ct>ct&&(ct=Ct)}}else ae=ee=ne=ct=0;_t=U[ft]={index:ft,advanceWidth:L.hmtx.aWidth[ft],xMin:ae,yMin:ne,xMax:ee,yMax:ct,path:Tt}}J.call(null,_t,$+rt[dt*3]*at,rt[dt*3+1]*at,Z),$+=rt[dt*3+2]*at,j&&($+=j*lt)}Z+=it.codePointAt(Z)>65535?2:1}),$}};return G}return function(U){const D=new Uint8Array(U,0,4),O=i._bin.readASCII(D,0,4);if(O==="wOFF")U=t(U);else if(O==="wOF2")throw new Error("woff2 fonts not supported");return z(i.parse(U)[0])}}const Lnt=e0({name:"Typr Font Parser",dependencies:[Ont,Pnt,Unt],init(i,t,e){const n=i(),s=t();return e(n,s)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function knt(){return(function(i){var t=function(){this.buckets=new Map};t.prototype.add=function(N){var P=N>>5;this.buckets.set(P,(this.buckets.get(P)||0)|1<<(31&N))},t.prototype.has=function(N){var P=this.buckets.get(N>>5);return P!==void 0&&(P&1<<(31&N))!=0},t.prototype.serialize=function(){var N=[];return this.buckets.forEach((function(P,k){N.push((+k).toString(36)+":"+P.toString(36))})),N.join(",")},t.prototype.deserialize=function(N){var P=this;this.buckets.clear(),N.split(",").forEach((function(k){var z=k.split(":");P.buckets.set(parseInt(z[0],36),parseInt(z[1],36))}))};var e=Math.pow(2,8),n=e-1,s=~n;function r(N){var P=(function(z){return z&s})(N).toString(16),k=(function(z){return(z&s)+e-1})(N).toString(16);return"codepoint-index/plane"+(N>>16)+"/"+P+"-"+k+".json"}function a(N,P){var k=N&n,z=P.codePointAt(k/6|0);return((z=(z||48)-48)&1<<k%6)!=0}function o(N,P){var k;(k=N,k.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(z){return z.split("-").map((function(L){return parseInt(L.trim(),16)}))}))).forEach((function(z){var L=z[0],U=z[1];U===void 0&&(U=L),P(L,U)}))}function c(N,P){o(N,(function(k,z){for(var L=k;L<=z;L++)P(L)}))}var u={},d={},g=new WeakMap,y="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function _(N){var P=g.get(N);return P||(P=new t,c(N.ranges,(function(k){return P.add(k)})),g.set(N,P)),P}var b,M=new Map;function S(N,P,k){return N[P]?P:N[k]?k:(function(z){for(var L in z)return L})(N)}function E(N,P){var k=P;if(!N.includes(k)){k=1/0;for(var z=0;z<N.length;z++)Math.abs(N[z]-P)<Math.abs(k-P)&&(k=N[z])}return k}function R(N){return b||(b=new Set,c("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(P){b.add(P)}))),b.has(N)}return i.CodePointSet=t,i.clearCache=function(){u={},d={}},i.getFontsForString=function(N,P){P===void 0&&(P={});var k,z=P.lang;z===void 0&&(z=new RegExp("\\p{Script=Hangul}","u").test(k=N)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(k)?"ja":"en");var L=P.category;L===void 0&&(L="sans-serif");var U=P.style;U===void 0&&(U="normal");var D=P.weight;D===void 0&&(D=400);var O=(P.dataUrl||y).replace(/\/$/g,""),F=new Map,H=new Uint8Array(N.length),G={},it={},lt=new Array(N.length),j=new Map,J=!1;function $(Z){var rt=M.get(Z);return rt||(rt=fetch(O+"/"+Z).then((function(ft){if(!ft.ok)throw new Error(ft.statusText);return ft.json().then((function(dt){if(!Array.isArray(dt)||dt[0]!==1)throw new Error("Incorrect schema version; need 1, got "+dt[0]);return dt[1]}))})).catch((function(ft){if(O!==y)return J||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+O+'", trying default CDN. '+ft.message),J=!0),O=y,M.delete(Z),$(Z);throw ft})),M.set(Z,rt)),rt}for(var at=function(Z){var rt=N.codePointAt(Z),ft=r(rt);lt[Z]=ft,u[ft]||j.has(ft)||j.set(ft,$(ft).then((function(dt){u[ft]=dt}))),rt>65535&&(Z++,Y=Z)},Y=0;Y<N.length;Y++)at(Y);return Promise.all(j.values()).then((function(){j.clear();for(var Z=function(ft){var dt=N.codePointAt(ft),_t=null,ut=u[lt[ft]],gt=void 0;for(var Tt in ut){var $t=it[Tt];if($t===void 0&&($t=it[Tt]=new RegExp(Tt).test(z||"en")),$t){for(var ae in gt=Tt,ut[Tt])if(a(dt,ut[Tt][ae])){_t=ae;break}break}}if(!_t){t:for(var ne in ut)if(ne!==gt){for(var ee in ut[ne])if(a(dt,ut[ne][ee])){_t=ee;break t}}}_t||(console.debug("No font coverage for U+"+dt.toString(16)),_t="latin"),lt[ft]=_t,d[_t]||j.has(_t)||j.set(_t,$("font-meta/"+_t+".json").then((function(ct){d[_t]=ct}))),dt>65535&&(ft++,rt=ft)},rt=0;rt<N.length;rt++)Z(rt);return Promise.all(j.values())})).then((function(){for(var Z,rt=null,ft=0;ft<N.length;ft++){var dt=N.codePointAt(ft);if(rt&&(R(dt)||_(rt).has(dt)))H[ft]=H[ft-1];else{rt=d[lt[ft]];var _t=G[rt.id];if(!_t){var ut=rt.typeforms,gt=S(ut,L,"sans-serif"),Tt=S(ut[gt],U,"normal"),$t=E((Z=ut[gt])===null||Z===void 0?void 0:Z[Tt],D);_t=G[rt.id]=O+"/font-files/"+rt.id+"/"+gt+"."+Tt+"."+$t+".woff"}var ae=F.get(_t);ae==null&&(ae=F.size,F.set(_t,ae)),H[ft]=ae}dt>65535&&(ft++,H[ft]=H[ft-1])}return{fontUrls:Array.from(F.keys()),chars:H}}))},Object.defineProperty(i,"__esModule",{value:!0}),i})({})}function Bnt(i,t){const e=Object.create(null),n=Object.create(null);function s(a,o){const c=u=>{console.error(`Failure loading font ${a}`,u)};try{const u=new XMLHttpRequest;u.open("get",a,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>=400)c(new Error(u.statusText));else if(u.status>0)try{const d=i(u.response);d.src=a,o(d)}catch(d){c(d)}},u.onerror=c,u.send()}catch(u){c(u)}}function r(a,o){let c=e[a];c?o(c):n[a]?n[a].push(o):(n[a]=[o],s(a,u=>{u.src=a,e[a]=u,n[a].forEach(d=>d(u)),delete n[a]}))}return function(a,o,{lang:c,fonts:u=[],style:d="normal",weight:g="normal",unicodeFontsURL:y}={}){const _=new Uint8Array(a.length),b=[];a.length||R();const M=new Map,S=[];if(d!=="italic"&&(d="normal"),typeof g!="number"&&(g=g==="bold"?700:400),u&&!Array.isArray(u)&&(u=[u]),u=u.slice().filter(P=>!P.lang||P.lang.test(c)).reverse(),u.length){let L=0;(function U(D=0){for(let O=D,F=a.length;O<F;O++){const H=a.codePointAt(O);if(L===1&&b[_[O-1]].supportsCodePoint(H)||O>0&&/\s/.test(a[O]))_[O]=_[O-1],L===2&&(S[S.length-1][1]=O);else for(let G=_[O],it=u.length;G<=it;G++)if(G===it){const lt=L===2?S[S.length-1]:S[S.length]=[O,O];lt[1]=O,L=2}else{_[O]=G;const{src:lt,unicodeRange:j}=u[G];if(!j||N(H,j)){const J=e[lt];if(!J){r(lt,()=>{U(O)});return}if(J.supportsCodePoint(H)){let $=M.get(J);typeof $!="number"&&($=b.length,b.push(J),M.set(J,$)),_[O]=$,L=1;break}}}H>65535&&O+1<F&&(_[O+1]=_[O],O++,L===2&&(S[S.length-1][1]=O))}E()})()}else S.push([0,a.length-1]),E();function E(){if(S.length){const P=S.map(k=>a.substring(k[0],k[1]+1)).join(`
`);t.getFontsForString(P,{lang:c||void 0,style:d,weight:g,dataUrl:y}).then(({fontUrls:k,chars:z})=>{const L=b.length;let U=0;S.forEach(O=>{for(let F=0,H=O[1]-O[0];F<=H;F++)_[O[0]+F]=z[U++]+L;U++});let D=0;k.forEach((O,F)=>{r(O,H=>{b[F+L]=H,++D===k.length&&R()})})})}else R()}function R(){o({chars:_,fonts:b})}function N(P,k){for(let z=0;z<k.length;z++){const[L,U=L]=k[z];if(L<=P&&P<=U)return!0}return!1}}}const znt=e0({name:"FontResolver",dependencies:[Bnt,Lnt,knt],init(i,t,e){return i(t,e())}});function Fnt(i,t){const n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",r=new RegExp(`${s}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:b,lang:M,fonts:S,style:E,weight:R,preResolvedFonts:N,unicodeFontsURL:P},k){const z=({chars:L,fonts:U})=>{let D,O;const F=[];for(let H=0;H<L.length;H++)L[H]!==O?(O=L[H],F.push(D={start:H,end:H,fontObj:U[L[H]]})):D.end=H;k(F)};N?z(N):i(b,z,{lang:M,fonts:S,style:E,weight:R,unicodeFontsURL:P})}function o({text:b="",font:M,lang:S,sdfGlyphSize:E=64,fontSize:R=400,fontWeight:N=1,fontStyle:P="normal",letterSpacing:k=0,lineHeight:z="normal",maxWidth:L=1/0,direction:U,textAlign:D="left",textIndent:O=0,whiteSpace:F="normal",overflowWrap:H="normal",anchorX:G=0,anchorY:it=0,metricsOnly:lt=!1,unicodeFontsURL:j,preResolvedFonts:J=null,includeCaretPositions:$=!1,chunkedBoundsSize:at=8192,colorRanges:Y=null},Z){const rt=g(),ft={fontLoad:0,typesetting:0};b.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),b=b.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),R=+R,k=+k,L=+L,z=z||"normal",O=+O,a({text:b,lang:S,style:P,weight:N,fonts:typeof M=="string"?[{src:M}]:M,unicodeFontsURL:j,preResolvedFonts:J},dt=>{ft.fontLoad=g()-rt;const _t=isFinite(L);let ut=null,gt=null,Tt=null,$t=null,ae=null,ne=null,ee=null,ct=null,Gt=0,zt=0,Pt=F!=="nowrap";const Ct=new Map,Bt=g();let Dt=O,Ut=0,Nt=new y;const ge=[Nt];dt.forEach(Rt=>{const{fontObj:At}=Rt,{ascender:oe,descender:le,unitsPerEm:ve,lineGap:be,capHeight:Xt,xHeight:te}=At;let re=Ct.get(At);if(!re){const Ft=R/ve,ie=z==="normal"?(oe-le+be)*Ft:z*R,ye=(ie-(oe-le)*Ft)/2,se=Math.min(ie,(oe-le)*Ft),jt=(oe+le)/2*Ft+se/2;re={index:Ct.size,src:At.src,fontObj:At,fontSizeMult:Ft,unitsPerEm:ve,ascender:oe*Ft,descender:le*Ft,capHeight:Xt*Ft,xHeight:te*Ft,lineHeight:ie,baseline:-ye-oe*Ft,caretTop:jt,caretBottom:jt-se},Ct.set(At,re)}const{fontSizeMult:ht}=re,wt=b.slice(Rt.start,Rt.end+1);let de,pt;At.forEachGlyph(wt,R,k,(Ft,ie,ye,se)=>{ie+=Ut,se+=Rt.start,de=ie,pt=Ft;const jt=b.charAt(se),xe=Ft.advanceWidth*ht,we=Nt.count;let Ce;if("isEmpty"in Ft||(Ft.isWhitespace=!!jt&&new RegExp(s).test(jt),Ft.canBreakAfter=!!jt&&r.test(jt),Ft.isEmpty=Ft.xMin===Ft.xMax||Ft.yMin===Ft.yMax||n.test(jt)),!Ft.isWhitespace&&!Ft.isEmpty&&zt++,Pt&&_t&&!Ft.isWhitespace&&ie+xe+Dt>L&&we){if(Nt.glyphAt(we-1).glyphObj.canBreakAfter)Ce=new y,Dt=-ie;else for(let Ln=we;Ln--;)if(Ln===0&&H==="break-word"){Ce=new y,Dt=-ie;break}else if(Nt.glyphAt(Ln).glyphObj.canBreakAfter){Ce=Nt.splitAt(Ln+1);const dn=Ce.glyphAt(0).x;Dt-=dn;for(let fn=Ce.count;fn--;)Ce.glyphAt(fn).x-=dn;break}Ce&&(Nt.isSoftWrapped=!0,Nt=Ce,ge.push(Nt),Gt=L)}let Ie=Nt.glyphAt(Nt.count);Ie.glyphObj=Ft,Ie.x=ie+Dt,Ie.y=ye,Ie.width=xe,Ie.charIndex=se,Ie.fontData=re,jt===`
`&&(Nt=new y,ge.push(Nt),Dt=-(ie+xe+k*R)+O)}),Ut=de+pt.advanceWidth*ht+k*R});let Q=0;ge.forEach(Rt=>{let At=!0;for(let oe=Rt.count;oe--;){const le=Rt.glyphAt(oe);At&&!le.glyphObj.isWhitespace&&(Rt.width=le.x+le.width,Rt.width>Gt&&(Gt=Rt.width),At=!1);let{lineHeight:ve,capHeight:be,xHeight:Xt,baseline:te}=le.fontData;ve>Rt.lineHeight&&(Rt.lineHeight=ve);const re=te-Rt.baseline;re<0&&(Rt.baseline+=re,Rt.cap+=re,Rt.ex+=re),Rt.cap=Math.max(Rt.cap,Rt.baseline+be),Rt.ex=Math.max(Rt.ex,Rt.baseline+Xt)}Rt.baseline-=Q,Rt.cap-=Q,Rt.ex-=Q,Q+=Rt.lineHeight});let K=0,mt=0;if(G&&(typeof G=="number"?K=-G:typeof G=="string"&&(K=-Gt*(G==="left"?0:G==="center"?.5:G==="right"?1:u(G)))),it&&(typeof it=="number"?mt=-it:typeof it=="string"&&(mt=it==="top"?0:it==="top-baseline"?-ge[0].baseline:it==="top-cap"?-ge[0].cap:it==="top-ex"?-ge[0].ex:it==="middle"?Q/2:it==="bottom"?Q:it==="bottom-baseline"?-ge[ge.length-1].baseline:u(it)*Q)),!lt){const Rt=t.getEmbeddingLevels(b,U);ut=new Uint16Array(zt),gt=new Uint8Array(zt),Tt=new Float32Array(zt*2),$t={},ee=[1/0,1/0,-1/0,-1/0],ct=[],$&&(ne=new Float32Array(b.length*4)),Y&&(ae=new Uint8Array(zt*3));let At=0,oe=-1,le=-1,ve,be;if(ge.forEach((Xt,te)=>{let{count:re,width:ht}=Xt;if(re>0){let wt=0;for(let se=re;se--&&Xt.glyphAt(se).glyphObj.isWhitespace;)wt++;let de=0,pt=0;if(D==="center")de=(Gt-ht)/2;else if(D==="right")de=Gt-ht;else if(D==="justify"&&Xt.isSoftWrapped){let se=0;for(let jt=re-wt;jt--;)Xt.glyphAt(jt).glyphObj.isWhitespace&&se++;pt=(Gt-ht)/se}if(pt||de){let se=0;for(let jt=0;jt<re;jt++){let xe=Xt.glyphAt(jt);const we=xe.glyphObj;xe.x+=de+se,pt!==0&&we.isWhitespace&&jt<re-wt&&(se+=pt,xe.width+=pt)}}const Ft=t.getReorderSegments(b,Rt,Xt.glyphAt(0).charIndex,Xt.glyphAt(Xt.count-1).charIndex);for(let se=0;se<Ft.length;se++){const[jt,xe]=Ft[se];let we=1/0,Ce=-1/0;for(let Ie=0;Ie<re;Ie++)if(Xt.glyphAt(Ie).charIndex>=jt){let Ln=Ie,dn=Ie;for(;dn<re;dn++){let fn=Xt.glyphAt(dn);if(fn.charIndex>xe)break;dn<re-wt&&(we=Math.min(we,fn.x),Ce=Math.max(Ce,fn.x+fn.width))}for(let fn=Ln;fn<dn;fn++){const Rn=Xt.glyphAt(fn);Rn.x=Ce-(Rn.x+Rn.width-we)}break}}let ie;const ye=se=>ie=se;for(let se=0;se<re;se++){const jt=Xt.glyphAt(se);ie=jt.glyphObj;const xe=ie.index,we=Rt.levels[jt.charIndex]&1;if(we){const Ce=t.getMirroredCharacter(b[jt.charIndex]);Ce&&jt.fontData.fontObj.forEachGlyph(Ce,0,0,ye)}if($){const{charIndex:Ce,fontData:Ie}=jt,Ln=jt.x+K,dn=jt.x+jt.width+K;ne[Ce*4]=we?dn:Ln,ne[Ce*4+1]=we?Ln:dn,ne[Ce*4+2]=Xt.baseline+Ie.caretBottom+mt,ne[Ce*4+3]=Xt.baseline+Ie.caretTop+mt;const fn=Ce-oe;fn>1&&d(ne,oe,fn),oe=Ce}if(Y){const{charIndex:Ce}=jt;for(;Ce>le;)le++,Y.hasOwnProperty(le)&&(be=Y[le])}if(!ie.isWhitespace&&!ie.isEmpty){const Ce=At++,{fontSizeMult:Ie,src:Ln,index:dn}=jt.fontData,fn=$t[Ln]||($t[Ln]={});fn[xe]||(fn[xe]={path:ie.path,pathBounds:[ie.xMin,ie.yMin,ie.xMax,ie.yMax]});const Rn=jt.x+K,Fi=jt.y+Xt.baseline+mt;Tt[Ce*2]=Rn,Tt[Ce*2+1]=Fi;const vi=Rn+ie.xMin*Ie,ys=Fi+ie.yMin*Ie,ji=Rn+ie.xMax*Ie,Kn=Fi+ie.yMax*Ie;vi<ee[0]&&(ee[0]=vi),ys<ee[1]&&(ee[1]=ys),ji>ee[2]&&(ee[2]=ji),Kn>ee[3]&&(ee[3]=Kn),Ce%at===0&&(ve={start:Ce,end:Ce,rect:[1/0,1/0,-1/0,-1/0]},ct.push(ve)),ve.end++;const Zn=ve.rect;if(vi<Zn[0]&&(Zn[0]=vi),ys<Zn[1]&&(Zn[1]=ys),ji>Zn[2]&&(Zn[2]=ji),Kn>Zn[3]&&(Zn[3]=Kn),ut[Ce]=xe,gt[Ce]=dn,Y){const Nn=Ce*3;ae[Nn]=be>>16&255,ae[Nn+1]=be>>8&255,ae[Nn+2]=be&255}}}}}),ne){const Xt=b.length-oe;Xt>1&&d(ne,oe,Xt)}}const Lt=[];Ct.forEach(({index:Rt,src:At,unitsPerEm:oe,ascender:le,descender:ve,lineHeight:be,capHeight:Xt,xHeight:te})=>{Lt[Rt]={src:At,unitsPerEm:oe,ascender:le,descender:ve,lineHeight:be,capHeight:Xt,xHeight:te}}),ft.typesetting=g()-Bt,Z({glyphIds:ut,glyphFontIndices:gt,glyphPositions:Tt,glyphData:$t,fontData:Lt,caretPositions:ne,glyphColors:ae,chunkedBounds:ct,fontSize:R,topBaseline:mt+ge[0].baseline,blockBounds:[K,mt-Q,K+Gt,mt],visibleBounds:ee,timings:ft})})}function c(b,M){o({...b,metricsOnly:!0},S=>{const[E,R,N,P]=S.blockBounds;M({width:N-E,height:P-R})})}function u(b){let M=b.match(/^([\d.]+)%$/),S=M?parseFloat(M[1]):NaN;return isNaN(S)?0:S/100}function d(b,M,S){const E=b[M*4],R=b[M*4+1],N=b[M*4+2],P=b[M*4+3],k=(R-E)/S;for(let z=0;z<S;z++){const L=(M+z)*4;b[L]=E+k*z,b[L+1]=E+k*(z+1),b[L+2]=N,b[L+3]=P}}function g(){return(self.performance||Date).now()}function y(){this.data=[]}const _=["glyphObj","x","y","width","charIndex","fontData"];return y.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/_.length)},glyphAt(b){let M=y.flyweight;return M.data=this.data,M.index=b,M},splitAt(b){let M=new y;return M.data=this.data.splice(b*_.length),M}},y.flyweight=_.reduce((b,M,S,E)=>(Object.defineProperty(b,M,{get(){return this.data[this.index*_.length+S]},set(R){this.data[this.index*_.length+S]=R}}),b),{data:null,index:0}),{typeset:o,measure:c}}const cp=()=>(self.performance||Date).now(),XE=VB();let H3;function Vnt(i,t,e,n,s,r,a,o,c,u,d=!0){return d?Gnt(i,t,e,n,s,r,a,o,c,u).then(null,g=>(H3||(console.warn("WebGL SDF generation failed, falling back to JS",g),H3=!0),j3(i,t,e,n,s,r,a,o,c,u))):j3(i,t,e,n,s,r,a,o,c,u)}const dS=[],Hnt=5;let Iw=0;function GB(){const i=cp();for(;dS.length&&cp()-i<Hnt;)dS.shift()();Iw=dS.length?setTimeout(GB,0):0}const Gnt=(...i)=>new Promise((t,e)=>{dS.push(()=>{const n=cp();try{XE.webgl.generateIntoCanvas(...i),t({timing:cp()-n})}catch(s){e(s)}}),Iw||(Iw=setTimeout(GB,0))}),jnt=4,Wnt=2e3,G3={};let qnt=0;function j3(i,t,e,n,s,r,a,o,c,u){const d="TroikaTextSDFGenerator_JS_"+qnt++%jnt;let g=G3[d];return g||(g=G3[d]={workerModule:e0({name:d,workerId:d,dependencies:[VB,cp],init(y,_){const b=y().javascript.generate;return function(...M){const S=_();return{textureData:b(...M),timing:_()-S}}},getTransferables(y){return[y.textureData.buffer]}}),requests:0,idleTimer:null}),g.requests++,clearTimeout(g.idleTimer),g.workerModule(i,t,e,n,s,r).then(({textureData:y,timing:_})=>{const b=cp(),M=new Uint8Array(y.length*4);for(let S=0;S<y.length;S++)M[S*4+u]=y[S];return XE.webglUtils.renderImageData(a,M,o,c,i,t,1<<3-u),_+=cp()-b,--g.requests===0&&(g.idleTimer=setTimeout(()=>{Ent(d)},Wnt)),{timing:_}})}function Xnt(i){i._warm||(XE.webgl.isSupported(i),i._warm=!0)}const Ynt=XE.webglUtils.resizeWebGLCanvasWithoutClearing,Py={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Knt=new Pe;function eg(){return(self.performance||Date).now()}const W3=Object.create(null);function jB(i,t){i=Jnt({},i);const e=eg(),n=[];if(i.font&&n.push({label:"user",src:$nt(i.font)}),i.font=n,i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Py.sdfGlyphSize,i.unicodeFontsURL=i.unicodeFontsURL||Py.unicodeFontsURL,i.colorRanges!=null){let y={};for(let _ in i.colorRanges)if(i.colorRanges.hasOwnProperty(_)){let b=i.colorRanges[_];typeof b!="number"&&(b=Knt.set(b).getHex()),y[_]=b}i.colorRanges=y}Object.freeze(i);const{textureWidth:s,sdfExponent:r}=Py,{sdfGlyphSize:a}=i,o=s/a*4;let c=W3[a];if(!c){const y=document.createElement("canvas");y.width=s,y.height=a*256/o,c=W3[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:y,sdfTexture:new ms(y,void 0,void 0,void 0,Ns,Ns),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,Znt(c)}const{sdfTexture:u,sdfCanvas:d}=c;XB(i).then(y=>{const{glyphIds:_,glyphFontIndices:b,fontData:M,glyphPositions:S,fontSize:E,timings:R}=y,N=[],P=new Float32Array(_.length*4);let k=0,z=0;const L=eg(),U=M.map(G=>{let it=c.glyphsByFont.get(G.src);return it||c.glyphsByFont.set(G.src,it=new Map),it});_.forEach((G,it)=>{const lt=b[it],{src:j,unitsPerEm:J}=M[lt];let $=U[lt].get(G);if(!$){const{path:ft,pathBounds:dt}=y.glyphData[j][G],_t=Math.max(dt[2]-dt[0],dt[3]-dt[1])/a*(Py.sdfMargin*a+.5),ut=c.glyphCount++,gt=[dt[0]-_t,dt[1]-_t,dt[2]+_t,dt[3]+_t];U[lt].set(G,$={path:ft,atlasIndex:ut,sdfViewBox:gt}),N.push($)}const{sdfViewBox:at}=$,Y=S[z++],Z=S[z++],rt=E/J;P[k++]=Y+at[0]*rt,P[k++]=Z+at[1]*rt,P[k++]=Y+at[2]*rt,P[k++]=Z+at[3]*rt,_[it]=$.atlasIndex}),R.quads=(R.quads||0)+(eg()-L);const D=eg();R.sdf={};const O=d.height,F=Math.ceil(c.glyphCount/o),H=Math.pow(2,Math.ceil(Math.log2(F*a)));H>O&&(console.info(`Increasing SDF texture size ${O}->${H}`),Ynt(d,s,H),u.dispose()),Promise.all(N.map(G=>WB(G,c,i.gpuAccelerateSDF).then(({timing:it})=>{R.sdf[G.atlasIndex]=it}))).then(()=>{N.length&&!c.contextLost&&(qB(c),u.needsUpdate=!0),R.sdfTotal=eg()-D,R.total=eg()-e,t(Object.freeze({parameters:i,sdfTexture:u,sdfGlyphSize:a,sdfExponent:r,glyphBounds:P,glyphAtlasIndices:_,glyphColors:y.glyphColors,caretPositions:y.caretPositions,chunkedBounds:y.chunkedBounds,ascender:y.ascender,descender:y.descender,lineHeight:y.lineHeight,capHeight:y.capHeight,xHeight:y.xHeight,topBaseline:y.topBaseline,blockBounds:y.blockBounds,visibleBounds:y.visibleBounds,timings:y.timings}))})}),Promise.resolve().then(()=>{c.contextLost||Xnt(d)})}function WB({path:i,atlasIndex:t,sdfViewBox:e},{sdfGlyphSize:n,sdfCanvas:s,contextLost:r},a){if(r)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:c}=Py,u=Math.max(e[2]-e[0],e[3]-e[1]),d=Math.floor(t/4),g=d%(o/n)*n,y=Math.floor(d/(o/n))*n,_=t%4;return Vnt(n,n,i,e,u,c,s,g,y,_,a)}function Znt(i){const t=i.sdfCanvas;t.addEventListener("webglcontextlost",e=>{console.log("Context Lost",e),e.preventDefault(),i.contextLost=!0}),t.addEventListener("webglcontextrestored",e=>{console.log("Context Restored",e),i.contextLost=!1;const n=[];i.glyphsByFont.forEach(s=>{s.forEach(r=>{n.push(WB(r,i,!0))})}),Promise.all(n).then(()=>{qB(i),i.sdfTexture.needsUpdate=!0})})}function Qnt({font:i,characters:t,sdfGlyphSize:e},n){let s=Array.isArray(t)?t.join(`
`):""+t;jB({font:i,sdfGlyphSize:e,text:s},n)}function Jnt(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}let Ob;function $nt(i){return Ob||(Ob=typeof document>"u"?{}:document.createElement("a")),Ob.href=i,Ob.href}function qB(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:e}=i,{width:n,height:s}=t,r=i.sdfCanvas.getContext("webgl");let a=e.image.data;(!a||a.length!==n*s*4)&&(a=new Uint8Array(n*s*4),e.image={width:n,height:s,data:a},e.flipY=!1,e.isDataTexture=!0),r.readPixels(0,0,n,s,r.RGBA,r.UNSIGNED_BYTE,a)}}const tit=e0({name:"Typesetter",dependencies:[Fnt,znt,Mnt],init(i,t,e){return i(t,e())}}),XB=e0({name:"Typesetter",dependencies:[tit],init(i){return function(t){return new Promise(e=>{i.typeset(t,e)})}},getTransferables(i){const t=[];for(let e in i)i[e]&&i[e].buffer&&t.push(i[e].buffer);return t}});XB.onMainThread;const q3={};function eit(i){let t=q3[i];return t||(t=q3[i]=new gh(1,1,i,i).translate(.5,.5,0)),t}const nit="aTroikaGlyphBounds",X3="aTroikaGlyphIndex",iit="aTroikaGlyphColor";class sit extends SR{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new xr,this.boundingBox=new _r}computeBoundingSphere(){}computeBoundingBox(){}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let e=eit(t);["position","normal","uv"].forEach(n=>{this.attributes[n]=e.attributes[n].clone()}),this.setIndex(e.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,e,n,s,r){this.updateAttributeData(nit,t,4),this.updateAttributeData(X3,e,1),this.updateAttributeData(iit,r,3),this._blockBounds=n,this._chunkedBounds=s,this.instanceCount=e.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:e,boundingBox:n}=this;if(e){const{PI:s,floor:r,min:a,max:o,sin:c,cos:u}=Math,d=s/2,g=s*2,y=Math.abs(e),_=t[0]/y,b=t[2]/y,M=r((_+d)/g)!==r((b+d)/g)?-y:a(c(_)*y,c(b)*y),S=r((_-d)/g)!==r((b-d)/g)?y:o(c(_)*y,c(b)*y),E=r((_+s)/g)!==r((b+s)/g)?y*2:o(y-u(_)*y,y-u(b)*y);n.min.set(M,t[1],e<0?-E:0),n.max.set(S,t[3],e<0?0:E)}else n.min.set(t[0],t[1],0),n.max.set(t[2],t[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let e=this.getAttribute(X3).count,n=this._chunkedBounds;if(n)for(let s=n.length;s--;){e=n[s].end;let r=n[s].rect;if(r[1]<t.w&&r[3]>t.y&&r[0]<t.z&&r[2]>t.x)break}this.instanceCount=e}updateAttributeData(t,e,n){const s=this.getAttribute(t);e?s&&s.array.length===e.length?(s.array.set(e),s.needsUpdate=!0):(this.setAttribute(t,new _p(e,n)),delete this._maxInstanceCount,this.dispose()):s&&this.deleteAttribute(t)}}const rit=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,ait=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,oit=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,lit=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function cit(i){const t=Dw(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ce},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Yn(0,0,0,0)},uTroikaClipRect:{value:new Yn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ce},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Pe},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new _n},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:rit,vertexTransform:ait,fragmentDefs:oit,fragmentColorTransform:lit,customRewriter({vertexShader:e,fragmentShader:n}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(n)&&(n=n.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(e)||(e=e.replace(HB,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:e,fragmentShader:n}}});return t.transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const OR=new mh({color:16777215,side:Zl,transparent:!0}),Y3=8421504,K3=new ln,Pb=new ot,mA=new ot,_y=[],uit=new ot,gA="+x+y";function Z3(i){return Array.isArray(i)?i[0]:i}let YB=()=>{const i=new ps(new gh(1,1),OR);return YB=()=>i,i},KB=()=>{const i=new ps(new gh(1,1,32,1),OR);return KB=()=>i,i};const hit={type:"syncstart"},fit={type:"synccomplete"},ZB=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],dit=ZB.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let QB=class extends ps{constructor(){const t=new sit;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Y3,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=gA,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(hit),jB({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},e=>{this._isSyncing=!1,this._textRenderInfo=e,this.geometry.updateGlyphs(e.glyphBounds,e.glyphAtlasIndices,e.blockBounds,e.chunkedBounds,e.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(s=>s&&s())})),this.dispatchEvent(fit),t&&t()})))}onBeforeRender(t,e,n,s,r,a){this.sync(),r.isTroikaTextMaterial&&this._prepareForRender(r)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(t){return cit(t)}get material(){let t=this._derivedMaterial;const e=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=OR.clone());if((!t||!t.isDerivedFrom(e))&&(t=this._derivedMaterial=this.createDerivedMaterial(e),e.addEventListener("dispose",function n(){e.removeEventListener("dispose",n),t.dispose()})),this.hasOutline()){let n=t._outlineMtl;return n||(n=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,t.addEventListener("dispose",function s(){t.removeEventListener("dispose",s),n.dispose()})),[n,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return Z3(this.material).getDepthMaterial()}set customDepthMaterial(t){}get customDistanceMaterial(){return Z3(this.material).getDistanceMaterial()}set customDistanceMaterial(t){}_prepareForRender(t){const e=t.isTextOutlineMaterial,n=t.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:o,blockBounds:c}=s;n.uTroikaSDFTexture.value=o,n.uTroikaSDFTextureSize.value.set(o.image.width,o.image.height),n.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,n.uTroikaSDFExponent.value=s.sdfExponent,n.uTroikaTotalBounds.value.fromArray(c),n.uTroikaUseGlyphColors.value=!e&&!!s.glyphColors;let u=0,d=0,g=0,y,_,b,M=0,S=0;if(e){let{outlineWidth:R,outlineOffsetX:N,outlineOffsetY:P,outlineBlur:k,outlineOpacity:z}=this;u=this._parsePercent(R)||0,d=Math.max(0,this._parsePercent(k)||0),y=z,M=this._parsePercent(N)||0,S=this._parsePercent(P)||0}else g=Math.max(0,this._parsePercent(this.strokeWidth)||0),g&&(b=this.strokeColor,n.uTroikaStrokeColor.value.set(b??Y3),_=this.strokeOpacity,_==null&&(_=1)),y=this.fillOpacity;n.uTroikaEdgeOffset.value=u,n.uTroikaPositionOffset.value.set(M,S),n.uTroikaBlurRadius.value=d,n.uTroikaStrokeWidth.value=g,n.uTroikaStrokeOpacity.value=_,n.uTroikaFillOpacity.value=y??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let E=this.clipRect;if(E&&Array.isArray(E)&&E.length===4)n.uTroikaClipRect.value.fromArray(E);else{const R=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(c[0]-R,c[1]-R,c[2]+R,c[3]+R)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const r=e?this.outlineColor||0:this.color;if(r==null)delete t.color;else{const o=t.hasOwnProperty("color")?t.color:t.color=new Pe;(r!==o._input||typeof r=="object")&&o.set(o._input=r)}let a=this.orientation||gA;if(a!==t._orientation){let o=n.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let c=a!==gA&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(c){let[,u,d,g,y]=c;Pb.set(0,0,0)[d]=u==="-"?1:-1,mA.set(0,0,0)[y]=g==="-"?-1:1,K3.lookAt(uit,Pb.cross(mA),mA),o.setFromMatrix4(K3)}else o.identity();t._orientation=a}}_parsePercent(t){if(typeof t=="string"){let e=t.match(/^(-?[\d.]+)%$/),n=e?parseFloat(e[1]):NaN;t=(isNaN(n)?0:n/100)*this.fontSize}return t}localPositionToTextCoords(t,e=new ce){e.copy(t);const n=this.curveRadius;return n&&(e.x=Math.atan2(t.x,Math.abs(n)-Math.abs(t.z))*Math.abs(n)),e}worldPositionToTextCoords(t,e=new ce){return Pb.copy(t),this.localPositionToTextCoords(this.worldToLocal(Pb),e)}raycast(t,e){const{textRenderInfo:n,curveRadius:s}=this;if(n){const r=n.blockBounds,a=s?KB():YB(),o=a.geometry,{position:c,uv:u}=o.attributes;for(let d=0;d<u.count;d++){let g=r[0]+u.getX(d)*(r[2]-r[0]);const y=r[1]+u.getY(d)*(r[3]-r[1]);let _=0;s&&(_=s-Math.cos(g/s)*s,g=Math.sin(g/s)*s),c.setXYZ(d,g,y,_)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,_y.length=0,a.raycast(t,_y);for(let d=0;d<_y.length;d++)_y[d].object=this,e.push(_y[d])}}copy(t){const e=this.geometry;return super.copy(t),this.geometry=e,dit.forEach(n=>{this[n]=t[n]}),this}clone(){return new this.constructor().copy(this)}};ZB.forEach(i=>{const t="_private_"+i;Object.defineProperty(QB.prototype,i,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})});new _r;new Pe;const yA=bt.forwardRef(({sdfGlyphSize:i=64,anchorX:t="center",anchorY:e="middle",font:n,fontSize:s=1,children:r,characters:a,onSync:o,...c},u)=>{const d=ju(({invalidate:b})=>b),[g]=bt.useState(()=>new QB),[y,_]=bt.useMemo(()=>{const b=[];let M="";return bt.Children.forEach(r,S=>{typeof S=="string"||typeof S=="number"?M+=S:b.push(S)}),[b,M]},[r]);return uet(()=>new Promise(b=>Qnt({font:n,characters:a},b)),["troika-text",n,a]),bt.useLayoutEffect(()=>void g.sync(()=>{d(),o&&o(g)})),bt.useEffect(()=>()=>g.dispose(),[g]),bt.createElement("primitive",kv({object:g,ref:u,font:n,text:_,anchorX:t,anchorY:e,fontSize:s,sdfGlyphSize:i},c),y)}),pit=bt.forwardRef(({makeDefault:i,camera:t,regress:e,domElement:n,enableDamping:s=!0,keyEvents:r=!1,onChange:a,onStart:o,onEnd:c,...u},d)=>{const g=ju(z=>z.invalidate),y=ju(z=>z.camera),_=ju(z=>z.gl),b=ju(z=>z.events),M=ju(z=>z.setEvents),S=ju(z=>z.set),E=ju(z=>z.get),R=ju(z=>z.performance),N=t||y,P=n||b.connected||_.domElement,k=bt.useMemo(()=>new vnt(N),[N]);return zet(()=>{k.enabled&&k.update()},-1),bt.useEffect(()=>(r&&k.connect(r===!0?P:r),k.connect(P),()=>void k.dispose()),[r,P,e,k,g]),bt.useEffect(()=>{const z=D=>{g(),e&&R.regress(),a&&a(D)},L=D=>{o&&o(D)},U=D=>{c&&c(D)};return k.addEventListener("change",z),k.addEventListener("start",L),k.addEventListener("end",U),()=>{k.removeEventListener("start",L),k.removeEventListener("end",U),k.removeEventListener("change",z)}},[a,o,c,k,g,M]),bt.useEffect(()=>{if(i){const z=E().controls;return S({controls:k}),()=>S({controls:z})}},[i,k]),bt.createElement("primitive",kv({ref:d,object:k,enableDamping:s},u))});function JB(i,t){const e=i+"Geometry";return bt.forwardRef(({args:n,children:s,...r},a)=>{const o=bt.useRef(null);return bt.useImperativeHandle(a,()=>o.current),bt.useLayoutEffect(()=>void t?.(o.current)),bt.createElement("mesh",kv({ref:o},r),bt.createElement(e,{attach:"geometry",args:n}),s)})}const ng=JB("box"),mit=JB("sphere"),git=({exercise:i})=>{const t=bt.useRef(null);return W.jsxs("group",{children:[i==="pushup"&&W.jsxs("group",{children:[W.jsx(ng,{args:[2,.1,1],position:[0,-1,0],ref:t,children:W.jsx("meshStandardMaterial",{color:"#4F46E5"})}),W.jsx(ng,{args:[.3,1.5,.3],position:[-.5,-.25,0],children:W.jsx("meshStandardMaterial",{color:"#EF4444"})}),W.jsx(ng,{args:[.3,1.5,.3],position:[.5,-.25,0],children:W.jsx("meshStandardMaterial",{color:"#EF4444"})}),W.jsx(yA,{position:[0,1,0],fontSize:.3,color:"#374151",anchorX:"center",anchorY:"middle",children:"Push-up"})]}),i==="squat"&&W.jsxs("group",{children:[W.jsx(mit,{args:[.5],position:[0,0,0],children:W.jsx("meshStandardMaterial",{color:"#10B981"})}),W.jsx(ng,{args:[.2,1,.2],position:[-.3,-.75,0],children:W.jsx("meshStandardMaterial",{color:"#6B7280"})}),W.jsx(ng,{args:[.2,1,.2],position:[.3,-.75,0],children:W.jsx("meshStandardMaterial",{color:"#6B7280"})}),W.jsx(yA,{position:[0,1.5,0],fontSize:.3,color:"#374151",anchorX:"center",anchorY:"middle",children:"Squat"})]}),i==="plank"&&W.jsxs("group",{children:[W.jsx(ng,{args:[2,.1,.5],position:[0,0,0],children:W.jsx("meshStandardMaterial",{color:"#F59E0B"})}),W.jsx(yA,{position:[0,.5,0],fontSize:.3,color:"#374151",anchorX:"center",anchorY:"middle",children:"Plank"})]})]})},yit=()=>{const[i,t]=bt.useState("pushup"),[e,n]=bt.useState(!1),[s,r]=bt.useState(1),[a]=bt.useState(3),o=[{id:"pushup",name:"Push-ups",description:"Classic upper body exercise",duration:30,sets:3,reps:15,category:"strength",difficulty:"beginner"},{id:"squat",name:"Squats",description:"Lower body strength exercise",duration:45,sets:3,reps:20,category:"strength",difficulty:"beginner"},{id:"plank",name:"Plank",description:"Core stability exercise",duration:60,sets:3,reps:1,category:"strength",difficulty:"intermediate"}],c=o.find(u=>u.id===i);return W.jsx(Kg,{children:W.jsxs("div",{className:"space-y-8",children:[W.jsxs("div",{className:"text-center",children:[W.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Workout Studio"}),W.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Interactive 3D exercise guidance and tracking"})]}),W.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"3D Exercise Guide"}),W.jsx("div",{className:"h-96 bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden",children:W.jsxs(unt,{camera:{position:[0,0,5]},children:[W.jsx("ambientLight",{intensity:.5}),W.jsx("pointLight",{position:[10,10,10]}),W.jsx(git,{exercise:i}),W.jsx(pit,{enableZoom:!0,enablePan:!0,enableRotate:!0})]})}),W.jsxs("div",{className:"mt-4 flex justify-center space-x-4",children:[W.jsx("button",{onClick:()=>n(!e),className:`px-6 py-2 rounded-lg font-medium transition-colors ${e?"bg-red-500 hover:bg-red-600 text-white":"bg-primary-500 hover:bg-primary-600 text-white"}`,children:e?"Pause":"Start"}),W.jsx("button",{className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Reset"})]})]}),W.jsxs("div",{className:"space-y-6",children:[W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Select Exercise"}),W.jsx("div",{className:"space-y-2",children:o.map(u=>W.jsx("button",{onClick:()=>t(u.id),className:`w-full p-3 rounded-lg text-left transition-colors ${i===u.id?"bg-primary-100 dark:bg-primary-900 border-2 border-primary-500":"bg-gray-50 dark:bg-gray-700 border-2 border-transparent hover:bg-gray-100 dark:hover:bg-gray-600"}`,children:W.jsxs("div",{className:"flex justify-between items-center",children:[W.jsxs("div",{children:[W.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:u.name}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.description})]}),W.jsx("div",{className:"text-right",children:W.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${u.difficulty==="beginner"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":u.difficulty==="intermediate"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:u.difficulty})})]})},u.id))})]}),c&&W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:c.name}),W.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[W.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[W.jsxs("p",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[s,"/",a]}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sets"})]}),W.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[W.jsx("p",{className:"text-2xl font-bold text-success-600 dark:text-success-400",children:c.reps}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reps"})]})]}),W.jsxs("div",{className:"space-y-3",children:[W.jsxs("div",{className:"flex justify-between",children:[W.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Duration:"}),W.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[c.duration,"s"]})]}),W.jsxs("div",{className:"flex justify-between",children:[W.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Category:"}),W.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:c.category})]}),W.jsxs("div",{className:"flex justify-between",children:[W.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Difficulty:"}),W.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:c.difficulty})]})]}),W.jsxs("div",{className:"mt-4",children:[W.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1",children:[W.jsx("span",{children:"Progress"}),W.jsxs("span",{children:[Math.round(s/a*100),"%"]})]}),W.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:W.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-secondary-500 h-2 rounded-full transition-all duration-300",style:{width:`${s/a*100}%`}})})]})]}),W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Workout Actions"}),W.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[W.jsx("button",{onClick:()=>r(Math.min(s+1,a)),className:"p-3 bg-primary-50 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800 rounded-lg hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors",children:W.jsxs("div",{className:"text-center",children:[W.jsx("p",{className:"font-medium text-primary-600 dark:text-primary-400",children:"Next Set"}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Complete current"})]})}),W.jsx("button",{className:"p-3 bg-success-50 dark:bg-success-900/20 border border-success-200 dark:border-success-800 rounded-lg hover:bg-success-100 dark:hover:bg-success-900/30 transition-colors",children:W.jsxs("div",{className:"text-center",children:[W.jsx("p",{className:"font-medium text-success-600 dark:text-success-400",children:"Finish"}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"End workout"})]})})]})]})]})]}),c&&W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Instructions"}),W.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[i==="pushup"&&W.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 dark:text-gray-300",children:[W.jsx("li",{children:"Start in a plank position with your hands slightly wider than shoulder-width apart"}),W.jsx("li",{children:"Keep your body in a straight line from head to heels"}),W.jsx("li",{children:"Lower your body until your chest nearly touches the floor"}),W.jsx("li",{children:"Push back up to the starting position"}),W.jsx("li",{children:"Repeat for the desired number of repetitions"})]}),i==="squat"&&W.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 dark:text-gray-300",children:[W.jsx("li",{children:"Stand with your feet shoulder-width apart"}),W.jsx("li",{children:"Lower your body as if sitting back into a chair"}),W.jsx("li",{children:"Keep your chest up and knees behind your toes"}),W.jsx("li",{children:"Go down until your thighs are parallel to the floor"}),W.jsx("li",{children:"Push through your heels to return to standing"})]}),i==="plank"&&W.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 dark:text-gray-300",children:[W.jsx("li",{children:"Start in a push-up position"}),W.jsx("li",{children:"Lower down to your forearms"}),W.jsx("li",{children:"Keep your body in a straight line"}),W.jsx("li",{children:"Engage your core and hold the position"}),W.jsx("li",{children:"Breathe normally throughout the hold"})]})]})]})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function m_(i){return i+.5|0}const bf=(i,t,e)=>Math.max(Math.min(i,e),t);function Uy(i){return bf(m_(i*2.55),0,255)}function Cf(i){return bf(m_(i*255),0,255)}function Yu(i){return bf(m_(i/2.55)/100,0,1)}function Q3(i){return bf(m_(i*100),0,100)}const hl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Nw=[..."0123456789ABCDEF"],vit=i=>Nw[i&15],_it=i=>Nw[(i&240)>>4]+Nw[i&15],Ub=i=>(i&240)>>4===(i&15),xit=i=>Ub(i.r)&&Ub(i.g)&&Ub(i.b)&&Ub(i.a);function bit(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&hl[i[1]]*17,g:255&hl[i[2]]*17,b:255&hl[i[3]]*17,a:t===5?hl[i[4]]*17:255}:(t===7||t===9)&&(e={r:hl[i[1]]<<4|hl[i[2]],g:hl[i[3]]<<4|hl[i[4]],b:hl[i[5]]<<4|hl[i[6]],a:t===9?hl[i[7]]<<4|hl[i[8]]:255})),e}const Sit=(i,t)=>i<255?t(i):"";function Eit(i){var t=xit(i)?vit:_it;return i?"#"+t(i.r)+t(i.g)+t(i.b)+Sit(i.a,t):void 0}const Tit=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function $B(i,t,e){const n=t*Math.min(e,1-e),s=(r,a=(r+i/30)%12)=>e-n*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function Mit(i,t,e){const n=(s,r=(s+i/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function Ait(i,t,e){const n=$B(i,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)n[s]*=1-t-e,n[s]+=t;return n}function wit(i,t,e,n,s){return i===s?(t-e)/n+(t<e?6:0):t===s?(e-i)/n+2:(i-t)/n+4}function PR(i){const e=i.r/255,n=i.g/255,s=i.b/255,r=Math.max(e,n,s),a=Math.min(e,n,s),o=(r+a)/2;let c,u,d;return r!==a&&(d=r-a,u=o>.5?d/(2-r-a):d/(r+a),c=wit(e,n,s,d,r),c=c*60+.5),[c|0,u||0,o]}function UR(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(Cf)}function LR(i,t,e){return UR($B,i,t,e)}function Rit(i,t,e){return UR(Ait,i,t,e)}function Cit(i,t,e){return UR(Mit,i,t,e)}function tz(i){return(i%360+360)%360}function Dit(i){const t=Tit.exec(i);let e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?Uy(+t[5]):Cf(+t[5]));const s=tz(+t[2]),r=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?n=Rit(s,r,a):t[1]==="hsv"?n=Cit(s,r,a):n=LR(s,r,a),{r:n[0],g:n[1],b:n[2],a:e}}function Iit(i,t){var e=PR(i);e[0]=tz(e[0]+t),e=LR(e),i.r=e[0],i.g=e[1],i.b=e[2]}function Nit(i){if(!i)return;const t=PR(i),e=t[0],n=Q3(t[1]),s=Q3(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${s}%, ${Yu(i.a)})`:`hsl(${e}, ${n}%, ${s}%)`}const J3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Oit(){const i={},t=Object.keys($3),e=Object.keys(J3);let n,s,r,a,o;for(n=0;n<t.length;n++){for(a=o=t[n],s=0;s<e.length;s++)r=e[s],o=o.replace(r,J3[r]);r=parseInt($3[a],16),i[o]=[r>>16&255,r>>8&255,r&255]}return i}let Lb;function Pit(i){Lb||(Lb=Oit(),Lb.transparent=[0,0,0,0]);const t=Lb[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Uit=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Lit(i){const t=Uit.exec(i);let e=255,n,s,r;if(t){if(t[7]!==n){const a=+t[7];e=t[8]?Uy(a):bf(a*255,0,255)}return n=+t[1],s=+t[3],r=+t[5],n=255&(t[2]?Uy(n):bf(n,0,255)),s=255&(t[4]?Uy(s):bf(s,0,255)),r=255&(t[6]?Uy(r):bf(r,0,255)),{r:n,g:s,b:r,a:e}}}function kit(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Yu(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const vA=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,ig=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Bit(i,t,e){const n=ig(Yu(i.r)),s=ig(Yu(i.g)),r=ig(Yu(i.b));return{r:Cf(vA(n+e*(ig(Yu(t.r))-n))),g:Cf(vA(s+e*(ig(Yu(t.g))-s))),b:Cf(vA(r+e*(ig(Yu(t.b))-r))),a:i.a+e*(t.a-i.a)}}function kb(i,t,e){if(i){let n=PR(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=LR(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function ez(i,t){return i&&Object.assign(t||{},i)}function tO(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Cf(i[3]))):(t=ez(i,{r:0,g:0,b:0,a:1}),t.a=Cf(t.a)),t}function zit(i){return i.charAt(0)==="r"?Lit(i):Dit(i)}class Bv{constructor(t){if(t instanceof Bv)return t;const e=typeof t;let n;e==="object"?n=tO(t):e==="string"&&(n=bit(t)||Pit(t)||zit(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=ez(this._rgb);return t&&(t.a=Yu(t.a)),t}set rgb(t){this._rgb=tO(t)}rgbString(){return this._valid?kit(this._rgb):void 0}hexString(){return this._valid?Eit(this._rgb):void 0}hslString(){return this._valid?Nit(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,s=t.rgb;let r;const a=e===r?.5:e,o=2*a-1,c=n.a-s.a,u=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;r=1-u,n.r=255&u*n.r+r*s.r+.5,n.g=255&u*n.g+r*s.g+.5,n.b=255&u*n.b+r*s.b+.5,n.a=a*n.a+(1-a)*s.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=Bit(this._rgb,t._rgb,e)),this}clone(){return new Bv(this.rgb)}alpha(t){return this._rgb.a=Cf(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=m_(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return kb(this._rgb,2,t),this}darken(t){return kb(this._rgb,2,-t),this}saturate(t){return kb(this._rgb,1,t),this}desaturate(t){return kb(this._rgb,1,-t),this}rotate(t){return Iit(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Gu(){}const Fit=(()=>{let i=0;return()=>i++})();function gi(i){return i==null}function nr(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ii(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function vl(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function jc(i,t){return vl(i)?i:t}function Un(i,t){return typeof i>"u"?t:i}const Vit=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,nz=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Yi(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function Ai(i,t,e,n){let s,r,a;if(nr(i))for(r=i.length,s=0;s<r;s++)t.call(e,i[s],s);else if(ii(i))for(a=Object.keys(i),r=a.length,s=0;s<r;s++)t.call(e,i[a[s]],a[s])}function O1(i,t){let e,n,s,r;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(s=i[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function P1(i){if(nr(i))return i.map(P1);if(ii(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let s=0;for(;s<n;++s)t[e[s]]=P1(i[e[s]]);return t}return i}function iz(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Hit(i,t,e,n){if(!iz(i))return;const s=t[i],r=e[i];ii(s)&&ii(r)?zv(s,r,n):t[i]=P1(r)}function zv(i,t,e){const n=nr(t)?t:[t],s=n.length;if(!ii(i))return i;e=e||{};const r=e.merger||Hit;let a;for(let o=0;o<s;++o){if(a=n[o],!ii(a))continue;const c=Object.keys(a);for(let u=0,d=c.length;u<d;++u)r(c[u],i,a,e)}return i}function sv(i,t){return zv(i,t,{merger:Git})}function Git(i,t,e){if(!iz(i))return;const n=t[i],s=e[i];ii(n)&&ii(s)?sv(n,s):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=P1(s))}const eO={"":i=>i,x:i=>i.x,y:i=>i.y};function jit(i){const t=i.split("."),e=[];let n="";for(const s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function Wit(i){const t=jit(i);return e=>{for(const n of t){if(n==="")break;e=e&&e[n]}return e}}function Sp(i,t){return(eO[t]||(eO[t]=Wit(t)))(i)}function kR(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Fv=i=>typeof i<"u",Ff=i=>typeof i=="function",nO=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function qit(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const wi=Math.PI,Ss=2*wi,Xit=Ss+wi,U1=Number.POSITIVE_INFINITY,Yit=wi/180,ir=wi/2,Hd=wi/4,iO=wi*2/3,sz=Math.log10,su=Math.sign;function rv(i,t,e){return Math.abs(i-t)<e}function sO(i){const t=Math.round(i);i=rv(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(sz(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function Kit(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n===0&&(t.push(n),t.push(i/n));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function Zit(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function Vv(i){return!Zit(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function Qit(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function Jit(i,t,e){let n,s,r;for(n=0,s=i.length;n<s;n++)r=i[n][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function $u(i){return i*(wi/180)}function $it(i){return i*(180/wi)}function rO(i){if(!vl(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function rz(i,t){const e=t.x-i.x,n=t.y-i.y,s=Math.sqrt(e*e+n*n);let r=Math.atan2(n,e);return r<-.5*wi&&(r+=Ss),{angle:r,distance:s}}function Ow(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function tst(i,t){return(i-t+Xit)%Ss-wi}function Yl(i){return(i%Ss+Ss)%Ss}function Hv(i,t,e,n){const s=Yl(i),r=Yl(t),a=Yl(e),o=Yl(r-s),c=Yl(a-s),u=Yl(s-r),d=Yl(s-a);return s===r||s===a||n&&r===a||o>c&&u<d}function oa(i,t,e){return Math.max(t,Math.min(e,i))}function est(i){return oa(i,-32768,32767)}function Sf(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function BR(i,t,e){e=e||(a=>i[a]<t);let n=i.length-1,s=0,r;for(;n-s>1;)r=s+n>>1,e(r)?s=r:n=r;return{lo:s,hi:n}}const sp=(i,t,e,n)=>BR(i,e,n?s=>{const r=i[s][t];return r<e||r===e&&i[s+1][t]===e}:s=>i[s][t]<e),nst=(i,t,e)=>BR(i,e,n=>i[n][t]>=e);function ist(i,t,e){let n=0,s=i.length;for(;n<s&&i[n]<t;)n++;for(;s>n&&i[s-1]>e;)s--;return n>0||s<i.length?i.slice(n,s):i}const az=["push","pop","shift","splice","unshift"];function sst(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),az.forEach(e=>{const n="_onData"+kR(e),s=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...r){const a=s.apply(this,r);return i._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...r)}),a}})})}function aO(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(az.forEach(r=>{delete i[r]}),delete i._chartjs)}function oz(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const lz=(function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame})();function cz(i,t){let e=[],n=!1;return function(...s){e=s,n||(n=!0,lz.call(window,()=>{n=!1,i.apply(t,e)}))}}function rst(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}const zR=i=>i==="start"?"left":i==="end"?"right":"center",na=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,ast=(i,t,e,n)=>i===(n?"left":"right")?e:i==="center"?(t+e)/2:t;function ost(i,t,e){const n=t.length;let s=0,r=n;if(i._sorted){const{iScale:a,vScale:o,_parsed:c}=i,u=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,d=a.axis,{min:g,max:y,minDefined:_,maxDefined:b}=a.getUserBounds();if(_){if(s=Math.min(sp(c,d,g).lo,e?n:sp(t,d,a.getPixelForValue(g)).lo),u){const M=c.slice(0,s+1).reverse().findIndex(S=>!gi(S[o.axis]));s-=Math.max(0,M)}s=oa(s,0,n-1)}if(b){let M=Math.max(sp(c,a.axis,y,!0).hi+1,e?0:sp(t,d,a.getPixelForValue(y),!0).hi+1);if(u){const S=c.slice(M-1).findIndex(E=>!gi(E[o.axis]));M+=Math.max(0,S)}r=oa(M,s,n)-s}else r=n-s}return{start:s,count:r}}function lst(i){const{xScale:t,yScale:e,_scaleRanges:n}=i,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=s,!0;const r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,s),r}const Bb=i=>i===0||i===1,oO=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*Ss/e)),lO=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*Ss/e)+1,av={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*ir)+1,easeOutSine:i=>Math.sin(i*ir),easeInOutSine:i=>-.5*(Math.cos(wi*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Bb(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Bb(i)?i:oO(i,.075,.3),easeOutElastic:i=>Bb(i)?i:lO(i,.075,.3),easeInOutElastic(i){return Bb(i)?i:i<.5?.5*oO(i*2,.1125,.45):.5+.5*lO(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-av.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?av.easeInBounce(i*2)*.5:av.easeOutBounce(i*2-1)*.5+.5};function FR(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function cO(i){return FR(i)?i:new Bv(i)}function _A(i){return FR(i)?i:new Bv(i).saturate(.5).darken(.1).hexString()}const cst=["x","y","borderWidth","radius","tension"],ust=["color","borderColor","backgroundColor"];function hst(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:ust},numbers:{type:"number",properties:cst}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function fst(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const uO=new Map;function dst(i,t){t=t||{};const e=i+JSON.stringify(t);let n=uO.get(e);return n||(n=new Intl.NumberFormat(i,t),uO.set(e,n)),n}function VR(i,t,e){return dst(t,e).format(i)}const pst={values(i){return nr(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const n=this.chart.options.locale;let s,r=i;if(e.length>1){const u=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),r=mst(i,e)}const a=sz(Math.abs(r)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),VR(i,n,c)}};function mst(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var uz={formatters:pst};function gst(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uz.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ep=Object.create(null),Pw=Object.create(null);function ov(i,t){if(!t)return i;const e=t.split(".");for(let n=0,s=e.length;n<s;++n){const r=e[n];i=i[r]||(i[r]=Object.create(null))}return i}function xA(i,t,e){return typeof t=="string"?zv(ov(i,t),e):zv(ov(i,""),t)}class yst{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>_A(s.backgroundColor),this.hoverBorderColor=(n,s)=>_A(s.borderColor),this.hoverColor=(n,s)=>_A(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return xA(this,t,e)}get(t){return ov(this,t)}describe(t,e){return xA(Pw,t,e)}override(t,e){return xA(Ep,t,e)}route(t,e,n,s){const r=ov(this,t),a=ov(this,n),o="_"+e;Object.defineProperties(r,{[o]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const c=this[o],u=a[s];return ii(c)?Object.assign({},u,c):Un(c,u)},set(c){this[o]=c}}})}apply(t){t.forEach(e=>e(this))}}var Os=new yst({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hst,fst,gst]);function vst(i){return!i||gi(i.size)||gi(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function hO(i,t,e,n,s){let r=t[s];return r||(r=t[s]=i.measureText(s).width,e.push(s)),r>n&&(n=r),n}function Gd(i,t,e){const n=i.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*n)/n+s}function fO(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function Uw(i,t,e,n){hz(i,t,e,n,null)}function hz(i,t,e,n,s){let r,a,o,c,u,d,g,y;const _=t.pointStyle,b=t.rotation,M=t.radius;let S=(b||0)*Yit;if(_&&typeof _=="object"&&(r=_.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){i.save(),i.translate(e,n),i.rotate(S),i.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),i.restore();return}if(!(isNaN(M)||M<=0)){switch(i.beginPath(),_){default:s?i.ellipse(e,n,s/2,M,0,0,Ss):i.arc(e,n,M,0,Ss),i.closePath();break;case"triangle":d=s?s/2:M,i.moveTo(e+Math.sin(S)*d,n-Math.cos(S)*M),S+=iO,i.lineTo(e+Math.sin(S)*d,n-Math.cos(S)*M),S+=iO,i.lineTo(e+Math.sin(S)*d,n-Math.cos(S)*M),i.closePath();break;case"rectRounded":u=M*.516,c=M-u,a=Math.cos(S+Hd)*c,g=Math.cos(S+Hd)*(s?s/2-u:c),o=Math.sin(S+Hd)*c,y=Math.sin(S+Hd)*(s?s/2-u:c),i.arc(e-g,n-o,u,S-wi,S-ir),i.arc(e+y,n-a,u,S-ir,S),i.arc(e+g,n+o,u,S,S+ir),i.arc(e-y,n+a,u,S+ir,S+wi),i.closePath();break;case"rect":if(!b){c=Math.SQRT1_2*M,d=s?s/2:c,i.rect(e-d,n-c,2*d,2*c);break}S+=Hd;case"rectRot":g=Math.cos(S)*(s?s/2:M),a=Math.cos(S)*M,o=Math.sin(S)*M,y=Math.sin(S)*(s?s/2:M),i.moveTo(e-g,n-o),i.lineTo(e+y,n-a),i.lineTo(e+g,n+o),i.lineTo(e-y,n+a),i.closePath();break;case"crossRot":S+=Hd;case"cross":g=Math.cos(S)*(s?s/2:M),a=Math.cos(S)*M,o=Math.sin(S)*M,y=Math.sin(S)*(s?s/2:M),i.moveTo(e-g,n-o),i.lineTo(e+g,n+o),i.moveTo(e+y,n-a),i.lineTo(e-y,n+a);break;case"star":g=Math.cos(S)*(s?s/2:M),a=Math.cos(S)*M,o=Math.sin(S)*M,y=Math.sin(S)*(s?s/2:M),i.moveTo(e-g,n-o),i.lineTo(e+g,n+o),i.moveTo(e+y,n-a),i.lineTo(e-y,n+a),S+=Hd,g=Math.cos(S)*(s?s/2:M),a=Math.cos(S)*M,o=Math.sin(S)*M,y=Math.sin(S)*(s?s/2:M),i.moveTo(e-g,n-o),i.lineTo(e+g,n+o),i.moveTo(e+y,n-a),i.lineTo(e-y,n+a);break;case"line":a=s?s/2:Math.cos(S)*M,o=Math.sin(S)*M,i.moveTo(e-a,n-o),i.lineTo(e+a,n+o);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(S)*(s?s/2:M),n+Math.sin(S)*M);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function Gv(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function HR(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function GR(i){i.restore()}function _st(i,t,e,n,s){if(!t)return i.lineTo(e.x,e.y);if(s==="middle"){const r=(t.x+e.x)/2;i.lineTo(r,t.y),i.lineTo(r,e.y)}else s==="after"!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function xst(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function bst(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),gi(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function Sst(i,t,e,n,s){if(s.strikethrough||s.underline){const r=i.measureText(n),a=t-r.actualBoundingBoxLeft,o=t+r.actualBoundingBoxRight,c=e-r.actualBoundingBoxAscent,u=e+r.actualBoundingBoxDescent,d=s.strikethrough?(c+u)/2:u;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=s.decorationWidth||2,i.moveTo(a,d),i.lineTo(o,d),i.stroke()}}function Est(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function jv(i,t,e,n,s,r={}){const a=nr(t)?t:[t],o=r.strokeWidth>0&&r.strokeColor!=="";let c,u;for(i.save(),i.font=s.string,bst(i,r),c=0;c<a.length;++c)u=a[c],r.backdrop&&Est(i,r.backdrop),o&&(r.strokeColor&&(i.strokeStyle=r.strokeColor),gi(r.strokeWidth)||(i.lineWidth=r.strokeWidth),i.strokeText(u,e,n,r.maxWidth)),i.fillText(u,e,n,r.maxWidth),Sst(i,e,n,u,r),n+=Number(s.lineHeight);i.restore()}function L1(i,t){const{x:e,y:n,w:s,h:r,radius:a}=t;i.arc(e+a.topLeft,n+a.topLeft,a.topLeft,1.5*wi,wi,!0),i.lineTo(e,n+r-a.bottomLeft),i.arc(e+a.bottomLeft,n+r-a.bottomLeft,a.bottomLeft,wi,ir,!0),i.lineTo(e+s-a.bottomRight,n+r),i.arc(e+s-a.bottomRight,n+r-a.bottomRight,a.bottomRight,ir,0,!0),i.lineTo(e+s,n+a.topRight),i.arc(e+s-a.topRight,n+a.topRight,a.topRight,0,-ir,!0),i.lineTo(e+a.topLeft,n)}const Tst=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Mst=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ast(i,t){const e=(""+i).match(Tst);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const wst=i=>+i||0;function jR(i,t){const e={},n=ii(t),s=n?Object.keys(t):t,r=ii(i)?n?a=>Un(i[a],i[t[a]]):a=>i[a]:()=>i;for(const a of s)e[a]=wst(r(a));return e}function fz(i){return jR(i,{top:"y",right:"x",bottom:"y",left:"x"})}function _g(i){return jR(i,["topLeft","topRight","bottomLeft","bottomRight"])}function _l(i){const t=fz(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function la(i,t){i=i||{},t=t||Os.font;let e=Un(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=Un(i.style,t.style);n&&!(""+n).match(Mst)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:Un(i.family,t.family),lineHeight:Ast(Un(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:Un(i.weight,t.weight),string:""};return s.string=vst(s),s}function zb(i,t,e,n){let s,r,a;for(s=0,r=i.length;s<r;++s)if(a=i[s],a!==void 0&&a!==void 0)return a}function Rst(i,t,e){const{min:n,max:s}=i,r=nz(t,(s-n)/2),a=(o,c)=>e&&o===0?0:o+c;return{min:a(n,-Math.abs(r)),max:a(s,r)}}function Lp(i,t){return Object.assign(Object.create(i),t)}function WR(i,t=[""],e,n,s=()=>i[0]){const r=e||i;typeof n>"u"&&(n=gz("_fallback",i));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:r,_fallback:n,_getTarget:s,override:o=>WR([o,...i],t,r,n)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete o._keys,delete i[0][c],!0},get(o,c){return pz(o,c,()=>Lst(c,t,i,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(o,c){return pO(o).includes(c)},ownKeys(o){return pO(o)},set(o,c,u){const d=o._storage||(o._storage=s());return o[c]=d[c]=u,delete o._keys,!0}})}function Bg(i,t,e,n){const s={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:dz(i,n),setContext:r=>Bg(i,r,e,n),override:r=>Bg(i.override(r),t,e,n)};return new Proxy(s,{deleteProperty(r,a){return delete r[a],delete i[a],!0},get(r,a,o){return pz(r,a,()=>Dst(r,a,o))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(i,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,a)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(r,a){return Reflect.has(i,a)},ownKeys(){return Reflect.ownKeys(i)},set(r,a,o){return i[a]=o,delete r[a],!0}})}function dz(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=i;return{allKeys:s,scriptable:e,indexable:n,isScriptable:Ff(e)?e:()=>e,isIndexable:Ff(n)?n:()=>n}}const Cst=(i,t)=>i?i+kR(t):t,qR=(i,t)=>ii(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function pz(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const n=e();return i[t]=n,n}function Dst(i,t,e){const{_proxy:n,_context:s,_subProxy:r,_descriptors:a}=i;let o=n[t];return Ff(o)&&a.isScriptable(t)&&(o=Ist(t,o,i,e)),nr(o)&&o.length&&(o=Nst(t,o,i,a.isIndexable)),qR(t,o)&&(o=Bg(o,s,r&&r[t],a)),o}function Ist(i,t,e,n){const{_proxy:s,_context:r,_subProxy:a,_stack:o}=e;if(o.has(i))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+i);o.add(i);let c=t(r,a||n);return o.delete(i),qR(i,c)&&(c=XR(s._scopes,s,i,c)),c}function Nst(i,t,e,n){const{_proxy:s,_context:r,_subProxy:a,_descriptors:o}=e;if(typeof r.index<"u"&&n(i))return t[r.index%t.length];if(ii(t[0])){const c=t,u=s._scopes.filter(d=>d!==c);t=[];for(const d of c){const g=XR(u,s,i,d);t.push(Bg(g,r,a&&a[i],o))}}return t}function mz(i,t,e){return Ff(i)?i(t,e):i}const Ost=(i,t)=>i===!0?t:typeof i=="string"?Sp(t,i):void 0;function Pst(i,t,e,n,s){for(const r of t){const a=Ost(e,r);if(a){i.add(a);const o=mz(a._fallback,e,s);if(typeof o<"u"&&o!==e&&o!==n)return o}else if(a===!1&&typeof n<"u"&&e!==n)return null}return!1}function XR(i,t,e,n){const s=t._rootScopes,r=mz(t._fallback,e,n),a=[...i,...s],o=new Set;o.add(n);let c=dO(o,a,e,r||e,n);return c===null||typeof r<"u"&&r!==e&&(c=dO(o,a,r,c,n),c===null)?!1:WR(Array.from(o),[""],s,r,()=>Ust(t,e,n))}function dO(i,t,e,n,s){for(;e;)e=Pst(i,t,e,n,s);return e}function Ust(i,t,e){const n=i._getTarget();t in n||(n[t]={});const s=n[t];return nr(s)&&ii(e)?e:s||{}}function Lst(i,t,e,n){let s;for(const r of t)if(s=gz(Cst(r,i),e),typeof s<"u")return qR(i,s)?XR(e,n,i,s):s}function gz(i,t){for(const e of t){if(!e)continue;const n=e[i];if(typeof n<"u")return n}}function pO(i){let t=i._keys;return t||(t=i._keys=kst(i._scopes)),t}function kst(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}const Bst=Number.EPSILON||1e-14,zg=(i,t)=>t<i.length&&!i[t].skip&&i[t],yz=i=>i==="x"?"y":"x";function zst(i,t,e,n){const s=i.skip?t:i,r=t,a=e.skip?t:e,o=Ow(r,s),c=Ow(a,r);let u=o/(o+c),d=c/(o+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const g=n*u,y=n*d;return{previous:{x:r.x-g*(a.x-s.x),y:r.y-g*(a.y-s.y)},next:{x:r.x+y*(a.x-s.x),y:r.y+y*(a.y-s.y)}}}function Fst(i,t,e){const n=i.length;let s,r,a,o,c,u=zg(i,0);for(let d=0;d<n-1;++d)if(c=u,u=zg(i,d+1),!(!c||!u)){if(rv(t[d],0,Bst)){e[d]=e[d+1]=0;continue}s=e[d]/t[d],r=e[d+1]/t[d],o=Math.pow(s,2)+Math.pow(r,2),!(o<=9)&&(a=3/Math.sqrt(o),e[d]=s*a*t[d],e[d+1]=r*a*t[d])}}function Vst(i,t,e="x"){const n=yz(e),s=i.length;let r,a,o,c=zg(i,0);for(let u=0;u<s;++u){if(a=o,o=c,c=zg(i,u+1),!o)continue;const d=o[e],g=o[n];a&&(r=(d-a[e])/3,o[`cp1${e}`]=d-r,o[`cp1${n}`]=g-r*t[u]),c&&(r=(c[e]-d)/3,o[`cp2${e}`]=d+r,o[`cp2${n}`]=g+r*t[u])}}function Hst(i,t="x"){const e=yz(t),n=i.length,s=Array(n).fill(0),r=Array(n);let a,o,c,u=zg(i,0);for(a=0;a<n;++a)if(o=c,c=u,u=zg(i,a+1),!!c){if(u){const d=u[t]-c[t];s[a]=d!==0?(u[e]-c[e])/d:0}r[a]=o?u?su(s[a-1])!==su(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}Fst(i,s,r),Vst(i,r,t)}function Fb(i,t,e){return Math.max(Math.min(i,e),t)}function Gst(i,t){let e,n,s,r,a,o=Gv(i[0],t);for(e=0,n=i.length;e<n;++e)a=r,r=o,o=e<n-1&&Gv(i[e+1],t),r&&(s=i[e],a&&(s.cp1x=Fb(s.cp1x,t.left,t.right),s.cp1y=Fb(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=Fb(s.cp2x,t.left,t.right),s.cp2y=Fb(s.cp2y,t.top,t.bottom)))}function jst(i,t,e,n,s){let r,a,o,c;if(t.spanGaps&&(i=i.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")Hst(i,s);else{let u=n?i[i.length-1]:i[0];for(r=0,a=i.length;r<a;++r)o=i[r],c=zst(u,o,i[Math.min(r+1,a-(n?0:1))%a],t.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,u=o}t.capBezierPoints&&Gst(i,e)}function YR(){return typeof window<"u"&&typeof document<"u"}function KR(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function k1(i,t,e){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=i,n}const YE=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function Wst(i,t){return YE(i).getPropertyValue(t)}const qst=["top","right","bottom","left"];function up(i,t,e){const n={};e=e?"-"+e:"";for(let s=0;s<4;s++){const r=qst[s];n[r]=parseFloat(i[t+"-"+r+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Xst=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function Yst(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:s,offsetY:r}=n;let a=!1,o,c;if(Xst(s,r,i.target))o=s,c=r;else{const u=t.getBoundingClientRect();o=n.clientX-u.left,c=n.clientY-u.top,a=!0}return{x:o,y:c,box:a}}function Zd(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,s=YE(e),r=s.boxSizing==="border-box",a=up(s,"padding"),o=up(s,"border","width"),{x:c,y:u,box:d}=Yst(i,e),g=a.left+(d&&o.left),y=a.top+(d&&o.top);let{width:_,height:b}=t;return r&&(_-=a.width+o.width,b-=a.height+o.height),{x:Math.round((c-g)/_*e.width/n),y:Math.round((u-y)/b*e.height/n)}}function Kst(i,t,e){let n,s;if(t===void 0||e===void 0){const r=i&&KR(i);if(!r)t=i.clientWidth,e=i.clientHeight;else{const a=r.getBoundingClientRect(),o=YE(r),c=up(o,"border","width"),u=up(o,"padding");t=a.width-u.width-c.width,e=a.height-u.height-c.height,n=k1(o.maxWidth,r,"clientWidth"),s=k1(o.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:n||U1,maxHeight:s||U1}}const Vb=i=>Math.round(i*10)/10;function Zst(i,t,e,n){const s=YE(i),r=up(s,"margin"),a=k1(s.maxWidth,i,"clientWidth")||U1,o=k1(s.maxHeight,i,"clientHeight")||U1,c=Kst(i,t,e);let{width:u,height:d}=c;if(s.boxSizing==="content-box"){const y=up(s,"border","width"),_=up(s,"padding");u-=_.width+y.width,d-=_.height+y.height}return u=Math.max(0,u-r.width),d=Math.max(0,n?u/n:d-r.height),u=Vb(Math.min(u,a,c.maxWidth)),d=Vb(Math.min(d,o,c.maxHeight)),u&&!d&&(d=Vb(u/2)),(t!==void 0||e!==void 0)&&n&&c.height&&d>c.height&&(d=c.height,u=Vb(Math.floor(d*n))),{width:u,height:d}}function mO(i,t,e){const n=t||1,s=Math.floor(i.height*n),r=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const a=i.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${i.height}px`,a.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||a.height!==s||a.width!==r?(i.currentDevicePixelRatio=n,a.height=s,a.width=r,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Qst=(function(){let i=!1;try{const t={get passive(){return i=!0,!1}};YR()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i})();function gO(i,t){const e=Wst(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Qd(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function Jst(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:n==="middle"?e<.5?i.y:t.y:n==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function $st(i,t,e,n){const s={x:i.cp2x,y:i.cp2y},r={x:t.cp1x,y:t.cp1y},a=Qd(i,s,e),o=Qd(s,r,e),c=Qd(r,t,e),u=Qd(a,o,e),d=Qd(o,c,e);return Qd(u,d,e)}const trt=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},ert=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function xg(i,t,e){return i?trt(t,e):ert()}function vz(i,t){let e,n;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function _z(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function xz(i){return i==="angle"?{between:Hv,compare:tst,normalize:Yl}:{between:Sf,compare:(t,e)=>t-e,normalize:t=>t}}function yO({start:i,end:t,count:e,loop:n,style:s}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e===0,style:s}}function nrt(i,t,e){const{property:n,start:s,end:r}=e,{between:a,normalize:o}=xz(n),c=t.length;let{start:u,end:d,loop:g}=i,y,_;if(g){for(u+=c,d+=c,y=0,_=c;y<_&&a(o(t[u%c][n]),s,r);++y)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:g,style:i.style}}function irt(i,t,e){if(!e)return[i];const{property:n,start:s,end:r}=e,a=t.length,{compare:o,between:c,normalize:u}=xz(n),{start:d,end:g,loop:y,style:_}=nrt(i,t,e),b=[];let M=!1,S=null,E,R,N;const P=()=>c(s,N,E)&&o(s,N)!==0,k=()=>o(r,E)===0||c(r,N,E),z=()=>M||P(),L=()=>!M||k();for(let U=d,D=d;U<=g;++U)R=t[U%a],!R.skip&&(E=u(R[n]),E!==N&&(M=c(E,s,r),S===null&&z()&&(S=o(E,s)===0?U:D),S!==null&&L()&&(b.push(yO({start:S,end:U,loop:y,count:a,style:_})),S=null),D=U,N=E));return S!==null&&b.push(yO({start:S,end:g,loop:y,count:a,style:_})),b}function srt(i,t){const e=[],n=i.segments;for(let s=0;s<n.length;s++){const r=irt(n[s],i.points,t);r.length&&e.push(...r)}return e}function rrt(i,t,e,n){let s=0,r=t-1;if(e&&!n)for(;s<t&&!i[s].skip;)s++;for(;s<t&&i[s].skip;)s++;for(s%=t,e&&(r+=s);r>s&&i[r%t].skip;)r--;return r%=t,{start:s,end:r}}function art(i,t,e,n){const s=i.length,r=[];let a=t,o=i[t],c;for(c=t+1;c<=e;++c){const u=i[c%s];u.skip||u.stop?o.skip||(n=!1,r.push({start:t%s,end:(c-1)%s,loop:n}),t=a=u.stop?c:null):(a=c,o.skip&&(t=c)),o=u}return a!==null&&r.push({start:t%s,end:a%s,loop:n}),r}function ort(i,t){const e=i.points,n=i.options.spanGaps,s=e.length;if(!s)return[];const r=!!i._loop,{start:a,end:o}=rrt(e,s,r,n);if(n===!0)return vO(i,[{start:a,end:o,loop:r}],e,t);const c=o<a?o+s:o,u=!!i._fullLoop&&a===0&&o===s-1;return vO(i,art(e,a,c,u),e,t)}function vO(i,t,e,n){return!n||!n.setContext||!e?t:lrt(i,t,e,n)}function lrt(i,t,e,n){const s=i._chart.getContext(),r=_O(i.options),{_datasetIndex:a,options:{spanGaps:o}}=i,c=e.length,u=[];let d=r,g=t[0].start,y=g;function _(b,M,S,E){const R=o?-1:1;if(b!==M){for(b+=c;e[b%c].skip;)b-=R;for(;e[M%c].skip;)M+=R;b%c!==M%c&&(u.push({start:b%c,end:M%c,loop:S,style:E}),d=E,g=M%c)}}for(const b of t){g=o?g:b.start;let M=e[g%c],S;for(y=g+1;y<=b.end;y++){const E=e[y%c];S=_O(n.setContext(Lp(s,{type:"segment",p0:M,p1:E,p0DataIndex:(y-1)%c,p1DataIndex:y%c,datasetIndex:a}))),crt(S,d)&&_(g,y-1,b.loop,d),M=E,d=S}g<y-1&&_(g,y-1,b.loop,d)}return u}function _O(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function crt(i,t){if(!t)return!1;const e=[],n=function(s,r){return FR(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(i,n)!==JSON.stringify(t,n)}function Hb(i,t,e){return i.options.clip?i[e]:t[e]}function urt(i,t){const{xScale:e,yScale:n}=i;return e&&n?{left:Hb(e,t,"left"),right:Hb(e,t,"right"),top:Hb(n,t,"top"),bottom:Hb(n,t,"bottom")}:t}function hrt(i,t){const e=t._clip;if(e.disabled)return!1;const n=urt(t,i.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:n.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class frt{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,s){const r=e.listeners[s],a=e.duration;r.forEach(o=>o({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(n-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=lz.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const r=n.items;let a=r.length-1,o=!1,c;for(;a>=0;--a)c=r[a],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(t),o=!0):(r[a]=r[r.length-1],r.pop());o&&(s.draw(),this._notify(s,n,t,"progress")),r.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Wu=new frt;const xO="transparent",drt={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const n=cO(i||xO),s=n.valid&&cO(t||xO);return s&&s.valid?s.mix(n,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class prt{constructor(t,e,n,s){const r=e[n];s=zb([t.to,s,r,t.from]);const a=zb([t.from,r,s]);this._active=!0,this._fn=t.fn||drt[t.type||typeof a],this._easing=av[t.easing]||av.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const s=this._target[this._prop],r=n-this._start,a=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=zb([t.to,e,s,t.from]),this._from=zb([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,s=this._prop,r=this._from,a=this._loop,o=this._to;let c;if(this._active=r!==o&&(a||e<n),!this._active){this._target[s]=o,this._notify(!0);return}if(e<0){this._target[s]=r;return}c=e/n%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(r,o,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][e]()}}class bz{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!ii(t))return;const e=Object.keys(Os.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!ii(r))return;const a={};for(const o of e)a[o]=r[o];(nr(r.properties)&&r.properties||[s]).forEach(o=>{(o===s||!n.has(o))&&n.set(o,a)})})}_animateOptions(t,e){const n=e.options,s=grt(t,n);if(!s)return[];const r=this._createAnimations(s,n);return n.$shared&&mrt(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,e){const n=this._properties,s=[],r=t.$animations||(t.$animations={}),a=Object.keys(e),o=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(t,e));continue}const d=e[u];let g=r[u];const y=n.get(u);if(g)if(y&&g.active()){g.update(y,d,o);continue}else g.cancel();if(!y||!y.duration){t[u]=d;continue}r[u]=g=new prt(y,t,u,d),s.push(g)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const n=this._createAnimations(t,e);if(n.length)return Wu.add(this._chart,n),!0}}function mrt(i,t){const e=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const r=i[n[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function grt(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function bO(i,t){const e=i&&i.options||{},n=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:n?r:s,end:n?s:r}}function yrt(i,t,e){if(e===!1)return!1;const n=bO(i,e),s=bO(t,e);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function vrt(i){let t,e,n,s;return ii(i)?(t=i.top,e=i.right,n=i.bottom,s=i.left):t=e=n=s=i,{top:t,right:e,bottom:n,left:s,disabled:i===!1}}function Sz(i,t){const e=[],n=i._getSortedDatasetMetas(t);let s,r;for(s=0,r=n.length;s<r;++s)e.push(n[s].index);return e}function SO(i,t,e,n={}){const s=i.keys,r=n.mode==="single";let a,o,c,u;if(t===null)return;let d=!1;for(a=0,o=s.length;a<o;++a){if(c=+s[a],c===e){if(d=!0,n.all)continue;break}u=i.values[c],vl(u)&&(r||t===0||su(t)===su(u))&&(t+=u)}return!d&&!n.all?0:t}function _rt(i,t){const{iScale:e,vScale:n}=t,s=e.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",a=Object.keys(i),o=new Array(a.length);let c,u,d;for(c=0,u=a.length;c<u;++c)d=a[c],o[c]={[s]:d,[r]:i[d]};return o}function bA(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function xrt(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function brt(i){const{min:t,max:e,minDefined:n,maxDefined:s}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function Srt(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function EO(i,t,e,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const r=i[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function TO(i,t){const{chart:e,_cachedMeta:n}=i,s=e._stacks||(e._stacks={}),{iScale:r,vScale:a,index:o}=n,c=r.axis,u=a.axis,d=xrt(r,a,n),g=t.length;let y;for(let _=0;_<g;++_){const b=t[_],{[c]:M,[u]:S}=b,E=b._stacks||(b._stacks={});y=E[u]=Srt(s,d,M),y[o]=S,y._top=EO(y,a,!0,n.type),y._bottom=EO(y,a,!1,n.type);const R=y._visualValues||(y._visualValues={});R[o]=S}}function SA(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function Ert(i,t){return Lp(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Trt(i,t,e){return Lp(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function xy(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const s of t){const r=s._stacks;if(!r||r[n]===void 0||r[n][e]===void 0)return;delete r[n][e],r[n]._visualValues!==void 0&&r[n]._visualValues[e]!==void 0&&delete r[n]._visualValues[e]}}}const EA=i=>i==="reset"||i==="none",MO=(i,t)=>t?i:Object.assign({},i),Mrt=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:Sz(e,!0),values:null};class KE{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=bA(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&xy(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),s=(g,y,_,b)=>g==="x"?y:g==="r"?b:_,r=e.xAxisID=Un(n.xAxisID,SA(t,"x")),a=e.yAxisID=Un(n.yAxisID,SA(t,"y")),o=e.rAxisID=Un(n.rAxisID,SA(t,"r")),c=e.indexAxis,u=e.iAxisID=s(c,r,a,o),d=e.vAxisID=s(c,a,r,o);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(u),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&aO(this._data,this),t._stacked&&xy(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(ii(e)){const s=this._cachedMeta;this._data=_rt(e,s)}else if(n!==e){if(n){aO(n,this);const s=this._cachedMeta;xy(s),s._parsed=[]}e&&Object.isExtensible(e)&&sst(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const r=e._stacked;e._stacked=bA(e.vScale,e),e.stack!==n.stack&&(s=!0,xy(e),e.stack=n.stack),this._resyncElements(t),(s||r!==e._stacked)&&(TO(this,e._parsed),e._stacked=bA(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:s}=this,{iScale:r,_stacked:a}=n,o=r.axis;let c=t===0&&e===s.length?!0:n._sorted,u=t>0&&n._parsed[t-1],d,g,y;if(this._parsing===!1)n._parsed=s,n._sorted=!0,y=s;else{nr(s[t])?y=this.parseArrayData(n,s,t,e):ii(s[t])?y=this.parseObjectData(n,s,t,e):y=this.parsePrimitiveData(n,s,t,e);const _=()=>g[o]===null||u&&g[o]<u[o];for(d=0;d<e;++d)n._parsed[d+t]=g=y[d],c&&(_()&&(c=!1),u=g);n._sorted=c}a&&TO(this,y)}parsePrimitiveData(t,e,n,s){const{iScale:r,vScale:a}=t,o=r.axis,c=a.axis,u=r.getLabels(),d=r===a,g=new Array(s);let y,_,b;for(y=0,_=s;y<_;++y)b=y+n,g[y]={[o]:d||r.parse(u[b],b),[c]:a.parse(e[b],b)};return g}parseArrayData(t,e,n,s){const{xScale:r,yScale:a}=t,o=new Array(s);let c,u,d,g;for(c=0,u=s;c<u;++c)d=c+n,g=e[d],o[c]={x:r.parse(g[0],d),y:a.parse(g[1],d)};return o}parseObjectData(t,e,n,s){const{xScale:r,yScale:a}=t,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let d,g,y,_;for(d=0,g=s;d<g;++d)y=d+n,_=e[y],u[d]={x:r.parse(Sp(_,o),y),y:a.parse(Sp(_,c),y)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const s=this.chart,r=this._cachedMeta,a=e[t.axis],o={keys:Sz(s,!0),values:e._stacks[t.axis]._visualValues};return SO(o,a,r.index,{mode:n})}updateRangeFromParsed(t,e,n,s){const r=n[e.axis];let a=r===null?NaN:r;const o=s&&n._stacks[e.axis];s&&o&&(s.values=o,a=SO(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const n=this._cachedMeta,s=n._parsed,r=n._sorted&&t===n.iScale,a=s.length,o=this._getOtherScale(t),c=Mrt(e,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:g}=brt(o);let y,_;function b(){_=s[y];const M=_[o.axis];return!vl(_[t.axis])||d>M||g<M}for(y=0;y<a&&!(!b()&&(this.updateRangeFromParsed(u,t,_,c),r));++y);if(r){for(y=a-1;y>=0;--y)if(!b()){this.updateRangeFromParsed(u,t,_,c);break}}return u}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let s,r,a;for(s=0,r=e.length;s<r;++s)a=e[s][t.axis],vl(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=vrt(Un(this.options.clip,yrt(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,s=n.data||[],r=e.chartArea,a=[],o=this._drawStart||0,c=this._drawCount||s.length-o,u=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(t,r,o,c),d=o;d<o+c;++d){const g=s[d];g.hidden||(g.active&&u?a.push(g):g.draw(t,r))}for(d=0;d<a.length;++d)a[d].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];r=a.$context||(a.$context=Trt(this.getContext(),t,a)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Ert(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const s=e==="active",r=this._cachedDataOpts,a=t+"-"+e,o=r[a],c=this.enableOptionSharing&&Fv(n);if(o)return MO(o,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),g=s?[`${t}Hover`,"hover",t,""]:[t,""],y=u.getOptionScopes(this.getDataset(),d),_=Object.keys(Os.elements[t]),b=()=>this.getContext(n,s,e),M=u.resolveNamedOptions(y,_,b,g);return M.$shared&&(M.$shared=c,r[a]=Object.freeze(MO(M,c))),M}_resolveAnimations(t,e,n){const s=this.chart,r=this._cachedDataOpts,a=`animation-${e}`,o=r[a];if(o)return o;let c;if(s.options.animation!==!1){const d=this.chart.config,g=d.datasetAnimationScopeKeys(this._type,e),y=d.getOptionScopes(this.getDataset(),g);c=d.createResolver(y,this.getContext(t,n,e))}const u=new bz(s,c&&c.animations);return c&&c._cacheable&&(r[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||EA(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(n),a=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:a}}updateElement(t,e,n,s){EA(s)?Object.assign(t,n):this._resolveAnimations(e,s).update(t,n)}updateSharedOptions(t,e,n){t&&!EA(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,s){t.active=s;const r=this.getStyle(e,s);this._resolveAnimations(e,n,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[o,c,u]of this._syncList)this[o](c,u);this._syncList=[];const s=n.length,r=e.length,a=Math.min(r,s);a&&this.parse(0,a),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,n=!0){const s=this._cachedMeta,r=s.data,a=t+e;let o;const c=u=>{for(u.length+=e,o=u.length-1;o>=a;o--)u[o]=u[o-e]};for(c(r),o=t;o<a;++o)r[o]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,s){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(t,e);n._stacked&&xy(n,s)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,s]=t;this[e](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Art(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let s=0,r=e.length;s<r;s++)n=n.concat(e[s].controller.getAllParsedValues(i));i._cache.$bar=oz(n.sort((s,r)=>s-r))}return i._cache.$bar}function wrt(i){const t=i.iScale,e=Art(t,i.type);let n=t._length,s,r,a,o;const c=()=>{a===32767||a===-32768||(Fv(o)&&(n=Math.min(n,Math.abs(a-o)||n)),o=a)};for(s=0,r=e.length;s<r;++s)a=t.getPixelForValue(e[s]),c();for(o=void 0,s=0,r=t.ticks.length;s<r;++s)a=t.getPixelForTick(s),c();return n}function Rrt(i,t,e,n){const s=e.barThickness;let r,a;return gi(s)?(r=t.min*e.categoryPercentage,a=e.barPercentage):(r=s*n,a=1),{chunk:r/n,ratio:a,start:t.pixels[i]-r/2}}function Crt(i,t,e,n){const s=t.pixels,r=s[i];let a=i>0?s[i-1]:null,o=i<s.length-1?s[i+1]:null;const c=e.categoryPercentage;a===null&&(a=r-(o===null?t.end-t.start:o-r)),o===null&&(o=r+r-a);const u=r-(r-Math.min(a,o))/2*c;return{chunk:Math.abs(o-a)/2*c/n,ratio:e.barPercentage,start:u}}function Drt(i,t,e,n){const s=e.parse(i[0],n),r=e.parse(i[1],n),a=Math.min(s,r),o=Math.max(s,r);let c=a,u=o;Math.abs(a)>Math.abs(o)&&(c=o,u=a),t[e.axis]=u,t._custom={barStart:c,barEnd:u,start:s,end:r,min:a,max:o}}function Ez(i,t,e,n){return nr(i)?Drt(i,t,e,n):t[e.axis]=e.parse(i,n),t}function AO(i,t,e,n){const s=i.iScale,r=i.vScale,a=s.getLabels(),o=s===r,c=[];let u,d,g,y;for(u=e,d=e+n;u<d;++u)y=t[u],g={},g[s.axis]=o||s.parse(a[u],u),c.push(Ez(y,g,r,u));return c}function TA(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function Irt(i,t,e){return i!==0?su(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Nrt(i){let t,e,n,s,r;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(s="end",r="start"):(s="start",r="end"),{start:e,end:n,reverse:t,top:s,bottom:r}}function Ort(i,t,e,n){let s=t.borderSkipped;const r={};if(!s){i.borderSkipped=r;return}if(s===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:c,top:u,bottom:d}=Nrt(i);s==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?s=u:(e._bottom||0)===n?s=d:(r[wO(d,a,o,c)]=!0,s=u)),r[wO(s,a,o,c)]=!0,i.borderSkipped=r}function wO(i,t,e,n){return n?(i=Prt(i,t,e),i=RO(i,e,t)):i=RO(i,t,e),i}function Prt(i,t,e){return i===t?e:i===e?t:i}function RO(i,t,e){return i==="start"?t:i==="end"?e:i}function Urt(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class Lrt extends KE{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,s){return AO(t,e,n,s)}parseArrayData(t,e,n,s){return AO(t,e,n,s)}parseObjectData(t,e,n,s){const{iScale:r,vScale:a}=t,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,u=r.axis==="x"?o:c,d=a.axis==="x"?o:c,g=[];let y,_,b,M;for(y=n,_=n+s;y<_;++y)M=e[y],b={},b[r.axis]=r.parse(Sp(M,u),y),g.push(Ez(Sp(M,d),b,a,y));return g}updateRangeFromParsed(t,e,n,s){super.updateRangeFromParsed(t,e,n,s);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:s}=e,r=this.getParsed(t),a=r._custom,o=TA(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,s){const r=s==="reset",{index:a,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),u=o.isHorizontal(),d=this._getRuler(),{sharedOptions:g,includeOptions:y}=this._getSharedOptions(e,s);for(let _=e;_<e+n;_++){const b=this.getParsed(_),M=r||gi(b[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(_),S=this._calculateBarIndexPixels(_,d),E=(b._stacks||{})[o.axis],R={horizontal:u,base:M.base,enableBorderRadius:!E||TA(b._custom)||a===E._top||a===E._bottom,x:u?M.head:S.center,y:u?S.center:M.head,height:u?S.size:Math.abs(M.size),width:u?Math.abs(M.size):S.size};y&&(R.options=g||this.resolveDataElementOptions(_,t[_].active?"active":s));const N=R.options||t[_].options;Ort(R,N,E,a),Urt(R,N,d.ratio),this.updateElement(t[_],_,R,s)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),r=n.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(e),c=o&&o[n.axis],u=d=>{const g=d._parsed.find(_=>_[n.axis]===c),y=g&&g[d.vScale.axis];if(gi(y)||isNaN(y))return!0};for(const d of s)if(!(e!==void 0&&u(d))&&((r===!1||a.indexOf(d.stack)===-1||r===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[Un(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const s=this._getStacks(t,n),r=e!==void 0?s.indexOf(e):-1;return r===-1?s.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,s=[];let r,a;for(r=0,a=e.data.length;r<a;++r)s.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=t.barThickness;return{min:o||wrt(e),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:s},options:{base:r,minBarLength:a}}=this,o=r||0,c=this.getParsed(t),u=c._custom,d=TA(u);let g=c[e.axis],y=0,_=n?this.applyStack(e,c,n):g,b,M;_!==g&&(y=_-g,_=g),d&&(g=u.barStart,_=u.barEnd-u.barStart,g!==0&&su(g)!==su(u.barEnd)&&(y=0),y+=g);const S=!gi(r)&&!d?r:y;let E=e.getPixelForValue(S);if(this.chart.getDataVisibility(t)?b=e.getPixelForValue(y+_):b=E,M=b-E,Math.abs(M)<a){M=Irt(M,e,o)*a,g===o&&(E-=M/2);const R=e.getPixelForDecimal(0),N=e.getPixelForDecimal(1),P=Math.min(R,N),k=Math.max(R,N);E=Math.max(Math.min(E,k),P),b=E+M,n&&!d&&(c._stacks[e.axis]._visualValues[s]=e.getValueForPixel(b)-e.getValueForPixel(E))}if(E===e.getPixelForValue(o)){const R=su(M)*e.getLineWidthForValue(o)/2;E+=R,M-=R}return{size:M,base:E,head:b,center:b+M/2}}_calculateBarIndexPixels(t,e){const n=e.scale,s=this.options,r=s.skipNull,a=Un(s.maxBarThickness,1/0);let o,c;const u=this._getAxisCount();if(e.grouped){const d=r?this._getStackCount(t):e.stackCount,g=s.barThickness==="flex"?Crt(t,e,s,d*u):Rrt(t,e,s,d*u),y=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,_=this._getAxis().indexOf(Un(y,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+_;o=g.start+g.chunk*b+g.chunk/2,c=Math.min(a,g.chunk*g.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),c=Math.min(a,e.min*e.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,s=n.length;let r=0;for(;r<s;++r)this.getParsed(r)[e.axis]!==null&&!n[r].hidden&&n[r].draw(this._ctx)}}function krt(i,t,e){let n=1,s=1,r=0,a=0;if(t<Ss){const o=i,c=o+t,u=Math.cos(o),d=Math.sin(o),g=Math.cos(c),y=Math.sin(c),_=(N,P,k)=>Hv(N,o,c,!0)?1:Math.max(P,P*e,k,k*e),b=(N,P,k)=>Hv(N,o,c,!0)?-1:Math.min(P,P*e,k,k*e),M=_(0,u,g),S=_(ir,d,y),E=b(wi,u,g),R=b(wi+ir,d,y);n=(M-E)/2,s=(S-R)/2,r=-(M+E)/2,a=-(S+R)/2}return{ratioX:n,ratioY:s,offsetX:r,offsetY:a}}class Brt extends KE{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:s}}=t.legend.options;return e.labels.map((r,a)=>{const c=t.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let r=c=>+n[c];if(ii(n[t])){const{key:c="value"}=this._parsing;r=u=>+Sp(n[u],c)}let a,o;for(a=t,o=t+e;a<o;++a)s._parsed[a]=r(a)}}_getRotation(){return $u(this.options.rotation-90)}_getCircumference(){return $u(this.options.circumference)}_getRotationExtents(){let t=Ss,e=-Ss;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,r=s._getRotation(),a=s._getCircumference();t=Math.min(t,r),e=Math.max(e,r+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,s=this._cachedMeta,r=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-a)/2,0),c=Math.min(Vit(this.options.cutout,o),1),u=this._getRingWeight(this.index),{circumference:d,rotation:g}=this._getRotationExtents(),{ratioX:y,ratioY:_,offsetX:b,offsetY:M}=krt(g,d,c),S=(n.width-a)/y,E=(n.height-a)/_,R=Math.max(Math.min(S,E)/2,0),N=nz(this.options.radius,R),P=Math.max(N*c,0),k=(N-P)/this._getVisibleDatasetWeightTotal();this.offsetX=b*N,this.offsetY=M*N,s.total=this.calculateTotal(),this.outerRadius=N-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,s=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/Ss)}updateElements(t,e,n,s){const r=s==="reset",a=this.chart,o=a.chartArea,u=a.options.animation,d=(o.left+o.right)/2,g=(o.top+o.bottom)/2,y=r&&u.animateScale,_=y?0:this.innerRadius,b=y?0:this.outerRadius,{sharedOptions:M,includeOptions:S}=this._getSharedOptions(e,s);let E=this._getRotation(),R;for(R=0;R<e;++R)E+=this._circumference(R,r);for(R=e;R<e+n;++R){const N=this._circumference(R,r),P=t[R],k={x:d+this.offsetX,y:g+this.offsetY,startAngle:E,endAngle:E+N,circumference:N,outerRadius:b,innerRadius:_};S&&(k.options=M||this.resolveDataElementOptions(R,P.active?"active":s)),E+=N,this.updateElement(P,R,k,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n=0,s;for(s=0;s<e.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Ss*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,s=n.data.labels||[],r=VR(e._parsed[t],n.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let s,r,a,o,c;if(!t){for(s=0,r=n.data.datasets.length;s<r;++s)if(n.isDatasetVisible(s)){a=n.getDatasetMeta(s),t=a.data,o=a.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)c=o.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(e=Math.max(e,c.borderWidth||0,c.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,s=t.length;n<s;++n){const r=this.resolveDataElementOptions(n);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Un(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class zrt extends KE{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:s=[],_dataset:r}=e,a=this.chart._animationsDisabled;let{start:o,count:c}=ost(e,s,a);this._drawStart=o,this._drawCount=c,lst(e)&&(o=0,c=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=s;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:u},t),this.updateElements(s,o,c,t)}updateElements(t,e,n,s){const r=s==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:g}=this._getSharedOptions(e,s),y=a.axis,_=o.axis,{spanGaps:b,segment:M}=this.options,S=Vv(b)?b:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||r||s==="none",R=e+n,N=t.length;let P=e>0&&this.getParsed(e-1);for(let k=0;k<N;++k){const z=t[k],L=E?z:{};if(k<e||k>=R){L.skip=!0;continue}const U=this.getParsed(k),D=gi(U[_]),O=L[y]=a.getPixelForValue(U[y],k),F=L[_]=r||D?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,U,c):U[_],k);L.skip=isNaN(O)||isNaN(F)||D,L.stop=k>0&&Math.abs(U[y]-P[y])>S,M&&(L.parsed=U,L.raw=u.data[k]),g&&(L.options=d||this.resolveDataElementOptions(k,z.active?"active":s)),E||this.updateElement(z,k,L,s),P=U}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return n;const r=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,r,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function jd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ZR{static override(t){Object.assign(ZR.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return jd()}parse(){return jd()}format(){return jd()}add(){return jd()}diff(){return jd()}startOf(){return jd()}endOf(){return jd()}}var Frt={_date:ZR};function Vrt(i,t,e,n){const{controller:s,data:r,_sorted:a}=i,o=s._cachedMeta.iScale,c=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&a&&r.length){const u=o._reversePixels?nst:sp;if(n){if(s._sharedOptions){const d=r[0],g=typeof d.getRange=="function"&&d.getRange(t);if(g){const y=u(r,t,e-g),_=u(r,t,e+g);return{lo:y.lo,hi:_.hi}}}}else{const d=u(r,t,e);if(c){const{vScale:g}=s._cachedMeta,{_parsed:y}=i,_=y.slice(0,d.lo+1).reverse().findIndex(M=>!gi(M[g.axis]));d.lo-=Math.max(0,_);const b=y.slice(d.hi).findIndex(M=>!gi(M[g.axis]));d.hi+=Math.max(0,b)}return d}}return{lo:0,hi:r.length-1}}function ZE(i,t,e,n,s){const r=i.getSortedVisibleDatasetMetas(),a=e[t];for(let o=0,c=r.length;o<c;++o){const{index:u,data:d}=r[o],{lo:g,hi:y}=Vrt(r[o],t,a,s);for(let _=g;_<=y;++_){const b=d[_];b.skip||n(b,u,_)}}}function Hrt(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(n,s){const r=t?Math.abs(n.x-s.x):0,a=e?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function MA(i,t,e,n,s){const r=[];return!s&&!i.isPointInArea(t)||ZE(i,e,t,function(o,c,u){!s&&!Gv(o,i.chartArea,0)||o.inRange(t.x,t.y,n)&&r.push({element:o,datasetIndex:c,index:u})},!0),r}function Grt(i,t,e,n){let s=[];function r(a,o,c){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],n),{angle:g}=rz(a,{x:t.x,y:t.y});Hv(g,u,d)&&s.push({element:a,datasetIndex:o,index:c})}return ZE(i,e,t,r),s}function jrt(i,t,e,n,s,r){let a=[];const o=Hrt(e);let c=Number.POSITIVE_INFINITY;function u(d,g,y){const _=d.inRange(t.x,t.y,s);if(n&&!_)return;const b=d.getCenterPoint(s);if(!(!!r||i.isPointInArea(b))&&!_)return;const S=o(t,b);S<c?(a=[{element:d,datasetIndex:g,index:y}],c=S):S===c&&a.push({element:d,datasetIndex:g,index:y})}return ZE(i,e,t,u),a}function AA(i,t,e,n,s,r){return!r&&!i.isPointInArea(t)?[]:e==="r"&&!n?Grt(i,t,e,s):jrt(i,t,e,n,s,r)}function CO(i,t,e,n,s){const r=[],a=e==="x"?"inXRange":"inYRange";let o=!1;return ZE(i,e,t,(c,u,d)=>{c[a]&&c[a](t[e],s)&&(r.push({element:c,datasetIndex:u,index:d}),o=o||c.inRange(t.x,t.y,s))}),n&&!o?[]:r}var Wrt={modes:{index(i,t,e,n){const s=Zd(t,i),r=e.axis||"x",a=e.includeInvisible||!1,o=e.intersect?MA(i,s,r,n,a):AA(i,s,r,!1,n,a),c=[];return o.length?(i.getSortedVisibleDatasetMetas().forEach(u=>{const d=o[0].index,g=u.data[d];g&&!g.skip&&c.push({element:g,datasetIndex:u.index,index:d})}),c):[]},dataset(i,t,e,n){const s=Zd(t,i),r=e.axis||"xy",a=e.includeInvisible||!1;let o=e.intersect?MA(i,s,r,n,a):AA(i,s,r,!1,n,a);if(o.length>0){const c=o[0].datasetIndex,u=i.getDatasetMeta(c).data;o=[];for(let d=0;d<u.length;++d)o.push({element:u[d],datasetIndex:c,index:d})}return o},point(i,t,e,n){const s=Zd(t,i),r=e.axis||"xy",a=e.includeInvisible||!1;return MA(i,s,r,n,a)},nearest(i,t,e,n){const s=Zd(t,i),r=e.axis||"xy",a=e.includeInvisible||!1;return AA(i,s,r,e.intersect,n,a)},x(i,t,e,n){const s=Zd(t,i);return CO(i,s,"x",e.intersect,n)},y(i,t,e,n){const s=Zd(t,i);return CO(i,s,"y",e.intersect,n)}}};const Tz=["left","top","right","bottom"];function by(i,t){return i.filter(e=>e.pos===t)}function DO(i,t){return i.filter(e=>Tz.indexOf(e.pos)===-1&&e.box.axis===t)}function Sy(i,t){return i.sort((e,n)=>{const s=t?n:e,r=t?e:n;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function qrt(i){const t=[];let e,n,s,r,a,o;for(e=0,n=(i||[]).length;e<n;++e)s=i[e],{position:r,options:{stack:a,stackWeight:o=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&r+a,stackWeight:o});return t}function Xrt(i){const t={};for(const e of i){const{stack:n,pos:s,stackWeight:r}=e;if(!n||!Tz.includes(s))continue;const a=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return t}function Yrt(i,t){const e=Xrt(i),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let r,a,o;for(r=0,a=i.length;r<a;++r){o=i[r];const{fullSize:c}=o.box,u=e[o.stack],d=u&&o.stackWeight/u.weight;o.horizontal?(o.width=d?d*n:c&&t.availableWidth,o.height=s):(o.width=n,o.height=d?d*s:c&&t.availableHeight)}return e}function Krt(i){const t=qrt(i),e=Sy(t.filter(u=>u.box.fullSize),!0),n=Sy(by(t,"left"),!0),s=Sy(by(t,"right")),r=Sy(by(t,"top"),!0),a=Sy(by(t,"bottom")),o=DO(t,"x"),c=DO(t,"y");return{fullSize:e,leftAndTop:n.concat(r),rightAndBottom:s.concat(c).concat(a).concat(o),chartArea:by(t,"chartArea"),vertical:n.concat(s).concat(c),horizontal:r.concat(a).concat(o)}}function IO(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function Mz(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function Zrt(i,t,e,n){const{pos:s,box:r}=e,a=i.maxPadding;if(!ii(s)){e.size&&(i[s]-=e.size);const g=n[e.stack]||{size:0,count:1};g.size=Math.max(g.size,e.horizontal?r.height:r.width),e.size=g.size/g.count,i[s]+=e.size}r.getPadding&&Mz(a,r.getPadding());const o=Math.max(0,t.outerWidth-IO(a,i,"left","right")),c=Math.max(0,t.outerHeight-IO(a,i,"top","bottom")),u=o!==i.w,d=c!==i.h;return i.w=o,i.h=c,e.horizontal?{same:u,other:d}:{same:d,other:u}}function Qrt(i){const t=i.maxPadding;function e(n){const s=Math.max(t[n]-i[n],0);return i[n]+=s,s}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function Jrt(i,t){const e=t.maxPadding;function n(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{r[a]=Math.max(t[a],e[a])}),r}return n(i?["left","right"]:["top","bottom"])}function Ly(i,t,e,n){const s=[];let r,a,o,c,u,d;for(r=0,a=i.length,u=0;r<a;++r){o=i[r],c=o.box,c.update(o.width||t.w,o.height||t.h,Jrt(o.horizontal,t));const{same:g,other:y}=Zrt(t,e,o,n);u|=g&&s.length,d=d||y,c.fullSize||s.push(o)}return u&&Ly(s,t,e,n)||d}function Gb(i,t,e,n,s){i.top=e,i.left=t,i.right=t+n,i.bottom=e+s,i.width=n,i.height=s}function NO(i,t,e,n){const s=e.padding;let{x:r,y:a}=t;for(const o of i){const c=o.box,u=n[o.stack]||{placed:0,weight:1},d=o.stackWeight/u.weight||1;if(o.horizontal){const g=t.w*d,y=u.size||c.height;Fv(u.start)&&(a=u.start),c.fullSize?Gb(c,s.left,a,e.outerWidth-s.right-s.left,y):Gb(c,t.left+u.placed,a,g,y),u.start=a,u.placed+=g,a=c.bottom}else{const g=t.h*d,y=u.size||c.width;Fv(u.start)&&(r=u.start),c.fullSize?Gb(c,r,s.top,y,e.outerHeight-s.bottom-s.top):Gb(c,r,t.top+u.placed,y,g),u.start=r,u.placed+=g,r=c.right}}t.x=r,t.y=a}var ml={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const s=_l(i.options.layout.padding),r=Math.max(t-s.width,0),a=Math.max(e-s.height,0),o=Krt(i.boxes),c=o.vertical,u=o.horizontal;Ai(i.boxes,M=>{typeof M.beforeLayout=="function"&&M.beforeLayout()});const d=c.reduce((M,S)=>S.box.options&&S.box.options.display===!1?M:M+1,0)||1,g=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/d,hBoxMaxHeight:a/2}),y=Object.assign({},s);Mz(y,_l(n));const _=Object.assign({maxPadding:y,w:r,h:a,x:s.left,y:s.top},s),b=Yrt(c.concat(u),g);Ly(o.fullSize,_,g,b),Ly(c,_,g,b),Ly(u,_,g,b)&&Ly(c,_,g,b),Qrt(_),NO(o.leftAndTop,_,g,b),_.x+=_.w,_.y+=_.h,NO(o.rightAndBottom,_,g,b),i.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},Ai(o.chartArea,M=>{const S=M.box;Object.assign(S,i.chartArea),S.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class Az{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,s){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):n)}}isAttached(t){return!0}updateConfig(t){}}class $rt extends Az{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const pS="$chartjs",tat={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},OO=i=>i===null||i==="";function eat(i,t){const e=i.style,n=i.getAttribute("height"),s=i.getAttribute("width");if(i[pS]={initial:{height:n,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",OO(s)){const r=gO(i,"width");r!==void 0&&(i.width=r)}if(OO(n))if(i.style.height==="")i.height=i.width/(t||2);else{const r=gO(i,"height");r!==void 0&&(i.height=r)}return i}const wz=Qst?{passive:!0}:!1;function nat(i,t,e){i&&i.addEventListener(t,e,wz)}function iat(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,wz)}function sat(i,t){const e=tat[i.type]||i.type,{x:n,y:s}=Zd(i,t);return{type:e,chart:t,native:i,x:n!==void 0?n:null,y:s!==void 0?s:null}}function B1(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function rat(i,t,e){const n=i.canvas,s=new MutationObserver(r=>{let a=!1;for(const o of r)a=a||B1(o.addedNodes,n),a=a&&!B1(o.removedNodes,n);a&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function aat(i,t,e){const n=i.canvas,s=new MutationObserver(r=>{let a=!1;for(const o of r)a=a||B1(o.removedNodes,n),a=a&&!B1(o.addedNodes,n);a&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const Wv=new Map;let PO=0;function Rz(){const i=window.devicePixelRatio;i!==PO&&(PO=i,Wv.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function oat(i,t){Wv.size||window.addEventListener("resize",Rz),Wv.set(i,t)}function lat(i){Wv.delete(i),Wv.size||window.removeEventListener("resize",Rz)}function cat(i,t,e){const n=i.canvas,s=n&&KR(n);if(!s)return;const r=cz((o,c)=>{const u=s.clientWidth;e(o,c),u<s.clientWidth&&e()},window),a=new ResizeObserver(o=>{const c=o[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||r(u,d)});return a.observe(s),oat(i,r),a}function wA(i,t,e){e&&e.disconnect(),t==="resize"&&lat(i)}function uat(i,t,e){const n=i.canvas,s=cz(r=>{i.ctx!==null&&e(sat(r,i))},i);return nat(n,t,s),s}class hat extends Az{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(eat(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[pS])return!1;const n=e[pS].initial;["height","width"].forEach(r=>{const a=n[r];gi(a)?e.removeAttribute(r):e.setAttribute(r,a)});const s=n.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[pS],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),a={attach:rat,detach:aat,resize:cat}[e]||uat;s[e]=a(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),s=n[e];if(!s)return;({attach:wA,detach:wA,resize:wA}[e]||iat)(t,e,s),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,s){return Zst(t,e,n,s)}isAttached(t){const e=t&&KR(t);return!!(e&&e.isConnected)}}function fat(i){return!YR()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?$rt:hat}class yh{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Vv(this.x)&&Vv(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const s={};return t.forEach(r=>{s[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),s}}function dat(i,t){const e=i.options.ticks,n=pat(i),s=Math.min(e.maxTicksLimit||n,n),r=e.major.enabled?gat(t):[],a=r.length,o=r[0],c=r[a-1],u=[];if(a>s)return yat(t,u,r,a/s),u;const d=mat(r,t,s);if(a>0){let g,y;const _=a>1?Math.round((c-o)/(a-1)):null;for(jb(t,u,d,gi(_)?0:o-_,o),g=0,y=a-1;g<y;g++)jb(t,u,d,r[g],r[g+1]);return jb(t,u,d,c,gi(_)?t.length:c+_),u}return jb(t,u,d),u}function pat(i){const t=i.options.offset,e=i._tickSize(),n=i._length/e+(t?0:1),s=i._maxLength/e;return Math.floor(Math.min(n,s))}function mat(i,t,e){const n=vat(i),s=t.length/e;if(!n)return Math.max(s,1);const r=Kit(n);for(let a=0,o=r.length-1;a<o;a++){const c=r[a];if(c>s)return c}return Math.max(s,1)}function gat(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}function yat(i,t,e,n){let s=0,r=e[0],a;for(n=Math.ceil(n),a=0;a<i.length;a++)a===r&&(t.push(i[a]),s++,r=e[s*n])}function jb(i,t,e,n,s){const r=Un(n,0),a=Math.min(Un(s,i.length),i.length);let o=0,c,u,d;for(e=Math.ceil(e),s&&(c=s-n,e=c/Math.floor(c/e)),d=r;d<0;)o++,d=Math.round(r+o*e);for(u=Math.max(r,0);u<a;u++)u===d&&(t.push(i[u]),o++,d=Math.round(r+o*e))}function vat(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}const _at=i=>i==="left"?"right":i==="right"?"left":i,UO=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,LO=(i,t)=>Math.min(t||i,i);function kO(i,t){const e=[],n=i.length/t,s=i.length;let r=0;for(;r<s;r+=n)e.push(i[Math.floor(r)]);return e}function xat(i,t,e){const n=i.ticks.length,s=Math.min(t,n-1),r=i._startPixel,a=i._endPixel,o=1e-6;let c=i.getPixelForTick(s),u;if(!(e&&(n===1?u=Math.max(c-r,a-c):t===0?u=(i.getPixelForTick(1)-c)/2:u=(c-i.getPixelForTick(s-1))/2,c+=s<t?u:-u,c<r-o||c>a+o)))return c}function bat(i,t){Ai(i,e=>{const n=e.gc,s=n.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[n[r]];n.splice(0,s)}})}function Ey(i){return i.drawTicks?i.tickLength:0}function BO(i,t){if(!i.display)return 0;const e=la(i.font,t),n=_l(i.padding);return(nr(i.text)?i.text.length:1)*e.lineHeight+n.height}function Sat(i,t){return Lp(i,{scale:t,type:"scale"})}function Eat(i,t,e){return Lp(i,{tick:e,index:t,type:"tick"})}function Tat(i,t,e){let n=zR(i);return(e&&t!=="right"||!e&&t==="right")&&(n=_at(n)),n}function Mat(i,t,e,n){const{top:s,left:r,bottom:a,right:o,chart:c}=i,{chartArea:u,scales:d}=c;let g=0,y,_,b;const M=a-s,S=o-r;if(i.isHorizontal()){if(_=na(n,r,o),ii(e)){const E=Object.keys(e)[0],R=e[E];b=d[E].getPixelForValue(R)+M-t}else e==="center"?b=(u.bottom+u.top)/2+M-t:b=UO(i,e,t);y=o-r}else{if(ii(e)){const E=Object.keys(e)[0],R=e[E];_=d[E].getPixelForValue(R)-S+t}else e==="center"?_=(u.left+u.right)/2-S+t:_=UO(i,e,t);b=na(n,a,s),g=e==="left"?-ir:ir}return{titleX:_,titleY:b,maxWidth:y,rotation:g}}class n0 extends yh{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:s}=this;return t=jc(t,Number.POSITIVE_INFINITY),e=jc(e,Number.NEGATIVE_INFINITY),n=jc(n,Number.POSITIVE_INFINITY),s=jc(s,Number.NEGATIVE_INFINITY),{min:jc(t,n),max:jc(e,s),minDefined:vl(t),maxDefined:vl(e)}}getMinMax(t){let{min:e,max:n,minDefined:s,maxDefined:r}=this.getUserBounds(),a;if(s&&r)return{min:e,max:n};const o=this.getMatchingVisibleMetas();for(let c=0,u=o.length;c<u;++c)a=o[c].controller.getMinMax(this,t),s||(e=Math.min(e,a.min)),r||(n=Math.max(n,a.max));return e=r&&e>n?n:e,n=s&&e>n?e:n,{min:jc(e,jc(n,e)),max:jc(n,jc(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Yi(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:s,grace:r,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Rst(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?kO(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=dat(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Yi(this.options.afterUpdate,[this])}beforeSetDimensions(){Yi(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Yi(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Yi(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Yi(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,s,r;for(n=0,s=t.length;n<s;n++)r=t[n],r.label=Yi(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Yi(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Yi(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=LO(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,r=e.maxRotation;let a=s,o,c,u;if(!this._isVisible()||!e.display||s>=r||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),g=d.widest.width,y=d.highest.height,_=oa(this.chart.width-g,0,this.maxWidth);o=t.offset?this.maxWidth/n:_/(n-1),g+6>o&&(o=_/(n-(t.offset?.5:1)),c=this.maxHeight-Ey(t.grid)-e.padding-BO(t.title,this.chart.options.font),u=Math.sqrt(g*g+y*y),a=$it(Math.min(Math.asin(oa((d.highest.height+6)/o,-1,1)),Math.asin(oa(c/u,-1,1))-Math.asin(oa(y/u,-1,1)))),a=Math.max(s,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){Yi(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Yi(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:s,grid:r}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const c=BO(s,e.options.font);if(o?(t.width=this.maxWidth,t.height=Ey(r)+c):(t.height=this.maxHeight,t.width=Ey(r)+c),n.display&&this.ticks.length){const{first:u,last:d,widest:g,highest:y}=this._getLabelSizes(),_=n.padding*2,b=$u(this.labelRotation),M=Math.cos(b),S=Math.sin(b);if(o){const E=n.mirror?0:S*g.width+M*y.height;t.height=Math.min(this.maxHeight,t.height+E+_)}else{const E=n.mirror?0:M*g.width+S*y.height;t.width=Math.min(this.maxWidth,t.width+E+_)}this._calculatePadding(u,d,S,M)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,s){const{ticks:{align:r,padding:a},position:o}=this.options,c=this.labelRotation!==0,u=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,_=0;c?u?(y=s*t.width,_=n*e.height):(y=n*t.height,_=s*e.width):r==="start"?_=e.width:r==="end"?y=t.width:r!=="inner"&&(y=t.width/2,_=e.width/2),this.paddingLeft=Math.max((y-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((_-g+a)*this.width/(this.width-g),0)}else{let d=e.height/2,g=t.height/2;r==="start"?(d=0,g=t.height):r==="end"&&(d=e.height,g=0),this.paddingTop=d+a,this.paddingBottom=g+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Yi(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)gi(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=kO(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:s,_longestTextCache:r}=this,a=[],o=[],c=Math.floor(e/LO(e,n));let u=0,d=0,g,y,_,b,M,S,E,R,N,P,k;for(g=0;g<e;g+=c){if(b=t[g].label,M=this._resolveTickFontOptions(g),s.font=S=M.string,E=r[S]=r[S]||{data:{},gc:[]},R=M.lineHeight,N=P=0,!gi(b)&&!nr(b))N=hO(s,E.data,E.gc,N,b),P=R;else if(nr(b))for(y=0,_=b.length;y<_;++y)k=b[y],!gi(k)&&!nr(k)&&(N=hO(s,E.data,E.gc,N,k),P+=R);a.push(N),o.push(P),u=Math.max(N,u),d=Math.max(P,d)}bat(r,e);const z=a.indexOf(u),L=o.indexOf(d),U=D=>({width:a[D]||0,height:o[D]||0});return{first:U(0),last:U(e-1),widest:U(z),highest:U(L),widths:a,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return est(this._alignToPixels?Gd(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=Eat(this.getContext(),t,n))}return this.$context||(this.$context=Sat(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=$u(this.labelRotation),n=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),a=t.autoSkipPadding||0,o=r?r.widest.width+a:0,c=r?r.highest.height+a:0;return this.isHorizontal()?c*n>o*s?o/n:c/s:c*s<o*n?c/n:o/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,s=this.options,{grid:r,position:a,border:o}=s,c=r.offset,u=this.isHorizontal(),g=this.ticks.length+(c?1:0),y=Ey(r),_=[],b=o.setContext(this.getContext()),M=b.display?b.width:0,S=M/2,E=function(j){return Gd(n,j,M)};let R,N,P,k,z,L,U,D,O,F,H,G;if(a==="top")R=E(this.bottom),L=this.bottom-y,D=R-S,F=E(t.top)+S,G=t.bottom;else if(a==="bottom")R=E(this.top),F=t.top,G=E(t.bottom)-S,L=R+S,D=this.top+y;else if(a==="left")R=E(this.right),z=this.right-y,U=R-S,O=E(t.left)+S,H=t.right;else if(a==="right")R=E(this.left),O=t.left,H=E(t.right)-S,z=R+S,U=this.left+y;else if(e==="x"){if(a==="center")R=E((t.top+t.bottom)/2+.5);else if(ii(a)){const j=Object.keys(a)[0],J=a[j];R=E(this.chart.scales[j].getPixelForValue(J))}F=t.top,G=t.bottom,L=R+S,D=L+y}else if(e==="y"){if(a==="center")R=E((t.left+t.right)/2);else if(ii(a)){const j=Object.keys(a)[0],J=a[j];R=E(this.chart.scales[j].getPixelForValue(J))}z=R-S,U=z-y,O=t.left,H=t.right}const it=Un(s.ticks.maxTicksLimit,g),lt=Math.max(1,Math.ceil(g/it));for(N=0;N<g;N+=lt){const j=this.getContext(N),J=r.setContext(j),$=o.setContext(j),at=J.lineWidth,Y=J.color,Z=$.dash||[],rt=$.dashOffset,ft=J.tickWidth,dt=J.tickColor,_t=J.tickBorderDash||[],ut=J.tickBorderDashOffset;P=xat(this,N,c),P!==void 0&&(k=Gd(n,P,at),u?z=U=O=H=k:L=D=F=G=k,_.push({tx1:z,ty1:L,tx2:U,ty2:D,x1:O,y1:F,x2:H,y2:G,width:at,color:Y,borderDash:Z,borderDashOffset:rt,tickWidth:ft,tickColor:dt,tickBorderDash:_t,tickBorderDashOffset:ut}))}return this._ticksLength=g,this._borderValue=R,_}_computeLabelItems(t){const e=this.axis,n=this.options,{position:s,ticks:r}=n,a=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:u,padding:d,mirror:g}=r,y=Ey(n.grid),_=y+d,b=g?-d:_,M=-$u(this.labelRotation),S=[];let E,R,N,P,k,z,L,U,D,O,F,H,G="middle";if(s==="top")z=this.bottom-b,L=this._getXAxisLabelAlignment();else if(s==="bottom")z=this.top+b,L=this._getXAxisLabelAlignment();else if(s==="left"){const lt=this._getYAxisLabelAlignment(y);L=lt.textAlign,k=lt.x}else if(s==="right"){const lt=this._getYAxisLabelAlignment(y);L=lt.textAlign,k=lt.x}else if(e==="x"){if(s==="center")z=(t.top+t.bottom)/2+_;else if(ii(s)){const lt=Object.keys(s)[0],j=s[lt];z=this.chart.scales[lt].getPixelForValue(j)+_}L=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")k=(t.left+t.right)/2-_;else if(ii(s)){const lt=Object.keys(s)[0],j=s[lt];k=this.chart.scales[lt].getPixelForValue(j)}L=this._getYAxisLabelAlignment(y).textAlign}e==="y"&&(c==="start"?G="top":c==="end"&&(G="bottom"));const it=this._getLabelSizes();for(E=0,R=o.length;E<R;++E){N=o[E],P=N.label;const lt=r.setContext(this.getContext(E));U=this.getPixelForTick(E)+r.labelOffset,D=this._resolveTickFontOptions(E),O=D.lineHeight,F=nr(P)?P.length:1;const j=F/2,J=lt.color,$=lt.textStrokeColor,at=lt.textStrokeWidth;let Y=L;a?(k=U,L==="inner"&&(E===R-1?Y=this.options.reverse?"left":"right":E===0?Y=this.options.reverse?"right":"left":Y="center"),s==="top"?u==="near"||M!==0?H=-F*O+O/2:u==="center"?H=-it.highest.height/2-j*O+O:H=-it.highest.height+O/2:u==="near"||M!==0?H=O/2:u==="center"?H=it.highest.height/2-j*O:H=it.highest.height-F*O,g&&(H*=-1),M!==0&&!lt.showLabelBackdrop&&(k+=O/2*Math.sin(M))):(z=U,H=(1-F)*O/2);let Z;if(lt.showLabelBackdrop){const rt=_l(lt.backdropPadding),ft=it.heights[E],dt=it.widths[E];let _t=H-rt.top,ut=0-rt.left;switch(G){case"middle":_t-=ft/2;break;case"bottom":_t-=ft;break}switch(L){case"center":ut-=dt/2;break;case"right":ut-=dt;break;case"inner":E===R-1?ut-=dt:E>0&&(ut-=dt/2);break}Z={left:ut,top:_t,width:dt+rt.width,height:ft+rt.height,color:lt.backdropColor}}S.push({label:P,font:D,textOffset:H,options:{rotation:M,color:J,strokeColor:$,strokeWidth:at,textAlign:Y,textBaseline:G,translation:[k,z],backdrop:Z}})}return S}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-$u(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:s,padding:r}}=this.options,a=this._getLabelSizes(),o=t+r,c=a.widest.width;let u,d;return e==="left"?s?(d=this.right+r,n==="near"?u="left":n==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-o,n==="near"?u="right":n==="center"?(u="center",d-=c/2):(u="left",d=this.left)):e==="right"?s?(d=this.left+r,n==="near"?u="right":n==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+o,n==="near"?u="left":n==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:s,width:r,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,s,r,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,a;const o=(c,u,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(e.display)for(r=0,a=s.length;r<a;++r){const c=s[r];e.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:s}}=this,r=n.setContext(this.getContext()),a=n.display?r.width:0;if(!a)return;const o=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,g,y;this.isHorizontal()?(u=Gd(t,this.left,a)-a/2,d=Gd(t,this.right,o)+o/2,g=y=c):(g=Gd(t,this.top,a)-a/2,y=Gd(t,this.bottom,o)+o/2,u=d=c),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(u,g),e.lineTo(d,y),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&HR(n,s);const r=this.getLabelItems(t);for(const a of r){const o=a.options,c=a.font,u=a.label,d=a.textOffset;jv(n,u,0,d,c,o)}s&&GR(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:s}}=this;if(!n.display)return;const r=la(n.font),a=_l(n.padding),o=n.align;let c=r.lineHeight/2;e==="bottom"||e==="center"||ii(e)?(c+=a.bottom,nr(n.text)&&(c+=r.lineHeight*(n.text.length-1))):c+=a.top;const{titleX:u,titleY:d,maxWidth:g,rotation:y}=Mat(this,c,e,o);jv(t,n.text,0,0,r,{color:n.color,maxWidth:g,rotation:y,textAlign:Tat(o,e,s),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Un(t.grid&&t.grid.z,-1),s=Un(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==n0.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let r,a;for(r=0,a=e.length;r<a;++r){const o=e[r];o[n]===this.id&&(!t||o.type===t)&&s.push(o)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return la(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Wb{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;Rat(e)&&(n=this.register(e));const s=this.items,r=t.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,Aat(t,a,n),this.override&&Os.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,s=this.scope;n in e&&delete e[n],s&&n in Os[s]&&(delete Os[s][n],this.override&&delete Ep[n])}}function Aat(i,t,e){const n=zv(Object.create(null),[e?Os.get(e):{},Os.get(t),i.defaults]);Os.set(t,n),i.defaultRoutes&&wat(t,i.defaultRoutes),i.descriptors&&Os.describe(t,i.descriptors)}function wat(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),s=n.pop(),r=[i].concat(n).join("."),a=t[e].split("."),o=a.pop(),c=a.join(".");Os.route(r,s,c,o)})}function Rat(i){return"id"in i&&"defaults"in i}class Cat{constructor(){this.controllers=new Wb(KE,"datasets",!0),this.elements=new Wb(yh,"elements"),this.plugins=new Wb(Object,"plugins"),this.scales=new Wb(n0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(s=>{const r=n||this._getRegistryForType(s);n||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):Ai(s,a=>{const o=n||this._getRegistryForType(a);this._exec(t,o,a)})})}_exec(t,e,n){const s=kR(t);Yi(n["before"+s],[],n),e[t](n),Yi(n["after"+s],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}}var qc=new Cat;class Dat{constructor(){this._init=[]}notify(t,e,n,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=s?this._descriptors(t).filter(s):this._descriptors(t),a=this._notify(r,t,e,n);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,n,s){s=s||{};for(const r of t){const a=r.plugin,o=a[n],c=[e,s,r.options];if(Yi(o,c,a)===!1&&s.cancelable)return!1}return!0}invalidate(){gi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,s=Un(n.options&&n.options.plugins,{}),r=Iat(n);return s===!1&&!e?[]:Oat(t,r,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,s=(r,a)=>r.filter(o=>!a.some(c=>o.plugin.id===c.plugin.id));this._notify(s(e,n),t,"stop"),this._notify(s(n,e),t,"start")}}function Iat(i){const t={},e=[],n=Object.keys(qc.plugins.items);for(let r=0;r<n.length;r++)e.push(qc.getPlugin(n[r]));const s=i.plugins||[];for(let r=0;r<s.length;r++){const a=s[r];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function Nat(i,t){return!t&&i===!1?null:i===!0?{}:i}function Oat(i,{plugins:t,localIds:e},n,s){const r=[],a=i.getContext();for(const o of t){const c=o.id,u=Nat(n[c],s);u!==null&&r.push({plugin:o,options:Pat(i.config,{plugin:o,local:e[c]},u,a)})}return r}function Pat(i,{plugin:t,local:e},n,s){const r=i.pluginScopeKeys(t),a=i.getOptionScopes(n,r);return e&&t.defaults&&a.push(t.defaults),i.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Lw(i,t){const e=Os.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Uat(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Lat(i,t){return i===t?"_index_":"_value_"}function zO(i){if(i==="x"||i==="y"||i==="r")return i}function kat(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function kw(i,...t){if(zO(i))return i;for(const e of t){const n=e.axis||kat(e.position)||i.length>1&&zO(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function FO(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Bat(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(e.length)return FO(i,"x",e[0])||FO(i,"y",e[0])}return{}}function zat(i,t){const e=Ep[i.type]||{scales:{}},n=t.scales||{},s=Lw(i.type,t),r=Object.create(null);return Object.keys(n).forEach(a=>{const o=n[a];if(!ii(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=kw(a,o,Bat(a,i),Os.scales[o.type]),u=Lat(c,s),d=e.scales||{};r[a]=sv(Object.create(null),[{axis:c},o,d[c],d[u]])}),i.data.datasets.forEach(a=>{const o=a.type||i.type,c=a.indexAxis||Lw(o,t),d=(Ep[o]||{}).scales||{};Object.keys(d).forEach(g=>{const y=Uat(g,c),_=a[y+"AxisID"]||y;r[_]=r[_]||Object.create(null),sv(r[_],[{axis:y},n[_],d[g]])})}),Object.keys(r).forEach(a=>{const o=r[a];sv(o,[Os.scales[o.type],Os.scale])}),r}function Cz(i){const t=i.options||(i.options={});t.plugins=Un(t.plugins,{}),t.scales=zat(i,t)}function Dz(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Fat(i){return i=i||{},i.data=Dz(i.data),Cz(i),i}const VO=new Map,Iz=new Set;function qb(i,t){let e=VO.get(i);return e||(e=t(),VO.set(i,e),Iz.add(e)),e}const Ty=(i,t,e)=>{const n=Sp(t,e);n!==void 0&&i.add(n)};class Vat{constructor(t){this._config=Fat(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Dz(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Cz(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return qb(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return qb(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return qb(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return qb(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let s=n.get(t);return(!s||e)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,e,n){const{options:s,type:r}=this,a=this._cachedScopes(t,n),o=a.get(e);if(o)return o;const c=new Set;e.forEach(d=>{t&&(c.add(t),d.forEach(g=>Ty(c,t,g))),d.forEach(g=>Ty(c,s,g)),d.forEach(g=>Ty(c,Ep[r]||{},g)),d.forEach(g=>Ty(c,Os,g)),d.forEach(g=>Ty(c,Pw,g))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),Iz.has(e)&&a.set(e,u),u}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ep[e]||{},Os.datasets[e]||{},{type:e},Os,Pw]}resolveNamedOptions(t,e,n,s=[""]){const r={$shared:!0},{resolver:a,subPrefixes:o}=HO(this._resolverCache,t,s);let c=a;if(Gat(a,e)){r.$shared=!1,n=Ff(n)?n():n;const u=this.createResolver(t,n,o);c=Bg(a,n,u)}for(const u of e)r[u]=c[u];return r}createResolver(t,e,n=[""],s){const{resolver:r}=HO(this._resolverCache,t,n);return ii(e)?Bg(r,e,void 0,s):r}}function HO(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const s=e.join();let r=n.get(s);return r||(r={resolver:WR(t,e),subPrefixes:e.filter(o=>!o.toLowerCase().includes("hover"))},n.set(s,r)),r}const Hat=i=>ii(i)&&Object.getOwnPropertyNames(i).some(t=>Ff(i[t]));function Gat(i,t){const{isScriptable:e,isIndexable:n}=dz(i);for(const s of t){const r=e(s),a=n(s),o=(a||r)&&i[s];if(r&&(Ff(o)||Hat(o))||a&&nr(o))return!0}return!1}var jat="4.5.0";const Wat=["top","bottom","left","right","chartArea"];function GO(i,t){return i==="top"||i==="bottom"||Wat.indexOf(i)===-1&&t==="x"}function jO(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function WO(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Yi(e&&e.onComplete,[i],t)}function qat(i){const t=i.chart,e=t.options.animation;Yi(e&&e.onProgress,[i],t)}function Nz(i){return YR()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const mS={},qO=i=>{const t=Nz(i);return Object.values(mS).filter(e=>e.canvas===t).pop()};function Xat(i,t,e){const n=Object.keys(i);for(const s of n){const r=+s;if(r>=t){const a=i[s];delete i[s],(e>0||r>t)&&(i[r+e]=a)}}}function Yat(i,t,e,n){return!e||i.type==="mouseout"?null:n?t:i}let QE=class{static defaults=Os;static instances=mS;static overrides=Ep;static registry=qc;static version=jat;static getChart=qO;static register(...t){qc.add(...t),XO()}static unregister(...t){qc.remove(...t),XO()}constructor(t,e){const n=this.config=new Vat(e),s=Nz(t),r=qO(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||fat(s)),this.platform.updateConfig(n);const o=this.platform.acquireContext(s,a.aspectRatio),c=o&&o.canvas,u=c&&c.height,d=c&&c.width;if(this.id=Fit(),this.ctx=o,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Dat,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rst(g=>this.update(g),a.resizeDelay||0),this._dataChanges=[],mS[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Wu.listen(this,"complete",WO),Wu.listen(this,"progress",qat),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:s,_aspectRatio:r}=this;return gi(t)?e&&r?r:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return qc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():mO(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return fO(this.canvas,this.ctx),this}stop(){return Wu.stop(this),this}resize(t,e){Wu.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,s=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,e,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,mO(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Yi(n.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Ai(e,(n,s)=>{n.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,s=Object.keys(n).reduce((a,o)=>(a[o]=!1,a),{});let r=[];e&&(r=r.concat(Object.keys(e).map(a=>{const o=e[a],c=kw(a,o),u=c==="r",d=c==="x";return{options:o,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Ai(r,a=>{const o=a.options,c=o.id,u=kw(c,o),d=Un(o.type,a.dtype);(o.position===void 0||GO(o.position,u)!==GO(a.dposition))&&(o.position=a.dposition),s[c]=!0;let g=null;if(c in n&&n[c].type===d)g=n[c];else{const y=qc.getScale(d);g=new y({id:c,type:d,ctx:this.ctx,chart:this}),n[g.id]=g}g.init(o,t)}),Ai(s,(a,o)=>{a||delete n[o]}),Ai(n,a=>{ml.configure(this,a,a.options),ml.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((s,r)=>s.index-r.index),n>e){for(let s=e;s<n;++s)this._destroyDatasetMeta(s);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(jO("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,s)=>{e.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=e.length;n<s;n++){const r=e[n];let a=this.getDatasetMeta(n);const o=r.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=r.indexAxis||Lw(o,this.options),a.order=r.order||0,a.index=n,a.label=""+r.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const c=qc.getController(o),{datasetElementType:u,dataElementType:d}=Os.datasets[o];Object.assign(c,{dataElementType:qc.getElement(d),datasetElementType:u&&qc.getElement(u)}),a.controller=new c(this,n),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Ai(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:g}=this.getDatasetMeta(u),y=!s&&r.indexOf(g)===-1;g.buildOrUpdateElements(y),a=Math.max(+g.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),s||Ai(r,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(jO("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Ai(this.scales,t=>{ml.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!nO(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:r}of e){const a=n==="_removeElements"?-r:r;Xat(t,s,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=r=>new Set(t.filter(a=>a[0]===r).map((a,o)=>o+","+a.splice(1).join(","))),s=n(0);for(let r=1;r<e;r++)if(!nO(s,n(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ml.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Ai(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Ff(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),s={meta:n,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Wu.has(this)?this.attached&&!Wu.running(this)&&Wu.start(this):(this.draw(),WO({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let s,r;for(s=0,r=e.length;s<r;++s){const a=e[s];(!t||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},s=hrt(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&HR(e,s),t.controller.draw(),s&&GR(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Gv(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,s){const r=Wrt.modes[e];return typeof r=="function"?r(this,t,n,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let s=n.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=Lp(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const s=n?"show":"hide",r=this.getDatasetMeta(t),a=r.controller._resolveAnimations(void 0,s);Fv(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),a.update(r,{visible:n}),this.update(o=>o.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Wu.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),fO(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete mS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(r,a)=>{e.addEventListener(this,r,a),t[r]=a},s=(r,a,o)=>{r.offsetX=a,r.offsetY=o,this._eventHandler(r)};Ai(this.options.events,r=>n(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(c,u)=>{e.addEventListener(this,c,u),t[c]=u},s=(c,u)=>{t[c]&&(e.removeEventListener(this,c,u),delete t[c])},r=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const o=()=>{s("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",a)};a=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():a()}unbindEvents(){Ai(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ai(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const s=n?"set":"remove";let r,a,o,c;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),o=0,c=t.length;o<c;++o){a=t[o];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:r,index:a})=>{const o=this.getDatasetMeta(r);if(!o)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:o.data[a],index:a}});!O1(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,n){const s=this.options.hover,r=(c,u)=>c.filter(d=>!u.some(g=>d.datasetIndex===g.datasetIndex&&d.index===g.index)),a=r(e,t),o=n?t:r(t,e);a.length&&this.updateHoverStyle(a,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:s=[],options:r}=this,a=e,o=this._getActiveElements(t,s,n,a),c=qit(t),u=Yat(t,this._lastEvent,n,c);n&&(this._lastEvent=null,Yi(r.onHover,[t,o,this],this),c&&Yi(r.onClick,[t,o,this],this));const d=!O1(o,s);return(d||e)&&(this._active=o,this._updateHoverStyles(o,s,e)),this._lastEvent=u,d}_getActiveElements(t,e,n,s){if(t.type==="mouseout")return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}};function XO(){return Ai(QE.instances,i=>i._plugins.invalidate())}function Kat(i,t,e){const{startAngle:n,x:s,y:r,outerRadius:a,innerRadius:o,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,g=Math.min(u/a,Yl(n-e));if(i.beginPath(),i.arc(s,r,a-u/2,n+g/2,e-g/2),o>0){const y=Math.min(u/o,Yl(n-e));i.arc(s,r,o+u/2,e-y/2,n+y/2,!0)}else{const y=Math.min(u/2,a*Yl(n-e));if(d==="round")i.arc(s,r,y,e-wi/2,n+wi/2,!0);else if(d==="bevel"){const _=2*y*y,b=-_*Math.cos(e+wi/2)+s,M=-_*Math.sin(e+wi/2)+r,S=_*Math.cos(n+wi/2)+s,E=_*Math.sin(n+wi/2)+r;i.lineTo(b,M),i.lineTo(S,E)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function Zat(i,t,e){const{startAngle:n,pixelMargin:s,x:r,y:a,outerRadius:o,innerRadius:c}=t;let u=s/o;i.beginPath(),i.arc(r,a,o,n-u,e+u),c>s?(u=s/c,i.arc(r,a,c,e+u,n-u,!0)):i.arc(r,a,s,e+ir,n-ir),i.closePath(),i.clip()}function Qat(i){return jR(i,["outerStart","outerEnd","innerStart","innerEnd"])}function Jat(i,t,e,n){const s=Qat(i.options.borderRadius),r=(e-t)/2,a=Math.min(r,n*t/2),o=c=>{const u=(e-Math.min(r,c))*n/2;return oa(c,0,Math.min(r,u))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:oa(s.innerStart,0,a),innerEnd:oa(s.innerEnd,0,a)}}function sg(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function z1(i,t,e,n,s,r){const{x:a,y:o,startAngle:c,pixelMargin:u,innerRadius:d}=t,g=Math.max(t.outerRadius+n+e-u,0),y=d>0?d+n+e+u:0;let _=0;const b=s-c;if(n){const lt=d>0?d-n:0,j=g>0?g-n:0,J=(lt+j)/2,$=J!==0?b*J/(J+n):b;_=(b-$)/2}const M=Math.max(.001,b*g-e/wi)/g,S=(b-M)/2,E=c+S+_,R=s-S-_,{outerStart:N,outerEnd:P,innerStart:k,innerEnd:z}=Jat(t,y,g,R-E),L=g-N,U=g-P,D=E+N/L,O=R-P/U,F=y+k,H=y+z,G=E+k/F,it=R-z/H;if(i.beginPath(),r){const lt=(D+O)/2;if(i.arc(a,o,g,D,lt),i.arc(a,o,g,lt,O),P>0){const at=sg(U,O,a,o);i.arc(at.x,at.y,P,O,R+ir)}const j=sg(H,R,a,o);if(i.lineTo(j.x,j.y),z>0){const at=sg(H,it,a,o);i.arc(at.x,at.y,z,R+ir,it+Math.PI)}const J=(R-z/y+(E+k/y))/2;if(i.arc(a,o,y,R-z/y,J,!0),i.arc(a,o,y,J,E+k/y,!0),k>0){const at=sg(F,G,a,o);i.arc(at.x,at.y,k,G+Math.PI,E-ir)}const $=sg(L,E,a,o);if(i.lineTo($.x,$.y),N>0){const at=sg(L,D,a,o);i.arc(at.x,at.y,N,E-ir,D)}}else{i.moveTo(a,o);const lt=Math.cos(D)*g+a,j=Math.sin(D)*g+o;i.lineTo(lt,j);const J=Math.cos(O)*g+a,$=Math.sin(O)*g+o;i.lineTo(J,$)}i.closePath()}function $at(i,t,e,n,s){const{fullCircles:r,startAngle:a,circumference:o}=t;let c=t.endAngle;if(r){z1(i,t,e,n,c,s);for(let u=0;u<r;++u)i.fill();isNaN(o)||(c=a+(o%Ss||Ss))}return z1(i,t,e,n,c,s),i.fill(),c}function tot(i,t,e,n,s){const{fullCircles:r,startAngle:a,circumference:o,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:g,borderDashOffset:y,borderRadius:_}=c,b=c.borderAlign==="inner";if(!u)return;i.setLineDash(g||[]),i.lineDashOffset=y,b?(i.lineWidth=u*2,i.lineJoin=d||"round"):(i.lineWidth=u,i.lineJoin=d||"bevel");let M=t.endAngle;if(r){z1(i,t,e,n,M,s);for(let S=0;S<r;++S)i.stroke();isNaN(o)||(M=a+(o%Ss||Ss))}b&&Zat(i,t,M),c.selfJoin&&M-a>=wi&&_===0&&d!=="miter"&&Kat(i,t,M),r||(z1(i,t,e,n,M,s),i.stroke())}class eot extends yh{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const s=this.getProps(["x","y"],n),{angle:r,distance:a}=rz(s,{x:t,y:e}),{startAngle:o,endAngle:c,innerRadius:u,outerRadius:d,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),y=(this.options.spacing+this.options.borderWidth)/2,_=Un(g,c-o),b=Hv(r,o,c)&&o!==c,M=_>=Ss||b,S=Sf(a,u+y,d+y);return M&&S}getCenterPoint(t){const{x:e,y:n,startAngle:s,endAngle:r,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,d=(s+r)/2,g=(a+o+u+c)/2;return{x:e+Math.cos(d)*g,y:n+Math.sin(d)*g}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,s=(e.offset||0)/4,r=(e.spacing||0)/2,a=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=n>Ss?Math.floor(n/Ss):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*s,Math.sin(o)*s);const c=1-Math.sin(Math.min(wi,n||0)),u=s*c;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,$at(t,this,u,r,a),tot(t,this,u,r,a),t.restore()}}function Oz(i,t,e=t){i.lineCap=Un(e.borderCapStyle,t.borderCapStyle),i.setLineDash(Un(e.borderDash,t.borderDash)),i.lineDashOffset=Un(e.borderDashOffset,t.borderDashOffset),i.lineJoin=Un(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=Un(e.borderWidth,t.borderWidth),i.strokeStyle=Un(e.borderColor,t.borderColor)}function not(i,t,e){i.lineTo(e.x,e.y)}function iot(i){return i.stepped?_st:i.tension||i.cubicInterpolationMode==="monotone"?xst:not}function Pz(i,t,e={}){const n=i.length,{start:s=0,end:r=n-1}=e,{start:a,end:o}=t,c=Math.max(s,a),u=Math.min(r,o),d=s<a&&r<a||s>o&&r>o;return{count:n,start:c,loop:t.loop,ilen:u<c&&!d?n+u-c:u-c}}function sot(i,t,e,n){const{points:s,options:r}=t,{count:a,start:o,loop:c,ilen:u}=Pz(s,e,n),d=iot(r);let{move:g=!0,reverse:y}=n||{},_,b,M;for(_=0;_<=u;++_)b=s[(o+(y?u-_:_))%a],!b.skip&&(g?(i.moveTo(b.x,b.y),g=!1):d(i,M,b,y,r.stepped),M=b);return c&&(b=s[(o+(y?u:0))%a],d(i,M,b,y,r.stepped)),!!c}function rot(i,t,e,n){const s=t.points,{count:r,start:a,ilen:o}=Pz(s,e,n),{move:c=!0,reverse:u}=n||{};let d=0,g=0,y,_,b,M,S,E;const R=P=>(a+(u?o-P:P))%r,N=()=>{M!==S&&(i.lineTo(d,S),i.lineTo(d,M),i.lineTo(d,E))};for(c&&(_=s[R(0)],i.moveTo(_.x,_.y)),y=0;y<=o;++y){if(_=s[R(y)],_.skip)continue;const P=_.x,k=_.y,z=P|0;z===b?(k<M?M=k:k>S&&(S=k),d=(g*d+P)/++g):(N(),i.lineTo(P,k),b=z,g=0,M=S=k),E=k}N()}function Bw(i){const t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?rot:sot}function aot(i){return i.stepped?Jst:i.tension||i.cubicInterpolationMode==="monotone"?$st:Qd}function oot(i,t,e,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,n)&&s.closePath()),Oz(i,t.options),i.stroke(s)}function lot(i,t,e,n){const{segments:s,options:r}=t,a=Bw(t);for(const o of s)Oz(i,r,o.style),i.beginPath(),a(i,t,o,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}const cot=typeof Path2D=="function";function uot(i,t,e,n){cot&&!t.options.segment?oot(i,t,e,n):lot(i,t,e,n)}class hot extends yh{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;jst(this._points,n,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ort(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,s=t[e],r=this.points,a=srt(this,{property:e,start:s,end:s});if(!a.length)return;const o=[],c=aot(n);let u,d;for(u=0,d=a.length;u<d;++u){const{start:g,end:y}=a[u],_=r[g],b=r[y];if(_===b){o.push(_);continue}const M=Math.abs((s-_[e])/(b[e]-_[e])),S=c(_,b,M,n.stepped);S[e]=t[e],o.push(S)}return o.length===1?o[0]:o}pathSegment(t,e,n){return Bw(this)(t,this,e,n)}path(t,e,n){const s=this.segments,r=Bw(this);let a=this._loop;e=e||0,n=n||this.points.length-e;for(const o of s)a&=r(t,this,o,{start:e,end:e+n-1});return!!a}draw(t,e,n,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),uot(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function YO(i,t,e,n){const s=i.options,{[e]:r}=i.getProps([e],n);return Math.abs(t-r)<s.radius+s.hitRadius}class fot extends yh{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const s=this.options,{x:r,y:a}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return YO(this,t,"x",e)}inYRange(t,e){return YO(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const n=e&&t.borderWidth||0;return(e+n)*2}draw(t,e){const n=this.options;this.skip||n.radius<.1||!Gv(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Uw(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Uz(i,t){const{x:e,y:n,base:s,width:r,height:a}=i.getProps(["x","y","base","width","height"],t);let o,c,u,d,g;return i.horizontal?(g=a/2,o=Math.min(e,s),c=Math.max(e,s),u=n-g,d=n+g):(g=r/2,o=e-g,c=e+g,u=Math.min(n,s),d=Math.max(n,s)),{left:o,top:u,right:c,bottom:d}}function Ef(i,t,e,n){return i?0:oa(t,e,n)}function dot(i,t,e){const n=i.options.borderWidth,s=i.borderSkipped,r=fz(n);return{t:Ef(s.top,r.top,0,e),r:Ef(s.right,r.right,0,t),b:Ef(s.bottom,r.bottom,0,e),l:Ef(s.left,r.left,0,t)}}function pot(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),s=i.options.borderRadius,r=_g(s),a=Math.min(t,e),o=i.borderSkipped,c=n||ii(s);return{topLeft:Ef(!c||o.top||o.left,r.topLeft,0,a),topRight:Ef(!c||o.top||o.right,r.topRight,0,a),bottomLeft:Ef(!c||o.bottom||o.left,r.bottomLeft,0,a),bottomRight:Ef(!c||o.bottom||o.right,r.bottomRight,0,a)}}function mot(i){const t=Uz(i),e=t.right-t.left,n=t.bottom-t.top,s=dot(i,e/2,n/2),r=pot(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function RA(i,t,e,n){const s=t===null,r=e===null,o=i&&!(s&&r)&&Uz(i,n);return o&&(s||Sf(t,o.left,o.right))&&(r||Sf(e,o.top,o.bottom))}function got(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function yot(i,t){i.rect(t.x,t.y,t.w,t.h)}function CA(i,t,e={}){const n=i.x!==e.x?-t:0,s=i.y!==e.y?-t:0,r=(i.x+i.w!==e.x+e.w?t:0)-n,a=(i.y+i.h!==e.y+e.h?t:0)-s;return{x:i.x+n,y:i.y+s,w:i.w+r,h:i.h+a,radius:i.radius}}class vot extends yh{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:s}}=this,{inner:r,outer:a}=mot(this),o=got(a.radius)?L1:yot;t.save(),(a.w!==r.w||a.h!==r.h)&&(t.beginPath(),o(t,CA(a,e,r)),t.clip(),o(t,CA(r,-e,a)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,CA(r,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,n){return RA(this,t,e,n)}inXRange(t,e){return RA(this,t,null,e)}inYRange(t,e){return RA(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const KO=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},_ot=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class ZO extends yh{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Yi(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,s=la(n.font),r=s.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=KO(n,r);let u,d;e.font=s.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,r,o,c)+10):(d=this.maxHeight,u=this._fitCols(a,s,o,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,s){const{ctx:r,maxWidth:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=s+o;let g=t;r.textAlign="left",r.textBaseline="middle";let y=-1,_=-d;return this.legendItems.forEach((b,M)=>{const S=n+e/2+r.measureText(b.text).width;(M===0||u[u.length-1]+S+2*o>a)&&(g+=d,u[u.length-(M>0?0:1)]=0,_+=d,y++),c[M]={left:0,top:_,row:y,width:S,height:s},u[u.length-1]+=S+o}),g}_fitCols(t,e,n,s){const{ctx:r,maxHeight:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-t;let g=o,y=0,_=0,b=0,M=0;return this.legendItems.forEach((S,E)=>{const{itemWidth:R,itemHeight:N}=xot(n,e,r,S,s);E>0&&_+N+2*o>d&&(g+=y+o,u.push({width:y,height:_}),b+=y+o,M++,y=_=0),c[E]={left:b,top:_,col:M,width:R,height:N},y=Math.max(y,R),_+=N+o}),g+=y,u.push({width:y,height:_}),g}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:s},rtl:r}}=this,a=xg(r,this.left,this.width);if(this.isHorizontal()){let o=0,c=na(n,this.left+s,this.right-this.lineWidths[o]);for(const u of e)o!==u.row&&(o=u.row,c=na(n,this.left+s,this.right-this.lineWidths[o])),u.top+=this.top+t+s,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+s}else{let o=0,c=na(n,this.top+t+s,this.bottom-this.columnSizes[o].height);for(const u of e)u.col!==o&&(o=u.col,c=na(n,this.top+t+s,this.bottom-this.columnSizes[o].height)),u.top=c,u.left+=this.left+s,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;HR(t,this),this._draw(),GR(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:s}=this,{align:r,labels:a}=t,o=Os.color,c=xg(t.rtl,this.left,this.width),u=la(a.font),{padding:d}=a,g=u.size,y=g/2;let _;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:b,boxHeight:M,itemHeight:S}=KO(a,g),E=function(z,L,U){if(isNaN(b)||b<=0||isNaN(M)||M<0)return;s.save();const D=Un(U.lineWidth,1);if(s.fillStyle=Un(U.fillStyle,o),s.lineCap=Un(U.lineCap,"butt"),s.lineDashOffset=Un(U.lineDashOffset,0),s.lineJoin=Un(U.lineJoin,"miter"),s.lineWidth=D,s.strokeStyle=Un(U.strokeStyle,o),s.setLineDash(Un(U.lineDash,[])),a.usePointStyle){const O={radius:M*Math.SQRT2/2,pointStyle:U.pointStyle,rotation:U.rotation,borderWidth:D},F=c.xPlus(z,b/2),H=L+y;hz(s,O,F,H,a.pointStyleWidth&&b)}else{const O=L+Math.max((g-M)/2,0),F=c.leftForLtr(z,b),H=_g(U.borderRadius);s.beginPath(),Object.values(H).some(G=>G!==0)?L1(s,{x:F,y:O,w:b,h:M,radius:H}):s.rect(F,O,b,M),s.fill(),D!==0&&s.stroke()}s.restore()},R=function(z,L,U){jv(s,U.text,z,L+S/2,u,{strikethrough:U.hidden,textAlign:c.textAlign(U.textAlign)})},N=this.isHorizontal(),P=this._computeTitleHeight();N?_={x:na(r,this.left+d,this.right-n[0]),y:this.top+d+P,line:0}:_={x:this.left+d,y:na(r,this.top+P+d,this.bottom-e[0].height),line:0},vz(this.ctx,t.textDirection);const k=S+d;this.legendItems.forEach((z,L)=>{s.strokeStyle=z.fontColor,s.fillStyle=z.fontColor;const U=s.measureText(z.text).width,D=c.textAlign(z.textAlign||(z.textAlign=a.textAlign)),O=b+y+U;let F=_.x,H=_.y;c.setWidth(this.width),N?L>0&&F+O+d>this.right&&(H=_.y+=k,_.line++,F=_.x=na(r,this.left+d,this.right-n[_.line])):L>0&&H+k>this.bottom&&(F=_.x=F+e[_.line].width+d,_.line++,H=_.y=na(r,this.top+P+d,this.bottom-e[_.line].height));const G=c.x(F);if(E(G,H,z),F=ast(D,F+b+y,N?F+O:this.right,t.rtl),R(c.x(F),H,z),N)_.x+=O+d;else if(typeof z.text!="string"){const it=u.lineHeight;_.y+=Lz(z,it)+d}else _.y+=k}),_z(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=la(e.font),s=_l(e.padding);if(!e.display)return;const r=xg(t.rtl,this.left,this.width),a=this.ctx,o=e.position,c=n.size/2,u=s.top+c;let d,g=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),d=this.top+u,g=na(t.align,g,this.right-y);else{const b=this.columnSizes.reduce((M,S)=>Math.max(M,S.height),0);d=u+na(t.align,this.top,this.bottom-b-t.labels.padding-this._computeTitleHeight())}const _=na(o,g,g+y);a.textAlign=r.textAlign(zR(o)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=n.string,jv(a,e.text,_,d,n)}_computeTitleHeight(){const t=this.options.title,e=la(t.font),n=_l(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,s,r;if(Sf(t,this.left,this.right)&&Sf(e,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(s=r[n],Sf(t,s.left,s.left+s.width)&&Sf(e,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){const e=this.options;if(!Eot(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=_ot(s,n);s&&!r&&Yi(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!r&&Yi(e.onHover,[t,n,this],this)}else n&&Yi(e.onClick,[t,n,this],this)}}function xot(i,t,e,n,s){const r=bot(n,i,t,e),a=Sot(s,n,t.lineHeight);return{itemWidth:r,itemHeight:a}}function bot(i,t,e,n){let s=i.text;return s&&typeof s!="string"&&(s=s.reduce((r,a)=>r.length>a.length?r:a)),t+e.size/2+n.measureText(s).width}function Sot(i,t,e){let n=i;return typeof t.text!="string"&&(n=Lz(t,e)),n}function Lz(i,t){const e=i.text?i.text.length:0;return t*e}function Eot(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var Tot={id:"legend",_element:ZO,start(i,t,e){const n=i.legend=new ZO({ctx:i.ctx,options:e,chart:i});ml.configure(i,n,e),ml.addBox(i,n)},stop(i){ml.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;ml.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,s=e.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:s,color:r,useBorderRadius:a,borderRadius:o}}=i.legend.options;return i._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(e?0:void 0),d=_l(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:a&&(o||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class kz extends yh{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=nr(n.text)?n.text.length:1;this._padding=_l(n.padding);const r=s*la(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:n,bottom:s,right:r,options:a}=this,o=a.align;let c=0,u,d,g;return this.isHorizontal()?(d=na(o,n,r),g=e+t,u=r-n):(a.position==="left"?(d=n+t,g=na(o,s,e),c=wi*-.5):(d=r-t,g=na(o,e,s),c=wi*.5),u=s-e),{titleX:d,titleY:g,maxWidth:u,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=la(e.font),r=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:c,rotation:u}=this._drawArgs(r);jv(t,e.text,0,0,n,{color:e.color,maxWidth:c,rotation:u,textAlign:zR(e.align),textBaseline:"middle",translation:[a,o]})}}function Mot(i,t){const e=new kz({ctx:i.ctx,options:t,chart:i});ml.configure(i,e,t),ml.addBox(i,e),i.titleBlock=e}var Aot={id:"title",_element:kz,start(i,t,e){Mot(i,e)},stop(i){const t=i.titleBlock;ml.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;ml.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ky={average(i){if(!i.length)return!1;let t,e,n=new Set,s=0,r=0;for(t=0,e=i.length;t<e;++t){const o=i[t].element;if(o&&o.hasValue()){const c=o.tooltipPosition();n.add(c.x),s+=c.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((o,c)=>o+c)/n.size,y:s/r}},nearest(i,t){if(!i.length)return!1;let e=t.x,n=t.y,s=Number.POSITIVE_INFINITY,r,a,o;for(r=0,a=i.length;r<a;++r){const c=i[r].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=Ow(t,u);d<s&&(s=d,o=c)}}if(o){const c=o.tooltipPosition();e=c.x,n=c.y}return{x:e,y:n}}};function Wc(i,t){return t&&(nr(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function qu(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function wot(i,t){const{element:e,datasetIndex:n,index:s}=t,r=i.getDatasetMeta(n).controller,{label:a,value:o}=r.getLabelAndValue(s);return{chart:i,label:a,parsed:r.getParsed(s),raw:i.data.datasets[n].data[s],formattedValue:o,dataset:r.getDataset(),dataIndex:s,datasetIndex:n,element:e}}function QO(i,t){const e=i.chart.ctx,{body:n,footer:s,title:r}=i,{boxWidth:a,boxHeight:o}=t,c=la(t.bodyFont),u=la(t.titleFont),d=la(t.footerFont),g=r.length,y=s.length,_=n.length,b=_l(t.padding);let M=b.height,S=0,E=n.reduce((P,k)=>P+k.before.length+k.lines.length+k.after.length,0);if(E+=i.beforeBody.length+i.afterBody.length,g&&(M+=g*u.lineHeight+(g-1)*t.titleSpacing+t.titleMarginBottom),E){const P=t.displayColors?Math.max(o,c.lineHeight):c.lineHeight;M+=_*P+(E-_)*c.lineHeight+(E-1)*t.bodySpacing}y&&(M+=t.footerMarginTop+y*d.lineHeight+(y-1)*t.footerSpacing);let R=0;const N=function(P){S=Math.max(S,e.measureText(P).width+R)};return e.save(),e.font=u.string,Ai(i.title,N),e.font=c.string,Ai(i.beforeBody.concat(i.afterBody),N),R=t.displayColors?a+2+t.boxPadding:0,Ai(n,P=>{Ai(P.before,N),Ai(P.lines,N),Ai(P.after,N)}),R=0,e.font=d.string,Ai(i.footer,N),e.restore(),S+=b.width,{width:S,height:M}}function Rot(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}function Cot(i,t,e,n){const{x:s,width:r}=n,a=e.caretSize+e.caretPadding;if(i==="left"&&s+r+a>t.width||i==="right"&&s-r-a<0)return!0}function Dot(i,t,e,n){const{x:s,width:r}=e,{width:a,chartArea:{left:o,right:c}}=i;let u="center";return n==="center"?u=s<=(o+c)/2?"left":"right":s<=r/2?u="left":s>=a-r/2&&(u="right"),Cot(u,i,t,e)&&(u="center"),u}function JO(i,t,e){const n=e.yAlign||t.yAlign||Rot(i,e);return{xAlign:e.xAlign||t.xAlign||Dot(i,t,e,n),yAlign:n}}function Iot(i,t){let{x:e,width:n}=i;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function Not(i,t,e){let{y:n,height:s}=i;return t==="top"?n+=e:t==="bottom"?n-=s+e:n-=s/2,n}function $O(i,t,e,n){const{caretSize:s,caretPadding:r,cornerRadius:a}=i,{xAlign:o,yAlign:c}=e,u=s+r,{topLeft:d,topRight:g,bottomLeft:y,bottomRight:_}=_g(a);let b=Iot(t,o);const M=Not(t,c,u);return c==="center"?o==="left"?b+=u:o==="right"&&(b-=u):o==="left"?b-=Math.max(d,y)+s:o==="right"&&(b+=Math.max(g,_)+s),{x:oa(b,0,n.width-t.width),y:oa(M,0,n.height-t.height)}}function Xb(i,t,e){const n=_l(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-n.right:i.x+n.left}function tP(i){return Wc([],qu(i))}function Oot(i,t,e){return Lp(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function eP(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const Bz={beforeTitle:Gu,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:Gu,beforeBody:Gu,beforeLabel:Gu,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return gi(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Gu,afterBody:Gu,beforeFooter:Gu,footer:Gu,afterFooter:Gu};function lo(i,t,e,n){const s=i[t].call(e,n);return typeof s>"u"?Bz[t].call(e,n):s}class nP extends yh{static positioners=ky;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&e.options.animation&&n.animations,r=new bz(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Oot(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,s=lo(n,"beforeTitle",this,t),r=lo(n,"title",this,t),a=lo(n,"afterTitle",this,t);let o=[];return o=Wc(o,qu(s)),o=Wc(o,qu(r)),o=Wc(o,qu(a)),o}getBeforeBody(t,e){return tP(lo(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,s=[];return Ai(t,r=>{const a={before:[],lines:[],after:[]},o=eP(n,r);Wc(a.before,qu(lo(o,"beforeLabel",this,r))),Wc(a.lines,lo(o,"label",this,r)),Wc(a.after,qu(lo(o,"afterLabel",this,r))),s.push(a)}),s}getAfterBody(t,e){return tP(lo(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,s=lo(n,"beforeFooter",this,t),r=lo(n,"footer",this,t),a=lo(n,"afterFooter",this,t);let o=[];return o=Wc(o,qu(s)),o=Wc(o,qu(r)),o=Wc(o,qu(a)),o}_createItems(t){const e=this._active,n=this.chart.data,s=[],r=[],a=[];let o=[],c,u;for(c=0,u=e.length;c<u;++c)o.push(wot(this.chart,e[c]));return t.filter&&(o=o.filter((d,g,y)=>t.filter(d,g,y,n))),t.itemSort&&(o=o.sort((d,g)=>t.itemSort(d,g,n))),Ai(o,d=>{const g=eP(t.callbacks,d);s.push(lo(g,"labelColor",this,d)),r.push(lo(g,"labelPointStyle",this,d)),a.push(lo(g,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=o,o}update(t,e){const n=this.options.setContext(this.getContext()),s=this._active;let r,a=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const o=ky[n.position].call(this,s,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const c=this._size=QO(this,n),u=Object.assign({},o,c),d=JO(this.chart,n,u),g=$O(n,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,r={opacity:1,x:g.x,y:g.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,s){const r=this.getCaretPosition(t,n,s);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:s,yAlign:r}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:g}=_g(o),{x:y,y:_}=t,{width:b,height:M}=e;let S,E,R,N,P,k;return r==="center"?(P=_+M/2,s==="left"?(S=y,E=S-a,N=P+a,k=P-a):(S=y+b,E=S+a,N=P-a,k=P+a),R=S):(s==="left"?E=y+Math.max(c,d)+a:s==="right"?E=y+b-Math.max(u,g)-a:E=this.caretX,r==="top"?(N=_,P=N-a,S=E-a,R=E+a):(N=_+M,P=N+a,S=E+a,R=E-a),k=N),{x1:S,x2:E,x3:R,y1:N,y2:P,y3:k}}drawTitle(t,e,n){const s=this.title,r=s.length;let a,o,c;if(r){const u=xg(n.rtl,this.x,this.width);for(t.x=Xb(this,n.titleAlign,n),e.textAlign=u.textAlign(n.titleAlign),e.textBaseline="middle",a=la(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=a.string,c=0;c<r;++c)e.fillText(s[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+o,c+1===r&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,s,r){const a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:c,boxWidth:u}=r,d=la(r.bodyFont),g=Xb(this,"left",r),y=s.x(g),_=c<d.lineHeight?(d.lineHeight-c)/2:0,b=e.y+_;if(r.usePointStyle){const M={radius:Math.min(u,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},S=s.leftForLtr(y,u)+u/2,E=b+c/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Uw(t,M,S,E),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Uw(t,M,S,E)}else{t.lineWidth=ii(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const M=s.leftForLtr(y,u),S=s.leftForLtr(s.xPlus(y,1),u-2),E=_g(a.borderRadius);Object.values(E).some(R=>R!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,L1(t,{x:M,y:b,w:u,h:c,radius:E}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),L1(t,{x:S,y:b+1,w:u-2,h:c-2,radius:E}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(M,b,u,c),t.strokeRect(M,b,u,c),t.fillStyle=a.backgroundColor,t.fillRect(S,b+1,u-2,c-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:s}=this,{bodySpacing:r,bodyAlign:a,displayColors:o,boxHeight:c,boxWidth:u,boxPadding:d}=n,g=la(n.bodyFont);let y=g.lineHeight,_=0;const b=xg(n.rtl,this.x,this.width),M=function(U){e.fillText(U,b.x(t.x+_),t.y+y/2),t.y+=y+r},S=b.textAlign(a);let E,R,N,P,k,z,L;for(e.textAlign=a,e.textBaseline="middle",e.font=g.string,t.x=Xb(this,S,n),e.fillStyle=n.bodyColor,Ai(this.beforeBody,M),_=o&&S!=="right"?a==="center"?u/2+d:u+2+d:0,P=0,z=s.length;P<z;++P){for(E=s[P],R=this.labelTextColors[P],e.fillStyle=R,Ai(E.before,M),N=E.lines,o&&N.length&&(this._drawColorBox(e,t,P,b,n),y=Math.max(g.lineHeight,c)),k=0,L=N.length;k<L;++k)M(N[k]),y=g.lineHeight;Ai(E.after,M)}_=0,y=g.lineHeight,Ai(this.afterBody,M),t.y-=r}drawFooter(t,e,n){const s=this.footer,r=s.length;let a,o;if(r){const c=xg(n.rtl,this.x,this.width);for(t.x=Xb(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=c.textAlign(n.footerAlign),e.textBaseline="middle",a=la(n.footerFont),e.fillStyle=n.footerColor,e.font=a.string,o=0;o<r;++o)e.fillText(s[o],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+n.footerSpacing}}drawBackground(t,e,n,s){const{xAlign:r,yAlign:a}=this,{x:o,y:c}=t,{width:u,height:d}=n,{topLeft:g,topRight:y,bottomLeft:_,bottomRight:b}=_g(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(o+g,c),a==="top"&&this.drawCaret(t,e,n,s),e.lineTo(o+u-y,c),e.quadraticCurveTo(o+u,c,o+u,c+y),a==="center"&&r==="right"&&this.drawCaret(t,e,n,s),e.lineTo(o+u,c+d-b),e.quadraticCurveTo(o+u,c+d,o+u-b,c+d),a==="bottom"&&this.drawCaret(t,e,n,s),e.lineTo(o+_,c+d),e.quadraticCurveTo(o,c+d,o,c+d-_),a==="center"&&r==="left"&&this.drawCaret(t,e,n,s),e.lineTo(o,c+g),e.quadraticCurveTo(o,c,o+g,c),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,s=n&&n.x,r=n&&n.y;if(s||r){const a=ky[t.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=QO(this,t),c=Object.assign({},a,this._size),u=JO(e,t,c),d=$O(t,c,u,e);(s._to!==d.x||r._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=_l(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,s,e),vz(t,e.textDirection),r.y+=a.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),_z(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,s=t.map(({datasetIndex:o,index:c})=>{const u=this.chart.getDatasetMeta(o);if(!u)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:u.data[c],index:c}}),r=!O1(n,s),a=this._positionChanged(s,e);(r||a)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],a=this._getActiveElements(t,r,e,n),o=this._positionChanged(a,t),c=e||!O1(a,r)||o;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),c}_getActiveElements(t,e,n,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:n,caretY:s,options:r}=this,a=ky[r.position].call(this,t,e);return a!==!1&&(n!==a.x||s!==a.y)}}var Pot={id:"tooltip",_element:nP,positioners:ky,afterInit(i,t,e){e&&(i.tooltip=new nP({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Bz},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Uot=(i,t,e,n)=>(typeof t=="string"?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Lot(i,t,e,n){const s=i.indexOf(t);if(s===-1)return Uot(i,t,e,n);const r=i.lastIndexOf(t);return s!==r?e:s}const kot=(i,t)=>i===null?null:oa(Math.round(i),0,t);function iP(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class Bot extends n0{static id="category";static defaults={ticks:{callback:iP}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:s,label:r}of e)n[s]===r&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(gi(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:Lot(n,t,Un(e,t),this._addedLabels),kot(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),e||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,s=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=t;a<=e;a++)s.push({value:a});return s}getLabelForValue(t){return iP.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function zot(i,t){const e=[],{bounds:s,step:r,min:a,max:o,precision:c,count:u,maxTicks:d,maxDigits:g,includeBounds:y}=i,_=r||1,b=d-1,{min:M,max:S}=t,E=!gi(a),R=!gi(o),N=!gi(u),P=(S-M)/(g+1);let k=sO((S-M)/b/_)*_,z,L,U,D;if(k<1e-14&&!E&&!R)return[{value:M},{value:S}];D=Math.ceil(S/k)-Math.floor(M/k),D>b&&(k=sO(D*k/b/_)*_),gi(c)||(z=Math.pow(10,c),k=Math.ceil(k*z)/z),s==="ticks"?(L=Math.floor(M/k)*k,U=Math.ceil(S/k)*k):(L=M,U=S),E&&R&&r&&Qit((o-a)/r,k/1e3)?(D=Math.round(Math.min((o-a)/k,d)),k=(o-a)/D,L=a,U=o):N?(L=E?a:L,U=R?o:U,D=u-1,k=(U-L)/D):(D=(U-L)/k,rv(D,Math.round(D),k/1e3)?D=Math.round(D):D=Math.ceil(D));const O=Math.max(rO(k),rO(L));z=Math.pow(10,gi(c)?O:c),L=Math.round(L*z)/z,U=Math.round(U*z)/z;let F=0;for(E&&(y&&L!==a?(e.push({value:a}),L<a&&F++,rv(Math.round((L+F*k)*z)/z,a,sP(a,P,i))&&F++):L<a&&F++);F<D;++F){const H=Math.round((L+F*k)*z)/z;if(R&&H>o)break;e.push({value:H})}return R&&y&&U!==o?e.length&&rv(e[e.length-1].value,o,sP(o,P,i))?e[e.length-1].value=o:e.push({value:o}):(!R||U===o)&&e.push({value:U}),e}function sP(i,t,{horizontal:e,minRotation:n}){const s=$u(n),r=(e?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+i).length;return Math.min(t/r,a)}class Fot extends n0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return gi(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this;const a=c=>s=e?s:c,o=c=>r=n?r:c;if(t){const c=su(s),u=su(r);c<0&&u<0?o(0):c>0&&u>0&&a(0)}if(s===r){let c=r===0?1:Math.abs(r*.05);o(r+c),t||a(s-c)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,a=zot(s,r);return t.bounds==="ticks"&&Jit(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const s=(n-e)/Math.max(t.length-1,1)/2;e-=s,n+=s}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return VR(t,this.chart.options.locale,this.options.ticks.format)}}class Vot extends Fot{static id="linear";static defaults={ticks:{callback:uz.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=vl(t)?t:0,this.max=vl(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=$u(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const JE={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},po=Object.keys(JE);function rP(i,t){return i-t}function aP(i,t){if(gi(t))return null;const e=i._adapter,{parser:n,round:s,isoWeekday:r}=i._parseOpts;let a=t;return typeof n=="function"&&(a=n(a)),vl(a)||(a=typeof n=="string"?e.parse(a,n):e.parse(a)),a===null?null:(s&&(a=s==="week"&&(Vv(r)||r===!0)?e.startOf(a,"isoWeek",r):e.startOf(a,s)),+a)}function oP(i,t,e,n){const s=po.length;for(let r=po.indexOf(i);r<s-1;++r){const a=JE[po[r]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(o*a.size))<=n)return po[r]}return po[s-1]}function Hot(i,t,e,n,s){for(let r=po.length-1;r>=po.indexOf(e);r--){const a=po[r];if(JE[a].common&&i._adapter.diff(s,n,a)>=t-1)return a}return po[e?po.indexOf(e):0]}function Got(i){for(let t=po.indexOf(i)+1,e=po.length;t<e;++t)if(JE[po[t]].common)return po[t]}function lP(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:n,hi:s}=BR(e,t),r=e[n]>=t?e[n]:e[s];i[r]=!0}}function jot(i,t,e,n){const s=i._adapter,r=+s.startOf(t[0].value,n),a=t[t.length-1].value;let o,c;for(o=r;o<=a;o=+s.add(o,1,n))c=e[o],c>=0&&(t[c].major=!0);return t}function cP(i,t,e){const n=[],s={},r=t.length;let a,o;for(a=0;a<r;++a)o=t[a],s[o]=a,n.push({value:o,major:!1});return r===0||!e?n:jot(i,n,s,e)}class uP extends n0{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),s=this._adapter=new Frt._date(t.adapters.date);s.init(e),sv(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:aP(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:s,max:r,minDefined:a,maxDefined:o}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!o&&!isNaN(u.max)&&(r=Math.max(r,u.max))}(!a||!o)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=vl(s)&&!isNaN(s)?s:+e.startOf(Date.now(),n),r=vl(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,a=this.max,o=ist(s,r,a);return this._unit=e.unit||(n.autoSkip?oP(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):Hot(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Got(this._unit),this.initOffsets(s),t.reverse&&o.reverse(),cP(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,n=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=oa(e,0,a),n=oa(n,0,a),this._offsets={start:e,end:n,factor:1/(e+1+n)}}_generate(){const t=this._adapter,e=this.min,n=this.max,s=this.options,r=s.time,a=r.unit||oP(r.minUnit,e,n,this._getLabelCapacity(e)),o=Un(s.ticks.stepSize,1),c=a==="week"?r.isoWeekday:!1,u=Vv(c)||c===!0,d={};let g=e,y,_;if(u&&(g=+t.startOf(g,"isoWeek",c)),g=+t.startOf(g,u?"day":a),t.diff(n,e,a)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+a);const b=s.ticks.source==="data"&&this.getDataTimestamps();for(y=g,_=0;y<n;y=+t.add(y,o,a),_++)lP(d,y,b);return(y===n||s.bounds==="ticks"||_===1)&&lP(d,y,b),Object.keys(d).sort(rP).map(M=>+M)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,r=this._unit,a=e||s[r];return this._adapter.format(t,a)}_tickFormatFunction(t,e,n,s){const r=this.options,a=r.ticks.callback;if(a)return Yi(a,[t,e,n],this);const o=r.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&o[c],g=u&&o[u],y=n[e],_=u&&g&&y&&y.major;return this._adapter.format(t,s||(_?g:d))}generateTickLabels(t){let e,n,s;for(e=0,n=t.length;e<n;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,s=$u(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),a=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*a,h:n*a+o*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,s=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,cP(this,[t],this._majorUnit),s),a=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],e,n;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,n=s.length;e<n;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const s=this.getLabels();for(e=0,n=s.length;e<n;++e)t.push(aP(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return oz(t.sort(rP))}}function Yb(i,t,e){let n=0,s=i.length-1,r,a,o,c;e?(t>=i[n].pos&&t<=i[s].pos&&({lo:n,hi:s}=sp(i,"pos",t)),{pos:r,time:o}=i[n],{pos:a,time:c}=i[s]):(t>=i[n].time&&t<=i[s].time&&({lo:n,hi:s}=sp(i,"time",t)),{time:r,pos:o}=i[n],{time:a,pos:c}=i[s]);const u=a-r;return u?o+(c-o)*(t-r)/u:o}class clt extends uP{static id="timeseries";static defaults=uP.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Yb(e,this.min),this._tableRange=Yb(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,s=[],r=[];let a,o,c,u,d;for(a=0,o=t.length;a<o;++a)u=t[a],u>=e&&u<=n&&s.push(u);if(s.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(a=0,o=s.length;a<o;++a)d=s[a+1],c=s[a-1],u=s[a],Math.round((d+c)/2)!==u&&r.push({time:u,pos:a/(o-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Yb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Yb(this._table,n*this._tableRange+this._minPos,!0)}}const zz="label";function hP(i,t){typeof i=="function"?i(t):i&&(i.current=t)}function Wot(i,t){const e=i.options;e&&t&&Object.assign(e,t)}function Fz(i,t){i.labels=t}function Vz(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zz;const n=[];i.datasets=t.map(s=>{const r=i.datasets.find(a=>a[e]===s[e]);return!r||!s.data||n.includes(r)?{...s}:(n.push(r),Object.assign(r,s),r)})}function qot(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zz;const e={labels:[],datasets:[]};return Fz(e,i.labels),Vz(e,i.datasets,t),e}function Xot(i,t){const{height:e=150,width:n=300,redraw:s=!1,datasetIdKey:r,type:a,data:o,options:c,plugins:u=[],fallbackContent:d,updateMode:g,...y}=i,_=bt.useRef(null),b=bt.useRef(null),M=()=>{_.current&&(b.current=new QE(_.current,{type:a,data:qot(o,r),options:c&&{...c},plugins:u}),hP(t,b.current))},S=()=>{hP(t,null),b.current&&(b.current.destroy(),b.current=null)};return bt.useEffect(()=>{!s&&b.current&&c&&Wot(b.current,c)},[s,c]),bt.useEffect(()=>{!s&&b.current&&Fz(b.current.config.data,o.labels)},[s,o.labels]),bt.useEffect(()=>{!s&&b.current&&o.datasets&&Vz(b.current.config.data,o.datasets,r)},[s,o.datasets]),bt.useEffect(()=>{b.current&&(s?(S(),setTimeout(M)):b.current.update(g))},[s,c,o.labels,o.datasets,g]),bt.useEffect(()=>{b.current&&(S(),setTimeout(M))},[a]),bt.useEffect(()=>(M(),()=>S()),[]),Fw.createElement("canvas",{ref:_,role:"img",height:e,width:n,...y},d)}const Yot=bt.forwardRef(Xot);function QR(i,t){return QE.register(t),bt.forwardRef((e,n)=>Fw.createElement(Yot,{...e,ref:n,type:i}))}const DA=QR("line",zrt),Kot=QR("bar",Lrt),Zot=QR("doughnut",Brt);QE.register(Bot,Vot,fot,hot,vot,Aot,Pot,Tot,eot);const Qot=()=>{const[i,t]=bt.useState("overview"),e={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Weight (kg)",data:[72,71.5,71,70.5,70,69.5],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4}]},n={labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Calories Burned",data:[320,450,280,380,520,350,400],backgroundColor:["rgba(16, 185, 129, 0.8)","rgba(16, 185, 129, 0.8)","rgba(16, 185, 129, 0.8)","rgba(16, 185, 129, 0.8)","rgba(16, 185, 129, 0.8)","rgba(16, 185, 129, 0.8)","rgba(16, 185, 129, 0.8)"],borderColor:["rgb(16, 185, 129)","rgb(16, 185, 129)","rgb(16, 185, 129)","rgb(16, 185, 129)","rgb(16, 185, 129)","rgb(16, 185, 129)","rgb(16, 185, 129)"],borderWidth:1}]},s={labels:["Muscle Mass","Body Fat","Water","Bone"],datasets:[{data:[32.1,18.2,45.3,4.4],backgroundColor:["rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(59, 130, 246, 0.8)","rgba(156, 163, 175, 0.8)"],borderColor:["rgb(16, 185, 129)","rgb(239, 68, 68)","rgb(59, 130, 246)","rgb(156, 163, 175)"],borderWidth:2}]},r={labels:["6 AM","9 AM","12 PM","3 PM","6 PM","9 PM"],datasets:[{label:"Heart Rate (bpm)",data:[65,75,68,72,70,62],borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4}]},a={responsive:!0,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0}}},o={responsive:!0,plugins:{legend:{position:"bottom"}}},c=[{id:"overview",name:"Overview",icon:"📊"},{id:"weight",name:"Weight",icon:"⚖️"},{id:"body",name:"Body Composition",icon:"🏃"},{id:"heart",name:"Heart Rate",icon:"❤️"},{id:"log",name:"Log Data",icon:"📝"}],u=[{id:"weight",name:"Weight",value:"70.5 kg",change:"-0.5 kg",trend:"down"},{id:"body_fat",name:"Body Fat",value:"18.2%",change:"-1.2%",trend:"down"},{id:"muscle_mass",name:"Muscle Mass",value:"32.1 kg",change:"+0.8 kg",trend:"up"},{id:"heart_rate",name:"Resting HR",value:"65 bpm",change:"-3 bpm",trend:"down"},{id:"water",name:"Water %",value:"45.3%",change:"+0.5%",trend:"up"},{id:"bmi",name:"BMI",value:"22.4",change:"-0.3",trend:"down"}];return W.jsx(Kg,{children:W.jsxs("div",{className:"space-y-8",children:[W.jsxs("div",{className:"text-center",children:[W.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Health Analytics"}),W.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track and analyze your health metrics over time"})]}),W.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:W.jsx("nav",{className:"-mb-px flex space-x-8",children:c.map(d=>W.jsxs("button",{onClick:()=>t(d.id),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${i===d.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[W.jsx("span",{className:"mr-2",children:d.icon}),d.name]},d.id))})}),i==="overview"&&W.jsxs("div",{className:"space-y-6",children:[W.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(d=>W.jsx("div",{className:"card",children:W.jsxs("div",{className:"flex items-center justify-between",children:[W.jsxs("div",{children:[W.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:d.name}),W.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.value})]}),W.jsxs("div",{className:"text-right",children:[W.jsx("p",{className:`text-sm font-medium ${d.trend==="up"?"text-success-600 dark:text-success-400":"text-danger-600 dark:text-danger-400"}`,children:d.change}),W.jsx("div",{className:`w-2 h-2 rounded-full ${d.trend==="up"?"bg-success-500":"bg-danger-500"}`})]})]})},d.id))}),W.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Weight Trend"}),W.jsx("div",{className:"h-64",children:W.jsx(DA,{data:e,options:a})})]}),W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Weekly Calories"}),W.jsx("div",{className:"h-64",children:W.jsx(Kot,{data:n,options:a})})]})]})]}),i==="weight"&&W.jsxs("div",{className:"space-y-6",children:[W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Weight Progress"}),W.jsx("div",{className:"h-96",children:W.jsx(DA,{data:e,options:a})})]}),W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Weight Goals"}),W.jsxs("div",{className:"space-y-4",children:[W.jsxs("div",{className:"flex justify-between items-center",children:[W.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Current Weight"}),W.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"70.5 kg"})]}),W.jsxs("div",{className:"flex justify-between items-center",children:[W.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Target Weight"}),W.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"68.0 kg"})]}),W.jsxs("div",{className:"flex justify-between items-center",children:[W.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining"}),W.jsx("span",{className:"font-medium text-primary-600 dark:text-primary-400",children:"2.5 kg"})]})]})]}),W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Log New Weight"}),W.jsxs("form",{className:"space-y-4",children:[W.jsxs("div",{children:[W.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weight (kg)"}),W.jsx("input",{type:"number",step:"0.1",className:"input-field",placeholder:"Enter your weight"})]}),W.jsxs("div",{children:[W.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (optional)"}),W.jsx("textarea",{className:"input-field",rows:3,placeholder:"Add any notes..."})]}),W.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Log Weight"})]})]})]})]}),i==="body"&&W.jsx("div",{className:"space-y-6",children:W.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Body Composition"}),W.jsx("div",{className:"h-80",children:W.jsx(Zot,{data:s,options:o})})]}),W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Composition Details"}),W.jsxs("div",{className:"space-y-4",children:[W.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[W.jsxs("div",{className:"flex items-center space-x-3",children:[W.jsx("div",{className:"w-4 h-4 bg-success-500 rounded"}),W.jsx("span",{className:"text-gray-900 dark:text-white",children:"Muscle Mass"})]}),W.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"32.1 kg"})]}),W.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[W.jsxs("div",{className:"flex items-center space-x-3",children:[W.jsx("div",{className:"w-4 h-4 bg-danger-500 rounded"}),W.jsx("span",{className:"text-gray-900 dark:text-white",children:"Body Fat"})]}),W.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"18.2%"})]}),W.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[W.jsxs("div",{className:"flex items-center space-x-3",children:[W.jsx("div",{className:"w-4 h-4 bg-primary-500 rounded"}),W.jsx("span",{className:"text-gray-900 dark:text-white",children:"Water"})]}),W.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"45.3%"})]}),W.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[W.jsxs("div",{className:"flex items-center space-x-3",children:[W.jsx("div",{className:"w-4 h-4 bg-gray-500 rounded"}),W.jsx("span",{className:"text-gray-900 dark:text-white",children:"Bone"})]}),W.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"4.4%"})]})]})]})]})}),i==="heart"&&W.jsxs("div",{className:"space-y-6",children:[W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Heart Rate Trend"}),W.jsx("div",{className:"h-96",children:W.jsx(DA,{data:r,options:a})})]}),W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[W.jsxs("div",{className:"card text-center",children:[W.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Resting HR"}),W.jsx("p",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400",children:"65 bpm"}),W.jsx("p",{className:"text-sm text-success-600 dark:text-success-400 mt-1",children:"↓ 3 bpm"})]}),W.jsxs("div",{className:"card text-center",children:[W.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Max HR"}),W.jsx("p",{className:"text-3xl font-bold text-danger-600 dark:text-danger-400",children:"185 bpm"}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"220 - age"})]}),W.jsxs("div",{className:"card text-center",children:[W.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Target Zone"}),W.jsx("p",{className:"text-3xl font-bold text-warning-600 dark:text-warning-400",children:"130-150"}),W.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"bpm"})]})]})]}),i==="log"&&W.jsx("div",{className:"space-y-6",children:W.jsxs("div",{className:"card",children:[W.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Log Health Data"}),W.jsxs("form",{className:"space-y-6",children:[W.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[W.jsxs("div",{children:[W.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Metric Type"}),W.jsxs("select",{className:"input-field",children:[W.jsx("option",{value:"weight",children:"Weight"}),W.jsx("option",{value:"body_fat",children:"Body Fat %"}),W.jsx("option",{value:"muscle_mass",children:"Muscle Mass"}),W.jsx("option",{value:"heart_rate",children:"Heart Rate"}),W.jsx("option",{value:"blood_pressure",children:"Blood Pressure"}),W.jsx("option",{value:"sleep",children:"Sleep Hours"}),W.jsx("option",{value:"water_intake",children:"Water Intake"})]})]}),W.jsxs("div",{children:[W.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Value"}),W.jsx("input",{type:"number",step:"0.1",className:"input-field",placeholder:"Enter value"})]})]}),W.jsxs("div",{children:[W.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),W.jsx("input",{type:"date",className:"input-field",defaultValue:new Date().toISOString().split("T")[0]})]}),W.jsxs("div",{children:[W.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (optional)"}),W.jsx("textarea",{className:"input-field",rows:3,placeholder:"Add any notes about this measurement..."})]}),W.jsx("button",{type:"submit",className:"btn-primary",children:"Log Data"})]})]})})]})})};function Jot(){return W.jsx(Eq,{children:W.jsx(bq,{children:W.jsx(KV,{children:W.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:W.jsxs(AV,{children:[W.jsx(ff,{path:"/",element:W.jsx(Mq,{})}),W.jsx(ff,{path:"/login",element:W.jsx(Aq,{})}),W.jsx(ff,{path:"/register",element:W.jsx(wq,{})}),W.jsx(ff,{path:"/dashboard",element:W.jsx(rM,{children:W.jsx(Rq,{})})}),W.jsx(ff,{path:"/workout",element:W.jsx(rM,{children:W.jsx(yit,{})})}),W.jsx(ff,{path:"/health-log",element:W.jsx(rM,{children:W.jsx(Qot,{})})}),W.jsx(ff,{path:"*",element:W.jsx(bP,{to:"/",replace:!0})})]})})})})})}LF.createRoot(document.getElementById("root")).render(W.jsx(bt.StrictMode,{children:W.jsx(Jot,{})}));
